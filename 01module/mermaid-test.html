<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8"/>
    <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
    <title>Mermaid Diagram Test</title>
    <!-- CSS -->
    <link href="/assets/css/main.css" rel="stylesheet"/>
    <!-- Mermaid specific styles -->
    <style>
        .mermaid-diagram {
            margin: 2rem auto;
            padding: 2rem;
            background: #fff;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: visible;
        }
        
        /* Force text to be black */
        .mermaid text,
        .mermaid tspan {
            fill: #000000 !important;
            stroke: none !important;
        }
        
        /* Node styling */
        .mermaid .node rect {
            fill: #E8F4FF !important;
            stroke: #5B9BD5 !important;
        }
        
        /* Paths */
        .mermaid path.path {
            stroke: #333333 !important;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Mermaid Diagram Test Page</h1>
        <p>This page tests that Mermaid diagrams are rendering correctly.</p>
        
        <h2>Test 1: Simple Flowchart</h2>
        <div class="mermaid-diagram">
            <div class="mermaid">
flowchart LR
    Start[Start Planning] --> Goals[Define Goals]
    Goals --> Audience[Know Your Audience]
    Audience --> Structure[Plan Structure]
    Structure --> Design[Create Design]
    Design --> Build[Build Website]
    Build --> Launch[Launch Site]
            </div>
        </div>
        
        <h2>Test 2: Complex Flowchart</h2>
        <div class="mermaid-diagram">
            <div class="mermaid">
flowchart TD
    Home[Home Page]
    Home --> About[About]
    Home --> Menu[Menu] 
    Home --> Reserve[Reservations]
    Home --> Contact[Contact]
    Home --> Blog[Blog]
    About --> Story[Our Story]
    About --> Team[Team]
    Menu --> Breakfast[Breakfast]
    Menu --> Lunch[Lunch]
    Menu --> Dinner[Dinner]
            </div>
        </div>
        
        <h2>Test 3: User Flow with Decision</h2>
        <div class="mermaid-diagram">
            <div class="mermaid">
flowchart LR
    Home[Home Page] --> Menu[Menu Page]
    Menu --> Category[Menu Category]
    Category --> Item[Menu Item]
    Item --> Decision["Reserve?"]
    Decision -->|Yes| Reserve[Reservation]
    Decision -->|No| Browse[Continue]
    Reserve --> Form[Booking Form]
    Form --> Confirm[Confirmation]
    Browse --> Category
            </div>
        </div>
        
        <h2>Test 4: Project Documentation Tree</h2>
        <div class="mermaid-diagram">
            <div class="mermaid">
flowchart TD
    A[Project Documentation]
    A --> B[Planning Documents]
    A --> C[Development Documents]
    A --> D[Client Documents]
    B --> B1[Project Brief]
    B --> B2[Sitemap]
    B --> B3[Wireframes]
    B --> B4[Content Plan]
    C --> C1[WordPress Architecture]
    C --> C2[Theme Notes]
    C --> C3[Plugin Docs]
    C --> C4[Custom Code Docs]
    D --> D1[User Manual]
    D --> D2[Maintenance Guide]
    D --> D3[Content Guidelines]
    D --> D4[Training Materials]
            </div>
        </div>
        
        <h2>Test 5: Site Structure</h2>
        <div class="mermaid-diagram">
            <div class="mermaid">
flowchart TD
    A[Home]
    A --> B[About]
    A --> C[Menus]
    A --> D[Events]
    A --> E[Reservations]
    A --> F[Gallery]
    A --> G[Contact]
    A --> H[Blog]
    B --> B1[Our Story]
    B --> B2[Our Farm]
    B --> B3[The Team]
    C --> C1[Breakfast]
    C --> C2[Lunch]
    C --> C3[Dinner]
    C --> C4[Drinks]
    C --> C5[Private Dining]
    D --> D1[Calendar]
    D --> D2[Special Events]
    D --> D3[Classes]
    H --> H1[Recipes]
    H --> H2[Farm Updates]
    H --> H3[News]
            </div>
        </div>
        
        <p>If all diagrams above are visible with proper text and styling, then the Mermaid integration is working correctly!</p>
    </div>
    
    <!-- Load and initialize Mermaid -->
    
    <script>
        // Initialize Mermaid
        mermaid.initialize({ 
            startOnLoad: true,
            theme: 'default',
            flowchart: {
                htmlLabels: true,
                curve: 'linear'
            }
        });
        
        // Force text to be black - run multiple times to ensure it works
        function fixText() {
            document.querySelectorAll('.mermaid text, .mermaid tspan').forEach(function(el) {
                el.style.fill = '#000000';
                el.style.stroke = 'none';
                el.setAttribute('fill', '#000000');
                el.setAttribute('stroke', 'none');
            });
        }
        
        // Run fix multiple times
        window.addEventListener('load', function() {
            fixText();
            setTimeout(fixText, 500);
            setTimeout(fixText, 1000);
            setTimeout(fixText, 2000);
            
            // Keep fixing every 500ms
            setInterval(fixText, 500);
        });
    </script>

<!-- Universal Mermaid Fix -->
<script src="/assets/js/mermaid-universal-fix.js"></script>
</body>
</html>
