<!DOCTYPE html>

<html lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width, initial-scale=1.0" name="viewport"/>
<meta content="ie=edge" http-equiv="X-UA-Compatible"/>
<!-- SEO Meta Tags -->
<title>Connecting to MySQL with PHP - Database Connection Guide - PHP WordPress Course</title>
<meta content="Master MySQL database connections in PHP, connection configuration, pooling, character encoding, SSL setup, and best practices" name="description"/>
<meta content="PHP, MySQL, database connection, PDO, MySQLi, connection pooling, SSL, configuration" name="keywords"/>
<meta content="PHP WordPress Course" name="author"/>
<!-- Favicon -->
<link href="/favicon.png" rel="icon" type="image/png"/>
<link href="/favicon.png" rel="apple-touch-icon"/>
<!-- CSS -->
<link href="/assets/css/main.css" rel="stylesheet"/><link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/><link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
</head>
<body>
<!-- Skip to main content -->
<a class="sr-only" href="#main-content">Skip to main content</a>
<div class="page-wrapper">
<!-- Header -->
<header class="site-header" role="banner">
<div class="header-container">
<div class="site-branding">
<a class="site-logo" href="/">
<h1 class="site-title">PHP WordPress Development</h1>
</a>
</div>
<nav aria-label="Main navigation" class="main-navigation" role="navigation">
<button aria-expanded="false" aria-label="Toggle navigation" class="mobile-menu-btn">
<span></span>
<span></span>
<span></span>
</button>
<div class="nav-menu">
<ul class="nav-list">
<li class="nav-item"><a class="nav-link" href="/">Home</a></li>
<li class="nav-item dropdown">
<button aria-haspopup="true" class="nav-link dropdown-toggle active">Modules</button>
<div class="dropdown-menu">
<a class="dropdown-item" href="/module1.html">Module 1: Web Fundamentals</a>
<a class="dropdown-item" href="/module2.html">Module 2: PHP Fundamentals</a>
<a class="dropdown-item active" href="/module3.html">Module 3: MySQL Database</a>
<a class="dropdown-item" href="/module4.html">Module 4: WordPress &amp; Docker</a>
<a class="dropdown-item" href="/module5.html">Module 5: Theme Development</a>
<a class="dropdown-item" href="/module6.html">Module 6: Plugin Development</a>
<a class="dropdown-item" href="/module7.html">Module 7: Advanced WordPress</a>
<a class="dropdown-item" href="/module8.html">Module 8: Deployment</a>
<a class="dropdown-item" href="/module9.html">Module 9: Final Project</a>
</div>
</li>
<li class="nav-item"><a class="nav-link" href="/resources.html">Resources</a></li>
<li class="nav-item"><a class="nav-link" href="/about.html">About</a></li>
</ul>
</div>
</nav>
<div class="search-container">
<div class="search-input-wrapper">
<svg class="search-icon" fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
<path clip-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" fill-rule="evenodd"></path>
</svg>
<input aria-label="Search" class="search-input" placeholder="Search lessons..." type="search"/>
</div>
<div class="search-results"></div>
</div>
</div>
</header>
<!-- Progress Bar -->
<div class="progress-container">
<div class="progress-header">
<h2 class="progress-title">Course Progress</h2>
<span class="progress-text">Loading...</span>
</div>
<div class="progress-bar">
<div class="progress-bar-fill">
<span class="progress-bar-text"></span>
</div>
</div>
</div>
<!-- Breadcrumb -->
<nav aria-label="Breadcrumb" class="breadcrumb container">
<ol class="breadcrumb-list">
<li class="breadcrumb-item">
<a href="/">Home</a>
<span class="breadcrumb-separator">/</span>
</li>
<li class="breadcrumb-item">
<a href="/module3.html">Module 3</a>
<span class="breadcrumb-separator">/</span>
</li>
<li class="breadcrumb-item">
<span aria-current="page">Connecting to MySQL</span>
</li>
</ol>
</nav>
<!-- Main Content -->
<main class="main-content" id="main-content" role="main">
<div class="container">
<div class="content-with-sidebar">
<!-- Sidebar -->
<aside class="sidebar">

<div class="sidebar-nav">
<h3 class="sidebar-title">Module 3: MySQL Database</h3>
<div class="sidebar-section">
<h4 class="sidebar-section-title">Session 5</h4>
<ul class="sidebar-menu">
<li class="active"><a class="sidebar-link active" href="/03module/connecting_mysql.html">Connecting to MySQL</a></li>
<li><a class="sidebar-link" href="/03module/executing_queries.html">Executing Queries</a></li>
<li><a class="sidebar-link" href="/03module/prepared_statements.html">Prepared Statements</a></li>
<li><a class="sidebar-link" href="/03module/crud_operations.html">CRUD Operations</a></li>
<li><a class="sidebar-link" href="/03module/result_sets.html">Handling Results</a></li>
<li><a class="sidebar-link" href="/03module/error_debugging.html">Error Handling</a></li>
<li><a class="sidebar-link" href="/03module/php_mysql_integration.html">Project: PHP-MySQL App</a></li>
</ul>
</div>
<div class="sidebar-section">
<h4 class="sidebar-section-title">Quick Links</h4>
<ul class="sidebar-menu">
<li><a class="sidebar-link" href="/module3.html">Module Overview</a></li>
<li><a class="sidebar-link prev-session" href="/03module/sql_joins.html">‚Üê Prev: Session 4: Advanced SQL</a></li>
<li><a class="sidebar-link next-session" href="/04module/intro_to_wordpress.html">Next: Module 4: WordPress ‚Üí</a></li>
<li><a class="sidebar-link" href="/module2.html">‚Üê Previous Module</a></li>
<li><a class="sidebar-link" href="/module4.html">Next Module ‚Üí</a></li>
<li><a class="sidebar-link" href="/resources.html">Resources</a></li>
</ul>
</div>
</div></aside>
<!-- Main Lesson Content -->
<article class="lesson-content">
<header class="lesson-header">
<h1>Connecting to MySQL with PHP</h1>
<div class="lesson-meta">
<div class="lesson-meta-item">
<svg fill="currentColor" height="20" width="20">
<path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"></path>
</svg>
<span>Duration: 75 minutes</span>
</div>
<div class="lesson-meta-item">
<svg fill="currentColor" height="20" width="20">
<path d="M12 14l9-5-9-5-9 5 9 5z"></path>
</svg>
<span>Lesson 1 of 8</span>
</div>
</div>
</header>
<!-- Learning Objectives -->
<div class="lesson-objectives">
<h2>Learning Objectives</h2>
<ul>
<li>Understand MySQL connection fundamentals</li>
<li>Configure database connections properly</li>
<li>Implement connection pooling strategies</li>
<li>Set up character encoding correctly</li>
<li>Configure SSL/TLS secure connections</li>
<li>Handle connection errors gracefully</li>
<li>Manage persistent vs non-persistent connections</li>
<li>Apply connection best practices</li>
</ul>
</div>
<!-- Lesson Body -->
<div class="lesson-body">
<section>
<h2>Understanding Database Connections</h2>
<p class="lead">Establishing a reliable connection to MySQL is the foundation of any PHP database application. Let's master every aspect! üîå</p>
<canvas height="450" id="connectionCanvas" width="600"></canvas>
<script>
                                    const ctx = document.getElementById('connectionCanvas').getContext('2d');
                                    
                                    // Title
                                    ctx.font = 'bold 18px Arial';
                                    ctx.fillStyle = '#1f2937';
                                    ctx.fillText('MySQL Connection Architecture', 170, 30);
                                    
                                    // PHP Application
                                    ctx.fillStyle = '#dbeafe';
                                    ctx.fillRect(50, 60, 200, 100);
                                    ctx.strokeStyle = '#2563eb';
                                    ctx.lineWidth = 2;
                                    ctx.strokeRect(50, 60, 200, 100);
                                    
                                    ctx.fillStyle = '#1e40af';
                                    ctx.font = 'bold 14px Arial';
                                    ctx.fillText('PHP Application', 105, 85);
                                    
                                    ctx.font = '11px Arial';
                                    ctx.fillStyle = '#374151';
                                    ctx.fillText('‚Ä¢ Connection Request', 60, 105);
                                    ctx.fillText('‚Ä¢ Credentials', 60, 120);
                                    ctx.fillText('‚Ä¢ Configuration', 60, 135);
                                    ctx.fillText('‚Ä¢ Error Handling', 60, 150);
                                    
                                    // Connection Methods
                                    ctx.fillStyle = '#dcfce7';
                                    ctx.fillRect(50, 190, 95, 80);
                                    ctx.strokeStyle = '#16a34a';
                                    ctx.strokeRect(50, 190, 95, 80);
                                    
                                    ctx.fillStyle = '#166534';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('PDO', 85, 210);
                                    ctx.font = '10px Arial';
                                    ctx.fillStyle = '#374151';
                                    ctx.fillText('Multiple DBs', 60, 230);
                                    ctx.fillText('OOP only', 60, 245);
                                    ctx.fillText('Prepared', 60, 260);
                                    
                                    ctx.fillStyle = '#fef3c7';
                                    ctx.fillRect(155, 190, 95, 80);
                                    ctx.strokeStyle = '#ca8a04';
                                    ctx.strokeRect(155, 190, 95, 80);
                                    
                                    ctx.fillStyle = '#92400e';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('MySQLi', 180, 210);
                                    ctx.font = '10px Arial';
                                    ctx.fillStyle = '#374151';
                                    ctx.fillText('MySQL only', 165, 230);
                                    ctx.fillText('OOP/Proc', 165, 245);
                                    ctx.fillText('Async', 165, 260);
                                    
                                    // MySQL Server
                                    ctx.fillStyle = '#e9d5ff';
                                    ctx.fillRect(350, 60, 200, 100);
                                    ctx.strokeStyle = '#7c3aed';
                                    ctx.strokeRect(350, 60, 200, 100);
                                    
                                    ctx.fillStyle = '#6b21a8';
                                    ctx.font = 'bold 14px Arial';
                                    ctx.fillText('MySQL Server', 410, 85);
                                    
                                    ctx.font = '11px Arial';
                                    ctx.fillStyle = '#374151';
                                    ctx.fillText('‚Ä¢ Authentication', 360, 105);
                                    ctx.fillText('‚Ä¢ Authorization', 360, 120);
                                    ctx.fillText('‚Ä¢ Session Management', 360, 135);
                                    ctx.fillText('‚Ä¢ Resource Allocation', 360, 150);
                                    
                                    // Connection Flow
                                    ctx.strokeStyle = '#6b7280';
                                    ctx.lineWidth = 2;
                                    ctx.setLineDash([5, 5]);
                                    
                                    // From PHP to methods
                                    ctx.beginPath();
                                    ctx.moveTo(150, 160);
                                    ctx.lineTo(97, 190);
                                    ctx.stroke();
                                    
                                    ctx.beginPath();
                                    ctx.moveTo(150, 160);
                                    ctx.lineTo(202, 190);
                                    ctx.stroke();
                                    
                                    // From methods to MySQL
                                    ctx.beginPath();
                                    ctx.moveTo(250, 230);
                                    ctx.lineTo(350, 110);
                                    ctx.stroke();
                                    
                                    ctx.setLineDash([]);
                                    
                                    // Connection States
                                    ctx.fillStyle = '#f3f4f6';
                                    ctx.fillRect(50, 300, 500, 120);
                                    ctx.strokeStyle = '#6b7280';
                                    ctx.strokeRect(50, 300, 500, 120);
                                    
                                    ctx.fillStyle = '#1f2937';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('Connection Lifecycle', 240, 320);
                                    
                                    // States
                                    const states = [
                                        { text: '1. Initialize', x: 70, y: 350, color: '#dbeafe' },
                                        { text: '2. Connect', x: 170, y: 350, color: '#dcfce7' },
                                        { text: '3. Authenticate', x: 270, y: 350, color: '#fef3c7' },
                                        { text: '4. Execute', x: 380, y: 350, color: '#e0f2fe' },
                                        { text: '5. Close', x: 480, y: 350, color: '#fee2e2' }
                                    ];
                                    
                                    states.forEach(state => {
                                        ctx.fillStyle = state.color;
                                        ctx.fillRect(state.x - 15, state.y - 20, 60, 30);
                                        ctx.strokeStyle = '#6b7280';
                                        ctx.strokeRect(state.x - 15, state.y - 20, 60, 30);
                                        
                                        ctx.fillStyle = '#1f2937';
                                        ctx.font = '9px Arial';
                                        ctx.fillText(state.text, state.x - 10, state.y - 2);
                                    });
                                    
                                    // Arrows between states
                                    ctx.strokeStyle = '#6b7280';
                                    ctx.lineWidth = 1;
                                    for (let i = 0; i < states.length - 1; i++) {
                                        ctx.beginPath();
                                        ctx.moveTo(states[i].x + 45, states[i].y - 5);
                                        ctx.lineTo(states[i+1].x - 15, states[i].y - 5);
                                        ctx.stroke();
                                    }
                                    
                                    // Notes
                                    ctx.fillStyle = '#6b7280';
                                    ctx.font = '10px Arial';
                                    ctx.fillText('‚Ä¢ Persistent connections reuse steps 1-3', 70, 390);
                                    ctx.fillText('‚Ä¢ Connection pooling manages multiple connections', 70, 405);
                                    ctx.fillText('‚Ä¢ SSL/TLS adds encryption layer', 330, 390);
                                    ctx.fillText('‚Ä¢ Timeout settings prevent hanging', 330, 405);
                                </script>
<div class="alert alert-info">
<div class="alert-icon">üí°</div>
<div class="alert-content">
<div class="alert-title">Connection Fundamentals</div>
<div class="alert-message">
<ul>
<li><strong>Connection String:</strong> Specifies server, database, credentials</li>
<li><strong>Character Encoding:</strong> Must match database encoding (utf8mb4 recommended)</li>
<li><strong>Timeout Settings:</strong> Prevent hanging connections</li>
<li><strong>Resource Management:</strong> Connections consume server resources</li>
<li><strong>Security:</strong> Never hardcode credentials, use environment variables</li>
<li><strong>Error Handling:</strong> Always handle connection failures gracefully</li>
</ul>
</div>
</div>
</div>
</section>
<section>
<h2>Basic Connection Methods</h2>
<div class="mermaid">
                                    graph TB
                                        APP[PHP Application] --&gt; METHOD{Connection Method}
                                        
                                        METHOD --&gt; PDO[PDO Connection]
                                        METHOD --&gt; MYSQLI[MySQLi Connection]
                                        METHOD --&gt; DEPRECATED[mysql_* Deprecated]
                                        
                                        PDO --&gt; CONFIG1[DSN Configuration]
                                        MYSQLI --&gt; CONFIG2[Host Configuration]
                                        
                                        CONFIG1 --&gt; CONNECT1[Establish Connection]
                                        CONFIG2 --&gt; CONNECT2[Establish Connection]
                                        
                                        CONNECT1 --&gt; DB[(MySQL Database)]
                                        CONNECT2 --&gt; DB
                                        
                                        style APP fill:#dbeafe
                                        style PDO fill:#dcfce7
                                        style MYSQLI fill:#fef3c7
                                        style DEPRECATED fill:#fee2e2
                                        style DB fill:#e9d5ff
                                </div>
<div class="real_world_example">
<h3>Connection Implementation Examples</h3>
<pre><code class="language-php">&lt;?php
// ========================================
// METHOD 1: PDO CONNECTION
// ========================================

/**
 * PDO Connection with comprehensive configuration
 */
class PDOConnection {
    private $pdo;
    private $config;
    
    public function __construct() {
        $this-&gt;loadConfiguration();
        $this-&gt;connect();
    }
    
    /**
     * Load configuration from environment or config file
     */
    private function loadConfiguration() {
        // Best practice: Use environment variables
        $this-&gt;config = [
            'driver'   =&gt; $_ENV['DB_DRIVER'] ?? 'mysql',
            'host'     =&gt; $_ENV['DB_HOST'] ?? 'localhost',
            'port'     =&gt; $_ENV['DB_PORT'] ?? 3306,
            'database' =&gt; $_ENV['DB_DATABASE'] ?? 'testdb',
            'username' =&gt; $_ENV['DB_USERNAME'] ?? 'root',
            'password' =&gt; $_ENV['DB_PASSWORD'] ?? '',
            'charset'  =&gt; $_ENV['DB_CHARSET'] ?? 'utf8mb4',
            'collation' =&gt; $_ENV['DB_COLLATION'] ?? 'utf8mb4_unicode_ci',
            'options'  =&gt; [
                // Error handling
                PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION,
                
                // Fetch mode
                PDO::ATTR_DEFAULT_FETCH_MODE =&gt; PDO::FETCH_ASSOC,
                
                // Prepare emulation (false for real prepared statements)
                PDO::ATTR_EMULATE_PREPARES =&gt; false,
                
                // Connection timeout (seconds)
                PDO::ATTR_TIMEOUT =&gt; 5,
                
                // Persistent connection
                PDO::ATTR_PERSISTENT =&gt; false,
                
                // MySQL specific: Use buffered queries
                PDO::MYSQL_ATTR_USE_BUFFERED_QUERY =&gt; true,
                
                // MySQL specific: Enable compression
                PDO::MYSQL_ATTR_COMPRESS =&gt; true,
                
                // MySQL specific: Init command
                PDO::MYSQL_ATTR_INIT_COMMAND =&gt; "SET NAMES utf8mb4 COLLATE utf8mb4_unicode_ci"
            ]
        ];
    }
    
    /**
     * Establish database connection
     */
    private function connect() {
        try {
            // Build DSN (Data Source Name)
            $dsn = $this-&gt;buildDSN();
            
            // Create PDO instance
            $this-&gt;pdo = new PDO(
                $dsn,
                $this-&gt;config['username'],
                $this-&gt;config['password'],
                $this-&gt;config['options']
            );
            
            // Additional configuration after connection
            $this-&gt;postConnectionSetup();
            
            echo "‚úÖ PDO Connection established successfully\n";
            
        } catch (PDOException $e) {
            $this-&gt;handleConnectionError($e);
        }
    }
    
    /**
     * Build DSN string
     */
    private function buildDSN() {
        $dsn = "{$this-&gt;config['driver']}:";
        
        // Add connection parameters
        $params = [];
        
        // Unix socket or TCP/IP
        if (isset($this-&gt;config['unix_socket'])) {
            $params[] = "unix_socket={$this-&gt;config['unix_socket']}";
        } else {
            $params[] = "host={$this-&gt;config['host']}";
            $params[] = "port={$this-&gt;config['port']}";
        }
        
        $params[] = "dbname={$this-&gt;config['database']}";
        $params[] = "charset={$this-&gt;config['charset']}";
        
        $dsn .= implode(';', $params);
        
        return $dsn;
    }
    
    /**
     * Post-connection configuration
     */
    private function postConnectionSetup() {
        // Set timezone
        $this-&gt;pdo-&gt;exec("SET time_zone = '+00:00'");
        
        // Set SQL mode for strict data handling
        $this-&gt;pdo-&gt;exec("SET sql_mode = 'STRICT_ALL_TABLES,ERROR_FOR_DIVISION_BY_ZERO,NO_AUTO_CREATE_USER'");
        
        // Set transaction isolation level
        $this-&gt;pdo-&gt;exec("SET SESSION TRANSACTION ISOLATION LEVEL READ COMMITTED");
    }
    
    /**
     * Handle connection errors
     */
    private function handleConnectionError(PDOException $e) {
        $errorInfo = [
            'message' =&gt; $e-&gt;getMessage(),
            'code' =&gt; $e-&gt;getCode(),
            'timestamp' =&gt; date('Y-m-d H:i:s'),
            'host' =&gt; $this-&gt;config['host'],
            'database' =&gt; $this-&gt;config['database']
        ];
        
        // Log error (don't expose passwords)
        error_log("PDO Connection Error: " . json_encode($errorInfo));
        
        // User-friendly error message
        if ($_ENV['APP_ENV'] === 'production') {
            die("Database connection error. Please try again later.");
        } else {
            die("Connection failed: " . $e-&gt;getMessage());
        }
    }
    
    /**
     * Get PDO instance
     */
    public function getConnection() {
        return $this-&gt;pdo;
    }
    
    /**
     * Test connection
     */
    public function testConnection() {
        try {
            $stmt = $this-&gt;pdo-&gt;query('SELECT 1');
            return $stmt !== false;
        } catch (PDOException $e) {
            return false;
        }
    }
    
    /**
     * Get connection info
     */
    public function getConnectionInfo() {
        return [
            'server_info' =&gt; $this-&gt;pdo-&gt;getAttribute(PDO::ATTR_SERVER_INFO),
            'server_version' =&gt; $this-&gt;pdo-&gt;getAttribute(PDO::ATTR_SERVER_VERSION),
            'client_version' =&gt; $this-&gt;pdo-&gt;getAttribute(PDO::ATTR_CLIENT_VERSION),
            'connection_status' =&gt; $this-&gt;pdo-&gt;getAttribute(PDO::ATTR_CONNECTION_STATUS),
            'driver_name' =&gt; $this-&gt;pdo-&gt;getAttribute(PDO::ATTR_DRIVER_NAME),
            'persistent' =&gt; $this-&gt;pdo-&gt;getAttribute(PDO::ATTR_PERSISTENT)
        ];
    }
}

// ========================================
// METHOD 2: MYSQLI CONNECTION
// ========================================

/**
 * MySQLi Connection with comprehensive configuration
 */
class MySQLiConnection {
    private $mysqli;
    private $config;
    
    public function __construct() {
        $this-&gt;loadConfiguration();
        $this-&gt;connect();
    }
    
    /**
     * Load configuration
     */
    private function loadConfiguration() {
        $this-&gt;config = [
            'host' =&gt; $_ENV['DB_HOST'] ?? 'localhost',
            'username' =&gt; $_ENV['DB_USERNAME'] ?? 'root',
            'password' =&gt; $_ENV['DB_PASSWORD'] ?? '',
            'database' =&gt; $_ENV['DB_DATABASE'] ?? 'testdb',
            'port' =&gt; $_ENV['DB_PORT'] ?? 3306,
            'socket' =&gt; $_ENV['DB_SOCKET'] ?? null,
            'charset' =&gt; $_ENV['DB_CHARSET'] ?? 'utf8mb4'
        ];
    }
    
    /**
     * Establish MySQLi connection
     */
    private function connect() {
        // Enable error reporting
        mysqli_report(MYSQLI_REPORT_ERROR | MYSQLI_REPORT_STRICT);
        
        try {
            // Initialize MySQLi
            $this-&gt;mysqli = new mysqli();
            
            // Set connection timeout
            $this-&gt;mysqli-&gt;options(MYSQLI_OPT_CONNECT_TIMEOUT, 5);
            
            // Enable compression
            $this-&gt;mysqli-&gt;options(MYSQLI_CLIENT_COMPRESS, true);
            
            // SSL Configuration (if needed)
            if (isset($this-&gt;config['ssl'])) {
                $this-&gt;configureSLL();
            }
            
            // Establish connection
            $this-&gt;mysqli-&gt;real_connect(
                $this-&gt;config['host'],
                $this-&gt;config['username'],
                $this-&gt;config['password'],
                $this-&gt;config['database'],
                $this-&gt;config['port'],
                $this-&gt;config['socket']
            );
            
            // Set charset
            $this-&gt;mysqli-&gt;set_charset($this-&gt;config['charset']);
            
            // Post-connection setup
            $this-&gt;postConnectionSetup();
            
            echo "‚úÖ MySQLi Connection established successfully\n";
            
        } catch (mysqli_sql_exception $e) {
            $this-&gt;handleConnectionError($e);
        }
    }
    
    /**
     * Configure SSL
     */
    private function configureSLL() {
        $this-&gt;mysqli-&gt;ssl_set(
            $this-&gt;config['ssl']['key'] ?? null,
            $this-&gt;config['ssl']['cert'] ?? null,
            $this-&gt;config['ssl']['ca'] ?? null,
            $this-&gt;config['ssl']['capath'] ?? null,
            $this-&gt;config['ssl']['cipher'] ?? null
        );
    }
    
    /**
     * Post-connection setup
     */
    private function postConnectionSetup() {
        // Set timezone
        $this-&gt;mysqli-&gt;query("SET time_zone = '+00:00'");
        
        // Set SQL mode
        $this-&gt;mysqli-&gt;query("SET sql_mode = 'STRICT_ALL_TABLES'");
        
        // Set names (backup for charset)
        $this-&gt;mysqli-&gt;query("SET NAMES '{$this-&gt;config['charset']}'");
    }
    
    /**
     * Handle connection errors
     */
    private function handleConnectionError($e) {
        $errorInfo = [
            'message' =&gt; $e-&gt;getMessage(),
            'code' =&gt; $e-&gt;getCode(),
            'timestamp' =&gt; date('Y-m-d H:i:s')
        ];
        
        error_log("MySQLi Connection Error: " . json_encode($errorInfo));
        
        if ($_ENV['APP_ENV'] === 'production') {
            die("Database connection error. Please try again later.");
        } else {
            die("Connection failed: " . $e-&gt;getMessage());
        }
    }
    
    /**
     * Get MySQLi instance
     */
    public function getConnection() {
        return $this-&gt;mysqli;
    }
    
    /**
     * Get connection stats
     */
    public function getStats() {
        return [
            'host_info' =&gt; $this-&gt;mysqli-&gt;host_info,
            'protocol_version' =&gt; $this-&gt;mysqli-&gt;protocol_version,
            'server_info' =&gt; $this-&gt;mysqli-&gt;server_info,
            'server_version' =&gt; $this-&gt;mysqli-&gt;server_version,
            'client_info' =&gt; $this-&gt;mysqli-&gt;client_info,
            'client_version' =&gt; $this-&gt;mysqli-&gt;client_version,
            'thread_id' =&gt; $this-&gt;mysqli-&gt;thread_id,
            'warning_count' =&gt; $this-&gt;mysqli-&gt;warning_count,
            'stat' =&gt; $this-&gt;mysqli-&gt;stat()
        ];
    }
}

// ========================================
// CONNECTION MANAGER (Singleton Pattern)
// ========================================

class ConnectionManager {
    private static $instances = [];
    private $connections = [];
    
    private function __construct() {}
    
    /**
     * Get singleton instance
     */
    public static function getInstance() {
        $class = static::class;
        if (!isset(self::$instances[$class])) {
            self::$instances[$class] = new static();
        }
        return self::$instances[$class];
    }
    
    /**
     * Get or create connection
     */
    public function getConnection($name = 'default', $type = 'pdo') {
        $key = "{$name}_{$type}";
        
        if (!isset($this-&gt;connections[$key])) {
            $this-&gt;connections[$key] = $this-&gt;createConnection($type);
        }
        
        return $this-&gt;connections[$key];
    }
    
    /**
     * Create new connection
     */
    private function createConnection($type) {
        switch ($type) {
            case 'pdo':
                $conn = new PDOConnection();
                return $conn-&gt;getConnection();
                
            case 'mysqli':
                $conn = new MySQLiConnection();
                return $conn-&gt;getConnection();
                
            default:
                throw new Exception("Unknown connection type: {$type}");
        }
    }
    
    /**
     * Close all connections
     */
    public function closeAll() {
        foreach ($this-&gt;connections as $key =&gt; $connection) {
            if ($connection instanceof PDO) {
                $connection = null;
            } elseif ($connection instanceof mysqli) {
                $connection-&gt;close();
            }
            unset($this-&gt;connections[$key]);
        }
    }
    
    // Prevent cloning
    private function __clone() {}
    
    // Prevent unserialization
    public function __wakeup() {
        throw new Exception("Cannot unserialize singleton");
    }
}

// ========================================
// USAGE EXAMPLES
// ========================================

// Example 1: Direct PDO connection
$pdoConn = new PDOConnection();
$pdo = $pdoConn-&gt;getConnection();
$stmt = $pdo-&gt;query("SELECT VERSION()");
echo "MySQL Version: " . $stmt-&gt;fetchColumn() . "\n";

// Example 2: Direct MySQLi connection
$mysqliConn = new MySQLiConnection();
$mysqli = $mysqliConn-&gt;getConnection();
$result = $mysqli-&gt;query("SELECT VERSION()");
$row = $result-&gt;fetch_row();
echo "MySQL Version: " . $row[0] . "\n";

// Example 3: Using Connection Manager
$manager = ConnectionManager::getInstance();
$pdo = $manager-&gt;getConnection('default', 'pdo');
$mysqli = $manager-&gt;getConnection('default', 'mysqli');

// Example 4: Testing connections
$pdoConn = new PDOConnection();
if ($pdoConn-&gt;testConnection()) {
    echo "PDO connection is active\n";
    print_r($pdoConn-&gt;getConnectionInfo());
}

$mysqliConn = new MySQLiConnection();
echo "MySQLi connection stats:\n";
print_r($mysqliConn-&gt;getStats());</code></pre>
</div>
</section>
<section>
<h2>Connection Configuration Best Practices</h2>
<div class="best_practice">
<h3>Environment-Based Configuration</h3>
<pre><code class="language-php">&lt;?php
// ========================================
// CONFIGURATION MANAGEMENT
// ========================================

/**
 * Database configuration class
 */
class DatabaseConfig {
    private $environments = [];
    private $currentEnv;
    
    public function __construct() {
        $this-&gt;currentEnv = $_ENV['APP_ENV'] ?? 'development';
        $this-&gt;loadConfigurations();
    }
    
    /**
     * Load environment-specific configurations
     */
    private function loadConfigurations() {
        // Development configuration
        $this-&gt;environments['development'] = [
            'driver' =&gt; 'mysql',
            'host' =&gt; 'localhost',
            'port' =&gt; 3306,
            'database' =&gt; 'dev_database',
            'username' =&gt; 'dev_user',
            'password' =&gt; 'dev_password',
            'charset' =&gt; 'utf8mb4',
            'collation' =&gt; 'utf8mb4_unicode_ci',
            'prefix' =&gt; 'dev_',
            'strict' =&gt; true,
            'engine' =&gt; 'InnoDB',
            'options' =&gt; [
                PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION,
                PDO::ATTR_DEFAULT_FETCH_MODE =&gt; PDO::FETCH_ASSOC,
                PDO::ATTR_EMULATE_PREPARES =&gt; false,
                PDO::ATTR_PERSISTENT =&gt; false
            ]
        ];
        
        // Testing configuration
        $this-&gt;environments['testing'] = [
            'driver' =&gt; 'mysql',
            'host' =&gt; 'localhost',
            'port' =&gt; 3307,
            'database' =&gt; 'test_database',
            'username' =&gt; 'test_user',
            'password' =&gt; 'test_password',
            'charset' =&gt; 'utf8mb4',
            'collation' =&gt; 'utf8mb4_unicode_ci',
            'prefix' =&gt; 'test_',
            'strict' =&gt; true,
            'engine' =&gt; 'InnoDB',
            'options' =&gt; [
                PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION,
                PDO::ATTR_DEFAULT_FETCH_MODE =&gt; PDO::FETCH_ASSOC
            ]
        ];
        
        // Production configuration
        $this-&gt;environments['production'] = [
            'driver' =&gt; 'mysql',
            'host' =&gt; $_ENV['DB_HOST'],
            'port' =&gt; $_ENV['DB_PORT'] ?? 3306,
            'database' =&gt; $_ENV['DB_DATABASE'],
            'username' =&gt; $_ENV['DB_USERNAME'],
            'password' =&gt; $_ENV['DB_PASSWORD'],
            'charset' =&gt; 'utf8mb4',
            'collation' =&gt; 'utf8mb4_unicode_ci',
            'prefix' =&gt; '',
            'strict' =&gt; true,
            'engine' =&gt; 'InnoDB',
            'options' =&gt; [
                PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION,
                PDO::ATTR_DEFAULT_FETCH_MODE =&gt; PDO::FETCH_ASSOC,
                PDO::ATTR_EMULATE_PREPARES =&gt; false,
                PDO::ATTR_PERSISTENT =&gt; true,
                PDO::ATTR_TIMEOUT =&gt; 10,
                PDO::MYSQL_ATTR_USE_BUFFERED_QUERY =&gt; true,
                PDO::MYSQL_ATTR_COMPRESS =&gt; true
            ],
            'ssl' =&gt; [
                'ca' =&gt; '/path/to/ca-cert.pem',
                'verify' =&gt; true
            ]
        ];
    }
    
    /**
     * Get current environment configuration
     */
    public function getConfig() {
        if (!isset($this-&gt;environments[$this-&gt;currentEnv])) {
            throw new Exception("Unknown environment: {$this-&gt;currentEnv}");
        }
        
        return $this-&gt;environments[$this-&gt;currentEnv];
    }
    
    /**
     * Get specific configuration value
     */
    public function get($key, $default = null) {
        $config = $this-&gt;getConfig();
        return $config[$key] ?? $default;
    }
}

// ========================================
// CONNECTION POOLING
// ========================================

/**
 * Connection pool implementation
 */
class ConnectionPool {
    private $pool = [];
    private $maxConnections = 10;
    private $minConnections = 2;
    private $currentConnections = 0;
    private $config;
    
    public function __construct(DatabaseConfig $config) {
        $this-&gt;config = $config-&gt;getConfig();
        $this-&gt;initializePool();
    }
    
    /**
     * Initialize connection pool
     */
    private function initializePool() {
        // Create minimum connections
        for ($i = 0; $i &lt; $this-&gt;minConnections; $i++) {
            $this-&gt;createConnection();
        }
    }
    
    /**
     * Create new connection
     */
    private function createConnection() {
        if ($this-&gt;currentConnections &gt;= $this-&gt;maxConnections) {
            throw new Exception("Maximum connection limit reached");
        }
        
        $dsn = "mysql:host={$this-&gt;config['host']};port={$this-&gt;config['port']};dbname={$this-&gt;config['database']};charset={$this-&gt;config['charset']}";
        
        $pdo = new PDO(
            $dsn,
            $this-&gt;config['username'],
            $this-&gt;config['password'],
            $this-&gt;config['options']
        );
        
        $connectionId = uniqid('conn_');
        
        $this-&gt;pool[$connectionId] = [
            'connection' =&gt; $pdo,
            'in_use' =&gt; false,
            'created_at' =&gt; time(),
            'last_used' =&gt; time()
        ];
        
        $this-&gt;currentConnections++;
        
        return $connectionId;
    }
    
    /**
     * Get available connection
     */
    public function getConnection() {
        // Find available connection
        foreach ($this-&gt;pool as $id =&gt; &amp;$conn) {
            if (!$conn['in_use']) {
                $conn['in_use'] = true;
                $conn['last_used'] = time();
                return $conn['connection'];
            }
        }
        
        // Create new connection if under limit
        if ($this-&gt;currentConnections &lt; $this-&gt;maxConnections) {
            $id = $this-&gt;createConnection();
            $this-&gt;pool[$id]['in_use'] = true;
            return $this-&gt;pool[$id]['connection'];
        }
        
        // Wait for available connection
        throw new Exception("No available connections in pool");
    }
    
    /**
     * Release connection back to pool
     */
    public function releaseConnection(PDO $connection) {
        foreach ($this-&gt;pool as &amp;$conn) {
            if ($conn['connection'] === $connection) {
                $conn['in_use'] = false;
                $conn['last_used'] = time();
                return true;
            }
        }
        
        return false;
    }
    
    /**
     * Clean up idle connections
     */
    public function cleanup($maxIdleTime = 300) {
        $now = time();
        
        foreach ($this-&gt;pool as $id =&gt; $conn) {
            if (!$conn['in_use'] &amp;&amp; 
                ($now - $conn['last_used']) &gt; $maxIdleTime &amp;&amp;
                $this-&gt;currentConnections &gt; $this-&gt;minConnections) {
                
                unset($this-&gt;pool[$id]);
                $this-&gt;currentConnections--;
            }
        }
    }
    
    /**
     * Get pool statistics
     */
    public function getStats() {
        $inUse = 0;
        $idle = 0;
        
        foreach ($this-&gt;pool as $conn) {
            if ($conn['in_use']) {
                $inUse++;
            } else {
                $idle++;
            }
        }
        
        return [
            'total' =&gt; $this-&gt;currentConnections,
            'in_use' =&gt; $inUse,
            'idle' =&gt; $idle,
            'max' =&gt; $this-&gt;maxConnections,
            'min' =&gt; $this-&gt;minConnections
        ];
    }
}

// ========================================
// SECURE CONNECTION WITH SSL
// ========================================

/**
 * Secure SSL/TLS connection
 */
class SecureConnection {
    private $pdo;
    
    public function __construct() {
        $this-&gt;connectWithSSL();
    }
    
    /**
     * Establish SSL connection
     */
    private function connectWithSSL() {
        $config = [
            'host' =&gt; $_ENV['DB_HOST'],
            'dbname' =&gt; $_ENV['DB_DATABASE'],
            'username' =&gt; $_ENV['DB_USERNAME'],
            'password' =&gt; $_ENV['DB_PASSWORD'],
            'charset' =&gt; 'utf8mb4'
        ];
        
        $dsn = "mysql:host={$config['host']};dbname={$config['dbname']};charset={$config['charset']}";
        
        $options = [
            PDO::ATTR_ERRMODE =&gt; PDO::ERRMODE_EXCEPTION,
            PDO::ATTR_DEFAULT_FETCH_MODE =&gt; PDO::FETCH_ASSOC,
            PDO::MYSQL_ATTR_SSL_CA =&gt; '/path/to/ca-cert.pem',
            PDO::MYSQL_ATTR_SSL_VERIFY_SERVER_CERT =&gt; true,
            PDO::MYSQL_ATTR_SSL_KEY =&gt; '/path/to/client-key.pem',
            PDO::MYSQL_ATTR_SSL_CERT =&gt; '/path/to/client-cert.pem'
        ];
        
        try {
            $this-&gt;pdo = new PDO($dsn, $config['username'], $config['password'], $options);
            
            // Verify SSL is active
            $stmt = $this-&gt;pdo-&gt;query("SHOW STATUS LIKE 'Ssl_cipher'");
            $result = $stmt-&gt;fetch();
            
            if (empty($result['Value'])) {
                throw new Exception("SSL connection not established");
            }
            
            echo "‚úÖ Secure SSL connection established\n";
            echo "SSL Cipher: " . $result['Value'] . "\n";
            
        } catch (PDOException $e) {
            die("SSL Connection failed: " . $e-&gt;getMessage());
        }
    }
    
    public function getConnection() {
        return $this-&gt;pdo;
    }
}

// ========================================
// USAGE EXAMPLES
// ========================================

// Example: Using configuration manager
$config = new DatabaseConfig();
$dbConfig = $config-&gt;getConfig();

// Example: Connection pooling
$pool = new ConnectionPool($config);
$conn = $pool-&gt;getConnection();
// Use connection...
$pool-&gt;releaseConnection($conn);
echo "Pool stats: ";
print_r($pool-&gt;getStats());

// Example: SSL connection
$secureConn = new SecureConnection();
$pdo = $secureConn-&gt;getConnection();</code></pre>
</div>
</section>
<!-- Practice Exercise -->
<section>
<h2>Practice Exercise</h2>
<div class="alert alert-success">
<div class="alert-icon">üíª</div>
<div class="alert-content">
<div class="alert-title">Connection Challenges</div>
<div class="alert-message">
                                            Complete these connection tasks:
                                            <ol>
<li>Create a connection using environment variables</li>
<li>Implement connection retry logic with exponential backoff</li>
<li>Set up a connection pool with 5 connections</li>
<li>Configure SSL/TLS secure connection</li>
<li>Create a multi-database connection manager</li>
<li>Implement connection health checks</li>
<li>Set up read/write connection splitting</li>
<li>Build connection monitoring system</li>
</ol>
</div>
</div>
</div>
</section>
<!-- Resources -->
<section class="resources">
<h2>Additional Resources</h2>
<ul>
<li><a href="https://www.php.net/manual/en/pdo.connections.php" target="_blank">PDO Connections</a></li>
<li><a href="https://www.php.net/manual/en/mysqli.quickstart.connections.php" target="_blank">MySQLi Connections</a></li>
<li><a href="https://dev.mysql.com/doc/refman/8.0/en/encrypted-connections.html" target="_blank">MySQL SSL/TLS</a></li>
<li><a href="https://www.php.net/manual/en/pdo.setattribute.php" target="_blank">PDO Attributes</a></li>
</ul>
</section>
</div>
<!-- Lesson Navigation -->
<div class="lesson-navigation">
<a class="lesson-nav-button prev" href="/03module/error_debugging.html">
<svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
<path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"></path>
</svg>
<span>
<small>Previous Module</small><br/>
                                    Error Handling
                                </span>
</a>
<button class="complete-lesson-btn">
                                Mark as Complete
                            </button>
<a class="lesson-nav-button next" href="/03module/pdo_vs_mysqli.html">
<span>
<small>Next</small><br/>
                                    PDO vs MySQLi
                                </span>
<svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
<path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"></path>
</svg>
</a>
</div>
</article>
</div>
</div>
</main>
<!-- Footer -->
<footer class="site-footer" role="contentinfo">
<div class="footer-container">
<div class="footer-content">
<div class="footer-section footer-about">
<h3>PHP WordPress Development</h3>
<p>Complete Web Development Course</p>
</div>
<div class="footer-section">
<h4>Quick Links</h4>
<ul class="footer-links">
<li><a href="/">Home</a></li>
<li><a href="/module3.html">Module 3</a></li>
<li><a href="/resources.html">Resources</a></li>
</ul>
</div>
<div class="footer-section">
<h4>Support</h4>
<ul class="footer-links">
<li><a href="/help.html">Help Center</a></li>
<li><a href="/faq.html">FAQ</a></li>
<li><a href="/contact.html">Contact</a></li>
</ul>
</div>
</div>
<div class="footer-bottom">
<div class="footer-bottom-content">
<p class="copyright">¬© 2025 PHP WordPress Development Course</p>
<nav class="footer-bottom-links">
<a href="/privacy.html">Privacy</a>
<span class="separator">|</span>
<a href="/terms.html">Terms</a>
</nav>
</div>
</div>
</div>
</footer>
</div>
<!-- Back to Top -->
<button aria-label="Back to top" class="back-to-top" id="back-to-top">
<svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="24">
<path d="M12 19V5M12 5l-7 7M12 5l7 7"></path>
</svg>
</button>
<!-- JavaScript -->
<script src="/assets/js/navigation.js"></script>
<script src="/assets/js/site-config.js"></script>
<script src="/assets/js/sidebar-toggle.js"></script>
<!-- Universal Mermaid Fix (Enhanced) -->

<!-- Universal Mermaid Fix -->
<script src="/assets/js/mermaid-universal-fix.js"></script>
</body>
</html>