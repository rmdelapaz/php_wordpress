<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <!-- SEO Meta Tags -->
  <title>Executing SQL Queries through PHP - Query Execution Guide - PHP WordPress Course</title>
  <meta content="Master SQL query execution in PHP, query building, batch operations, transactions, and optimization techniques" name="description"/>
  <meta content="PHP, MySQL, SQL queries, query execution, batch queries, transactions, query optimization" name="keywords"/>
  <meta content="PHP WordPress Course" name="author"/>
  <link href="/assets/css/main.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
  <!-- Favicon -->
  <link href="/favicon.png" rel="icon" type="image/png"/>
  <link href="/favicon.png" rel="apple-touch-icon"/>
  <!-- CSS -->
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
 </head>
 <body>
  <!-- Skip to main content -->
  <a class="sr-only" href="#main-content">Skip to main content</a>
  <div class="page-wrapper">
   <!-- Header -->
   <header class="site-header" role="banner">
    <div class="header-container">
     <div class="site-branding">
      <a class="site-logo" href="/">
       <h1 class="site-title">PHP WordPress Development</h1>
      </a>
     </div>
     <nav aria-label="Main navigation" class="main-navigation" role="navigation">
      <button aria-expanded="false" aria-label="Toggle navigation" class="mobile-menu-btn">
       <span>
       </span>
       <span>
       </span>
       <span>
       </span>
      </button>
      <div class="nav-menu">
       <ul class="nav-list">
        <li class="nav-item">
         <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item dropdown">
         <button aria-haspopup="true" class="nav-link dropdown-toggle active">Modules</button>
         <div class="dropdown-menu">
          <a class="dropdown-item" href="/module1.html">Module 1: Web Fundamentals</a>
          <a class="dropdown-item" href="/module2.html">Module 2: PHP Fundamentals</a>
          <a class="dropdown-item active" href="/module3.html">Module 3: MySQL Database</a>
          <a class="dropdown-item" href="/module4.html">Module 4: WordPress &amp; Docker</a>
          <a class="dropdown-item" href="/module5.html">Module 5: Theme Development</a>
          <a class="dropdown-item" href="/module6.html">Module 6: Plugin Development</a>
          <a class="dropdown-item" href="/module7.html">Module 7: Advanced WordPress</a>
          <a class="dropdown-item" href="/module8.html">Module 8: Deployment</a>
          <a class="dropdown-item" href="/module9.html">Module 9: Final Project</a>
         </div>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/resources.html">Resources</a>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/about.html">About</a>
        </li>
       </ul>
      </div>
     </nav>
     <div class="search-container">
      <div class="search-input-wrapper">
       <svg class="search-icon" fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
        <path clip-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" fill-rule="evenodd">
        </path>
       </svg>
       <input aria-label="Search" class="search-input" placeholder="Search lessons..." type="search"/>
      </div>
      <div class="search-results">
      </div>
     </div>
    </div>
   </header>
   <!-- Progress Bar -->
   <div class="progress-container">
    <div class="progress-header">
     <h2 class="progress-title">Course Progress</h2>
     <span class="progress-text">Loading...</span>
    </div>
    <div class="progress-bar">
     <div class="progress-bar-fill">
      <span class="progress-bar-text">
      </span>
     </div>
    </div>
   </div>
   <!-- Breadcrumb -->
   <nav aria-label="Breadcrumb" class="breadcrumb container">
    <ol class="breadcrumb-list">
     <li class="breadcrumb-item">
      <a href="/">Home</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <a href="/module3.html">Module 3</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <span aria-current="page">Executing Queries</span>
     </li>
    </ol>
   </nav>
   <!-- Main Content -->
   <main class="main-content" id="main-content" role="main">
    <div class="container">
     <div class="content-with-sidebar">
      <!-- Sidebar -->
      <aside class="sidebar">
    <div class="sidebar-nav">
        <h3 class="sidebar-title">Module 3: MySQL Database</h3>
        <div class="sidebar-section">
            <h4 class="sidebar-section-title">Session 5: PHP and MySQL Integration</h4>
            <ul class="sidebar-menu">
                <li><a class="sidebar-link" href="/03module/connecting_mysql.html">Connecting to MySQL with PHP</a></li>
                <li class="active"><a class="sidebar-link active" href="/03module/executing_queries.html">Executing SQL queries through PHP</a></li>
                <li><a class="sidebar-link" href="/03module/prepared_statements.html">Prepared statements and security concerns</a></li>
                <li><a class="sidebar-link" href="/03module/crud_operations.html">CRUD operations in PHP applications</a></li>
                <li><a class="sidebar-link" href="/03module/result_sets.html">Handling results sets</a></li>
                <li><a class="sidebar-link" href="/03module/error_debugging.html">Error handling and debugging</a></li>
                <li><a class="sidebar-link" href="/03module/php_mysql_integration.html">Final Project: Build a complete data-driven PHP application with MySQL backend</a></li>
            </ul>
        </div>
        <div class="sidebar-section">
            <h4 class="sidebar-section-title">Quick Links</h4>
            <ul class="sidebar-menu">
                <li><a class="sidebar-link" href="/module3.html">Module Overview</a></li>
                <li><a class="sidebar-link prev-session" href="/03module/sql_joins.html">‚Üê Prev: Advanced SQL</a></li>
                <li><a class="sidebar-link" href="/">‚Üê Course Home</a></li>
                <li><a class="sidebar-link" href="/module4.html">Next Module ‚Üí</a></li>
                <li><a class="sidebar-link" href="/resources.html">Resources</a></li>
            </ul>
        </div>
    </div>
</aside>
      <!-- Main Lesson Content -->
      <article class="lesson-content">
       <header class="lesson-header">
        <h1>Executing SQL Queries through PHP</h1>
        <div class="lesson-meta">
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">
           </path>
          </svg>
          <span>Duration: 85 minutes</span>
         </div>
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 14l9-5-9-5-9 5 9 5z">
           </path>
          </svg>
          <span>Lesson 3 of 8</span>
         </div>
        </div>
       </header>
       <!-- Learning Objectives -->
       <div class="lesson-objectives">
        <h2>Learning Objectives</h2>
        <ul>
         <li>Execute different types of SQL queries (SELECT, INSERT, UPDATE, DELETE)</li>
         <li>Build dynamic queries safely</li>
         <li>Implement batch query operations</li>
         <li>Execute multiple queries efficiently</li>
         <li>Handle query results properly</li>
         <li>Optimize query performance</li>
         <li>Execute stored procedures and functions</li>
         <li>Manage database transactions</li>
        </ul>
       </div>
       <!-- Lesson Body -->
       <div class="lesson-body">
        <section>
         <h2>Query Execution Overview</h2>
         <p class="lead">Understanding how to execute SQL queries efficiently and safely is crucial for building robust PHP applications! ‚ö°</p>
         <canvas height="500" id="queryCanvas" width="600">
         </canvas>
         <script>const ctx = document.getElementById('queryCanvas').getContext('2d');
                                    
                                    // Title
                                    ctx.font = 'bold 18px Arial';
                                    ctx.fillStyle = '#1f2937';
                                    ctx.fillText('SQL Query Execution Flow', 180, 30);
                                    
                                    // Query Types
                                    ctx.fillStyle = '#f3f4f6';
                                    ctx.fillRect(50, 60, 500, 80);
                                    ctx.strokeStyle = '#6b7280';
                                    ctx.lineWidth = 2;
                                    ctx.strokeRect(50, 60, 500, 80);
                                    
                                    ctx.fillStyle = '#1f2937';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('Query Types', 270, 80);
                                    
                                    const queryTypes = [
                                        { type: 'SELECT', color: '#dbeafe', x: 70 },
                                        { type: 'INSERT', color: '#dcfce7', x: 170 },
                                        { type: 'UPDATE', color: '#fef3c7', x: 270 },
                                        { type: 'DELETE', color: '#fee2e2', x: 370 },
                                        { type: 'DDL', color: '#e9d5ff', x: 470 }
                                    ];
                                    
                                    queryTypes.forEach(q =>{
                                        ctx.fillStyle = q.color;
                                        ctx.fillRect(q.x, 95, 70, 30);
                                        ctx.strokeStyle = '#6b7280';
                                        ctx.lineWidth = 1;
                                        ctx.strokeRect(q.x, 95, 70, 30);
                                        
                                        ctx.fillStyle = '#1f2937';
                                        ctx.font = '10px Arial';
                                        ctx.fillText(q.type, q.x + 15, 113);
                                    });
                                    
                                    // Execution Methods
                                    ctx.fillStyle = '#e0f2fe';
                                    ctx.fillRect(50, 160, 240, 120);
                                    ctx.strokeStyle = '#0891b2';
                                    ctx.strokeRect(50, 160, 240, 120);
                                    
                                    ctx.fillStyle = '#0c4a6e';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('PDO Methods', 140, 180);
                                    
                                    ctx.font = '10px Arial';
                                    ctx.fillStyle = '#374151';
                                    ctx.fillText('‚Ä¢ query() - Direct execution', 60, 200);
                                    ctx.fillText('‚Ä¢ exec() - Non-SELECT queries', 60, 215);
                                    ctx.fillText('‚Ä¢ prepare() - Prepared statements', 60, 230);
                                    ctx.fillText('‚Ä¢ beginTransaction() - Transactions', 60, 245);
                                    ctx.fillText('‚Ä¢ lastInsertId() - Get insert ID', 60, 260);
                                    
                                    ctx.fillStyle = '#fef3c7';
                                    ctx.fillRect(310, 160, 240, 120);
                                    ctx.strokeStyle = '#ca8a04';
                                    ctx.strokeRect(310, 160, 240, 120);
                                    
                                    ctx.fillStyle = '#92400e';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('MySQLi Methods', 390, 180);
                                    
                                    ctx.font = '10px Arial';
                                    ctx.fillStyle = '#374151';
                                    ctx.fillText('‚Ä¢ query() - Execute query', 320, 200);
                                    ctx.fillText('‚Ä¢ real_query() - Binary-safe query', 320, 215);
                                    ctx.fillText('‚Ä¢ multi_query() - Multiple queries', 320, 230);
                                    ctx.fillText('‚Ä¢ prepare() - Prepared statements', 320, 245);
                                    ctx.fillText('‚Ä¢ begin_transaction() - Transactions', 320, 260);
                                    
                                    // Execution Process
                                    ctx.fillStyle = '#dcfce7';
                                    ctx.fillRect(50, 300, 500, 100);
                                    ctx.strokeStyle = '#16a34a';
                                    ctx.strokeRect(50, 300, 500, 100);
                                    
                                    ctx.fillStyle = '#166534';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('Execution Process', 250, 320);
                                    
                                    // Process steps
                                    const steps = [
                                        { text: 'Parse', x: 70, y: 350 },
                                        { text: 'Validate', x: 150, y: 350 },
                                        { text: 'Optimize', x: 240, y: 350 },
                                        { text: 'Execute', x: 330, y: 350 },
                                        { text: 'Return', x: 420, y: 350 }
                                    ];
                                    
                                    steps.forEach((step, i) =>{
                                        // Circle
                                        ctx.beginPath();
                                        ctx.arc(step.x + 20, step.y, 15, 0, 2 * Math.PI);
                                        ctx.fillStyle = '#f0fdf4';
                                        ctx.fill();
                                        ctx.strokeStyle = '#16a34a';
                                        ctx.stroke();
                                        
                                        // Number
                                        ctx.fillStyle = '#166534';
                                        ctx.font = 'bold 10px Arial';
                                        ctx.fillText(i + 1, step.x + 17, step.y + 3);
                                        
                                        // Label
                                        ctx.font = '9px Arial';
                                        ctx.fillText(step.text, step.x, step.y + 25);
                                        
                                        // Arrow
                                        if (i< steps.length - 1) {
                                            ctx.strokeStyle = '#6b7280';
                                            ctx.beginPath();
                                            ctx.moveTo(step.x + 35, step.y);
                                            ctx.lineTo(steps[i + 1].x + 5, step.y);
                                            ctx.stroke();
                                        }
                                    });
                                    
                                    // Performance note
                                    ctx.fillStyle = '#fee2e2';
                                    ctx.fillRect(50, 420, 500, 40);
                                    ctx.strokeStyle = '#dc2626';
                                    ctx.strokeRect(50, 420, 500, 40);
                                    
                                    ctx.fillStyle = '#991b1b';
                                    ctx.font = '10px Arial';
                                    ctx.fillText('‚ö†Ô∏è Performance Tip: Use prepared statements for repeated queries, batch operations for bulk data', 60, 445);</script>
         <div class="alert alert-info">
          <div class="alert-icon">üí°</div>
          <div class="alert-content">
           <div class="alert-title">Query Execution Best Practices</div>
           <div class="alert-message">
            <ul>
             <li>
              <strong>Use appropriate method:</strong>query() for SELECT, exec() for INSERT/UPDATE/DELETE in PDO</li>
             <li>
              <strong>Handle errors:</strong>Always check for query execution errors</li>
             <li>
              <strong>Optimize queries:</strong>Use EXPLAIN to analyze query performance</li>
             <li>
              <strong>Batch operations:</strong>Group multiple operations when possible</li>
             <li>
              <strong>Transaction control:</strong>Use transactions for related operations</li>
             <li>
              <strong>Resource management:</strong>Free results when done</li>
            </ul>
           </div>
          </div>
         </div>
        </section>
        <section>
         <h2>Basic Query Execution</h2>
         <div class="mermaid">graph TB
                                        QUERY[SQL Query] --&gt; PREPARE{Prepared?}
                                        
                                        PREPARE --&gt;|No| DIRECT[Direct Execution]
                                        PREPARE --&gt;|Yes| STMT[Prepare Statement]
                                        
                                        DIRECT --&gt; EXEC1[Execute Query]
                                        STMT --&gt; BIND[Bind Parameters]
                                        BIND --&gt; EXEC2[Execute Statement]
                                        
                                        EXEC1 --&gt; RESULT[Process Result]
                                        EXEC2 --&gt; RESULT
                                        
                                        RESULT --&gt; CHECK{Success?}
                                        CHECK --&gt;|Yes| FETCH[Fetch Data]
                                        CHECK --&gt;|No| ERROR[Handle Error]
                                        
                                        style QUERY fill:#dbeafe
                                        style STMT fill:#dcfce7
                                        style RESULT fill:#fef3c7
                                        style ERROR fill:#fee2e2</div>
         <div class="real_world_example">
          <h3>Query Execution Methods</h3>
          <pre><code class="language-php">&lt;?php
// ========================================
// PDO QUERY EXECUTION
// ========================================

class PDOQueryExecutor {
    private $pdo;
    private $queryLog = [];
    private $performanceLog = [];
    
    public function __construct(PDO $pdo) {
        $this-&gt;pdo = $pdo;
    }
    
    /**
     * Execute SELECT query
     */
    public function select($sql, $params = []) {
        $startTime = microtime(true);
        
        try {
            if (empty($params)) {
                // Direct query for simple SELECT
                $stmt = $this-&gt;pdo-&gt;query($sql);
            } else {
                // Prepared statement for parameterized query
                $stmt = $this-&gt;pdo-&gt;prepare($sql);
                $stmt-&gt;execute($params);
            }
            
            $result = $stmt-&gt;fetchAll();
            
            $this-&gt;logQuery($sql, $params, microtime(true) - $startTime);
            
            return [
                'success' =&gt; true,
                'data' =&gt; $result,
                'rowCount' =&gt; count($result)
            ];
            
        } catch (PDOException $e) {
            return $this-&gt;handleError($e, $sql, $params);
        }
    }
    
    /**
     * Execute INSERT query
     */
    public function insert($table, $data) {
        $startTime = microtime(true);
        
        try {
            // Build INSERT query
            $columns = array_keys($data);
            $placeholders = array_map(function($col) { return ":$col"; }, $columns);
            
            $sql = "INSERT INTO $table (" . implode(', ', $columns) . ") 
                    VALUES (" . implode(', ', $placeholders) . ")";
            
            $stmt = $this-&gt;pdo-&gt;prepare($sql);
            
            // Bind parameters
            foreach ($data as $key =&gt; $value) {
                $stmt-&gt;bindValue(":$key", $value);
            }
            
            $result = $stmt-&gt;execute();
            
            $this-&gt;logQuery($sql, $data, microtime(true) - $startTime);
            
            return [
                'success' =&gt; $result,
                'id' =&gt; $this-&gt;pdo-&gt;lastInsertId(),
                'affected' =&gt; $stmt-&gt;rowCount()
            ];
            
        } catch (PDOException $e) {
            return $this-&gt;handleError($e, $sql, $data);
        }
    }
    
    /**
     * Execute UPDATE query
     */
    public function update($table, $data, $where = []) {
        $startTime = microtime(true);
        
        try {
            // Build SET clause
            $setClauses = [];
            foreach ($data as $key =&gt; $value) {
                $setClauses[] = "$key = :set_$key";
            }
            
            // Build WHERE clause
            $whereClauses = [];
            foreach ($where as $key =&gt; $value) {
                $whereClauses[] = "$key = :where_$key";
            }
            
            $sql = "UPDATE $table SET " . implode(', ', $setClauses);
            if (!empty($whereClauses)) {
                $sql .= " WHERE " . implode(' AND ', $whereClauses);
            }
            
            $stmt = $this-&gt;pdo-&gt;prepare($sql);
            
            // Bind SET parameters
            foreach ($data as $key =&gt; $value) {
                $stmt-&gt;bindValue(":set_$key", $value);
            }
            
            // Bind WHERE parameters
            foreach ($where as $key =&gt; $value) {
                $stmt-&gt;bindValue(":where_$key", $value);
            }
            
            $result = $stmt-&gt;execute();
            
            $this-&gt;logQuery($sql, array_merge($data, $where), microtime(true) - $startTime);
            
            return [
                'success' =&gt; $result,
                'affected' =&gt; $stmt-&gt;rowCount()
            ];
            
        } catch (PDOException $e) {
            return $this-&gt;handleError($e, $sql, array_merge($data, $where));
        }
    }
    
    /**
     * Execute DELETE query
     */
    public function delete($table, $where = []) {
        $startTime = microtime(true);
        
        try {
            $sql = "DELETE FROM $table";
            
            if (!empty($where)) {
                $whereClauses = [];
                foreach ($where as $key =&gt; $value) {
                    $whereClauses[] = "$key = :$key";
                }
                $sql .= " WHERE " . implode(' AND ', $whereClauses);
            }
            
            $stmt = $this-&gt;pdo-&gt;prepare($sql);
            
            foreach ($where as $key =&gt; $value) {
                $stmt-&gt;bindValue(":$key", $value);
            }
            
            $result = $stmt-&gt;execute();
            
            $this-&gt;logQuery($sql, $where, microtime(true) - $startTime);
            
            return [
                'success' =&gt; $result,
                'affected' =&gt; $stmt-&gt;rowCount()
            ];
            
        } catch (PDOException $e) {
            return $this-&gt;handleError($e, $sql, $where);
        }
    }
    
    /**
     * Execute raw query
     */
    public function raw($sql, $params = []) {
        $startTime = microtime(true);
        
        try {
            if (empty($params)) {
                // Use exec for non-SELECT queries without params
                if (preg_match('/^(INSERT|UPDATE|DELETE|CREATE|DROP|ALTER)/i', $sql)) {
                    $affected = $this-&gt;pdo-&gt;exec($sql);
                    
                    $this-&gt;logQuery($sql, [], microtime(true) - $startTime);
                    
                    return [
                        'success' =&gt; true,
                        'affected' =&gt; $affected
                    ];
                } else {
                    // Use query for SELECT
                    $stmt = $this-&gt;pdo-&gt;query($sql);
                    $result = $stmt-&gt;fetchAll();
                    
                    $this-&gt;logQuery($sql, [], microtime(true) - $startTime);
                    
                    return [
                        'success' =&gt; true,
                        'data' =&gt; $result
                    ];
                }
            } else {
                // Use prepared statement
                $stmt = $this-&gt;pdo-&gt;prepare($sql);
                $stmt-&gt;execute($params);
                
                if (preg_match('/^SELECT/i', $sql)) {
                    $result = $stmt-&gt;fetchAll();
                    
                    $this-&gt;logQuery($sql, $params, microtime(true) - $startTime);
                    
                    return [
                        'success' =&gt; true,
                        'data' =&gt; $result
                    ];
                } else {
                    $this-&gt;logQuery($sql, $params, microtime(true) - $startTime);
                    
                    return [
                        'success' =&gt; true,
                        'affected' =&gt; $stmt-&gt;rowCount()
                    ];
                }
            }
            
        } catch (PDOException $e) {
            return $this-&gt;handleError($e, $sql, $params);
        }
    }
    
    /**
     * Log query for debugging
     */
    private function logQuery($sql, $params, $executionTime) {
        $this-&gt;queryLog[] = [
            'sql' =&gt; $sql,
            'params' =&gt; $params,
            'execution_time' =&gt; round($executionTime * 1000, 2) . ' ms',
            'timestamp' =&gt; date('Y-m-d H:i:s')
        ];
        
        // Log slow queries
        if ($executionTime &gt; 1) { // More than 1 second
            $this-&gt;performanceLog[] = [
                'sql' =&gt; $sql,
                'time' =&gt; $executionTime,
                'timestamp' =&gt; date('Y-m-d H:i:s')
            ];
        }
    }
    
    /**
     * Handle query errors
     */
    private function handleError($e, $sql, $params) {
        $error = [
            'success' =&gt; false,
            'error' =&gt; $e-&gt;getMessage(),
            'code' =&gt; $e-&gt;getCode(),
            'sql' =&gt; $sql,
            'params' =&gt; $params
        ];
        
        // Log error
        error_log("Query Error: " . json_encode($error));
        
        return $error;
    }
    
    /**
     * Get query log
     */
    public function getQueryLog() {
        return $this-&gt;queryLog;
    }
    
    /**
     * Get slow queries
     */
    public function getSlowQueries() {
        return $this-&gt;performanceLog;
    }
}

// ========================================
// MYSQLI QUERY EXECUTION
// ========================================

class MySQLiQueryExecutor {
    private $mysqli;
    private $queryLog = [];
    
    public function __construct(mysqli $mysqli) {
        $this-&gt;mysqli = $mysqli;
    }
    
    /**
     * Execute query with result
     */
    public function query($sql, $params = []) {
        $startTime = microtime(true);
        
        try {
            if (empty($params)) {
                // Direct query
                $result = $this-&gt;mysqli-&gt;query($sql);
                
                if ($result === false) {
                    throw new Exception($this-&gt;mysqli-&gt;error);
                }
                
                // Process result based on query type
                if ($result instanceof mysqli_result) {
                    $data = [];
                    while ($row = $result-&gt;fetch_assoc()) {
                        $data[] = $row;
                    }
                    $result-&gt;free();
                    
                    $this-&gt;logQuery($sql, [], microtime(true) - $startTime);
                    
                    return [
                        'success' =&gt; true,
                        'data' =&gt; $data,
                        'num_rows' =&gt; count($data)
                    ];
                } else {
                    // Non-SELECT query
                    $this-&gt;logQuery($sql, [], microtime(true) - $startTime);
                    
                    return [
                        'success' =&gt; true,
                        'affected_rows' =&gt; $this-&gt;mysqli-&gt;affected_rows,
                        'insert_id' =&gt; $this-&gt;mysqli-&gt;insert_id
                    ];
                }
            } else {
                // Prepared statement
                return $this-&gt;executeWithParams($sql, $params);
            }
            
        } catch (Exception $e) {
            return [
                'success' =&gt; false,
                'error' =&gt; $e-&gt;getMessage()
            ];
        }
    }
    
    /**
     * Execute with parameters (prepared statement)
     */
    private function executeWithParams($sql, $params) {
        $stmt = $this-&gt;mysqli-&gt;prepare($sql);
        
        if (!$stmt) {
            throw new Exception($this-&gt;mysqli-&gt;error);
        }
        
        // Determine types
        $types = '';
        foreach ($params as $param) {
            if (is_int($param)) {
                $types .= 'i';
            } elseif (is_float($param)) {
                $types .= 'd';
            } else {
                $types .= 's';
            }
        }
        
        // Bind parameters
        if (!empty($params)) {
            $stmt-&gt;bind_param($types, ...$params);
        }
        
        // Execute
        if (!$stmt-&gt;execute()) {
            throw new Exception($stmt-&gt;error);
        }
        
        // Get result
        $result = $stmt-&gt;get_result();
        
        if ($result) {
            // SELECT query
            $data = [];
            while ($row = $result-&gt;fetch_assoc()) {
                $data[] = $row;
            }
            
            return [
                'success' =&gt; true,
                'data' =&gt; $data,
                'num_rows' =&gt; $result-&gt;num_rows
            ];
        } else {
            // Non-SELECT query
            return [
                'success' =&gt; true,
                'affected_rows' =&gt; $stmt-&gt;affected_rows,
                'insert_id' =&gt; $this-&gt;mysqli-&gt;insert_id
            ];
        }
    }
    
    /**
     * Execute multiple queries
     */
    public function multiQuery($sql) {
        $results = [];
        
        if ($this-&gt;mysqli-&gt;multi_query($sql)) {
            do {
                // Store result
                if ($result = $this-&gt;mysqli-&gt;store_result()) {
                    $data = [];
                    while ($row = $result-&gt;fetch_assoc()) {
                        $data[] = $row;
                    }
                    $results[] = $data;
                    $result-&gt;free();
                } else {
                    // Non-SELECT query
                    $results[] = [
                        'affected_rows' =&gt; $this-&gt;mysqli-&gt;affected_rows
                    ];
                }
                
                // Check for more results
                $moreResults = $this-&gt;mysqli-&gt;more_results();
                
                if ($moreResults) {
                    $this-&gt;mysqli-&gt;next_result();
                }
                
            } while ($moreResults);
        }
        
        return $results;
    }
    
    /**
     * Call stored procedure
     */
    public function callProcedure($procedure, $params = []) {
        $placeholders = array_fill(0, count($params), '?');
        $sql = "CALL $procedure(" . implode(',', $placeholders) . ")";
        
        return $this-&gt;query($sql, $params);
    }
    
    /**
     * Log query
     */
    private function logQuery($sql, $params, $executionTime) {
        $this-&gt;queryLog[] = [
            'sql' =&gt; $sql,
            'params' =&gt; $params,
            'execution_time' =&gt; round($executionTime * 1000, 2) . ' ms',
            'timestamp' =&gt; date('Y-m-d H:i:s')
        ];
    }
}

// ========================================
// BATCH OPERATIONS
// ========================================

class BatchQueryExecutor {
    private $pdo;
    private $batchSize = 1000;
    
    public function __construct(PDO $pdo) {
        $this-&gt;pdo = $pdo;
    }
    
    /**
     * Batch insert
     */
    public function batchInsert($table, $data, $columns = null) {
        if (empty($data)) {
            return ['success' =&gt; false, 'error' =&gt; 'No data provided'];
        }
        
        // Get columns from first row if not provided
        if ($columns === null) {
            $columns = array_keys($data[0]);
        }
        
        $totalInserted = 0;
        $chunks = array_chunk($data, $this-&gt;batchSize);
        
        try {
            $this-&gt;pdo-&gt;beginTransaction();
            
            foreach ($chunks as $chunk) {
                $sql = $this-&gt;buildBatchInsertQuery($table, $columns, count($chunk));
                $stmt = $this-&gt;pdo-&gt;prepare($sql);
                
                // Flatten data for binding
                $values = [];
                foreach ($chunk as $row) {
                    foreach ($columns as $col) {
                        $values[] = $row[$col] ?? null;
                    }
                }
                
                $stmt-&gt;execute($values);
                $totalInserted += $stmt-&gt;rowCount();
            }
            
            $this-&gt;pdo-&gt;commit();
            
            return [
                'success' =&gt; true,
                'inserted' =&gt; $totalInserted
            ];
            
        } catch (PDOException $e) {
            $this-&gt;pdo-&gt;rollBack();
            
            return [
                'success' =&gt; false,
                'error' =&gt; $e-&gt;getMessage()
            ];
        }
    }
    
    /**
     * Build batch insert query
     */
    private function buildBatchInsertQuery($table, $columns, $rowCount) {
        $columnList = implode(', ', $columns);
        $placeholders = '(' . implode(', ', array_fill(0, count($columns), '?')) . ')';
        $values = implode(', ', array_fill(0, $rowCount, $placeholders));
        
        return "INSERT INTO $table ($columnList) VALUES $values";
    }
    
    /**
     * Batch update
     */
    public function batchUpdate($table, $data, $keyColumn) {
        if (empty($data)) {
            return ['success' =&gt; false, 'error' =&gt; 'No data provided'];
        }
        
        $totalUpdated = 0;
        
        try {
            $this-&gt;pdo-&gt;beginTransaction();
            
            foreach ($data as $row) {
                if (!isset($row[$keyColumn])) {
                    continue;
                }
                
                $keyValue = $row[$keyColumn];
                unset($row[$keyColumn]);
                
                $setClauses = [];
                foreach ($row as $col =&gt; $value) {
                    $setClauses[] = "$col = ?";
                }
                
                $sql = "UPDATE $table SET " . implode(', ', $setClauses) . 
                       " WHERE $keyColumn = ?";
                
                $stmt = $this-&gt;pdo-&gt;prepare($sql);
                
                $values = array_values($row);
                $values[] = $keyValue;
                
                $stmt-&gt;execute($values);
                $totalUpdated += $stmt-&gt;rowCount();
            }
            
            $this-&gt;pdo-&gt;commit();
            
            return [
                'success' =&gt; true,
                'updated' =&gt; $totalUpdated
            ];
            
        } catch (PDOException $e) {
            $this-&gt;pdo-&gt;rollBack();
            
            return [
                'success' =&gt; false,
                'error' =&gt; $e-&gt;getMessage()
            ];
        }
    }
    
    /**
     * Batch delete
     */
    public function batchDelete($table, $column, $values) {
        if (empty($values)) {
            return ['success' =&gt; false, 'error' =&gt; 'No values provided'];
        }
        
        try {
            $placeholders = str_repeat('?,', count($values) - 1) . '?';
            $sql = "DELETE FROM $table WHERE $column IN ($placeholders)";
            
            $stmt = $this-&gt;pdo-&gt;prepare($sql);
            $stmt-&gt;execute($values);
            
            return [
                'success' =&gt; true,
                'deleted' =&gt; $stmt-&gt;rowCount()
            ];
            
        } catch (PDOException $e) {
            return [
                'success' =&gt; false,
                'error' =&gt; $e-&gt;getMessage()
            ];
        }
    }
}

// ========================================
// USAGE EXAMPLES
// ========================================

// PDO Examples
$pdo = new PDO('mysql:host=localhost;dbname=test', 'user', 'pass');
$executor = new PDOQueryExecutor($pdo);

// SELECT
$result = $executor-&gt;select("SELECT * FROM users WHERE status = ?", ['active']);
print_r($result);

// INSERT
$result = $executor-&gt;insert('users', [
    'name' =&gt; 'John Doe',
    'email' =&gt; 'john@example.com',
    'status' =&gt; 'active'
]);
echo "Inserted ID: " . $result['id'];

// UPDATE
$result = $executor-&gt;update('users', 
    ['status' =&gt; 'inactive'],
    ['id' =&gt; 123]
);
echo "Updated rows: " . $result['affected'];

// DELETE
$result = $executor-&gt;delete('users', ['id' =&gt; 123]);
echo "Deleted rows: " . $result['affected'];

// Batch operations
$batch = new BatchQueryExecutor($pdo);

// Batch insert
$data = [
    ['name' =&gt; 'User 1', 'email' =&gt; 'user1@example.com'],
    ['name' =&gt; 'User 2', 'email' =&gt; 'user2@example.com'],
    // ... more data
];
$result = $batch-&gt;batchInsert('users', $data);

// View query log
print_r($executor-&gt;getQueryLog());
print_r($executor-&gt;getSlowQueries());</code></pre>
         </div>
        </section>
        <section>
         <h2>Advanced Query Execution</h2>
         <div class="best_practice">
          <h3>Transaction Management and Optimization</h3>
          <pre><code class="language-php">&lt;?php
// ========================================
// TRANSACTION MANAGER
// ========================================

class TransactionManager {
    private $pdo;
    private $transactionLevel = 0;
    private $rollbackOnly = false;
    
    public function __construct(PDO $pdo) {
        $this-&gt;pdo = $pdo;
    }
    
    /**
     * Begin transaction with nesting support
     */
    public function beginTransaction() {
        if ($this-&gt;transactionLevel == 0) {
            $this-&gt;pdo-&gt;beginTransaction();
        } else {
            $this-&gt;pdo-&gt;exec("SAVEPOINT LEVEL{$this-&gt;transactionLevel}");
        }
        
        $this-&gt;transactionLevel++;
        
        return $this-&gt;transactionLevel;
    }
    
    /**
     * Commit transaction
     */
    public function commit() {
        if ($this-&gt;transactionLevel == 0) {
            throw new Exception("No active transaction");
        }
        
        $this-&gt;transactionLevel--;
        
        if ($this-&gt;transactionLevel == 0) {
            if ($this-&gt;rollbackOnly) {
                $this-&gt;pdo-&gt;rollBack();
                $this-&gt;rollbackOnly = false;
                throw new Exception("Transaction marked for rollback only");
            } else {
                $this-&gt;pdo-&gt;commit();
            }
        } else {
            if (!$this-&gt;rollbackOnly) {
                $this-&gt;pdo-&gt;exec("RELEASE SAVEPOINT LEVEL{$this-&gt;transactionLevel}");
            }
        }
    }
    
    /**
     * Rollback transaction
     */
    public function rollback() {
        if ($this-&gt;transactionLevel == 0) {
            throw new Exception("No active transaction");
        }
        
        $this-&gt;transactionLevel--;
        
        if ($this-&gt;transactionLevel == 0) {
            $this-&gt;pdo-&gt;rollBack();
            $this-&gt;rollbackOnly = false;
        } else {
            $this-&gt;pdo-&gt;exec("ROLLBACK TO SAVEPOINT LEVEL{$this-&gt;transactionLevel}");
            $this-&gt;rollbackOnly = true;
        }
    }
    
    /**
     * Execute in transaction
     */
    public function transactional(callable $callback) {
        $this-&gt;beginTransaction();
        
        try {
            $result = $callback($this-&gt;pdo);
            $this-&gt;commit();
            
            return $result;
            
        } catch (Exception $e) {
            $this-&gt;rollback();
            throw $e;
        }
    }
}

// ========================================
// QUERY BUILDER
// ========================================

class QueryBuilder {
    private $type;
    private $table;
    private $columns = ['*'];
    private $where = [];
    private $joins = [];
    private $groupBy = [];
    private $having = [];
    private $orderBy = [];
    private $limit;
    private $offset;
    private $bindings = [];
    
    /**
     * SELECT query
     */
    public function select($columns = ['*']) {
        $this-&gt;type = 'SELECT';
        $this-&gt;columns = is_array($columns) ? $columns : [$columns];
        return $this;
    }
    
    /**
     * FROM table
     */
    public function from($table) {
        $this-&gt;table = $table;
        return $this;
    }
    
    /**
     * JOIN clause
     */
    public function join($table, $first, $operator, $second, $type = 'INNER') {
        $this-&gt;joins[] = [
            'type' =&gt; $type,
            'table' =&gt; $table,
            'first' =&gt; $first,
            'operator' =&gt; $operator,
            'second' =&gt; $second
        ];
        return $this;
    }
    
    /**
     * WHERE clause
     */
    public function where($column, $operator, $value = null) {
        if ($value === null) {
            $value = $operator;
            $operator = '=';
        }
        
        $this-&gt;where[] = [
            'type' =&gt; 'AND',
            'column' =&gt; $column,
            'operator' =&gt; $operator,
            'value' =&gt; $value
        ];
        
        return $this;
    }
    
    /**
     * OR WHERE clause
     */
    public function orWhere($column, $operator, $value = null) {
        if ($value === null) {
            $value = $operator;
            $operator = '=';
        }
        
        $this-&gt;where[] = [
            'type' =&gt; 'OR',
            'column' =&gt; $column,
            'operator' =&gt; $operator,
            'value' =&gt; $value
        ];
        
        return $this;
    }
    
    /**
     * WHERE IN clause
     */
    public function whereIn($column, array $values) {
        $this-&gt;where[] = [
            'type' =&gt; 'AND',
            'column' =&gt; $column,
            'operator' =&gt; 'IN',
            'value' =&gt; $values
        ];
        
        return $this;
    }
    
    /**
     * GROUP BY clause
     */
    public function groupBy($columns) {
        $this-&gt;groupBy = is_array($columns) ? $columns : [$columns];
        return $this;
    }
    
    /**
     * HAVING clause
     */
    public function having($column, $operator, $value = null) {
        if ($value === null) {
            $value = $operator;
            $operator = '=';
        }
        
        $this-&gt;having[] = [
            'column' =&gt; $column,
            'operator' =&gt; $operator,
            'value' =&gt; $value
        ];
        
        return $this;
    }
    
    /**
     * ORDER BY clause
     */
    public function orderBy($column, $direction = 'ASC') {
        $this-&gt;orderBy[] = [
            'column' =&gt; $column,
            'direction' =&gt; strtoupper($direction)
        ];
        
        return $this;
    }
    
    /**
     * LIMIT clause
     */
    public function limit($limit, $offset = null) {
        $this-&gt;limit = $limit;
        if ($offset !== null) {
            $this-&gt;offset = $offset;
        }
        return $this;
    }
    
    /**
     * Build SQL query
     */
    public function toSql() {
        $sql = $this-&gt;type . ' ';
        
        // SELECT columns
        $sql .= implode(', ', $this-&gt;columns);
        
        // FROM
        $sql .= " FROM {$this-&gt;table}";
        
        // JOINs
        foreach ($this-&gt;joins as $join) {
            $sql .= " {$join['type']} JOIN {$join['table']} ON ";
            $sql .= "{$join['first']} {$join['operator']} {$join['second']}";
        }
        
        // WHERE
        if (!empty($this-&gt;where)) {
            $sql .= " WHERE ";
            $whereClauses = [];
            
            foreach ($this-&gt;where as $i =&gt; $condition) {
                $clause = '';
                
                if ($i &gt; 0) {
                    $clause .= " {$condition['type']} ";
                }
                
                if ($condition['operator'] === 'IN') {
                    $placeholders = array_fill(0, count($condition['value']), '?');
                    $clause .= "{$condition['column']} IN (" . implode(', ', $placeholders) . ")";
                    $this-&gt;bindings = array_merge($this-&gt;bindings, $condition['value']);
                } else {
                    $clause .= "{$condition['column']} {$condition['operator']} ?";
                    $this-&gt;bindings[] = $condition['value'];
                }
                
                $whereClauses[] = $clause;
            }
            
            $sql .= implode('', $whereClauses);
        }
        
        // GROUP BY
        if (!empty($this-&gt;groupBy)) {
            $sql .= " GROUP BY " . implode(', ', $this-&gt;groupBy);
        }
        
        // HAVING
        if (!empty($this-&gt;having)) {
            $sql .= " HAVING ";
            $havingClauses = [];
            
            foreach ($this-&gt;having as $condition) {
                $havingClauses[] = "{$condition['column']} {$condition['operator']} ?";
                $this-&gt;bindings[] = $condition['value'];
            }
            
            $sql .= implode(' AND ', $havingClauses);
        }
        
        // ORDER BY
        if (!empty($this-&gt;orderBy)) {
            $sql .= " ORDER BY ";
            $orderClauses = [];
            
            foreach ($this-&gt;orderBy as $order) {
                $orderClauses[] = "{$order['column']} {$order['direction']}";
            }
            
            $sql .= implode(', ', $orderClauses);
        }
        
        // LIMIT
        if ($this-&gt;limit) {
            $sql .= " LIMIT {$this-&gt;limit}";
            
            if ($this-&gt;offset) {
                $sql .= " OFFSET {$this-&gt;offset}";
            }
        }
        
        return $sql;
    }
    
    /**
     * Get bindings
     */
    public function getBindings() {
        return $this-&gt;bindings;
    }
    
    /**
     * Execute query
     */
    public function execute(PDO $pdo) {
        $sql = $this-&gt;toSql();
        $stmt = $pdo-&gt;prepare($sql);
        $stmt-&gt;execute($this-&gt;bindings);
        
        return $stmt-&gt;fetchAll();
    }
}

// ========================================
// QUERY OPTIMIZATION
// ========================================

class QueryOptimizer {
    private $pdo;
    
    public function __construct(PDO $pdo) {
        $this-&gt;pdo = $pdo;
    }
    
    /**
     * Analyze query performance
     */
    public function explain($sql) {
        $stmt = $this-&gt;pdo-&gt;query("EXPLAIN $sql");
        return $stmt-&gt;fetchAll();
    }
    
    /**
     * Analyze query with extended information
     */
    public function explainAnalyze($sql) {
        $stmt = $this-&gt;pdo-&gt;query("EXPLAIN ANALYZE $sql");
        return $stmt-&gt;fetchAll();
    }
    
    /**
     * Get query execution plan
     */
    public function getExecutionPlan($sql) {
        $explain = $this-&gt;explain($sql);
        
        $plan = [];
        foreach ($explain as $row) {
            $plan[] = [
                'table' =&gt; $row['table'],
                'type' =&gt; $row['type'],
                'possible_keys' =&gt; $row['possible_keys'],
                'key' =&gt; $row['key'],
                'rows' =&gt; $row['rows'],
                'extra' =&gt; $row['Extra']
            ];
        }
        
        return $plan;
    }
    
    /**
     * Suggest optimizations
     */
    public function suggestOptimizations($sql) {
        $plan = $this-&gt;getExecutionPlan($sql);
        $suggestions = [];
        
        foreach ($plan as $step) {
            // Check for full table scan
            if ($step['type'] === 'ALL') {
                $suggestions[] = "Consider adding index on {$step['table']} for WHERE/JOIN conditions";
            }
            
            // Check for filesort
            if (strpos($step['extra'], 'filesort') !== false) {
                $suggestions[] = "Query uses filesort on {$step['table']}, consider adding index for ORDER BY";
            }
            
            // Check for temporary table
            if (strpos($step['extra'], 'temporary') !== false) {
                $suggestions[] = "Query creates temporary table for {$step['table']}, review GROUP BY/ORDER BY";
            }
            
            // Check for no index used
            if (empty($step['key']) &amp;&amp; !empty($step['possible_keys'])) {
                $suggestions[] = "Index exists but not used for {$step['table']}, consider FORCE INDEX";
            }
        }
        
        return $suggestions;
    }
}

// ========================================
// USAGE EXAMPLES
// ========================================

$pdo = new PDO('mysql:host=localhost;dbname=test', 'user', 'pass');

// Transaction example
$tm = new TransactionManager($pdo);
$result = $tm-&gt;transactional(function($pdo) {
    $pdo-&gt;exec("INSERT INTO users (name) VALUES ('John')");
    $pdo-&gt;exec("INSERT INTO logs (action) VALUES ('User created')");
    return true;
});

// Query builder example
$query = new QueryBuilder();
$sql = $query-&gt;select(['id', 'name', 'email'])
    -&gt;from('users')
    -&gt;join('profiles', 'users.id', '=', 'profiles.user_id')
    -&gt;where('status', 'active')
    -&gt;whereIn('role', ['admin', 'moderator'])
    -&gt;orderBy('created_at', 'DESC')
    -&gt;limit(10)
    -&gt;toSql();

echo $sql;
$results = $query-&gt;execute($pdo);

// Query optimization
$optimizer = new QueryOptimizer($pdo);
$plan = $optimizer-&gt;explain("SELECT * FROM large_table WHERE status = 'active'");
$suggestions = $optimizer-&gt;suggestOptimizations("SELECT * FROM large_table WHERE status = 'active'");
print_r($suggestions);</code></pre>
         </div>
        </section>
        <!-- Practice Exercise -->
        <section>
         <h2>Practice Exercise</h2>
         <div class="alert alert-success">
          <div class="alert-icon">üíª</div>
          <div class="alert-content">
           <div class="alert-title">Query Execution Challenges</div>
           <div class="alert-message">Complete these query execution tasks:<ol>
             <li>Execute a complex SELECT with JOINs</li>
             <li>Implement batch insert of 1000 records</li>
             <li>Create a transaction with multiple operations</li>
             <li>Build and execute dynamic queries safely</li>
             <li>Execute stored procedures with parameters</li>
             <li>Implement query result caching</li>
             <li>Create a query performance monitor</li>
             <li>Build a query builder with method chaining</li>
            </ol>
           </div>
          </div>
         </div>
        </section>
        <!-- Resources -->
        <section class="resources">
         <h2>Additional Resources</h2>
         <ul>
          <li>
           <a href="https://www.php.net/manual/en/pdo.query.php" target="_blank">PDO::query Documentation</a>
          </li>
          <li>
           <a href="https://www.php.net/manual/en/mysqli.query.php" target="_blank">mysqli::query Documentation</a>
          </li>
          <li>
           <a href="https://dev.mysql.com/doc/refman/8.0/en/execution-plan-information.html" target="_blank">MySQL EXPLAIN</a>
          </li>
          <li>
           <a href="https://use-the-index-luke.com/" target="_blank">SQL Performance Explained</a>
          </li>
         </ul>
        </section>
       </div>
       <!-- Lesson Navigation -->
       <div class="lesson-navigation">
        <a class="lesson-nav-button prev" href="/03module/pdo_vs_mysqli.html">
         <svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
          <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z">
          </path>
         </svg>
         <span>
          <small>Previous</small>
          <br/>PDO vs MySQLi</span>
        </a>
        <button class="complete-lesson-btn">Mark as Complete</button>
        <a class="lesson-nav-button next" href="/03module/prepared_statements.html">
         <span>
          <small>Next</small>
          <br/>Prepared Statements</span>
         <svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
          <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z">
          </path>
         </svg>
        </a>
       </div>
      </article>
     </div>
    </div>
   </main>
   <!-- Footer -->
   <footer class="site-footer" role="contentinfo">
    <div class="footer-container">
     <div class="footer-content">
      <div class="footer-section footer-about">
       <h3>PHP WordPress Development</h3>
       <p>Complete Web Development Course</p>
      </div>
      <div class="footer-section">
       <h4>Quick Links</h4>
       <ul class="footer-links">
        <li>
         <a href="/">Home</a>
        </li>
        <li>
         <a class="active" href="/module3.html">Module 3</a>
        </li>
        <li>
         <a href="/resources.html">Resources</a>
        </li>
       </ul>
      </div>
      <div class="footer-section">
       <h4>Support</h4>
       <ul class="footer-links">
        <li>
         <a href="/help.html">Help Center</a>
        </li>
        <li>
         <a href="/faq.html">FAQ</a>
        </li>
        <li>
         <a href="/contact.html">Contact</a>
        </li>
       </ul>
      </div>
     </div>
     <div class="footer-bottom">
      <div class="footer-bottom-content">
       <p class="copyright">¬© 2025 PHP WordPress Development Course</p>
       <nav class="footer-bottom-links">
        <a href="/privacy.html">Privacy</a>
        <span class="separator">|</span>
        <a href="/terms.html">Terms</a>
       </nav>
      </div>
     </div>
    </div>
   </footer>
  </div>
  <!-- Back to Top -->
  <button aria-label="Back to top" class="back-to-top" id="back-to-top">
   <svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="24">
    <path d="M12 19V5M12 5l-7 7M12 5l7 7">
    </path>
   </svg>
  </button>
  <!-- JavaScript -->
  <script src="/assets/js/navigation.js">
  </script>
  <script src="/assets/js/site-config.js">
  </script>
  <script src="/assets/js/sidebar-toggle.js">
  </script>
  <!-- Universal Mermaid Fix (Enhanced) -->
  <!-- Universal Mermaid Fix -->
  <script src="/assets/js/mermaid-universal-fix.js">
  </script>
 </body>
</html>
