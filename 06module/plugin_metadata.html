<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SEO Meta Tags -->
    <title>Plugin Metadata - Plugin Development - PHP WordPress Course</title>
    <meta name="description" content="Master WordPress plugin metadata including headers, version information, and plugin data management. Learn to properly document and organize plugin information.">
    <meta name="keywords" content="PHP, WordPress, plugin metadata, plugin headers, version control, plugin information">
    <meta name="author" content="PHP WordPress Course">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/sidebar-enhanced.css">
    <link rel="stylesheet" href="/assets/css/sidebar-toggle.css">
    
    <!-- Custom styles for metadata lesson -->
    <style>
        .metadata-header {
            background: linear-gradient(135deg, #a855f7 0%, #9333ea 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .metadata-concept {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .metadata-concept h3 {
            color: #a855f7;
            margin-top: 0;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 1rem;
        }

        .metadata-card {
            background: linear-gradient(135deg, #faf5ff 0%, #f3e8ff 100%);
            border: 2px solid #d8b4fe;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .metadata-card h4 {
            color: #7c3aed;
            margin-top: 0;
        }

        .code-example {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }

        .code-example h4 {
            color: #a5b4fc;
            margin-top: 0;
            border-bottom: 1px solid #475569;
            padding-bottom: 0.5rem;
        }

        .metadata-table {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            margin: 2rem 0;
        }

        .metadata-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .metadata-table th {
            background: #f3f4f6;
            padding: 1rem;
            text-align: left;
            font-weight: bold;
            border-bottom: 2px solid #e5e7eb;
        }

        .metadata-table td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .metadata-table code {
            background: #1e293b;
            color: #60a5fa;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.9em;
        }

        .api-section {
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .api-section h3 {
            color: #0369a1;
            margin-top: 0;
        }

        .best-practice {
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
        }

        .best-practice h4 {
            color: #0369a1;
            margin-top: 0;
        }

        .warning-box {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
        }

        .warning-box::before {
            content: "‚ö†Ô∏è Warning: ";
            font-weight: bold;
            color: #92400e;
        }

        .tip-box {
            background: #f0fdf4;
            border: 2px solid #86efac;
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
        }

        .tip-box::before {
            content: "üí° Tip: ";
            font-weight: bold;
            color: #166534;
        }

        .version-diagram {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 2rem;
            margin: 2rem 0;
            text-align: center;
        }

        .version-box {
            display: inline-block;
            background: #f3f4f6;
            border: 2px solid #9333ea;
            border-radius: 8px;
            padding: 1rem 2rem;
            margin: 0.5rem;
            font-family: monospace;
            font-size: 1.2rem;
        }

        .version-label {
            display: block;
            font-size: 0.8rem;
            color: #6b7280;
            margin-top: 0.5rem;
        }

        @media (max-width: 768px) {
            .metadata-table {
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <!-- Skip to main content -->
    <a href="#main-content" class="sr-only">Skip to main content</a>
    
    <div class="page-wrapper">
        <!-- Header -->
        <header class="site-header" role="banner">
            <div class="header-container">
                <div class="site-branding">
                    <a href="/" class="site-logo">
                        <h1 class="site-title">PHP WordPress Development</h1>
                    </a>
                </div>
                
                <nav class="main-navigation" role="navigation" aria-label="Main navigation">
                    <button class="mobile-menu-btn" aria-label="Toggle navigation" aria-expanded="false">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    
                    <div class="nav-menu">
                        <ul class="nav-list">
                            <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
                            <li class="nav-item dropdown">
                                <button class="nav-link dropdown-toggle active" aria-haspopup="true">Modules</button>
                                <div class="dropdown-menu">
                                    <a href="/module1.html" class="dropdown-item">Module 1: Web Fundamentals</a>
                                    <a href="/module2.html" class="dropdown-item">Module 2: PHP Fundamentals</a>
                                    <a href="/module3.html" class="dropdown-item">Module 3: MySQL Database</a>
                                    <a href="/module4.html" class="dropdown-item">Module 4: WordPress & Docker</a>
                                    <a href="/module5.html" class="dropdown-item">Module 5: Theme Development</a>
                                    <a href="/module6.html" class="dropdown-item active">Module 6: Plugin Development</a>
                                    <a href="/module7.html" class="dropdown-item">Module 7: Advanced WordPress</a>
                                    <a href="/module8.html" class="dropdown-item">Module 8: Deployment</a>
                                    <a href="/module9.html" class="dropdown-item">Module 9: Final Project</a>
                                </div>
                            </li>
                            <li class="nav-item"><a href="/resources.html" class="nav-link">Resources</a></li>
                            <li class="nav-item"><a href="/about.html" class="nav-link">About</a></li>
                        </ul>
                    </div>
                </nav>
                
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                        <input type="search" class="search-input" placeholder="Search lessons..." aria-label="Search">
                    </div>
                    <div class="search-results"></div>
                </div>
            </div>
        </header>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-header">
                <h2 class="progress-title">Course Progress</h2>
                <span class="progress-text">Loading...</span>
            </div>
            <div class="progress-bar">
                <div class="progress-bar-fill">
                    <span class="progress-bar-text"></span>
                </div>
            </div>
        </div>
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb container" aria-label="Breadcrumb">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <a href="/module6.html">Module 6</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <span aria-current="page">Plugin Metadata</span>
                </li>
            </ol>
        </nav>
        
        <!-- Main Content -->
        <main id="main-content" class="main-content" role="main">
            <div class="container">
                <div class="content-with-sidebar">
                    <!-- Sidebar -->
                    <aside class="sidebar">
                        <div class="sidebar-nav">
                            <h3 class="sidebar-title">Module 6: Plugin Development</h3>
                            <div class="sidebar-section">
                                <h4 class="sidebar-section-title">Session 1: Plugin Development Introduction</h4>
                                <ul class="sidebar-menu">
                                    <li><a class="sidebar-link" href="/06module/wordpress_plugin_architecture_overview.html">WordPress Plugin Architecture Overview</a></li>
                                    <li><a class="sidebar-link" href="/06module/types_wordpress_plugins.html">Types of WordPress Plugins</a></li>
                                    <li><a class="sidebar-link" href="/06module/plugin_requirements_standards.html">Plugin Requirements and Standards</a></li>
                                    <li><a class="sidebar-link" href="/06module/creating_basic_plugin_structure.html">Creating a Basic Plugin Structure</a></li>
                                    <li><a class="sidebar-link" href="/06module/required_files_headers.html">Required Files and Headers</a></li>
                                    <li class="active"><a class="sidebar-link active" href="/06module/plugin_metadata.html">Plugin Metadata</a></li>
                                    <li><a class="sidebar-link" href="/06module/activation_deactivation_hooks.html">Activation and Deactivation Hooks</a></li>
                                    <li><a class="sidebar-link" href="/06module/plugin_file_organization.html">Plugin File Organization</a></li>
                                    <li><a class="sidebar-link" href="/06module/homework_create_basic_plugin.html">Homework: Create a Basic WordPress Plugin</a></li>
                                </ul>
                            </div>
                            <div class="sidebar-section">
                                <h4 class="sidebar-section-title">Quick Links</h4>
                                <ul class="sidebar-menu">
                                    <li><a class="sidebar-link" href="/module6.html">Module Overview</a></li>
                                    <li><a class="sidebar-link" href="/06module/required_files_headers.html">‚Üê Previous Lesson</a></li>
                                    <li><a class="sidebar-link next-session" href="/06module/activation_deactivation_hooks.html">Next Lesson ‚Üí</a></li>
                                    <li><a class="sidebar-link" href="/">‚Üê Course Home</a></li>
                                    <li><a class="sidebar-link" href="/resources.html">Resources</a></li>
                                </ul>
                            </div>
                        </div>
                    </aside>
                    
                    <!-- Main Lesson Content -->
                    <article class="lesson-content">
                        <div class="metadata-header">
                            <h1>üìä Plugin Metadata</h1>
                            <p class="lead">Managing plugin information and data</p>
                            <p>Learn to work with plugin metadata, versioning, and information management</p>
                        </div>

                        <!-- Learning Objectives -->
                        <div class="lesson-objectives">
                            <h2>Learning Objectives</h2>
                            <ul>
                                <li>Understand plugin metadata structure</li>
                                <li>Access and use plugin data programmatically</li>
                                <li>Implement proper versioning strategies</li>
                                <li>Store and retrieve plugin information</li>
                                <li>Work with WordPress plugin APIs</li>
                                <li>Handle updates and migrations</li>
                                <li>Display plugin information</li>
                                <li>Manage plugin dependencies</li>
                            </ul>
                        </div>
                        
                        <!-- Lesson Body -->
                        <div class="lesson-body">
                            <!-- Introduction -->
                            <section>
                                <h2>What is Plugin Metadata?</h2>
                                <p class="lead">Plugin metadata is information about your plugin that WordPress uses for identification, display, and management. This includes everything from the plugin name to version numbers and dependencies.</p>
                                
                                <div class="metadata-concept">
                                    <h3>Types of Metadata</h3>
                                    <ul>
                                        <li><strong>Header Metadata:</strong> Information in the plugin header comment</li>
                                        <li><strong>Runtime Metadata:</strong> Data available during plugin execution</li>
                                        <li><strong>Stored Metadata:</strong> Plugin settings and options in database</li>
                                        <li><strong>File Metadata:</strong> Information in readme.txt and other files</li>
                                        <li><strong>API Metadata:</strong> Data exposed through WordPress APIs</li>
                                    </ul>
                                </div>
                            </section>

                            <!-- Accessing Plugin Data -->
                            <section>
                                <h2>Accessing Plugin Data</h2>
                                
                                <div class="code-example">
                                    <h4>Getting Plugin Data</h4>
                                    <pre><code class="language-php">&lt;?php
// Get data for current plugin
if ( ! function_exists( 'get_plugin_data' ) ) {
    require_once ABSPATH . 'wp-admin/includes/plugin.php';
}

$plugin_data = get_plugin_data( __FILE__ );

// Available data
echo $plugin_data['Name'];        // Plugin Name
echo $plugin_data['PluginURI'];   // Plugin URI
echo $plugin_data['Version'];     // Version
echo $plugin_data['Description']; // Description
echo $plugin_data['Author'];      // Author
echo $plugin_data['AuthorURI'];   // Author URI
echo $plugin_data['TextDomain'];  // Text Domain
echo $plugin_data['DomainPath'];  // Domain Path
echo $plugin_data['Network'];     // Network
echo $plugin_data['RequiresWP']; // Requires at least
echo $plugin_data['RequiresPHP']; // Requires PHP
echo $plugin_data['UpdateURI'];   // Update URI

// Full array structure
print_r( $plugin_data );
/*
Array (
    [Name] => My Plugin
    [PluginURI] => https://example.com
    [Version] => 1.0.0
    [Description] => Plugin description
    [Author] => John Doe
    [AuthorURI] => https://johndoe.com
    [TextDomain] => my-plugin
    [DomainPath] => /languages
    [Network] => false
    [RequiresWP] => 5.2
    [RequiresPHP] => 7.2
    [UpdateURI] => 
    [Title] => My Plugin
    [AuthorName] => John Doe
)
*/</code></pre>
                                </div>

                                <div class="code-example">
                                    <h4>Getting All Plugins Data</h4>
                                    <pre><code class="language-php">&lt;?php
// Get all plugins
$all_plugins = get_plugins();

// Loop through plugins
foreach ( $all_plugins as $plugin_file => $plugin_data ) {
    echo $plugin_data['Name'] . ' (' . $plugin_data['Version'] . ')&lt;br&gt;';
}

// Get active plugins
$active_plugins = get_option( 'active_plugins' );

// Check if specific plugin is active
$plugin = 'plugin-folder/plugin-file.php';
if ( in_array( $plugin, $active_plugins ) ) {
    echo 'Plugin is active';
}

// Get plugin status
$plugin_status = is_plugin_active( 'plugin-folder/plugin-file.php' ) ? 'active' : 'inactive';

// For multisite
if ( is_multisite() ) {
    $network_plugins = get_site_option( 'active_sitewide_plugins' );
}</code></pre>
                                </div>
                            </section>

                            <!-- Plugin Versioning -->
                            <section>
                                <h2>Plugin Versioning</h2>
                                
                                <div class="version-diagram">
                                    <h3>Semantic Versioning</h3>
                                    <div>
                                        <span class="version-box">
                                            1
                                            <span class="version-label">MAJOR</span>
                                        </span>
                                        <span style="font-size: 2rem;">.</span>
                                        <span class="version-box">
                                            2
                                            <span class="version-label">MINOR</span>
                                        </span>
                                        <span style="font-size: 2rem;">.</span>
                                        <span class="version-box">
                                            3
                                            <span class="version-label">PATCH</span>
                                        </span>
                                    </div>
                                </div>

                                <div class="metadata-card">
                                    <h4>Version Number Guidelines</h4>
                                    <ul>
                                        <li><strong>MAJOR (1.x.x):</strong> Incompatible API changes</li>
                                        <li><strong>MINOR (x.2.x):</strong> Add functionality (backwards-compatible)</li>
                                        <li><strong>PATCH (x.x.3):</strong> Bug fixes (backwards-compatible)</li>
                                    </ul>
                                </div>

                                <div class="code-example">
                                    <h4>Version Management</h4>
                                    <pre><code class="language-php">&lt;?php
// Define version constant
define( 'MY_PLUGIN_VERSION', '1.2.3' );

// Store version in database
add_option( 'my_plugin_version', MY_PLUGIN_VERSION );

// Check for version updates
$installed_version = get_option( 'my_plugin_version', '0.0.0' );
$current_version = MY_PLUGIN_VERSION;

if ( version_compare( $installed_version, $current_version, '<' ) ) {
    // Perform upgrade routines
    my_plugin_upgrade( $installed_version, $current_version );
    
    // Update stored version
    update_option( 'my_plugin_version', $current_version );
}

// Version comparison function
function my_plugin_upgrade( $old_version, $new_version ) {
    // Upgrade from versions older than 1.0.0
    if ( version_compare( $old_version, '1.0.0', '<' ) ) {
        // Upgrade database schema
        my_plugin_upgrade_100();
    }
    
    // Upgrade from versions older than 1.2.0
    if ( version_compare( $old_version, '1.2.0', '<' ) ) {
        // Add new options
        my_plugin_upgrade_120();
    }
    
    // Upgrade from versions older than 2.0.0
    if ( version_compare( $old_version, '2.0.0', '<' ) ) {
        // Major upgrade changes
        my_plugin_upgrade_200();
    }
}</code></pre>
                                </div>
                            </section>

                            <!-- Storing Plugin Metadata -->
                            <section>
                                <h2>Storing Plugin Metadata</h2>
                                
                                <div class="code-example">
                                    <h4>Options API for Metadata</h4>
                                    <pre><code class="language-php">&lt;?php
// Store plugin metadata
function my_plugin_store_metadata() {
    $metadata = array(
        'version'          => MY_PLUGIN_VERSION,
        'installed_date'   => current_time( 'mysql' ),
        'last_updated'     => current_time( 'mysql' ),
        'activation_count' => 0,
        'settings'         => array(
            'feature_enabled' => true,
            'api_key'        => '',
            'display_mode'   => 'standard'
        )
    );
    
    add_option( 'my_plugin_metadata', $metadata );
}

// Retrieve metadata
function my_plugin_get_metadata( $key = null ) {
    $metadata = get_option( 'my_plugin_metadata', array() );
    
    if ( $key && isset( $metadata[$key] ) ) {
        return $metadata[$key];
    }
    
    return $metadata;
}

// Update metadata
function my_plugin_update_metadata( $key, $value ) {
    $metadata = get_option( 'my_plugin_metadata', array() );
    $metadata[$key] = $value;
    $metadata['last_updated'] = current_time( 'mysql' );
    
    update_option( 'my_plugin_metadata', $metadata );
}

// Track plugin usage
function my_plugin_track_activation() {
    $count = my_plugin_get_metadata( 'activation_count' );
    my_plugin_update_metadata( 'activation_count', $count + 1 );
}</code></pre>
                                </div>

                                <div class="code-example">
                                    <h4>Custom Metadata Table</h4>
                                    <pre><code class="language-php">&lt;?php
// Create custom metadata table
function my_plugin_create_metadata_table() {
    global $wpdb;
    
    $table_name = $wpdb->prefix . 'my_plugin_meta';
    $charset_collate = $wpdb->get_charset_collate();
    
    $sql = "CREATE TABLE $table_name (
        id mediumint(9) NOT NULL AUTO_INCREMENT,
        meta_key varchar(255) NOT NULL,
        meta_value longtext NOT NULL,
        created_at datetime DEFAULT CURRENT_TIMESTAMP,
        updated_at datetime DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
        PRIMARY KEY (id),
        UNIQUE KEY meta_key (meta_key)
    ) $charset_collate;";
    
    require_once( ABSPATH . 'wp-admin/includes/upgrade.php' );
    dbDelta( $sql );
}

// Store metadata in custom table
function my_plugin_set_meta( $key, $value ) {
    global $wpdb;
    $table_name = $wpdb->prefix . 'my_plugin_meta';
    
    $wpdb->replace(
        $table_name,
        array(
            'meta_key'   => $key,
            'meta_value' => maybe_serialize( $value )
        ),
        array( '%s', '%s' )
    );
}

// Retrieve metadata from custom table
function my_plugin_get_meta( $key, $default = null ) {
    global $wpdb;
    $table_name = $wpdb->prefix . 'my_plugin_meta';
    
    $value = $wpdb->get_var( $wpdb->prepare(
        "SELECT meta_value FROM $table_name WHERE meta_key = %s",
        $key
    ) );
    
    return $value ? maybe_unserialize( $value ) : $default;
}</code></pre>
                                </div>
                            </section>

                            <!-- Plugin Information Display -->
                            <section>
                                <h2>Displaying Plugin Information</h2>
                                
                                <div class="code-example">
                                    <h4>Admin Page with Plugin Info</h4>
                                    <pre><code class="language-php">&lt;?php
// Display plugin information page
function my_plugin_info_page() {
    $plugin_data = get_plugin_data( MY_PLUGIN_FILE );
    $metadata = my_plugin_get_metadata();
    ?>
    &lt;div class="wrap"&gt;
        &lt;h1&gt;&lt;?php echo esc_html( $plugin_data['Name'] ); ?&gt;&lt;/h1&gt;
        
        &lt;div class="card"&gt;
            &lt;h2&gt;Plugin Information&lt;/h2&gt;
            &lt;table class="form-table"&gt;
                &lt;tr&gt;
                    &lt;th&gt;Version&lt;/th&gt;
                    &lt;td&gt;&lt;?php echo esc_html( $plugin_data['Version'] ); ?&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;Author&lt;/th&gt;
                    &lt;td&gt;
                        &lt;a href="&lt;?php echo esc_url( $plugin_data['AuthorURI'] ); ?&gt;"&gt;
                            &lt;?php echo esc_html( $plugin_data['Author'] ); ?&gt;
                        &lt;/a&gt;
                    &lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;Description&lt;/th&gt;
                    &lt;td&gt;&lt;?php echo esc_html( $plugin_data['Description'] ); ?&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;Requires WordPress&lt;/th&gt;
                    &lt;td&gt;&lt;?php echo esc_html( $plugin_data['RequiresWP'] ); ?&gt; or higher&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;Requires PHP&lt;/th&gt;
                    &lt;td&gt;&lt;?php echo esc_html( $plugin_data['RequiresPHP'] ); ?&gt; or higher&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;Installed&lt;/th&gt;
                    &lt;td&gt;&lt;?php echo esc_html( $metadata['installed_date'] ); ?&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;Last Updated&lt;/th&gt;
                    &lt;td&gt;&lt;?php echo esc_html( $metadata['last_updated'] ); ?&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;
        &lt;/div&gt;
        
        &lt;div class="card"&gt;
            &lt;h2&gt;System Information&lt;/h2&gt;
            &lt;table class="form-table"&gt;
                &lt;tr&gt;
                    &lt;th&gt;WordPress Version&lt;/th&gt;
                    &lt;td&gt;&lt;?php echo get_bloginfo( 'version' ); ?&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;PHP Version&lt;/th&gt;
                    &lt;td&gt;&lt;?php echo phpversion(); ?&gt;&lt;/td&gt;
                &lt;/tr&gt;
                &lt;tr&gt;
                    &lt;th&gt;MySQL Version&lt;/th&gt;
                    &lt;td&gt;&lt;?php global $wpdb; echo $wpdb->db_version(); ?&gt;&lt;/td&gt;
                &lt;/tr&gt;
            &lt;/table&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    &lt;?php
}</code></pre>
                                </div>
                            </section>

                            <!-- Plugin Dependencies -->
                            <section>
                                <h2>Managing Plugin Dependencies</h2>
                                
                                <div class="code-example">
                                    <h4>Checking for Dependencies</h4>
                                    <pre><code class="language-php">&lt;?php
// Check plugin dependencies
function my_plugin_check_dependencies() {
    $missing = array();
    
    // Check for required plugins
    $required_plugins = array(
        'woocommerce/woocommerce.php' => 'WooCommerce',
        'advanced-custom-fields/acf.php' => 'Advanced Custom Fields'
    );
    
    foreach ( $required_plugins as $plugin => $name ) {
        if ( ! is_plugin_active( $plugin ) ) {
            $missing[] = $name;
        }
    }
    
    // Check PHP version
    if ( version_compare( PHP_VERSION, '7.2', '<' ) ) {
        $missing[] = 'PHP 7.2 or higher';
    }
    
    // Check WordPress version
    if ( version_compare( get_bloginfo( 'version' ), '5.2', '<' ) ) {
        $missing[] = 'WordPress 5.2 or higher';
    }
    
    // Check PHP extensions
    $required_extensions = array( 'curl', 'json', 'mbstring' );
    foreach ( $required_extensions as $ext ) {
        if ( ! extension_loaded( $ext ) ) {
            $missing[] = 'PHP ' . $ext . ' extension';
        }
    }
    
    return $missing;
}

// Display dependency notices
function my_plugin_dependency_notice() {
    $missing = my_plugin_check_dependencies();
    
    if ( ! empty( $missing ) ) {
        ?>
        &lt;div class="notice notice-error"&gt;
            &lt;p&gt;&lt;strong&gt;My Plugin - Missing Dependencies:&lt;/strong&gt;&lt;/p&gt;
            &lt;ul&gt;
                &lt;?php foreach ( $missing as $dependency ) : ?&gt;
                    &lt;li&gt;&lt;?php echo esc_html( $dependency ); ?&gt;&lt;/li&gt;
                &lt;?php endforeach; ?&gt;
            &lt;/ul&gt;
        &lt;/div&gt;
        &lt;?php
    }
}
add_action( 'admin_notices', 'my_plugin_dependency_notice' );</code></pre>
                                </div>
                            </section>

                            <!-- WordPress Plugin API -->
                            <section>
                                <div class="api-section">
                                    <h3>WordPress Plugin API Functions</h3>
                                    
                                    <div class="metadata-table">
                                        <table>
                                            <thead>
                                                <tr>
                                                    <th>Function</th>
                                                    <th>Description</th>
                                                    <th>Usage</th>
                                                </tr>
                                            </thead>
                                            <tbody>
                                                <tr>
                                                    <td><code>get_plugin_data()</code></td>
                                                    <td>Get plugin header data</td>
                                                    <td>Read plugin information</td>
                                                </tr>
                                                <tr>
                                                    <td><code>get_plugins()</code></td>
                                                    <td>Get all installed plugins</td>
                                                    <td>List plugins</td>
                                                </tr>
                                                <tr>
                                                    <td><code>is_plugin_active()</code></td>
                                                    <td>Check if plugin is active</td>
                                                    <td>Dependency checking</td>
                                                </tr>
                                                <tr>
                                                    <td><code>activate_plugin()</code></td>
                                                    <td>Activate a plugin</td>
                                                    <td>Programmatic activation</td>
                                                </tr>
                                                <tr>
                                                    <td><code>deactivate_plugins()</code></td>
                                                    <td>Deactivate plugins</td>
                                                    <td>Programmatic deactivation</td>
                                                </tr>
                                                <tr>
                                                    <td><code>plugin_basename()</code></td>
                                                    <td>Get plugin basename</td>
                                                    <td>Plugin identification</td>
                                                </tr>
                                                <tr>
                                                    <td><code>plugins_url()</code></td>
                                                    <td>Get plugin directory URL</td>
                                                    <td>Asset URLs</td>
                                                </tr>
                                                <tr>
                                                    <td><code>plugin_dir_path()</code></td>
                                                    <td>Get plugin directory path</td>
                                                    <td>File includes</td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </section>

                            <!-- Update Management -->
                            <section>
                                <h2>Update Management</h2>
                                
                                <div class="code-example">
                                    <h4>Custom Update Checker</h4>
                                    <pre><code class="language-php">&lt;?php
// Check for plugin updates
class My_Plugin_Updater {
    
    private $plugin_slug;
    private $version;
    private $update_url;
    
    public function __construct( $plugin_slug, $version, $update_url ) {
        $this->plugin_slug = $plugin_slug;
        $this->version = $version;
        $this->update_url = $update_url;
        
        add_filter( 'pre_set_site_transient_update_plugins', array( $this, 'check_update' ) );
        add_filter( 'plugins_api', array( $this, 'plugin_info' ), 10, 3 );
    }
    
    public function check_update( $transient ) {
        if ( empty( $transient->checked ) ) {
            return $transient;
        }
        
        // Check remote version
        $remote_data = $this->get_remote_data();
        
        if ( $remote_data && version_compare( $this->version, $remote_data->version, '<' ) ) {
            $transient->response[ $this->plugin_slug ] = (object) array(
                'slug'        => dirname( $this->plugin_slug ),
                'new_version' => $remote_data->version,
                'url'         => $remote_data->url,
                'package'     => $remote_data->download_url
            );
        }
        
        return $transient;
    }
    
    private function get_remote_data() {
        $response = wp_remote_get( $this->update_url );
        
        if ( ! is_wp_error( $response ) ) {
            return json_decode( wp_remote_retrieve_body( $response ) );
        }
        
        return false;
    }
    
    public function plugin_info( $res, $action, $args ) {
        if ( $action !== 'plugin_information' ) {
            return $res;
        }
        
        if ( $args->slug !== dirname( $this->plugin_slug ) ) {
            return $res;
        }
        
        $remote_data = $this->get_remote_data();
        
        if ( $remote_data ) {
            $res = (object) array(
                'name'          => $remote_data->name,
                'slug'          => $args->slug,
                'version'       => $remote_data->version,
                'author'        => $remote_data->author,
                'homepage'      => $remote_data->url,
                'download_link' => $remote_data->download_url,
                'sections'      => array(
                    'description' => $remote_data->description,
                    'changelog'   => $remote_data->changelog
                )
            );
        }
        
        return $res;
    }
}

// Initialize updater
new My_Plugin_Updater(
    plugin_basename( __FILE__ ),
    MY_PLUGIN_VERSION,
    'https://api.example.com/plugin-update'
);</code></pre>
                                </div>
                            </section>

                            <!-- Best Practices -->
                            <section>
                                <div class="best-practice">
                                    <h4>Metadata Best Practices</h4>
                                    <ul>
                                        <li><strong>Version consistently:</strong> Use semantic versioning everywhere</li>
                                        <li><strong>Cache metadata:</strong> Don't read files repeatedly</li>
                                        <li><strong>Validate data:</strong> Always validate metadata before use</li>
                                        <li><strong>Document changes:</strong> Maintain changelog for versions</li>
                                        <li><strong>Track usage:</strong> Monitor plugin activation and usage</li>
                                        <li><strong>Handle upgrades:</strong> Migrate data between versions</li>
                                        <li><strong>Check dependencies:</strong> Verify requirements are met</li>
                                        <li><strong>Provide fallbacks:</strong> Handle missing metadata gracefully</li>
                                    </ul>
                                </div>

                                <div class="warning-box">
                                    Always escape and sanitize metadata when displaying or using it, especially if it comes from user input or external sources.
                                </div>

                                <div class="tip-box">
                                    Store a copy of critical metadata in the database on activation to avoid reading files on every page load.
                                </div>
                            </section>

                            <!-- Practice Exercise -->
                            <section>
                                <h2>Practice Exercise</h2>
                                <div class="alert alert-success">
                                    <div class="alert-icon">üíª</div>
                                    <div class="alert-content">
                                        <div class="alert-title">Implement Metadata Management</div>
                                        <div class="alert-message">
                                            <p>Create a comprehensive metadata system for your plugin:</p>
                                            <ol>
                                                <li>Extract and display all plugin header data</li>
                                                <li>Implement semantic versioning</li>
                                                <li>Create version upgrade system</li>
                                                <li>Store plugin metadata in database</li>
                                                <li>Track plugin activation count</li>
                                                <li>Check for dependencies</li>
                                                <li>Create plugin info admin page</li>
                                                <li>Display system requirements</li>
                                                <li>Implement update checker</li>
                                                <li>Add metadata caching</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Resources -->
                            <section class="resources">
                                <h2>Additional Resources</h2>
                                <ul>
                                    <li><a href="https://developer.wordpress.org/reference/functions/get_plugin_data/" target="_blank">get_plugin_data() Documentation</a></li>
                                    <li><a href="https://developer.wordpress.org/plugins/plugin-basics/header-requirements/" target="_blank">Plugin Header Requirements</a></li>
                                    <li><a href="https://semver.org/" target="_blank">Semantic Versioning Specification</a></li>
                                    <li><a href="https://developer.wordpress.org/reference/functions/get_plugins/" target="_blank">get_plugins() Documentation</a></li>
                                    <li><a href="https://developer.wordpress.org/plugins/plugin-basics/best-practices/" target="_blank">Plugin Best Practices</a></li>
                                    <li><a href="https://github.com/YahnisElsts/plugin-update-checker" target="_blank">Plugin Update Checker Library</a></li>
                                    <li><a href="https://developer.wordpress.org/apis/handbook/options/" target="_blank">Options API Handbook</a></li>
                                    <li><a href="https://developer.wordpress.org/reference/functions/wp_remote_get/" target="_blank">HTTP API Documentation</a></li>
                                </ul>
                            </section>
                        </div>

                        <!-- Lesson Navigation -->
                        <div class="lesson-navigation">
                            <a href="/06module/required_files_headers.html" class="lesson-nav-button prev">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
                                </svg>
                                <span>
                                    <small>Previous</small><br>
                                    Required Files and Headers
                                </span>
                            </a>
                            
                            <button class="complete-lesson-btn">
                                Mark as Complete
                            </button>
                            
                            <a href="/06module/activation_deactivation_hooks.html" class="lesson-nav-button next">
                                <span>
                                    <small>Next</small><br>
                                    Activation and Deactivation Hooks
                                </span>
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/>
                                </svg>
                            </a>
                        </div>
                    </article>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="site-footer" role="contentinfo">
            <div class="footer-container">
                <div class="footer-content">
                    <div class="footer-section footer-about">
                        <h3>PHP WordPress Development</h3>
                        <p>Complete Web Development Course</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <ul class="footer-links">
                            <li><a href="/">Home</a></li>
                            <li><a href="/module6.html">Module 6</a></li>
                            <li><a href="/resources.html">Resources</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Support</h4>
                        <ul class="footer-links">
                            <li><a href="/about.html">About</a></li>
                            <li><a href="/contact.html">Contact</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2024 PHP WordPress Course. All rights reserved.</p>
                    <p>This course material is for educational purposes only.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- JavaScript -->
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/sidebar-toggle.js"></script>
    <script src="/assets/js/progress-tracker.js"></script>
    <script src="/assets/js/search.js"></script>
    <script src="/assets/js/theme-toggle.js"></script>
</body>
</html>