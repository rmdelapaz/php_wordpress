<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plugin Testing Strategies - WordPress Plugin Development</title>
    <meta name="description" content="Learn comprehensive testing strategies for WordPress plugins. Master unit testing, integration testing, and automated testing workflows.">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/sidebar-enhanced.css">
    <style>
        .testing-header {
            background: linear-gradient(135deg, #10b981 0%, #059669 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }
        .testing-section {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }
        .code-example {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <header class="site-header">
            <div class="header-container">
                <div class="site-branding">
                    <a href="/" class="site-logo">
                        <h1 class="site-title">PHP WordPress Development</h1>
                    </a>
                </div>
            </div>
        </header>
        
        <nav class="breadcrumb container">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item"><a href="/">Home</a> /</li>
                <li class="breadcrumb-item"><a href="/module6.html">Module 6</a> /</li>
                <li class="breadcrumb-item">Plugin Testing Strategies</li>
            </ol>
        </nav>
        
        <main class="main-content">
            <div class="container">
                <div class="content-with-sidebar">
                    <aside class="sidebar">
                        <div class="sidebar-nav">
                            <h3 class="sidebar-title">Session 10: Distribution & Maintenance</h3>
                            <ul class="sidebar-menu">
                                <li><a href="/06module/plugin_development_workflow.html">Development Workflow</a></li>
                                <li><a href="/06module/version_control_plugins.html">Version Control</a></li>
                                <li class="active"><a href="/06module/plugin_testing_strategies.html">Testing Strategies</a></li>
                                <li><a href="/06module/documentation_best_practices.html">Documentation</a></li>
                                <li><a href="/06module/internationalization_localization.html">i18n & l10n</a></li>
                                <li><a href="/06module/preparing_distribution.html">Preparing for Distribution</a></li>
                                <li><a href="/06module/wordpress_org_guidelines.html">WordPress.org Guidelines</a></li>
                                <li><a href="/06module/plugin_maintenance_updates.html">Maintenance & Updates</a></li>
                                <li><a href="/06module/final_project.html">Final Project</a></li>
                            </ul>
                        </div>
                    </aside>
                    
                    <article class="lesson-content">
                        <div class="testing-header">
                            <h1>ðŸ§ª Plugin Testing Strategies</h1>
                            <p class="lead">Ensure plugin quality with comprehensive testing</p>
                        </div>

                        <div class="lesson-objectives">
                            <h2>Learning Objectives</h2>
                            <ul>
                                <li>Set up PHPUnit for WordPress plugins</li>
                                <li>Write effective unit tests</li>
                                <li>Implement integration testing</li>
                                <li>Perform acceptance testing</li>
                                <li>Use continuous integration</li>
                            </ul>
                        </div>
                        
                        <div class="lesson-body">
                            <section>
                                <h2>Types of Testing</h2>
                                <div class="testing-section">
                                    <h3>Testing Pyramid</h3>
                                    <ul>
                                        <li><strong>Unit Tests:</strong> Test individual functions/methods</li>
                                        <li><strong>Integration Tests:</strong> Test component interactions</li>
                                        <li><strong>Functional Tests:</strong> Test features end-to-end</li>
                                        <li><strong>Acceptance Tests:</strong> Test user scenarios</li>
                                    </ul>
                                </div>
                            </section>

                            <section>
                                <h2>PHPUnit Setup</h2>
                                <div class="testing-section">
                                    <h3>Installing PHPUnit</h3>
                                    <div class="code-example">
                                        <pre><code># Install PHPUnit via Composer
composer require --dev phpunit/phpunit ^9.0

# Install WordPress test suite
bash bin/install-wp-tests.sh wordpress_test root '' localhost latest

# phpunit.xml configuration
&lt;?xml version="1.0"?&gt;
&lt;phpunit
    bootstrap="tests/bootstrap.php"
    backupGlobals="false"
    colors="true"&gt;
    &lt;testsuites&gt;
        &lt;testsuite name="Plugin Test Suite"&gt;
            &lt;directory suffix="Test.php"&gt;./tests/&lt;/directory&gt;
        &lt;/testsuite&gt;
    &lt;/testsuites&gt;
&lt;/phpunit&gt;</code></pre>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h2>Writing Unit Tests</h2>
                                <div class="testing-section">
                                    <div class="code-example">
                                        <pre><code>class PluginTest extends WP_UnitTestCase {
    
    public function setUp(): void {
        parent::setUp();
        $this->plugin = new My_Plugin();
    }
    
    public function test_plugin_activation() {
        $this->plugin->activate();
        $this->assertTrue(get_option('my_plugin_activated'));
    }
    
    public function test_custom_post_type_registration() {
        $this->plugin->register_post_types();
        $this->assertTrue(post_type_exists('my_custom_type'));
    }
    
    public function test_sanitization() {
        $input = '<script>alert("XSS")</script>';
        $output = $this->plugin->sanitize_input($input);
        $this->assertEquals('', $output);
    }
    
    public function test_user_capabilities() {
        $user = $this->factory->user->create(['role' => 'subscriber']);
        wp_set_current_user($user);
        
        $this->assertFalse(current_user_can('manage_plugin'));
    }
}</code></pre>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h2>Integration Testing</h2>
                                <div class="testing-section">
                                    <div class="code-example">
                                        <pre><code>class IntegrationTest extends WP_UnitTestCase {
    
    public function test_database_operations() {
        global $wpdb;
        
        // Create test data
        $data = array(
            'name' => 'Test Item',
            'value' => 'test_value'
        );
        
        // Insert data
        $result = $wpdb->insert(
            $wpdb->prefix . 'my_table',
            $data
        );
        
        $this->assertNotFalse($result);
        
        // Retrieve data
        $retrieved = $wpdb->get_row(
            "SELECT * FROM {$wpdb->prefix}my_table WHERE name = 'Test Item'"
        );
        
        $this->assertEquals('test_value', $retrieved->value);
    }
    
    public function test_ajax_handler() {
        // Set up AJAX request
        $_POST['action'] = 'my_ajax_action';
        $_POST['nonce'] = wp_create_nonce('my_ajax_nonce');
        $_POST['data'] = 'test_data';
        
        // Capture output
        ob_start();
        $this->plugin->ajax_handler();
        $response = ob_get_clean();
        
        $json = json_decode($response, true);
        $this->assertTrue($json['success']);
    }
}</code></pre>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h2>JavaScript Testing</h2>
                                <div class="testing-section">
                                    <h3>Jest Configuration</h3>
                                    <div class="code-example">
                                        <pre><code>// jest.config.js
module.exports = {
  testEnvironment: 'jsdom',
  setupFilesAfterEnv: ['<rootDir>/tests/jest-setup.js'],
  testMatch: ['**/tests/js/**/*.test.js'],
  collectCoverageFrom: [
    'assets/js/**/*.js',
    '!assets/js/**/*.min.js'
  ]
};

// Example test
describe('Plugin JavaScript', () => {
  test('validates email correctly', () => {
    const isValid = validateEmail('test@example.com');
    expect(isValid).toBe(true);
  });
  
  test('handles AJAX response', async () => {
    const response = await fetchData();
    expect(response.success).toBe(true);
  });
});</code></pre>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h2>Automated Testing with CI/CD</h2>
                                <div class="testing-section">
                                    <h3>GitHub Actions Workflow</h3>
                                    <div class="code-example">
                                        <pre><code># .github/workflows/tests.yml
name: Plugin Tests

on: [push, pull_request]

jobs:
  test:
    runs-on: ubuntu-latest
    
    strategy:
      matrix:
        php: [7.4, 8.0, 8.1]
        wordpress: [5.9, 6.0, latest]
    
    steps:
      - uses: actions/checkout@v2
      
      - name: Setup PHP
        uses: shivammathur/setup-php@v2
        with:
          php-version: ${{ matrix.php }}
      
      - name: Install dependencies
        run: composer install
      
      - name: Setup WordPress tests
        run: |
          bash bin/install-wp-tests.sh wordpress_test root root localhost ${{ matrix.wordpress }}
      
      - name: Run PHPUnit
        run: vendor/bin/phpunit
      
      - name: Run PHPCS
        run: vendor/bin/phpcs</code></pre>
                                    </div>
                                </div>
                            </section>

                            <section>
                                <h2>Manual Testing Checklist</h2>
                                <ul>
                                    <li>âœ“ Plugin activation/deactivation</li>
                                    <li>âœ“ All admin pages load correctly</li>
                                    <li>âœ“ Forms submit properly</li>
                                    <li>âœ“ AJAX functionality works</li>
                                    <li>âœ“ Shortcodes render correctly</li>
                                    <li>âœ“ Widgets function properly</li>
                                    <li>âœ“ Database operations succeed</li>
                                    <li>âœ“ Error handling works</li>
                                    <li>âœ“ Works with different themes</li>
                                    <li>âœ“ Compatible with popular plugins</li>
                                </ul>
                            </section>

                            <section class="resources">
                                <h2>Resources</h2>
                                <ul>
                                    <li><a href="https://make.wordpress.org/core/handbook/testing/automated-testing/phpunit/">WordPress PHPUnit Documentation</a></li>
                                    <li><a href="https://phpunit.de/documentation.html">PHPUnit Documentation</a></li>
                                    <li><a href="https://jestjs.io/">Jest Testing Framework</a></li>
                                </ul>
                            </section>
                        </div>

                        <div class="lesson-navigation">
                            <a href="/06module/version_control_plugins.html" class="lesson-nav-button prev">Previous: Version Control</a>
                            <button class="complete-lesson-btn">Mark as Complete</button>
                            <a href="/06module/documentation_best_practices.html" class="lesson-nav-button next">Next: Documentation</a>
                        </div>
                    </article>
                </div>
            </div>
        </main>

        <footer class="site-footer">
            <div class="footer-container">
                <p>&copy; 2024 PHP WordPress Course. All rights reserved.</p>
            </div>
        </footer>
    </div>
    
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/progress-tracker.js"></script>
</body>
</html>