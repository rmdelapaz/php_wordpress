        &lt;/div&gt;
    &lt;?php endif; ?&gt;
    
    &lt;?php if ( $free_event === 'yes' ) : ?&gt;
        &lt;div class="event-price"&gt;
            &lt;strong&gt;Price:&lt;/strong&gt; FREE
        &lt;/div&gt;
    &lt;?php elseif ( $ticket_price ) : ?&gt;
        &lt;div class="event-price"&gt;
            &lt;strong&gt;Price:&lt;/strong&gt; $&lt;?php echo esc_html( number_format( $ticket_price, 2 ) ); ?&gt;
        &lt;/div&gt;
    &lt;?php endif; ?&gt;
    
    &lt;?php if ( $capacity ) : ?&gt;
        &lt;div class="event-capacity"&gt;
            &lt;strong&gt;Capacity:&lt;/strong&gt; &lt;?php echo esc_html( $capacity ); ?&gt; attendees
        &lt;/div&gt;
    &lt;?php endif; ?&gt;
&lt;/div&gt;</code></pre>
                                    </div>
                                </div>

                                <div class="metabox-concept">
                                    <h3>Creating a Shortcode for Custom Fields</h3>
                                    
                                    <div class="code-example">
                                        <pre><code class="language-php">// Create shortcode to display event details
function event_details_shortcode( $atts ) {
    $atts = shortcode_atts( array(
        'id' => get_the_ID(),
        'fields' => 'all'
    ), $atts );
    
    $post_id = intval( $atts['id'] );
    
    // Get event data
    $event_data = array(
        'start_date' => get_post_meta( $post_id, '_event_start_date', true ),
        'start_time' => get_post_meta( $post_id, '_event_start_time', true ),
        'venue' => get_post_meta( $post_id, '_event_venue', true ),
        'ticket_price' => get_post_meta( $post_id, '_event_ticket_price', true ),
        'free_event' => get_post_meta( $post_id, '_event_free', true ),
    );
    
    ob_start();
    ?>
    
    <div class="event-info-box">
        <?php if ( $event_data['start_date'] ) : ?>
            <p><strong>Date:</strong> <?php echo esc_html( date( 'F j, Y', strtotime( $event_data['start_date'] ) ) ); ?></p>
        <?php endif; ?>
        
        <?php if ( $event_data['start_time'] ) : ?>
            <p><strong>Time:</strong> <?php echo esc_html( date( 'g:i A', strtotime( $event_data['start_time'] ) ) ); ?></p>
        <?php endif; ?>
        
        <?php if ( $event_data['venue'] ) : ?>
            <p><strong>Venue:</strong> <?php echo esc_html( $event_data['venue'] ); ?></p>
        <?php endif; ?>
        
        <?php if ( $event_data['free_event'] === 'yes' ) : ?>
            <p><strong>Price:</strong> FREE</p>
        <?php elseif ( $event_data['ticket_price'] ) : ?>
            <p><strong>Price:</strong> $<?php echo esc_html( number_format( $event_data['ticket_price'], 2 ) ); ?></p>
        <?php endif; ?>
    </div>
    
    <?php
    return ob_get_clean();
}
add_shortcode( 'event_details', 'event_details_shortcode' );

// Usage: [event_details] or [event_details id="123"]</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- ACF Comparison -->
                            <section>
                                <h2>Custom Code vs Advanced Custom Fields (ACF)</h2>
                                
                                <div class="acf-comparison">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Aspect</th>
                                                <th>Custom Code</th>
                                                <th>ACF Plugin</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Setup Time</strong></td>
                                                <td>Longer - requires coding</td>
                                                <td>Quick - GUI interface</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Flexibility</strong></td>
                                                <td>Complete control</td>
                                                <td>Limited to ACF features</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Performance</strong></td>
                                                <td>Lightweight</td>
                                                <td>Additional overhead</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Cost</strong></td>
                                                <td>Free</td>
                                                <td>Free/Pro ($49+)</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Field Types</strong></td>
                                                <td>Build what you need</td>
                                                <td>30+ pre-built types</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Maintenance</strong></td>
                                                <td>You maintain the code</td>
                                                <td>Plugin updates</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Learning Curve</strong></td>
                                                <td>Steeper - PHP knowledge</td>
                                                <td>Easier - visual interface</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Portability</strong></td>
                                                <td>Code travels with plugin</td>
                                                <td>Requires ACF on new site</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Best For</strong></td>
                                                <td>Developers, custom solutions</td>
                                                <td>Quick development, clients</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="example-box">
                                    <h4>When to Use ACF</h4>
                                    <ul>
                                        <li>Rapid prototyping and development</li>
                                        <li>Client projects where they need to modify fields</li>
                                        <li>Complex field relationships (Flexible Content, Repeater)</li>
                                        <li>When you need conditional logic in fields</li>
                                        <li>Projects with tight deadlines</li>
                                    </ul>
                                </div>

                                <div class="example-box">
                                    <h4>When to Build Custom</h4>
                                    <ul>
                                        <li>Plugin development for distribution</li>
                                        <li>Lightweight, performance-critical applications</li>
                                        <li>Learning WordPress development</li>
                                        <li>Highly specific functionality</li>
                                        <li>When you want full control over the code</li>
                                    </ul>
                                </div>
                            </section>

                            <!-- Best Practices -->
                            <section>
                                <h2>Best Practices for Custom Fields</h2>
                                
                                <div class="tip-box">
                                    <h4>‚úÖ Security Best Practices</h4>
                                    <ul>
                                        <li>Always use nonces for form submissions</li>
                                        <li>Check user capabilities before saving</li>
                                        <li>Sanitize all input data</li>
                                        <li>Validate data types and formats</li>
                                        <li>Escape output when displaying</li>
                                        <li>Use prepared statements for database queries</li>
                                    </ul>
                                </div>

                                <div class="tip-box">
                                    <h4>‚úÖ Performance Best Practices</h4>
                                    <ul>
                                        <li>Prefix meta keys with underscore to hide from custom fields UI</li>
                                        <li>Use <code>get_post_meta()</code> with single parameter for single values</li>
                                        <li>Cache complex queries</li>
                                        <li>Minimize database calls</li>
                                        <li>Delete unused meta data</li>
                                        <li>Index frequently queried meta keys</li>
                                    </ul>
                                </div>

                                <div class="tip-box">
                                    <h4>‚úÖ Development Best Practices</h4>
                                    <ul>
                                        <li>Use descriptive meta key names</li>
                                        <li>Group related fields in meta boxes</li>
                                        <li>Provide help text and descriptions</li>
                                        <li>Use appropriate field types for data</li>
                                        <li>Implement proper error handling</li>
                                        <li>Create reusable field components</li>
                                        <li>Document your meta keys</li>
                                    </ul>
                                </div>

                                <div class="warning-box">
                                    <h4>‚ùå Common Mistakes to Avoid</h4>
                                    <ul>
                                        <li>Not checking if meta key exists before using</li>
                                        <li>Forgetting to sanitize and validate data</li>
                                        <li>Using spaces in meta key names</li>
                                        <li>Not prefixing custom meta keys</li>
                                        <li>Saving empty values unnecessarily</li>
                                        <li>Not handling array data properly</li>
                                        <li>Forgetting to enqueue required scripts</li>
                                    </ul>
                                </div>
                            </section>

                            <!-- Useful Functions -->
                            <section>
                                <h2>Useful WordPress Functions for Custom Fields</h2>
                                
                                <div class="metabox-concept">
                                    <h3>Core Functions Reference</h3>
                                    
                                    <table style="width: 100%; border-collapse: collapse;">
                                        <thead>
                                            <tr style="background: #667eea; color: white;">
                                                <th style="padding: 0.75rem;">Function</th>
                                                <th style="padding: 0.75rem;">Description</th>
                                                <th style="padding: 0.75rem;">Example</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr style="background: #f9fafb;">
                                                <td style="padding: 0.75rem;"><code>add_post_meta()</code></td>
                                                <td style="padding: 0.75rem;">Add a new custom field</td>
                                                <td style="padding: 0.75rem;"><code>add_post_meta( $post_id, '_key', 'value' );</code></td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 0.75rem;"><code>update_post_meta()</code></td>
                                                <td style="padding: 0.75rem;">Update or add a custom field</td>
                                                <td style="padding: 0.75rem;"><code>update_post_meta( $post_id, '_key', 'value' );</code></td>
                                            </tr>
                                            <tr style="background: #f9fafb;">
                                                <td style="padding: 0.75rem;"><code>get_post_meta()</code></td>
                                                <td style="padding: 0.75rem;">Retrieve custom field value</td>
                                                <td style="padding: 0.75rem;"><code>get_post_meta( $post_id, '_key', true );</code></td>
                                            </tr>
                                            <tr>
                                                <td style="padding: 0.75rem;"><code>delete_post_meta()</code></td>
                                                <td style="padding: 0.75rem;">Delete a custom field</td>
                                                <td style="padding: 0.75rem;"><code>delete_post_meta( $post_id, '_key' );</code></td>
                                            </tr>
                                            <tr style="background: #f9fafb;">
                                                <td style="padding: 0.75rem;"><code>get_post_custom()</code></td>
                                                <td style="padding: 0.75rem;">Get all custom fields for a post</td>
                                                <td style="padding: 0.75rem;"><code>$fields = get_post_custom( $post_id );</code></td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>

                                <div class="metabox-concept">
                                    <h3>Sanitization Functions</h3>
                                    
                                    <div class="code-example">
                                        <pre><code class="language-php">// Text fields
$text = sanitize_text_field( $_POST['field'] );

// Textarea
$textarea = sanitize_textarea_field( $_POST['textarea'] );

// Email
$email = sanitize_email( $_POST['email'] );

// URL
$url = esc_url_raw( $_POST['url'] );

// HTML content
$html = wp_kses_post( $_POST['content'] );

// Numbers
$number = absint( $_POST['number'] ); // Positive integer
$float = floatval( $_POST['price'] ); // Float

// File names
$filename = sanitize_file_name( $_POST['filename'] );

// SQL
$sql_safe = esc_sql( $_POST['data'] );</code></pre>
                                    </div>
                                </div>

                                <div class="metabox-concept">
                                    <h3>Escaping Functions for Output</h3>
                                    
                                    <div class="code-example">
                                        <pre><code class="language-php">// HTML attribute
echo esc_attr( $value );

// HTML text
echo esc_html( $value );

// URL
echo esc_url( $url );

// JavaScript
echo esc_js( $value );

// Textarea
echo esc_textarea( $value );

// SQL for direct queries
$wpdb->prepare( "SELECT * FROM table WHERE column = %s", $value );</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- Practice Exercise -->
                            <section>
                                <h2>Practice Exercise</h2>
                                <div class="alert alert-success">
                                    <div class="alert-icon">üíª</div>
                                    <div class="alert-content">
                                        <div class="alert-title">Build a Real Estate Property CPT with Custom Fields</div>
                                        <div class="alert-message">
                                            <p>Create a complete property listing system with the following custom fields:</p>
                                            
                                            <ol>
                                                <li><strong>Create a 'property' Custom Post Type</strong></li>
                                                <li><strong>Add Property Details Meta Box:</strong>
                                                    <ul>
                                                        <li>Price (number field)</li>
                                                        <li>Property Type (select: House, Apartment, Condo, Land)</li>
                                                        <li>Status (radio: For Sale, For Rent, Sold)</li>
                                                        <li>Year Built (number)</li>
                                                        <li>Square Feet (number)</li>
                                                    </ul>
                                                </li>
                                                <li><strong>Add Property Features Meta Box:</strong>
                                                    <ul>
                                                        <li>Bedrooms (number)</li>
                                                        <li>Bathrooms (number)</li>
                                                        <li>Garage Spaces (number)</li>
                                                        <li>Features (checkboxes: Pool, Garden, Balcony, etc.)</li>
                                                    </ul>
                                                </li>
                                                <li><strong>Add Property Gallery Meta Box:</strong>
                                                    <ul>
                                                        <li>Multiple image upload functionality</li>
                                                        <li>Drag and drop reordering</li>
                                                    </ul>
                                                </li>
                                                <li><strong>Add Location Meta Box:</strong>
                                                    <ul>
                                                        <li>Address fields</li>
                                                        <li>Google Maps integration (optional)</li>
                                                    </ul>
                                                </li>
                                                <li><strong>Create a front-end template that displays:</strong>
                                                    <ul>
                                                        <li>All property details</li>
                                                        <li>Image gallery</li>
                                                        <li>Features list</li>
                                                        <li>Contact form</li>
                                                    </ul>
                                                </li>
                                            </ol>
                                            
                                            <p><strong>Bonus Challenges:</strong></p>
                                            <ul>
                                                <li>Add AJAX search/filter by custom fields</li>
                                                <li>Create a comparison feature</li>
                                                <li>Add favorite/wishlist functionality</li>
                                                <li>Implement virtual tour field (360¬∞ image or video)</li>
                                                <li>Add mortgage calculator based on price</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Resources -->
                            <section class="resources">
                                <h2>Additional Resources</h2>
                                <ul>
                                    <li><a href="https://developer.wordpress.org/plugins/metadata/" target="_blank">Plugin Handbook: Custom Meta Boxes</a></li>
                                    <li><a href="https://developer.wordpress.org/reference/functions/add_meta_box/" target="_blank">add_meta_box() Documentation</a></li>
                                    <li><a href="https://developer.wordpress.org/reference/functions/get_post_meta/" target="_blank">get_post_meta() Documentation</a></li>
                                    <li><a href="https://www.advancedcustomfields.com/" target="_blank">Advanced Custom Fields Plugin</a></li>
                                    <li><a href="https://metabox.io/" target="_blank">Meta Box Plugin</a></li>
                                    <li><a href="https://carbon-fields.net/" target="_blank">Carbon Fields</a></li>
                                    <li><a href="https://developer.wordpress.org/apis/security/sanitizing/" target="_blank">Data Sanitization/Escaping</a></li>
                                    <li><a href="https://generatewp.com/custom-meta-box/" target="_blank">Meta Box Generator</a></li>
                                </ul>
                            </section>
                        </div>

                        <!-- Lesson Navigation -->
                        <div class="lesson-navigation">
                            <a href="/06module/custom_taxonomies.html" class="lesson-nav-button prev">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
                                </svg>
                                <span>
                                    <small>Previous</small><br>
                                    Custom Taxonomies
                                </span>
                            </a>
                            
                            <button class="complete-lesson-btn">
                                Mark as Complete
                            </button>
                            
                            <a href="/06module/displaying_custom_post_types.html" class="lesson-nav-button next">
                                <span>
                                    <small>Next</small><br>
                                    Displaying Custom Post Types
                                </span>
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/>
                                </svg>
                            </a>
                        </div>
                    </article>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="site-footer" role="contentinfo">
            <div class="footer-container">
                <div class="footer-content">
                    <div class="footer-section footer-about">
                        <h3>PHP WordPress Development</h3>
                        <p>Complete Web Development Course</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <ul class="footer-links">
                            <li><a href="/">Home</a></li>
                            <li><a href="/module6.html">Module 6</a></li>
                            <li><a href="/resources.html">Resources</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Support</h4>
                        <ul class="footer-links">
                            <li><a href="/about.html">About</a></li>
                            <li><a href="/contact.html">Contact</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2024 PHP WordPress Course. All rights reserved.</p>
                    <p>This course material is for educational purposes only.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- JavaScript -->
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/sidebar-toggle.js"></script>
    <script src="/assets/js/progress-tracker.js"></script>
    <script src="/assets/js/search.js"></script>
    <script src="/assets/js/theme-toggle.js"></script>
</body>
</html>