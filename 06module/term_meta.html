<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SEO Meta Tags -->
    <title>Working with Term Meta - PHP WordPress Course</title>
    <meta name="description" content="Learn how to add custom fields to taxonomy terms using term meta. Master term metadata in WordPress for enhanced categorization.">
    <meta name="keywords" content="PHP, WordPress, term meta, taxonomy meta, custom fields, plugin development">
    <meta name="author" content="PHP WordPress Course">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/sidebar-enhanced.css">
    <link rel="stylesheet" href="/assets/css/sidebar-toggle.css">
    
    <!-- Custom styles for this lesson -->
    <style>
        .term-meta-header {
            background: linear-gradient(135deg, #10b981 0%, #3b82f6 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .term-meta-concept {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .term-meta-concept h3 {
            color: #10b981;
            margin-top: 0;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 1rem;
        }

        .code-example {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            overflow-x: auto;
        }

        .code-example pre {
            margin: 0;
            white-space: pre-wrap;
        }

        .term-meta-flow {
            background: linear-gradient(135deg, #e0f2fe 0%, #bae6fd 100%);
            border: 2px solid #0ea5e9;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin: 1rem 0;
            padding: 1rem;
            background: white;
            border-radius: 6px;
        }

        .flow-number {
            background: #0ea5e9;
            color: white;
            width: 30px;
            height: 30px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            margin-right: 1rem;
        }

        .form-preview {
            background: #f9fafb;
            border: 2px solid #d1d5db;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .form-field {
            margin-bottom: 1rem;
        }

        .form-field label {
            display: block;
            margin-bottom: 0.25rem;
            font-weight: 600;
            color: #374151;
        }

        .form-field input[type="text"],
        .form-field input[type="color"],
        .form-field textarea,
        .form-field select {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 4px;
            font-size: 0.875rem;
        }

        .form-field .description {
            font-size: 0.75rem;
            color: #6b7280;
            margin-top: 0.25rem;
        }

        .tip-box {
            background: #f0fdf4;
            border: 2px solid #10b981;
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
        }

        .warning-box {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
        }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 1.5rem 0;
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
        }

        .comparison-table th {
            background: #3b82f6;
            color: white;
            padding: 1rem;
            text-align: left;
        }

        .comparison-table td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .comparison-table tr:last-child td {
            border-bottom: none;
        }

        .comparison-table code {
            background: #f3f4f6;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
        }

        .use-cases-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .use-case-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1.5rem;
            text-align: center;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        .use-case-card:hover {
            transform: translateY(-4px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .use-case-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
        }

        .use-case-card h4 {
            color: #3b82f6;
            margin: 0.5rem 0;
        }
    </style>
</head>
<body>
    <!-- Skip to main content -->
    <a href="#main-content" class="sr-only">Skip to main content</a>
    
    <div class="page-wrapper">
        <!-- Header -->
        <header class="site-header" role="banner">
            <div class="header-container">
                <div class="site-branding">
                    <a href="/" class="site-logo">
                        <h1 class="site-title">PHP WordPress Development</h1>
                    </a>
                </div>
                
                <nav class="main-navigation" role="navigation" aria-label="Main navigation">
                    <button class="mobile-menu-btn" aria-label="Toggle navigation" aria-expanded="false">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    
                    <div class="nav-menu">
                        <ul class="nav-list">
                            <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
                            <li class="nav-item dropdown">
                                <button class="nav-link dropdown-toggle active" aria-haspopup="true">Modules</button>
                                <div class="dropdown-menu">
                                    <a href="/module1.html" class="dropdown-item">Module 1: Web Fundamentals</a>
                                    <a href="/module2.html" class="dropdown-item">Module 2: PHP Fundamentals</a>
                                    <a href="/module3.html" class="dropdown-item">Module 3: MySQL Database</a>
                                    <a href="/module4.html" class="dropdown-item">Module 4: WordPress & Docker</a>
                                    <a href="/module5.html" class="dropdown-item">Module 5: Theme Development</a>
                                    <a href="/module6.html" class="dropdown-item active">Module 6: Plugin Development</a>
                                    <a href="/module7.html" class="dropdown-item">Module 7: Advanced WordPress</a>
                                    <a href="/module8.html" class="dropdown-item">Module 8: Deployment</a>
                                    <a href="/module9.html" class="dropdown-item">Module 9: Final Project</a>
                                </div>
                            </li>
                            <li class="nav-item"><a href="/resources.html" class="nav-link">Resources</a></li>
                            <li class="nav-item"><a href="/about.html" class="nav-link">About</a></li>
                        </ul>
                    </div>
                </nav>
                
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                        <input type="search" class="search-input" placeholder="Search lessons..." aria-label="Search">
                    </div>
                    <div class="search-results"></div>
                </div>
            </div>
        </header>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-header">
                <h2 class="progress-title">Course Progress</h2>
                <span class="progress-text">Loading...</span>
            </div>
            <div class="progress-bar">
                <div class="progress-bar-fill">
                    <span class="progress-bar-text"></span>
                </div>
            </div>
        </div>
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb container" aria-label="Breadcrumb">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <a href="/module6.html">Module 6</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <span aria-current="page">Working with Term Meta</span>
                </li>
            </ol>
        </nav>
        
        <!-- Main Content -->
        <main id="main-content" class="main-content" role="main">
            <div class="container">
                <div class="content-with-sidebar">
                    <!-- Sidebar -->
                    <aside class="sidebar">
                        <div class="sidebar-nav">
                            <h3 class="sidebar-title">Module 6: Plugin Development</h3>
                            <div class="sidebar-section">
                                <h4 class="sidebar-section-title">Session 6: Custom Post Types & Taxonomies</h4>
                                <ul class="sidebar-menu">
                                    <li><a class="sidebar-link" href="/06module/introduction_to_cpt.html">Introduction to Custom Post Types</a></li>
                                    <li><a class="sidebar-link" href="/06module/registering_cpt.html">Registering Custom Post Types</a></li>
                                    <li><a class="sidebar-link" href="/06module/custom_fields.html">Custom Fields & Meta Boxes</a></li>
                                    <li><a class="sidebar-link" href="/06module/saving_meta_data.html">Saving & Retrieving Meta Data</a></li>
                                    <li><a class="sidebar-link" href="/06module/custom_taxonomies.html">Creating Custom Taxonomies</a></li>
                                    <li class="active"><a class="sidebar-link active" href="/06module/term_meta.html">Working with Term Meta</a></li>
                                    <li><a class="sidebar-link" href="/06module/homework_cpt_plugin.html">Homework: CPT Plugin</a></li>
                                </ul>
                            </div>
                            <div class="sidebar-section">
                                <h4 class="sidebar-section-title">Quick Links</h4>
                                <ul class="sidebar-menu">
                                    <li><a class="sidebar-link" href="/module6.html">Module Overview</a></li>
                                    <li><a class="sidebar-link" href="/06module/custom_taxonomies.html">‚Üê Previous Lesson</a></li>
                                    <li><a class="sidebar-link next-session" href="/06module/homework_cpt_plugin.html">Next Lesson ‚Üí</a></li>
                                    <li><a class="sidebar-link" href="/">‚Üê Course Home</a></li>
                                    <li><a class="sidebar-link" href="/resources.html">Resources</a></li>
                                </ul>
                            </div>
                        </div>
                    </aside>
                    
                    <!-- Main Lesson Content -->
                    <article class="lesson-content">
                        <div class="term-meta-header">
                            <h1>üè∑Ô∏è Working with Term Meta</h1>
                            <p class="lead">Add custom fields to categories, tags, and taxonomies</p>
                            <p>Enhance your taxonomies with additional metadata</p>
                        </div>

                        <!-- Learning Objectives -->
                        <div class="lesson-objectives">
                            <h2>Learning Objectives</h2>
                            <ul>
                                <li>Understand term meta and its uses</li>
                                <li>Add custom fields to taxonomy terms</li>
                                <li>Create term edit and add forms</li>
                                <li>Save and retrieve term metadata</li>
                                <li>Display term meta on the frontend</li>
                                <li>Query terms by meta values</li>
                                <li>Handle term meta for different taxonomies</li>
                            </ul>
                        </div>
                        
                        <!-- Lesson Body -->
                        <div class="lesson-body">
                            <!-- Introduction -->
                            <section>
                                <h2>What is Term Meta?</h2>
                                <p class="lead">Term meta allows you to store additional information for taxonomy terms (categories, tags, and custom taxonomies). Since WordPress 4.4, term meta is natively supported, enabling you to add custom fields to enhance your taxonomies.</p>
                                
                                <div class="term-meta-flow">
                                    <h3>Term Meta Implementation Flow</h3>
                                    
                                    <div class="flow-step">
                                        <div class="flow-number">1</div>
                                        <div>
                                            <strong>Hook into taxonomy forms</strong>
                                            <p>Add fields to add/edit term forms</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flow-step">
                                        <div class="flow-number">2</div>
                                        <div>
                                            <strong>Display form fields</strong>
                                            <p>Create HTML for custom fields</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flow-step">
                                        <div class="flow-number">3</div>
                                        <div>
                                            <strong>Save term meta</strong>
                                            <p>Hook into create/edit actions</p>
                                        </div>
                                    </div>
                                    
                                    <div class="flow-step">
                                        <div class="flow-number">4</div>
                                        <div>
                                            <strong>Retrieve and display</strong>
                                            <p>Use get_term_meta() to retrieve</p>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Use Cases -->
                            <section>
                                <h2>Common Use Cases</h2>
                                
                                <div class="use-cases-grid">
                                    <div class="use-case-card">
                                        <div class="use-case-icon">üé®</div>
                                        <h4>Category Colors</h4>
                                        <p>Assign colors to categories for visual identification</p>
                                    </div>
                                    
                                    <div class="use-case-card">
                                        <div class="use-case-icon">üñºÔ∏è</div>
                                        <h4>Category Images</h4>
                                        <p>Add featured images or icons to categories</p>
                                    </div>
                                    
                                    <div class="use-case-card">
                                        <div class="use-case-icon">üìä</div>
                                        <h4>Display Order</h4>
                                        <p>Custom sorting order for terms</p>
                                    </div>
                                    
                                    <div class="use-case-card">
                                        <div class="use-case-icon">üîó</div>
                                        <h4>External Links</h4>
                                        <p>Associate URLs with taxonomy terms</p>
                                    </div>
                                    
                                    <div class="use-case-card">
                                        <div class="use-case-icon">üìù</div>
                                        <h4>Extended Descriptions</h4>
                                        <p>Rich text descriptions for terms</p>
                                    </div>
                                    
                                    <div class="use-case-card">
                                        <div class="use-case-icon">‚öôÔ∏è</div>
                                        <h4>Configuration Options</h4>
                                        <p>Term-specific settings and options</p>
                                    </div>
                                </div>
                            </section>

                            <!-- Basic Implementation -->
                            <section>
                                <h2>Basic Term Meta Implementation</h2>
                                
                                <div class="term-meta-concept">
                                    <h3>Adding Fields to Category Forms</h3>
                                    
                                    <div class="code-example">
                                        <pre><code class="language-php"><?php
/**
 * Category Term Meta Implementation
 */
class Category_Term_Meta {
    
    public function __construct() {
        // Add form fields
        add_action( 'category_add_form_fields', array( $this, 'add_category_meta_fields' ) );
        add_action( 'category_edit_form_fields', array( $this, 'edit_category_meta_fields' ) );
        
        // Save meta
        add_action( 'created_category', array( $this, 'save_category_meta' ) );
        add_action( 'edited_category', array( $this, 'save_category_meta' ) );
        
        // Add columns to admin
        add_filter( 'manage_edit-category_columns', array( $this, 'add_category_columns' ) );
        add_filter( 'manage_category_custom_column', array( $this, 'add_category_column_content' ), 10, 3 );
    }
    
    /**
     * Add fields to add new category form
     */
    public function add_category_meta_fields() {
        ?>
        <div class="form-field">
            <label for="category_color"><?php _e( 'Category Color', 'textdomain' ); ?></label>
            <input type="color" name="category_color" id="category_color" value="#000000">
            <p class="description"><?php _e( 'Choose a color for this category', 'textdomain' ); ?></p>
        </div>
        
        <div class="form-field">
            <label for="category_icon"><?php _e( 'Category Icon', 'textdomain' ); ?></label>
            <input type="text" name="category_icon" id="category_icon" value="">
            <p class="description"><?php _e( 'Enter a dashicon class (e.g., dashicons-admin-post)', 'textdomain' ); ?></p>
        </div>
        
        <div class="form-field">
            <label for="category_featured">
                <input type="checkbox" name="category_featured" id="category_featured" value="1">
                <?php _e( 'Featured Category', 'textdomain' ); ?>
            </label>
            <p class="description"><?php _e( 'Check to mark as featured category', 'textdomain' ); ?></p>
        </div>
        <?php
    }
    
    /**
     * Add fields to edit category form
     */
    public function edit_category_meta_fields( $term ) {
        // Get existing values
        $color = get_term_meta( $term->term_id, 'category_color', true );
        $icon = get_term_meta( $term->term_id, 'category_icon', true );
        $featured = get_term_meta( $term->term_id, 'category_featured', true );
        ?>
        
        <tr class="form-field">
            <th scope="row">
                <label for="category_color"><?php _e( 'Category Color', 'textdomain' ); ?></label>
            </th>
            <td>
                <input type="color" name="category_color" id="category_color" 
                       value="<?php echo esc_attr( $color ) ?: '#000000'; ?>">
                <p class="description"><?php _e( 'Choose a color for this category', 'textdomain' ); ?></p>
            </td>
        </tr>
        
        <tr class="form-field">
            <th scope="row">
                <label for="category_icon"><?php _e( 'Category Icon', 'textdomain' ); ?></label>
            </th>
            <td>
                <input type="text" name="category_icon" id="category_icon" 
                       value="<?php echo esc_attr( $icon ); ?>">
                <p class="description"><?php _e( 'Enter a dashicon class', 'textdomain' ); ?></p>
            </td>
        </tr>
        
        <tr class="form-field">
            <th scope="row">
                <label for="category_featured"><?php _e( 'Featured', 'textdomain' ); ?></label>
            </th>
            <td>
                <label>
                    <input type="checkbox" name="category_featured" id="category_featured" 
                           value="1" <?php checked( $featured, '1' ); ?>>
                    <?php _e( 'Featured Category', 'textdomain' ); ?>
                </label>
                <p class="description"><?php _e( 'Check to mark as featured', 'textdomain' ); ?></p>
            </td>
        </tr>
        <?php
    }
    
    /**
     * Save category meta
     */
    public function save_category_meta( $term_id ) {
        // Save color
        if ( isset( $_POST['category_color'] ) ) {
            $color = sanitize_hex_color( $_POST['category_color'] );
            update_term_meta( $term_id, 'category_color', $color );
        }
        
        // Save icon
        if ( isset( $_POST['category_icon'] ) ) {
            $icon = sanitize_text_field( $_POST['category_icon'] );
            update_term_meta( $term_id, 'category_icon', $icon );
        }
        
        // Save featured status
        $featured = isset( $_POST['category_featured'] ) ? '1' : '0';
        update_term_meta( $term_id, 'category_featured', $featured );
    }
    
    /**
     * Add custom columns to category list
     */
    public function add_category_columns( $columns ) {
        $columns['color'] = __( 'Color', 'textdomain' );
        $columns['featured'] = __( 'Featured', 'textdomain' );
        return $columns;
    }
    
    /**
     * Add content to custom columns
     */
    public function add_category_column_content( $content, $column_name, $term_id ) {
        switch ( $column_name ) {
            case 'color':
                $color = get_term_meta( $term_id, 'category_color', true );
                if ( $color ) {
                    $content = '<span style="display:inline-block;width:30px;height:30px;background:' . 
                               esc_attr( $color ) . ';border:1px solid #ccc;"></span>';
                }
                break;
                
            case 'featured':
                $featured = get_term_meta( $term_id, 'category_featured', true );
                $content = $featured ? '‚≠ê' : '‚Äî';
                break;
        }
        return $content;
    }
}

// Initialize
new Category_Term_Meta();</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- Image Upload for Terms -->
                            <section>
                                <h2>Adding Image Upload to Terms</h2>
                                
                                <div class="term-meta-concept">
                                    <h3>Term Featured Image</h3>
                                    
                                    <div class="code-example">
                                        <pre><code class="language-php">/**
 * Add image upload to taxonomy terms
 */
class Term_Image_Meta {
    
    private $taxonomy = 'product_category';
    
    public function __construct() {
        // Add fields
        add_action( $this->taxonomy . '_add_form_fields', array( $this, 'add_image_field' ) );
        add_action( $this->taxonomy . '_edit_form_fields', array( $this, 'edit_image_field' ) );
        
        // Save
        add_action( 'created_' . $this->taxonomy, array( $this, 'save_image' ) );
        add_action( 'edited_' . $this->taxonomy, array( $this, 'save_image' ) );
        
        // Enqueue media
        add_action( 'admin_enqueue_scripts', array( $this, 'enqueue_media' ) );
    }
    
    /**
     * Add image field to new term form
     */
    public function add_image_field() {
        ?>
        <div class="form-field">
            <label><?php _e( 'Category Image', 'textdomain' ); ?></label>
            <div id="category-image-wrapper">
                <p class="hide-if-no-js">
                    <a href="#" id="upload-category-image" class="button">
                        <?php _e( 'Upload Image', 'textdomain' ); ?>
                    </a>
                </p>
                <div id="category-image-preview"></div>
            </div>
            <input type="hidden" name="category_image_id" id="category_image_id" value="">
            <p class="description"><?php _e( 'Upload an image for this category', 'textdomain' ); ?></p>
        </div>
        
        <script>
        jQuery(document).ready(function($) {
            $('#upload-category-image').click(function(e) {
                e.preventDefault();
                
                var mediaUploader = wp.media({
                    title: '<?php _e( 'Choose Category Image', 'textdomain' ); ?>',
                    button: {
                        text: '<?php _e( 'Use this image', 'textdomain' ); ?>'
                    },
                    multiple: false
                });
                
                mediaUploader.on('select', function() {
                    var attachment = mediaUploader.state().get('selection').first().toJSON();
                    $('#category_image_id').val(attachment.id);
                    $('#category-image-preview').html('<img src="' + attachment.url + '" style="max-width:200px;">');
                });
                
                mediaUploader.open();
            });
        });
        </script>
        <?php
    }
    
    /**
     * Add image field to edit term form
     */
    public function edit_image_field( $term ) {
        $image_id = get_term_meta( $term->term_id, 'category_image_id', true );
        $image_url = $image_id ? wp_get_attachment_url( $image_id ) : '';
        ?>
        
        <tr class="form-field">
            <th scope="row">
                <label><?php _e( 'Category Image', 'textdomain' ); ?></label>
            </th>
            <td>
                <div id="category-image-wrapper">
                    <p class="hide-if-no-js">
                        <a href="#" id="upload-category-image" class="button">
                            <?php _e( 'Upload/Change Image', 'textdomain' ); ?>
                        </a>
                        <?php if ( $image_id ) : ?>
                            <a href="#" id="remove-category-image" class="button">
                                <?php _e( 'Remove Image', 'textdomain' ); ?>
                            </a>
                        <?php endif; ?>
                    </p>
                    <div id="category-image-preview">
                        <?php if ( $image_url ) : ?>
                            <img src="<?php echo esc_url( $image_url ); ?>" style="max-width:200px;">
                        <?php endif; ?>
                    </div>
                </div>
                <input type="hidden" name="category_image_id" id="category_image_id" 
                       value="<?php echo esc_attr( $image_id ); ?>">
                <p class="description"><?php _e( 'Upload an image for this category', 'textdomain' ); ?></p>
                
                <script>
                jQuery(document).ready(function($) {
                    $('#upload-category-image').click(function(e) {
                        e.preventDefault();
                        
                        var mediaUploader = wp.media({
                            title: '<?php _e( 'Choose Category Image', 'textdomain' ); ?>',
                            button: {
                                text: '<?php _e( 'Use this image', 'textdomain' ); ?>'
                            },
                            multiple: false
                        });
                        
                        mediaUploader.on('select', function() {
                            var attachment = mediaUploader.state().get('selection').first().toJSON();
                            $('#category_image_id').val(attachment.id);
                            $('#category-image-preview').html('<img src="' + attachment.url + '" style="max-width:200px;">');
                            $('#remove-category-image').show();
                        });
                        
                        mediaUploader.open();
                    });
                    
                    $('#remove-category-image').click(function(e) {
                        e.preventDefault();
                        $('#category_image_id').val('');
                        $('#category-image-preview').html('');
                        $(this).hide();
                    });
                });
                </script>
            </td>
        </tr>
        <?php
    }
    
    /**
     * Save image
     */
    public function save_image( $term_id ) {
        if ( isset( $_POST['category_image_id'] ) ) {
            $image_id = absint( $_POST['category_image_id'] );
            update_term_meta( $term_id, 'category_image_id', $image_id );
        }
    }
    
    /**
     * Enqueue media scripts
     */
    public function enqueue_media( $hook ) {
        if ( $hook !== 'edit-tags.php' && $hook !== 'term.php' ) {
            return;
        }
        
        wp_enqueue_media();
    }
}

// Initialize
new Term_Image_Meta();</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- Retrieving and Displaying Term Meta -->
                            <section>
                                <h2>Retrieving and Displaying Term Meta</h2>
                                
                                <div class="term-meta-concept">
                                    <h3>Frontend Display</h3>
                                    
                                    <div class="code-example">
                                        <pre><code class="language-php">// Get single term meta value
$term_id = 5;
$color = get_term_meta( $term_id, 'category_color', true );

// Get all meta for a term
$all_meta = get_term_meta( $term_id );

// Display category with custom styling
function display_category_with_meta( $term_id ) {
    $term = get_term( $term_id );
    $color = get_term_meta( $term_id, 'category_color', true );
    $icon = get_term_meta( $term_id, 'category_icon', true );
    $image_id = get_term_meta( $term_id, 'category_image_id', true );
    $featured = get_term_meta( $term_id, 'category_featured', true );
    
    ?>
    <div class="category-card" style="border-color: <?php echo esc_attr( $color ); ?>">
        <?php if ( $image_id ) : ?>
            <div class="category-image">
                <?php echo wp_get_attachment_image( $image_id, 'thumbnail' ); ?>
            </div>
        <?php endif; ?>
        
        <div class="category-header">
            <?php if ( $icon ) : ?>
                <span class="<?php echo esc_attr( $icon ); ?>" 
                      style="color: <?php echo esc_attr( $color ); ?>"></span>
            <?php endif; ?>
            
            <h3><?php echo esc_html( $term->name ); ?></h3>
            
            <?php if ( $featured ) : ?>
                <span class="featured-badge">Featured</span>
            <?php endif; ?>
        </div>
        
        <div class="category-description">
            <?php echo wp_kses_post( $term->description ); ?>
        </div>
        
        <div class="category-meta">
            <span class="post-count">
                <?php echo sprintf( _n( '%s post', '%s posts', $term->count, 'textdomain' ), 
                                    number_format_i18n( $term->count ) ); ?>
            </span>
        </div>
    </div>
    <?php
}

// Display all categories with meta
function display_categories_grid() {
    $categories = get_terms( array(
        'taxonomy' => 'category',
        'hide_empty' => false,
        'meta_query' => array(
            array(
                'key' => 'category_featured',
                'value' => '1',
                'compare' => '='
            )
        )
    ));
    
    if ( ! empty( $categories ) && ! is_wp_error( $categories ) ) {
        echo '<div class="categories-grid">';
        foreach ( $categories as $category ) {
            display_category_with_meta( $category->term_id );
        }
        echo '</div>';
    }
}</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- Query Terms by Meta -->
                            <section>
                                <h2>Querying Terms by Meta Values</h2>
                                
                                <div class="term-meta-concept">
                                    <h3>Advanced Term Queries</h3>
                                    
                                    <div class="code-example">
                                        <pre><code class="language-php">// Get featured categories
$featured_categories = get_terms( array(
    'taxonomy' => 'category',
    'hide_empty' => false,
    'meta_key' => 'category_featured',
    'meta_value' => '1'
));

// Get categories with specific color
$blue_categories = get_terms( array(
    'taxonomy' => 'category',
    'meta_query' => array(
        array(
            'key' => 'category_color',
            'value' => '#0000FF',
            'compare' => '='
        )
    )
));

// Complex meta query
$special_categories = get_terms( array(
    'taxonomy' => 'category',
    'hide_empty' => false,
    'meta_query' => array(
        'relation' => 'AND',
        array(
            'key' => 'category_featured',
            'value' => '1',
            'compare' => '='
        ),
        array(
            'key' => 'category_priority',
            'value' => 5,
            'type' => 'NUMERIC',
            'compare' => '>='
        )
    )
));

// Order by meta value
$ordered_categories = get_terms( array(
    'taxonomy' => 'category',
    'meta_key' => 'category_order',
    'orderby' => 'meta_value_num',
    'order' => 'ASC'
));

// Get posts from categories with specific meta
function get_posts_from_featured_categories() {
    // First, get featured categories
    $featured_cats = get_terms( array(
        'taxonomy' => 'category',
        'fields' => 'ids',
        'meta_key' => 'category_featured',
        'meta_value' => '1'
    ));
    
    if ( empty( $featured_cats ) ) {
        return array();
    }
    
    // Then get posts from those categories
    $args = array(
        'post_type' => 'post',
        'tax_query' => array(
            array(
                'taxonomy' => 'category',
                'field' => 'term_id',
                'terms' => $featured_cats
            )
        ),
        'posts_per_page' => 10
    );
    
    return new WP_Query( $args );
}</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- Custom Taxonomy Term Meta -->
                            <section>
                                <h2>Term Meta for Custom Taxonomies</h2>
                                
                                <div class="term-meta-concept">
                                    <h3>Product Brand Taxonomy with Meta</h3>
                                    
                                    <div class="code-example">
                                        <pre><code class="language-php">class Brand_Taxonomy_Meta {
    
    private $taxonomy = 'product_brand';
    
    public function __construct() {
        // Register taxonomy first
        add_action( 'init', array( $this, 'register_brand_taxonomy' ) );
        
        // Add meta fields
        add_action( $this->taxonomy . '_add_form_fields', array( $this, 'add_brand_fields' ) );
        add_action( $this->taxonomy . '_edit_form_fields', array( $this, 'edit_brand_fields' ) );
        
        // Save meta
        add_action( 'created_' . $this->taxonomy, array( $this, 'save_brand_meta' ) );
        add_action( 'edited_' . $this->taxonomy, array( $this, 'save_brand_meta' ) );
    }
    
    /**
     * Register brand taxonomy
     */
    public function register_brand_taxonomy() {
        register_taxonomy( $this->taxonomy, 'product', array(
            'labels' => array(
                'name' => 'Brands',
                'singular_name' => 'Brand',
            ),
            'hierarchical' => true,
            'public' => true,
            'show_in_rest' => true,
        ));
    }
    
    /**
     * Add brand fields
     */
    public function add_brand_fields() {
        ?>
        <div class="form-field">
            <label for="brand_logo"><?php _e( 'Brand Logo', 'textdomain' ); ?></label>
            <input type="hidden" name="brand_logo_id" id="brand_logo_id" value="">
            <div id="brand-logo-preview"></div>
            <button type="button" class="button" id="upload-brand-logo">
                <?php _e( 'Upload Logo', 'textdomain' ); ?>
            </button>
        </div>
        
        <div class="form-field">
            <label for="brand_website"><?php _e( 'Brand Website', 'textdomain' ); ?></label>
            <input type="url" name="brand_website" id="brand_website" value="">
            <p class="description"><?php _e( 'Official brand website URL', 'textdomain' ); ?></p>
        </div>
        
        <div class="form-field">
            <label for="brand_country"><?php _e( 'Country of Origin', 'textdomain' ); ?></label>
            <select name="brand_country" id="brand_country">
                <option value="">Select Country</option>
                <option value="US">United States</option>
                <option value="UK">United Kingdom</option>
                <option value="JP">Japan</option>
                <option value="DE">Germany</option>
                <option value="FR">France</option>
                <option value="IT">Italy</option>
                <option value="CN">China</option>
            </select>
        </div>
        
        <div class="form-field">
            <label for="brand_established"><?php _e( 'Year Established', 'textdomain' ); ?></label>
            <input type="number" name="brand_established" id="brand_established" 
                   min="1800" max="<?php echo date('Y'); ?>" value="">
        </div>
        
        <div class="form-field">
            <label>
                <input type="checkbox" name="brand_premium" value="1">
                <?php _e( 'Premium Brand', 'textdomain' ); ?>
            </label>
        </div>
        <?php
    }
    
    /**
     * Edit brand fields
     */
    public function edit_brand_fields( $term ) {
        $logo_id = get_term_meta( $term->term_id, 'brand_logo_id', true );
        $website = get_term_meta( $term->term_id, 'brand_website', true );
        $country = get_term_meta( $term->term_id, 'brand_country', true );
        $established = get_term_meta( $term->term_id, 'brand_established', true );
        $premium = get_term_meta( $term->term_id, 'brand_premium', true );
        ?>
        
        <tr class="form-field">
            <th scope="row">
                <label><?php _e( 'Brand Logo', 'textdomain' ); ?></label>
            </th>
            <td>
                <input type="hidden" name="brand_logo_id" id="brand_logo_id" 
                       value="<?php echo esc_attr( $logo_id ); ?>">
                <div id="brand-logo-preview">
                    <?php if ( $logo_id ) : ?>
                        <?php echo wp_get_attachment_image( $logo_id, 'thumbnail' ); ?>
                    <?php endif; ?>
                </div>
                <button type="button" class="button" id="upload-brand-logo">
                    <?php _e( 'Upload/Change Logo', 'textdomain' ); ?>
                </button>
                <?php if ( $logo_id ) : ?>
                    <button type="button" class="button" id="remove-brand-logo">
                        <?php _e( 'Remove Logo', 'textdomain' ); ?>
                    </button>
                <?php endif; ?>
            </td>
        </tr>
        
        <tr class="form-field">
            <th scope="row">
                <label for="brand_website"><?php _e( 'Brand Website', 'textdomain' ); ?></label>
            </th>
            <td>
                <input type="url" name="brand_website" id="brand_website" 
                       value="<?php echo esc_url( $website ); ?>">
                <p class="description"><?php _e( 'Official brand website URL', 'textdomain' ); ?></p>
            </td>
        </tr>
        
        <tr class="form-field">
            <th scope="row">
                <label for="brand_country"><?php _e( 'Country of Origin', 'textdomain' ); ?></label>
            </th>
            <td>
                <select name="brand_country" id="brand_country">
                    <option value="">Select Country</option>
                    <option value="US" <?php selected( $country, 'US' ); ?>>United States</option>
                    <option value="UK" <?php selected( $country, 'UK' ); ?>>United Kingdom</option>
                    <option value="JP" <?php selected( $country, 'JP' ); ?>>Japan</option>
                    <option value="DE" <?php selected( $country, 'DE' ); ?>>Germany</option>
                    <option value="FR" <?php selected( $country, 'FR' ); ?>>France</option>
                    <option value="IT" <?php selected( $country, 'IT' ); ?>>Italy</option>
                    <option value="CN" <?php selected( $country, 'CN' ); ?>>China</option>
                </select>
            </td>
        </tr>
        
        <tr class="form-field">
            <th scope="row">
                <label for="brand_established"><?php _e( 'Year Established', 'textdomain' ); ?></label>
            </th>
            <td>
                <input type="number" name="brand_established" id="brand_established" 
                       min="1800" max="<?php echo date('Y'); ?>" 
                       value="<?php echo esc_attr( $established ); ?>">
            </td>
        </tr>
        
        <tr class="form-field">
            <th scope="row">
                <label><?php _e( 'Premium Brand', 'textdomain' ); ?></label>
            </th>
            <td>
                <label>
                    <input type="checkbox" name="brand_premium" value="1" 
                           <?php checked( $premium, '1' ); ?>>
                    <?php _e( 'This is a premium brand', 'textdomain' ); ?>
                </label>
            </td>
        </tr>
        <?php
    }
    
    /**
     * Save brand meta
     */
    public function save_brand_meta( $term_id ) {
        // Logo
        if ( isset( $_POST['brand_logo_id'] ) ) {
            update_term_meta( $term_id, 'brand_logo_id', absint( $_POST['brand_logo_id'] ) );
        }
        
        // Website
        if ( isset( $_POST['brand_website'] ) ) {
            update_term_meta( $term_id, 'brand_website', esc_url_raw( $_POST['brand_website'] ) );
        }
        
        // Country
        if ( isset( $_POST['brand_country'] ) ) {
            update_term_meta( $term_id, 'brand_country', sanitize_text_field( $_POST['brand_country'] ) );
        }
        
        // Year established
        if ( isset( $_POST['brand_established'] ) ) {
            update_term_meta( $term_id, 'brand_established', absint( $_POST['brand_established'] ) );
        }
        
        // Premium status
        $premium = isset( $_POST['brand_premium'] ) ? '1' : '0';
        update_term_meta( $term_id, 'brand_premium', $premium );
    }
}

// Initialize
new Brand_Taxonomy_Meta();</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- Comparison Table -->
                            <section>
                                <h2>Term Meta vs Post Meta</h2>
                                
                                <div class="comparison-table">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Aspect</th>
                                                <th>Term Meta</th>
                                                <th>Post Meta</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><strong>Storage Table</strong></td>
                                                <td><code>wp_termmeta</code></td>
                                                <td><code>wp_postmeta</code></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Since WordPress</strong></td>
                                                <td>4.4</td>
                                                <td>1.2</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Main Function</strong></td>
                                                <td><code>get_term_meta()</code></td>
                                                <td><code>get_post_meta()</code></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Update Function</strong></td>
                                                <td><code>update_term_meta()</code></td>
                                                <td><code>update_post_meta()</code></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Delete Function</strong></td>
                                                <td><code>delete_term_meta()</code></td>
                                                <td><code>delete_post_meta()</code></td>
                                            </tr>
                                            <tr>
                                                <td><strong>Form Hooks</strong></td>
                                                <td>_{taxonomy}_add_form_fields</td>
                                                <td>add_meta_boxes</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Save Hooks</strong></td>
                                                <td>created_{taxonomy}</td>
                                                <td>save_post</td>
                                            </tr>
                                            <tr>
                                                <td><strong>Use Cases</strong></td>
                                                <td>Category colors, icons</td>
                                                <td>Product prices, dates</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </section>

                            <!-- Best Practices -->
                            <section>
                                <h2>Best Practices</h2>
                                
                                <div class="tip-box">
                                    <h4>‚úÖ Do's</h4>
                                    <ul>
                                        <li>Always sanitize and validate term meta input</li>
                                        <li>Use appropriate data types for meta values</li>
                                        <li>Enqueue media scripts only when needed</li>
                                        <li>Cache expensive term meta queries</li>
                                        <li>Use consistent naming conventions for meta keys</li>
                                        <li>Check if term meta exists before using</li>
                                        <li>Clean up term meta on taxonomy deletion</li>
                                    </ul>
                                </div>

                                <div class="warning-box">
                                    <h4>‚ùå Don'ts</h4>
                                    <ul>
                                        <li>Don't store large data in term meta</li>
                                        <li>Don't forget to escape output</li>
                                        <li>Don't use spaces in meta key names</li>
                                        <li>Don't query terms only by meta (combine with taxonomy)</li>
                                        <li>Don't forget backwards compatibility for older WP versions</li>
                                    </ul>
                                </div>
                            </section>

                            <!-- Practice Exercise -->
                            <section>
                                <h2>Practice Exercise</h2>
                                <div class="alert alert-success">
                                    <div class="alert-icon">üíª</div>
                                    <div class="alert-content">
                                        <div class="alert-title">Build a Location Taxonomy with Rich Meta</div>
                                        <div class="alert-message">
                                            <p>Create a location taxonomy system with comprehensive meta fields:</p>
                                            
                                            <ol>
                                                <li><strong>Create 'location' taxonomy for events CPT</strong></li>
                                                
                                                <li><strong>Add location meta fields:</strong>
                                                    <ul>
                                                        <li>Featured image/photo</li>
                                                        <li>Address fields (street, city, state, zip)</li>
                                                        <li>GPS coordinates (latitude, longitude)</li>
                                                        <li>Phone number</li>
                                                        <li>Email address</li>
                                                        <li>Website URL</li>
                                                        <li>Capacity (number)</li>
                                                        <li>Amenities (checkboxes)</li>
                                                        <li>Operating hours</li>
                                                    </ul>
                                                </li>
                                                
                                                <li><strong>Create admin features:</strong>
                                                    <ul>
                                                        <li>Custom columns in term list</li>
                                                        <li>Quick edit functionality</li>
                                                        <li>Bulk edit options</li>
                                                    </ul>
                                                </li>
                                                
                                                <li><strong>Build frontend display:</strong>
                                                    <ul>
                                                        <li>Location archive template</li>
                                                        <li>Google Maps integration</li>
                                                        <li>Location cards with all meta</li>
                                                        <li>Filter by amenities</li>
                                                    </ul>
                                                </li>
                                                
                                                <li><strong>Add advanced features:</strong>
                                                    <ul>
                                                        <li>Distance-based search</li>
                                                        <li>Import/export locations</li>
                                                        <li>REST API endpoints</li>
                                                        <li>Location ratings system</li>
                                                    </ul>
                                                </li>
                                            </ol>
                                            
                                            <p><strong>Bonus Challenges:</strong></p>
                                            <ul>
                                                <li>Create location comparison tool</li>
                                                <li>Add weather API integration</li>
                                                <li>Build availability calendar</li>
                                                <li>Implement virtual tour feature</li>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Resources -->
                            <section class="resources">
                                <h2>Additional Resources</h2>
                                <ul>
                                    <li><a href="https://developer.wordpress.org/reference/functions/get_term_meta/" target="_blank">get_term_meta() Documentation</a></li>
                                    <li><a href="https://developer.wordpress.org/reference/functions/update_term_meta/" target="_blank">update_term_meta() Documentation</a></li>
                                    <li><a href="https://developer.wordpress.org/plugins/metadata/managing-term-metadata/" target="_blank">Managing Term Metadata</a></li>
                                    <li><a href="https://make.wordpress.org/core/2015/10/23/4-4-taxonomy-term-metadata/" target="_blank">Term Metadata in WordPress 4.4</a></li>
                                    <li><a href="https://developer.wordpress.org/reference/hooks/created_taxonomy/" target="_blank">Taxonomy Hooks Reference</a></li>
                                </ul>
                            </section>
                        </div>

                        <!-- Lesson Navigation -->
                        <div class="lesson-navigation">
                            <a href="/06module/custom_taxonomies.html" class="lesson-nav-button prev">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
                                </svg>
                                <span>
                                    <small>Previous</small><br>
                                    Creating Custom Taxonomies
                                </span>
                            </a>
                            
                            <button class="complete-lesson-btn">
                                Mark as Complete
                            </button>
                            
                            <a href="/06module/homework_cpt_plugin.html" class="lesson-nav-button next">
                                <span>
                                    <small>Next</small><br>
                                    Homework: CPT Plugin
                                </span>
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/>
                                </svg>
                            </a>
                        </div>
                    </article>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="site-footer" role="contentinfo">
            <div class="footer-container">
                <div class="footer-content">
                    <div class="footer-section footer-about">
                        <h3>PHP WordPress Development</h3>
                        <p>Complete Web Development Course</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <ul class="footer-links">
                            <li><a href="/">Home</a></li>
                            <li><a href="/module6.html">Module 6</a></li>
                            <li><a href="/resources.html">Resources</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Support</h4>
                        <ul class="footer-links">
                            <li><a href="/about.html">About</a></li>
                            <li><a href="/contact.html">Contact</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2024 PHP WordPress Course. All rights reserved.</p>
                    <p>This course material is for educational purposes only.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- JavaScript -->
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/sidebar-toggle.js"></script>
    <script src="/assets/js/progress-tracker.js"></script>
    <script src="/assets/js/search.js"></script>
    <script src="/assets/js/theme-toggle.js"></script>
</body>
</html>