<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Module 2: PHP String Operators</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="icon" href="/favicon.png">
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <header>
        <h1>PHP String Operators</h1>
        <p><a href="index.html">← Back to Syllabus</a> | <a href="module2.html">Back to Module 2</a></p>
    </header>
    
    <main>
        <section class="intro">
            <h2>Introduction to PHP String Operators</h2>
            <p>Welcome to our session on PHP String Operators! Strings are one of the most common data types in web development, used for everything from displaying text to users to storing and manipulating data. PHP provides specialized operators designed to work with strings, making text manipulation efficient and intuitive.</p>
            
            <p>Think of string operators as the tools that help you weave words and text together in your applications. Just as a storyteller combines words to create narratives, PHP string operators allow you to combine, modify, and work with text in powerful ways. Today, we'll explore these operators, understand how they work, and see them in action through practical examples relevant to web development.</p>
        </section>

        <section class="operators_overview">
            <h2>String Operators Overview</h2>
            <p>PHP provides two primary string operators that enable you to work with text:</p>
            
            <div class="svg-container">
                <svg viewBox="0 0 600 250" xmlns="http://www.w3.org/2000/svg">
                    <!-- Concatenation -->
                    <rect x="100" y="50" width="180" height="100" rx="10" fill="#4CAF50" />
                    <text x="190" y="100" text-anchor="middle" font-size="24" fill="white">.</text>
                    <text x="190" y="130" text-anchor="middle" font-size="16" fill="white">Concatenation</text>
                    
                    <!-- Concatenation Assignment -->
                    <rect x="320" y="50" width="180" height="100" rx="10" fill="#2196F3" />
                    <text x="410" y="100" text-anchor="middle" font-size="24" fill="white">.=</text>
                    <text x="410" y="130" text-anchor="middle" font-size="16" fill="white">Concatenation Assignment</text>
                </svg>
            </div>
            
            <div class="operators_table">
                <table>
                    <thead>
                        <tr>
                            <th>Operator</th>
                            <th>Name</th>
                            <th>Example</th>
                            <th>Result</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>.</td>
                            <td>Concatenation</td>
                            <td>$a . $b</td>
                            <td>Concatenation of $a and $b</td>
                        </tr>
                        <tr>
                            <td>.=</td>
                            <td>Concatenation assignment</td>
                            <td>$a .= $b</td>
                            <td>Appends $b to $a</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <p>While these might seem like just two simple operators, they form the foundation of text manipulation in PHP and can be combined with other PHP features to create powerful string handling capabilities.</p>
        </section>

        <section class="concatenation_operator">
            <h2>Concatenation Operator (.)</h2>
            <p>The concatenation operator (.) combines two strings into one. It's represented by a period/dot and acts as a "glue" to join strings together.</p>
            
            <div class="mermaid-diagram">
                <h3>How Concatenation Works</h3>
                <div class="mermaid">
                    graph LR
                        A["'Hello'"] --> C
                        B["'World'"] --> C
                        C["'Hello' . 'World'"] --> D["'HelloWorld'"]
                </div>
            </div>
            
            <div class="code_example">
                <h3>Basic Concatenation Examples</h3>
                <pre><code>&lt;?php
// Simple concatenation of two strings
$greeting = "Hello";
$name = "World";
$message = $greeting . " " . $name;
echo $message; // Outputs: Hello World

// Concatenation with multiple strings
$first_name = "John";
$last_name = "Doe";
$full_name = $first_name . " " . $last_name;
echo "&lt;br&gt;Full name: " . $full_name; // Outputs: Full name: John Doe

// Concatenation with numbers
$product = "Widget";
$quantity = 5;
$price = 9.99;
$order_summary = "You ordered " . $quantity . " " . $product . "s at $" . $price . " each.";
echo "&lt;br&gt;" . $order_summary; 
// Outputs: You ordered 5 Widgets at $9.99 each.

// Concatenation with expressions
$subtotal = $quantity * $price;
$tax_rate = 0.08;
$tax = $subtotal * $tax_rate;
$total = $subtotal + $tax;

$receipt = "Subtotal: $" . $subtotal . "&lt;br&gt;" .
           "Tax (" . ($tax_rate * 100) . "%): $" . number_format($tax, 2) . "&lt;br&gt;" .
           "Total: $" . number_format($total, 2);
echo "&lt;br&gt;&lt;br&gt;" . $receipt;
/* Outputs:
Subtotal: $49.95
Tax (8%): $4.00
Total: $53.95
*/
?&gt;</code></pre>
            </div>
            
            <div class="code_example">
                <h3>Concatenation vs. Addition</h3>
                <p>It's important to understand the difference between concatenation (.) and addition (+) in PHP:</p>
                
                <pre><code>&lt;?php
// Addition vs. Concatenation
$num1 = 5;
$num2 = 10;

// Using the addition operator
$sum = $num1 + $num2;
echo "Addition: " . $num1 . " + " . $num2 . " = " . $sum; // Outputs: Addition: 5 + 10 = 15

// Using the concatenation operator
$concat = $num1 . $num2;
echo "&lt;br&gt;Concatenation: " . $num1 . " . " . $num2 . " = " . $concat; // Outputs: Concatenation: 5 . 10 = 510

// Mixed operations - be careful with precedence!
$mixed = $num1 + $num2 . " is the result"; // Addition happens first, then concatenation
echo "&lt;br&gt;Mixed (addition first): " . $mixed; // Outputs: Mixed (addition first): 15 is the result

$mixed2 = "$num1 + $num2 = " . ($num1 + $num2); // Parentheses clarify the order
echo "&lt;br&gt;Mixed (with clarity): " . $mixed2; // Outputs: Mixed (with clarity): 5 + 10 = 15
?&gt;</code></pre>
            </div>
            
            <div class="type_conversion">
                <h3>Type Conversion in Concatenation</h3>
                <p>PHP automatically converts non-string values to strings when concatenating:</p>
                
                <pre><code>&lt;?php
// Numbers to strings
$integer = 42;
$result = "The answer is " . $integer;
echo $result; // Outputs: The answer is 42

// Booleans to strings
$is_active = true;
$status = "Account status: " . $is_active;
echo "&lt;br&gt;" . $status; // Outputs: Account status: 1
// Note: true becomes "1", false becomes "" (empty string)

// NULL to string
$middle_name = null;
$full_info = "Middle name: " . $middle_name;
echo "&lt;br&gt;" . $full_info; // Outputs: Middle name: 

// Arrays can't be directly converted to strings
$colors = ["red", "green", "blue"];
// This would cause an error:
// echo "Colors: " . $colors;

// Instead, you'd need to convert the array first
echo "&lt;br&gt;Colors: " . implode(", ", $colors); // Outputs: Colors: red, green, blue

// Objects with __toString() method can be concatenated
class User {
    public $name;
    public $email;
    
    public function __construct($name, $email) {
        $this->name = $name;
        $this->email = $email;
    }
    
    public function __toString() {
        return $this->name . " (" . $this->email . ")";
    }
}

$user = new User("Jane Smith", "jane@example.com");
$welcome = "Welcome back, " . $user;
echo "&lt;br&gt;" . $welcome; // Outputs: Welcome back, Jane Smith (jane@example.com)
?&gt;</code></pre>
            </div>
            
            <div class="real_world">
                <h3>Real-World Application: Dynamic HTML Generation</h3>
                <p>String concatenation is extremely useful for building HTML dynamically:</p>
                
                <pre><code>&lt;?php
// Function to generate HTML for a product card
function generateProductCard($product) {
    $html = "&lt;div class='product-card'&gt;";
    $html .= "  &lt;h3&gt;" . htmlspecialchars($product['name']) . "&lt;/h3&gt;";
    $html .= "  &lt;img src='" . htmlspecialchars($product['image']) . "' alt='" . htmlspecialchars($product['name']) . "'&gt;";
    $html .= "  &lt;p class='price'&gt;$" . number_format($product['price'], 2) . "&lt;/p&gt;";
    
    if ($product['stock'] > 0) {
        $html .= "  &lt;p class='status in-stock'&gt;In Stock: " . $product['stock'] . " available&lt;/p&gt;";
        $html .= "  &lt;button class='buy-now'&gt;Buy Now&lt;/button&gt;";
    } else {
        $html .= "  &lt;p class='status out-of-stock'&gt;Out of Stock&lt;/p&gt;";
        $html .= "  &lt;button class='notify-me'&gt;Notify Me&lt;/button&gt;";
    }
    
    $html .= "  &lt;div class='description'&gt;" . htmlspecialchars($product['description']) . "&lt;/div&gt;";
    $html .= "&lt;/div&gt;";
    
    return $html;
}

// Sample product data
$products = [
    [
        'name' => 'Smartphone Pro',
        'image' => '/images/smartphone.jpg',
        'price' => 799.99,
        'stock' => 15,
        'description' => 'The latest smartphone with advanced features.'
    ],
    [
        'name' => 'Wireless Headphones',
        'image' => '/images/headphones.jpg',
        'price' => 149.99,
        'stock' => 0,
        'description' => 'Premium wireless headphones with noise cancellation.'
    ]
];

// Generate HTML for all products
$page_content = "&lt;div class='product-grid'&gt;";

foreach ($products as $product) {
    $page_content .= generateProductCard($product);
}

$page_content .= "&lt;/div&gt;";

echo $page_content;
?&gt;</code></pre>
            </div>
            
            <div class="best_practices">
                <h3>Best Practices for Concatenation</h3>
                <ol>
                    <li><strong>Add spaces manually:</strong> The concatenation operator doesn't add spaces, so remember to add them where needed: <code>$first . " " . $last</code></li>
                    <li><strong>Use parentheses for clarity:</strong> When mixing operations, use parentheses to make your intentions clear: <code>"Total: $" . ($price * $quantity)</code></li>
                    <li><strong>Consider alternatives:</strong> For simple cases, string interpolation with double quotes might be more readable (see later in this lesson)</li>
                    <li><strong>Be cautious with types:</strong> Not all types can be concatenated directly (like arrays) - convert them appropriately</li>
                    <li><strong>Escape HTML:</strong> Always use <code>htmlspecialchars()</code> when outputting user-provided data to prevent XSS attacks</li>
                </ol>
            </div>
            
            <p><strong>Analogy:</strong> The concatenation operator is like glue or tape that joins pieces of text together. Just as you might tape several photos together to create a collage, the concatenation operator combines separate strings to create a unified message.</p>
        </section>

        <section class="concatenation_assignment">
            <h2>Concatenation Assignment Operator (.=)</h2>
            <p>The concatenation assignment operator (.=) appends the string on the right to the variable on the left. It combines concatenation and assignment in one step, making your code more concise when you need to build strings incrementally.</p>
            
            <div class="mermaid-diagram">
                <h3>How Concatenation Assignment Works</h3>
                <div class="mermaid">
                    graph TD
                        A["$str = 'Hello'"] --> B["$str .= ' World'"]
                        B --> C["$str becomes 'Hello World'"]
                </div>
            </div>
            
            <div class="code_example">
                <h3>Basic Concatenation Assignment Examples</h3>
                <pre><code>&lt;?php
// Simple concatenation assignment
$message = "Hello";
$message .= " ";
$message .= "World";
echo $message; // Outputs: Hello World

// Building a string incrementally
$html = "&lt;ul&gt;";
$html .= "&lt;li&gt;Item 1&lt;/li&gt;";
$html .= "&lt;li&gt;Item 2&lt;/li&gt;";
$html .= "&lt;li&gt;Item 3&lt;/li&gt;";
$html .= "&lt;/ul&gt;";
echo "&lt;br&gt;" . $html;
/* Outputs:
<ul>
<li>Item 1</li>
<li>Item 2</li>
<li>Item 3</li>
</ul>
*/

// Building text from a loop
$numbers = [1, 2, 3, 4, 5];
$list = "Numbers: ";

foreach ($numbers as $index => $number) {
    if ($index > 0) {
        $list .= ", ";
    }
    $list .= $number;
}

echo "&lt;br&gt;" . $list; // Outputs: Numbers: 1, 2, 3, 4, 5
?&gt;</code></pre>
            </div>
            
            <div class="real_world">
                <h3>Real-World Application: Building an Email Template</h3>
                <p>The concatenation assignment operator is perfect for building longer texts like email templates:</p>
                
                <pre><code>&lt;?php
// Function to generate an email message
function generateOrderConfirmationEmail($order) {
    $email = "";
    
    // Header
    $email .= "Dear " . htmlspecialchars($order['customer_name']) . ",\n\n";
    $email .= "Thank you for your order (#" . $order['order_id'] . "). We're pleased to confirm that your order has been received and is being processed.\n\n";
    
    // Order details
    $email .= "ORDER DETAILS:\n";
    $email .= "----------------------\n";
    
    $total = 0;
    foreach ($order['items'] as $item) {
        $subtotal = $item['quantity'] * $item['price'];
        $total += $subtotal;
        
        $email .= htmlspecialchars($item['name']) . " × " . $item['quantity'] . " @ $" . number_format($item['price'], 2) . " = $" . number_format($subtotal, 2) . "\n";
    }
    
    $email .= "----------------------\n";
    $email .= "Subtotal: $" . number_format($total, 2) . "\n";
    
    $shipping = $order['shipping_cost'];
    $email .= "Shipping: $" . number_format($shipping, 2) . "\n";
    
    $tax = $total * 0.08; // Assuming 8% tax
    $email .= "Tax: $" . number_format($tax, 2) . "\n";
    
    $grand_total = $total + $shipping + $tax;
    $email .= "Total: $" . number_format($grand_total, 2) . "\n\n";
    
    // Shipping info
    $email .= "SHIPPING INFORMATION:\n";
    $email .= "----------------------\n";
    $email .= htmlspecialchars($order['shipping_address']['name']) . "\n";
    $email .= htmlspecialchars($order['shipping_address']['street']) . "\n";
    
    if (!empty($order['shipping_address']['street2'])) {
        $email .= htmlspecialchars($order['shipping_address']['street2']) . "\n";
    }
    
    $email .= htmlspecialchars($order['shipping_address']['city']) . ", ";
    $email .= htmlspecialchars($order['shipping_address']['state']) . " ";
    $email .= htmlspecialchars($order['shipping_address']['zip']) . "\n";
    $email .= htmlspecialchars($order['shipping_address']['country']) . "\n\n";
    
    // Estimated delivery
    $email .= "Estimated delivery date: " . $order['estimated_delivery'] . "\n\n";
    
    // Footer
    $email .= "If you have any questions about your order, please contact our customer service team at support@example.com.\n\n";
    $email .= "Thank you for shopping with us!\n\n";
    $email .= "The Example Store Team";
    
    return $email;
}

// Sample order data
$order = [
    'order_id' => 12345,
    'customer_name' => 'Jane Smith',
    'items' => [
        [
            'name' => 'Wireless Keyboard',
            'quantity' => 1,
            'price' => 49.99
        ],
        [
            'name' => 'Mouse Pad',
            'quantity' => 2,
            'price' => 9.99
        ]
    ],
    'shipping_cost' => 5.99,
    'shipping_address' => [
        'name' => 'Jane Smith',
        'street' => '123 Main St',
        'street2' => 'Apt 4B',
        'city' => 'Anytown',
        'state' => 'CA',
        'zip' => '12345',
        'country' => 'United States'
    ],
    'estimated_delivery' => 'May 15-18, 2025'
];

// Generate the email
$email_content = generateOrderConfirmationEmail($order);

// Display with HTML line breaks for readability
echo "&lt;pre&gt;" . htmlspecialchars($email_content) . "&lt;/pre&gt;";
?&gt;</code></pre>
            </div>
            
            <div class="performance">
                <h3>Performance Considerations</h3>
                <p>When building large strings in PHP, there are performance implications to consider:</p>
                
                <pre><code>&lt;?php
// Example: Building a very large string
$iterations = 10000;

// Method 1: Using concatenation operator (.)
function buildStringWithConcatenation($iterations) {
    $start_time = microtime(true);
    
    $result = "";
    for ($i = 0; $i < $iterations; $i++) {
        $result = $result . "Line " . $i . " added to the string.\n";
    }
    
    $end_time = microtime(true);
    return [
        'time' => $end_time - $start_time,
        'length' => strlen($result)
    ];
}

// Method 2: Using concatenation assignment (.=)
function buildStringWithConcatenationAssignment($iterations) {
    $start_time = microtime(true);
    
    $result = "";
    for ($i = 0; $i < $iterations; $i++) {
        $result .= "Line " . $i . " added to the string.\n";
    }
    
    $end_time = microtime(true);
    return [
        'time' => $end_time - $start_time,
        'length' => strlen($result)
    ];
}

// Method 3: Using an array and implode
function buildStringWithArray($iterations) {
    $start_time = microtime(true);
    
    $lines = [];
    for ($i = 0; $i < $iterations; $i++) {
        $lines[] = "Line " . $i . " added to the string.";
    }
    $result = implode("\n", $lines);
    
    $end_time = microtime(true);
    return [
        'time' => $end_time - $start_time,
        'length' => strlen($result)
    ];
}

// Compare performance
$method1 = buildStringWithConcatenation($iterations);
$method2 = buildStringWithConcatenationAssignment($iterations);
$method3 = buildStringWithArray($iterations);

echo "&lt;h4&gt;String Building Performance Comparison ($iterations iterations)&lt;/h4&gt;";
echo "&lt;table border='1'&gt;";
echo "&lt;tr&gt;&lt;th&gt;Method&lt;/th&gt;&lt;th&gt;Time (seconds)&lt;/th&gt;&lt;th&gt;String Length&lt;/th&gt;&lt;/tr&gt;";
echo "&lt;tr&gt;&lt;td&gt;Concatenation (.)&lt;/td&gt;&lt;td&gt;" . number_format($method1['time'], 6) . "&lt;/td&gt;&lt;td&gt;" . number_format($method1['length']) . "&lt;/td&gt;&lt;/tr&gt;";
echo "&lt;tr&gt;&lt;td&gt;Concatenation Assignment (.=)&lt;/td&gt;&lt;td&gt;" . number_format($method2['time'], 6) . "&lt;/td&gt;&lt;td&gt;" . number_format($method2['length']) . "&lt;/td&gt;&lt;/tr&gt;";
echo "&lt;tr&gt;&lt;td&gt;Array with implode()&lt;/td&gt;&lt;td&gt;" . number_format($method3['time'], 6) . "&lt;/td&gt;&lt;td&gt;" . number_format($method3['length']) . "&lt;/td&gt;&lt;/tr&gt;";
echo "&lt;/table&gt;";
echo "&lt;p&gt;Note: Performance may vary based on PHP version and system.&lt;/p&gt;";
?&gt;</code></pre>
                
                <p><strong>Performance Tips:</strong></p>
                <ul>
                    <li>Using <code>.=</code> is generally more efficient than using <code>$a = $a . $b</code></li>
                    <li>For building very large strings, using an array and <code>implode()</code> often provides better performance</li>
                    <li>Modern PHP versions have significantly improved string concatenation performance</li>
                </ul>
            </div>
            
            <p><strong>Analogy:</strong> The concatenation assignment operator is like a sticky note pad where you keep adding more notes to the bottom. Each time you use <code>.=</code>, you're sticking another note to your growing collection, building it up piece by piece.</p>
        </section>

        <section class="string_interpolation">
            <h2>String Interpolation (An Alternative to Concatenation)</h2>
            <p>While not technically an operator, string interpolation offers an alternative to concatenation for combining strings and variables. In PHP, variables within double-quoted strings are automatically replaced with their values.</p>
            
            <div class="code_example">
                <h3>Basic String Interpolation Examples</h3>
                <pre><code>&lt;?php
// Simple variable interpolation
$name = "John";
$greeting = "Hello, $name!"; // Variables inside double quotes are expanded
echo $greeting; // Outputs: Hello, John!

// Concatenation equivalent
$greeting_concat = "Hello, " . $name . "!";
echo "&lt;br&gt;" . $greeting_concat; // Outputs: Hello, John!

// Using curly braces for complex expressions
$product = "Widget";
$quantity = 5;
$price = 9.99;
$total = $quantity * $price;

$summary = "You ordered {$quantity} {$product}s at \${$price} each, for a total of \${$total}.";
echo "&lt;br&gt;" . $summary;
// Outputs: You ordered 5 Widgets at $9.99 each, for a total of $49.95.

// Property or array access needs braces
$user = [
    'first_name' => 'Jane',
    'last_name' => 'Doe',
    'email' => 'jane@example.com'
];

$welcome = "Welcome, {$user['first_name']} {$user['last_name']}!";
echo "&lt;br&gt;" . $welcome; // Outputs: Welcome, Jane Doe!

// Object properties also need braces
class Customer {
    public $name;
    public $points;
    
    public function __construct($name, $points) {
        $this->name = $name;
        $this->points = $points;
    }
}

$customer = new Customer("Alice Johnson", 250);
$loyalty_message = "Dear {$customer->name}, you have {$customer->points} loyalty points.";
echo "&lt;br&gt;" . $loyalty_message;
// Outputs: Dear Alice Johnson, you have 250 loyalty points.
?&gt;</code></pre>
            </div>
            
            <div class="comparison">
                <h3>Concatenation vs. Interpolation: When to Use Each</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Aspect</th>
                            <th>Concatenation (.)</th>
                            <th>Interpolation (Double Quotes)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Readability</td>
                            <td>Can be harder to read with complex strings</td>
                            <td>Often more readable for simple variable inclusions</td>
                        </tr>
                        <tr>
                            <td>Complexity</td>
                            <td>Better for complex expressions</td>
                            <td>Requires curly braces for complex expressions</td>
                        </tr>
                        <tr>
                            <td>Performance</td>
                            <td>Generally similar for modern PHP</td>
                            <td>Slightly slower due to parsing, but negligible in most cases</td>
                        </tr>
                        <tr>
                            <td>Special Characters</td>
                            <td>No need to escape quotes or variables</td>
                            <td>Must escape double quotes (\") and dollar signs (\$)</td>
                        </tr>
                        <tr>
                            <td>Recommended For</td>
                            <td>Building HTML, complex string operations</td>
                            <td>Simple messages, readable text with few variables</td>
                        </tr>
                    </tbody>
                </table>
                
                <div class="code_example">
                    <h4>Examples Comparing Both Approaches</h4>
                    <pre><code>&lt;?php
// Example 1: Simple message
$username = "user123";

// Concatenation
$welcome1 = "Welcome back, " . $username . "!";

// Interpolation
$welcome2 = "Welcome back, $username!";

echo "Simple message comparison:&lt;br&gt;";
echo "Concatenation: $welcome1&lt;br&gt;";
echo "Interpolation: $welcome2&lt;br&gt;&lt;br&gt;";

// Example 2: HTML generation
$title = "Products";
$items = ["Laptop", "Phone", "Tablet"];

// Concatenation
$html1 = "&lt;h2&gt;" . htmlspecialchars($title) . "&lt;/h2&gt;\n&lt;ul&gt;\n";
foreach ($items as $item) {
    $html1 .= "  &lt;li&gt;" . htmlspecialchars($item) . "&lt;/li&gt;\n";
}
$html1 .= "&lt;/ul&gt;";

// Interpolation
$html2 = "&lt;h2&gt;" . htmlspecialchars($title) . "&lt;/h2&gt;\n&lt;ul&gt;\n";
foreach ($items as $item) {
    $html2 .= "  &lt;li&gt;" . htmlspecialchars($item) . "&lt;/li&gt;\n";
}
$html2 .= "&lt;/ul&gt;";

echo "HTML generation comparison:&lt;br&gt;";
echo "Concatenation: &lt;pre&gt;" . htmlspecialchars($html1) . "&lt;/pre&gt;";
echo "Interpolation: &lt;pre&gt;" . htmlspecialchars($html2) . "&lt;/pre&gt;";

// Example 3: Complex expression
$price = 29.99;
$quantity = 3;

// Concatenation
$total1 = "Total: $" . number_format($price * $quantity, 2);

// Interpolation
$total2 = "Total: \${number_format($price * $quantity, 2)}"; // This doesn't work as expected
$total2_fixed = "Total: \$" . number_format($price * $quantity, 2); // Fixed version

echo "Complex expression comparison:&lt;br&gt;";
echo "Concatenation: $total1&lt;br&gt;";
echo "Interpolation (attempted): $total2&lt;br&gt;";  // Doesn't work correctly
echo "Interpolation (fixed): $total2_fixed&lt;br&gt;";
?&gt;</code></pre>
                </div>
            </div>
            
            <div class="real_world">
                <h3>Real-World Application: Template System</h3>
                <p>String interpolation and concatenation can be combined to create a simple template system:</p>
                
                <pre><code>&lt;?php
// Simple template engine
class TemplateEngine {
    private $templates = [];
    
    // Register a template
    public function registerTemplate($name, $content) {
        $this->templates[$name] = $content;
    }
    
    // Render a template with variables
    public function render($template_name, $vars = []) {
        if (!isset($this->templates[$template_name])) {
            return "Template not found: " . htmlspecialchars($template_name);
        }
        
        $template = $this->templates[$template_name];
        
        // Replace placeholders with values
        foreach ($vars as $key => $value) {
            // Escape the value if it's a string
            if (is_string($value)) {
                $value = htmlspecialchars($value);
            }
            
            // Replace {{var_name}} with the value
            $template = str_replace("{{" . $key . "}}", $value, $template);
        }
        
        // Handle conditionals - very basic implementation
        $template = preg_replace_callback(
            '/\{\{if\s+([a-zA-Z0-9_]+)\}\}(.*?)\{\{endif\}\}/s',
            function($matches) use ($vars) {
                $condition = $matches[1];
                $content = $matches[2];
                
                // Check if the condition variable exists and is truthy
                if (isset($vars[$condition]) && $vars[$condition]) {
                    return $content;
                } else {
                    return '';
                }
            },
            $template
        );
        
        return $template;
    }
}

// Create a template engine
$engine = new TemplateEngine();

// Register a template
$engine->registerTemplate("product_card", "
&lt;div class='product'>
    &lt;h3>{{name}}&lt;/h3>
    &lt;div class='price'>\${{price}}&lt;/div>
    {{if on_sale}}
    &lt;div class='sale-badge'>On Sale!&lt;/div>
    {{endif}}
    &lt;div class='description'>{{description}}&lt;/div>
    &lt;button>Add to Cart&lt;/button>
&lt;/div>
");

// Render the template with different data
$product1 = [
    'name' => 'Wireless Headphones',
    'price' => '149.99',
    'on_sale' => true,
    'description' => 'Premium wireless headphones with noise cancellation.'
];

$product2 = [
    'name' => 'Smart Watch',
    'price' => '299.99',
    'on_sale' => false,
    'description' => 'Track your fitness and stay connected with this smartwatch.'
];

echo $engine->render("product_card", $product1);
echo $engine->render("product_card", $product2);
?&gt;</code></pre>
            </div>
            
            <p><strong>Analogy:</strong> String interpolation is like a form letter where you've left blanks to be filled in with specific information. Instead of cutting and pasting different pieces together (concatenation), you have a complete template where variables are automatically replaced with their values.</p>
        </section>

        <section class="heredoc_nowdoc">
            <h2>Heredoc and Nowdoc Syntax</h2>
            <p>For handling multi-line strings, PHP provides Heredoc and Nowdoc syntax, which offer alternatives to concatenation for creating complex strings.</p>
            
            <div class="code_example">
                <h3>Heredoc Syntax</h3>
                <p>Heredoc syntax works like double-quoted strings and allows variable interpolation:</p>
                
                <pre><code>&lt;?php
// Heredoc example
$user = "John";
$points = 1250;

$message = <<<EOT
Dear $user,

We are pleased to inform you that your account has been upgraded!
You currently have $points reward points.

Your benefits include:
- Free shipping on all orders
- Early access to new products
- Exclusive member discounts

Thank you for your continued support!

The Example Team
EOT;

echo "&lt;pre&gt;" . htmlspecialchars($message) . "&lt;/pre&gt;";
?&gt;</code></pre>
                
                <h3>Nowdoc Syntax</h3>
                <p>Nowdoc syntax (with single quotes) works like single-quoted strings and does not process variables:</p>
                
                <pre><code>&lt;?php
// Nowdoc example
$code_sample = <<<'CODE'
function calculateTotal($price, $quantity) {
    // Variables are NOT interpolated in Nowdoc
    $subtotal = $price * $quantity;
    $tax = $subtotal * 0.08;
    $total = $subtotal + $tax;
    
    return $total;
}

// Call the function
$grand_total = calculateTotal(29.99, 2);
echo "Total: $" . number_format($grand_total, 2);
CODE;

echo "&lt;pre&gt;" . htmlspecialchars($code_sample) . "&lt;/pre&gt;";
?&gt;</code></pre>
            </div>
            
            <div class="real_world">
                <h3>Real-World Application: Email Template with Heredoc</h3>
                <p>Heredoc is ideal for creating email templates or other multi-line text:</p>
                
                <pre><code>&lt;?php
function generateWelcomeEmail($user) {
    $current_year = date('Y');
    
    $email = <<<EMAIL
Subject: Welcome to Example.com, {$user['name']}!

Dear {$user['name']},

Thank you for creating an account with Example.com! We're excited to have you join our community.

Your account details:
- Username: {$user['username']}
- Email: {$user['email']}

To get started, we recommend:
1. Complete your profile
2. Explore our latest products
3. Connect with other members

If you have any questions, feel free to reply to this email or contact our support team.

Best regards,
The Example.com Team

© $current_year Example.com. All rights reserved.
EMAIL;

    return $email;
}

// Sample user data
$user = [
    'name' => 'Sarah Johnson',
    'username' => 'sarah_j',
    'email' => 'sarah@example.com'
];

// Generate the email
$welcome_email = generateWelcomeEmail($user);

// Display it
echo "&lt;pre&gt;" . htmlspecialchars($welcome_email) . "&lt;/pre&gt;";
?&gt;</code></pre>
            </div>
            
            <div class="comparison">
                <h3>When to Use Different String Syntax</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Syntax</th>
                            <th>Variables?</th>
                            <th>Best For</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Single Quotes (')</td>
                            <td>No</td>
                            <td>Simple strings with no variables</td>
                        </tr>
                        <tr>
                            <td>Double Quotes (")</td>
                            <td>Yes</td>
                            <td>Simple strings with variables</td>
                        </tr>
                        <tr>
                            <td>Concatenation (.)</td>
                            <td>-</td>
                            <td>Building strings dynamically, complex expressions</td>
                        </tr>
                        <tr>
                            <td>Heredoc (<<<EOT)</td>
                            <td>Yes</td>
                            <td>Multi-line strings with variables (emails, templates)</td>
                        </tr>
                        <tr>
                            <td>Nowdoc (<<<'EOT')</td>
                            <td>No</td>
                            <td>Multi-line strings without variable processing (code examples, SQL)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section class="advanced_string_manipulation">
            <h2>Beyond Basic String Operators</h2>
            <p>While concatenation and concatenation assignment are the primary string operators in PHP, the language offers many powerful string functions that complement these operators.</p>
            
            <div class="code_example">
                <h3>Common String Functions</h3>
                <pre><code>&lt;?php
// Sample string
$text = "The quick brown fox jumps over the lazy dog.";

// String length
echo "Length: " . strlen($text) . "&lt;br&gt;"; // Outputs: Length: 44

// String position
$position = strpos($text, "fox");
echo "Position of 'fox': " . $position . "&lt;br&gt;"; // Outputs: Position of 'fox': 16

// Substring
$substr = substr($text, 4, 5);
echo "Substring (4, 5): " . $substr . "&lt;br&gt;"; // Outputs: Substring (4, 5): quick

// String replacement
$replaced = str_replace("fox", "cat", $text);
echo "Replaced: " . $replaced . "&lt;br&gt;"; // Outputs: Replaced: The quick brown cat jumps over the lazy dog.

// Case modification
echo "Uppercase: " . strtoupper($text) . "&lt;br&gt;";
echo "Lowercase: " . strtolower($text) . "&lt;br&gt;";
echo "First letter capitalized: " . ucfirst(strtolower($text)) . "&lt;br&gt;";
echo "All words capitalized: " . ucwords(strtolower($text)) . "&lt;br&gt;";
?&gt;</code></pre>
            </div>
            
            <div class="code_example">
                <h3>Advanced String Operations</h3>
                <pre><code>&lt;?php
// String exploding (splitting)
$sentence = "PHP is a powerful language for web development";
$words = explode(" ", $sentence);
echo "Words in the sentence: " . count($words) . "&lt;br&gt;";
echo "Third word: " . $words[2] . "&lt;br&gt;&lt;br&gt;";

// String imploding (joining)
$colors = ["red", "green", "blue", "yellow"];
$color_list = implode(", ", $colors);
echo "Color list: " . $color_list . "&lt;br&gt;&lt;br&gt;";

// Regular expressions
$text = "Contact us at info@example.com or support@example.org";
preg_match_all('/[\w._%+-]+@[\w.-]+\.[a-zA-Z]{2,6}/', $text, $matches);
echo "Found emails:&lt;br&gt;";
foreach ($matches[0] as $email) {
    echo "- " . $email . "&lt;br&gt;";
}
echo "&lt;br&gt;";

// String formatting
$name = "John";
$points = 1250;
$date = new DateTime();
$formatted = sprintf("User %s has %d points as of %s", $name, $points, $date->format('Y-m-d'));
echo "Formatted: " . $formatted . "&lt;br&gt;&lt;br&gt;";

// String trimming
$input = "  \t Hello, World!  \n  ";
$trimmed = trim($input);
echo "Original (with spaces): '" . $input . "'&lt;br&gt;";
echo "Trimmed: '" . $trimmed . "'&lt;br&gt;&lt;br&gt;";

// String padding
$code = "42";
$padded_left = str_pad($code, 5, "0", STR_PAD_LEFT);
$padded_right = str_pad($code, 5, "0", STR_PAD_RIGHT);
$padded_both = str_pad($code, 5, "0", STR_PAD_BOTH);
echo "Original: '$code'&lt;br&gt;";
echo "Padded left: '$padded_left'&lt;br&gt;";
echo "Padded right: '$padded_right'&lt;br&gt;";
echo "Padded both: '$padded_both'&lt;br&gt;";
?&gt;</code></pre>
            </div>
            
            <div class="real_world">
                <h3>Real-World Application: URL Builder</h3>
                <p>Combining string operators with string functions can create powerful tools:</p>
                
                <pre><code>&lt;?php
// URL Builder class
class URLBuilder {
    private $base_url;
    private $path = '';
    private $query_params = [];
    
    public function __construct($base_url) {
        // Ensure the base URL ends with a single slash
        $this->base_url = rtrim($base_url, '/') . '/';
    }
    
    public function addPath($path) {
        // Remove slashes from beginning and end of path
        $path = trim($path, '/');
        
        if (!empty($path)) {
            // Add path to the existing path (if any)
            if (empty($this->path)) {
                $this->path = $path;
            } else {
                $this->path .= '/' . $path;
            }
        }
        
        return $this;
    }
    
    public function addQueryParam($key, $value) {
        if ($value !== null) {
            $this->query_params[$key] = $value;
        }
        
        return $this;
    }
    
    public function addQueryParams($params) {
        foreach ($params as $key => $value) {
            $this->addQueryParam($key, $value);
        }
        
        return $this;
    }
    
    public function build() {
        $url = $this->base_url;
        
        // Add path
        if (!empty($this->path)) {
            $url .= $this->path;
        }
        
        // Add query parameters
        if (!empty($this->query_params)) {
            $url .= '?';
            $pairs = [];
            
            foreach ($this->query_params as $key => $value) {
                $pairs[] = urlencode($key) . '=' . urlencode($value);
            }
            
            $url .= implode('&', $pairs);
        }
        
        return $url;
    }
}

// Example usage
$url_builder = new URLBuilder('https://api.example.com');
$url = $url_builder
    ->addPath('v2/products')
    ->addQueryParam('category', 'electronics')
    ->addQueryParam('sort', 'price')
    ->addQueryParam('order', 'desc')
    ->addQueryParam('limit', 20)
    ->build();

echo "Built URL: " . htmlspecialchars($url) . "&lt;br&gt;";
// Outputs: Built URL: https://api.example.com/v2/products?category=electronics&sort=price&order=desc&limit=20

// Another example: Search URL
$search_builder = new URLBuilder('https://example.com');
$search_url = $search_builder
    ->addPath('search')
    ->addQueryParam('q', 'PHP string operators')
    ->addQueryParam('page', 1)
    ->build();

echo "Search URL: " . htmlspecialchars($search_url);
// Outputs: Search URL: https://example.com/search?q=PHP+string+operators&page=1
?&gt;</code></pre>
            </div>
        </section>

        <section class="best_practices">
            <h2>Best Practices for String Operations</h2>
            <ul>
                <li><strong>Choose the right approach:</strong> Use concatenation for building strings dynamically, interpolation for readability with simple variables, and Heredoc/Nowdoc for multi-line content.</li>
                <li><strong>Be mindful of performance:</strong> For large strings, consider using arrays with <code>implode()</code> instead of repeated concatenation.</li>
                <li><strong>Escape user input:</strong> Always use <code>htmlspecialchars()</code> when outputting user-provided data in HTML to prevent XSS attacks.</li>
                <li><strong>Watch for encoding issues:</strong> Be aware of character encoding, especially when working with multi-byte characters. Consider using the <code>mb_*</code> string functions for proper Unicode handling.</li>
                <li><strong>Use built-in functions:</strong> PHP has a rich set of string functions - leverage them instead of reinventing the wheel.</li>
                <li><strong>Maintain readability:</strong> Break long string operations into smaller chunks and use meaningful variable names for intermediate results.</li>
            </ul>
            
            <div class="code_example">
                <h3>Best Practices Example</h3>
                <pre><code>&lt;?php
// Good practice: Break complex string operations into readable chunks
function generateUserProfile($user) {
    // Build the header section
    $header = "&lt;div class='profile-header'&gt;\n";
    $header .= "  &lt;h2&gt;" . htmlspecialchars($user['name']) . "&lt;/h2&gt;\n";
    $header .= "  &lt;p&gt;" . htmlspecialchars($user['title']) . "&lt;/p&gt;\n";
    $header .= "&lt;/div&gt;\n";
    
    // Build the stats section
    $stats = "&lt;div class='profile-stats'&gt;\n";
    $stats .= "  &lt;ul&gt;\n";
    $stats .= "    &lt;li&gt;Posts: " . $user['post_count'] . "&lt;/li&gt;\n";
    $stats .= "    &lt;li&gt;Followers: " . $user['follower_count'] . "&lt;/li&gt;\n";
    $stats .= "    &lt;li&gt;Joined: " . date('F Y', strtotime($user['join_date'])) . "&lt;/li&gt;\n";
    $stats .= "  &lt;/ul&gt;\n";
    $stats .= "&lt;/div&gt;\n";
    
    // Build the bio section (using Heredoc for multi-line content)
    $bio = <<<HTML
<div class='profile-bio'>
  <h3>About Me</h3>
  <p>{$user['bio']}</p>
</div>
HTML;
    
    // Combine all sections
    $profile = "&lt;div class='user-profile'&gt;\n";
    $profile .= $header;
    $profile .= $stats;
    $profile .= $bio;
    $profile .= "&lt;/div&gt;";
    
    return $profile;
}

// Sample user data
$user = [
    'name' => 'Jane Smith',
    'title' => 'Senior Web Developer',
    'post_count' => 127,
    'follower_count' => 1450,
    'join_date' => '2020-03-15',
    'bio' => 'Passionate about web development and open source. I love creating elegant solutions to complex problems.'
];

// Generate the profile HTML
$profile_html = generateUserProfile($user);

// Output (in a real app, you would echo this directly)
echo htmlspecialchars($profile_html);
?&gt;</code></pre>
            </div>
        </section>

        <section class="practice_exercises">
            <h2>Practice Exercises</h2>
            <p>Test your understanding of PHP string operators with these exercises:</p>
            
            <div class="exercise">
                <h3>Exercise 1: String Concatenation Challenge</h3>
                <p>Create a PHP script that builds an HTML table from an array of data using string concatenation.</p>
                <pre><code>&lt;?php
/*
 * 1. Create an array of products with properties: name, price, stock
 * 2. Generate an HTML table with these products using string concatenation
 * 3. Include table headers and appropriate formatting
 * 4. Add a "status" column that shows "In Stock" or "Out of Stock" based on stock value
 */
?&gt;</code></pre>
            </div>
            
            <div class="exercise">
                <h3>Exercise 2: URL Query Builder</h3>
                <p>Create a function that builds a URL query string from an array of parameters.</p>
                <pre><code>&lt;?php
/*
 * 1. Create a function buildQueryString($params) that takes an array of parameters
 * 2. The function should convert the array to a properly formatted URL query string
 * 3. Handle special characters by using urlencode()
 * 4. Test with various parameter combinations
 */
?&gt;</code></pre>
            </div>
            
            <div class="exercise">
                <h3>Exercise 3: Template System</h3>
                <p>Create a simple template system that replaces placeholders with values.</p>
                <pre><code>&lt;?php
/*
 * 1. Create a function renderTemplate($template, $vars) that takes a template string and variables
 * 2. The function should replace placeholders like {{name}} with corresponding values from $vars
 * 3. Handle nested objects or arrays with dot notation, e.g., {{user.name}}
 * 4. Include basic error handling for missing variables
 */
?&gt;</code></pre>
            </div>
        </section>

        <section class="summary">
            <h2>Summary</h2>
            <p>In this session, we've explored PHP's string operators and related string handling techniques:</p>
            
            <ul>
                <li><strong>Concatenation Operator (.)</strong>: Combines two strings into one, essential for building dynamic content</li>
                <li><strong>Concatenation Assignment (.=)</strong>: Appends a string to an existing variable, useful for incrementally building strings</li>
                <li><strong>String Interpolation</strong>: An alternative to concatenation that embeds variables directly within double-quoted strings</li>
                <li><strong>Heredoc and Nowdoc</strong>: Syntax for creating multi-line strings with or without variable interpolation</li>
                <li><strong>Advanced String Manipulation</strong>: PHP's rich set of string functions that complement the basic operators</li>
            </ul>
            
            <p>String operators are fundamental to PHP programming as they allow you to create dynamic content, build HTML, format messages, and manipulate text data. Mastering these operators and understanding when to use each approach will help you write more efficient, readable, and maintainable code in your PHP applications.</p>
        </section>

        <section class="next_session">
            <h2>Next Session Preview</h2>
            <p>In our next session, we'll explore PHP Arrays and Array Operators, which allow you to work with collections of data. We'll learn about array creation, accessing array elements, and the various operators for comparing, merging, and manipulating arrays.</p>
        </section>

        <section class="additional_resources">
            <h2>Additional Resources</h2>
            <ul>
                <li><a href="https://www.php.net/manual/en/language.operators.string.php" target="_blank">PHP Manual: String Operators</a></li>
                <li><a href="https://www.php.net/manual/en/ref.strings.php" target="_blank">PHP Manual: String Functions</a></li>
                <li><a href="https://www.php.net/manual/en/language.types.string.php" target="_blank">PHP Manual: String Syntax</a></li>
                <li><a href="https://www.php.net/manual/en/ref.mbstring.php" target="_blank">PHP Manual: Multibyte String Functions</a></li>
                <li><a href="https://www.php.net/manual/en/function.sprintf.php" target="_blank">PHP Manual: sprintf() Function</a></li>
            </ul>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 PHP WordPress Development Course</p>
  
    </footer>
</body>
</html>
