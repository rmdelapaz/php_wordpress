<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHP Array Sorting: Organizing Your Data Effectively</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="icon" href="/favicon.png">
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <header>
        <h1>PHP Array Sorting: Organizing Your Data Effectively</h1>
        <p><a href="index.html">‚Üê Back to Syllabus</a></p>
    </header>
    
    <main>
        <section class="intro">
            <h2>The Importance of Sorting in Web Development</h2>
            <p>Welcome to our deep dive into PHP array sorting functions! In the world of web development, particularly when working with WordPress, organizing and presenting data in meaningful ways is essential to creating intuitive user experiences. Imagine walking into a library where books are randomly placed on shelves - finding what you need would be nearly impossible! Similarly, sorted data helps users find information quickly and allows your applications to process information more efficiently.</p>
            
            <p>PHP provides a comprehensive suite of sorting functions, each designed for specific scenarios and data structures. Whether you're ordering blog posts by date, arranging products by price, or organizing user data alphabetically, mastering these sorting functions will give you precise control over how information is structured and presented in your WordPress applications.</p>
        </section>

        <section class="sorting_overview">
            <h2>Understanding Sorting Concepts</h2>
            
            <p>Before diving into specific PHP functions, let's clarify some key sorting concepts:</p>
            
            <div class="concept">
                <h3>Ascending vs. Descending Order</h3>
                <p>Sorting can proceed in two directions:</p>
                <ul>
                    <li><strong>Ascending order</strong>: From smallest to largest, A to Z (1, 2, 3... or A, B, C...)</li>
                    <li><strong>Descending order</strong>: From largest to smallest, Z to A (3, 2, 1... or Z, Y, X...)</li>
                </ul>
                
                <div class="visualization">
                    <div class="mermaid">
                    graph TD
                        subgraph Ascending
                            A1[1] --> A2[2]
                            A2 --> A3[3]
                            A3 --> A4[4]
                            A4 --> A5[5]
                        end
                        subgraph Descending
                            D1[5] --> D2[4]
                            D2 --> D3[3]
                            D3 --> D4[2]
                            D4 --> D5[1]
                        end
                        
                        style A1 fill:#bbf,stroke:#333,stroke-width:2px
                        style A2 fill:#bbf,stroke:#333,stroke-width:2px
                        style A3 fill:#bbf,stroke:#333,stroke-width:2px
                        style A4 fill:#bbf,stroke:#333,stroke-width:2px
                        style A5 fill:#bbf,stroke:#333,stroke-width:2px
                        
                        style D1 fill:#f9f,stroke:#333,stroke-width:2px
                        style D2 fill:#f9f,stroke:#333,stroke-width:2px
                        style D3 fill:#f9f,stroke:#333,stroke-width:2px
                        style D4 fill:#f9f,stroke:#333,stroke-width:2px
                        style D5 fill:#f9f,stroke:#333,stroke-width:2px
                    </div>
                </div>
            </div>
            
            <div class="concept">
                <h3>Sorting by Values vs. Keys</h3>
                <p>PHP allows you to sort arrays based on either their values or their keys:</p>
                <ul>
                    <li><strong>Value sorting</strong>: Arranges elements based on the values they contain</li>
                    <li><strong>Key sorting</strong>: Arranges elements based on the keys that identify them</li>
                </ul>
                
                <div class="visualization">
                    <div class="mermaid">
                    graph LR
                        subgraph "Original Array"
                            O1["price"] --- OV1["$25"]
                            O2["name"] --- OV2["Keyboard"]
                            O3["id"] --- OV3["1001"]
                        end
                        
                        subgraph "Sorted by Value"
                            SV1["id"] --- SVV1["1001"]
                            SV2["price"] --- SVV2["$25"]
                            SV3["name"] --- SVV3["Keyboard"]
                        end
                        
                        subgraph "Sorted by Key"
                            SK1["id"] --- SKV1["1001"]
                            SK2["name"] --- SKV2["Keyboard"]
                            SK3["price"] --- SKV3["$25"]
                        end
                        
                        style O1 fill:#f96,stroke:#333,stroke-width:2px
                        style O2 fill:#f96,stroke:#333,stroke-width:2px
                        style O3 fill:#f96,stroke:#333,stroke-width:2px
                        style OV1 fill:#bbf,stroke:#333,stroke-width:2px
                        style OV2 fill:#bbf,stroke:#333,stroke-width:2px
                        style OV3 fill:#bbf,stroke:#333,stroke-width:2px
                        
                        style SV1 fill:#f96,stroke:#333,stroke-width:2px
                        style SV2 fill:#f96,stroke:#333,stroke-width:2px
                        style SV3 fill:#f96,stroke:#333,stroke-width:2px
                        style SVV1 fill:#bbf,stroke:#333,stroke-width:2px
                        style SVV2 fill:#bbf,stroke:#333,stroke-width:2px
                        style SVV3 fill:#bbf,stroke:#333,stroke-width:2px
                        
                        style SK1 fill:#f96,stroke:#333,stroke-width:2px
                        style SK2 fill:#f96,stroke:#333,stroke-width:2px
                        style SK3 fill:#f96,stroke:#333,stroke-width:2px
                        style SKV1 fill:#bbf,stroke:#333,stroke-width:2px
                        style SKV2 fill:#bbf,stroke:#333,stroke-width:2px
                        style SKV3 fill:#bbf,stroke:#333,stroke-width:2px
                    </div>
                </div>
            </div>
            
            <div class="concept">
                <h3>Preserving Keys vs. Reindexing</h3>
                <p>When sorting arrays, PHP functions either:</p>
                <ul>
                    <li><strong>Preserve keys</strong>: Maintain the association between keys and values during sorting</li>
                    <li><strong>Reindex</strong>: Assign new numeric keys (0, 1, 2...) based on the sorted order</li>
                </ul>
                
                <div class="visualization">
                    <svg width="700" height="250" xmlns="http://www.w3.org/2000/svg">
                        <!-- Original Array -->
                        <rect x="10" y="10" width="200" height="230" fill="#f5f5f5" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="60" y="30" font-family="Arial" font-size="14" font-weight="bold">Original Array</text>
                        
                        <rect x="30" y="50" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="40" y="70" font-family="Arial" font-size="12">"cherry" => "red"</text>
                        
                        <rect x="30" y="90" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="40" y="110" font-family="Arial" font-size="12">"apple" => "green"</text>
                        
                        <rect x="30" y="130" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="40" y="150" font-family="Arial" font-size="12">"banana" => "yellow"</text>
                        
                        <rect x="30" y="170" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="40" y="190" font-family="Arial" font-size="12">"grape" => "purple"</text>
                        
                        <!-- Preserving Keys -->
                        <rect x="240" y="10" width="200" height="230" fill="#e6f7ff" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="270" y="30" font-family="Arial" font-size="14" font-weight="bold">Keys Preserved</text>
                        
                        <rect x="260" y="50" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="270" y="70" font-family="Arial" font-size="12">"apple" => "green"</text>
                        
                        <rect x="260" y="90" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="270" y="110" font-family="Arial" font-size="12">"banana" => "yellow"</text>
                        
                        <rect x="260" y="130" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="270" y="150" font-family="Arial" font-size="12">"cherry" => "red"</text>
                        
                        <rect x="260" y="170" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="270" y="190" font-family="Arial" font-size="12">"grape" => "purple"</text>
                        
                        <!-- Reindexed -->
                        <rect x="470" y="10" width="200" height="230" fill="#fbe4e4" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="520" y="30" font-family="Arial" font-size="14" font-weight="bold">Reindexed</text>
                        
                        <rect x="490" y="50" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="500" y="70" font-family="Arial" font-size="12">"0" => "green"</text>
                        
                        <rect x="490" y="90" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="500" y="110" font-family="Arial" font-size="12">"1" => "yellow"</text>
                        
                        <rect x="490" y="130" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="500" y="150" font-family="Arial" font-size="12">"2" => "red"</text>
                        
                        <rect x="490" y="170" width="160" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="500" y="190" font-family="Arial" font-size="12">"3" => "purple"</text>
                    </svg>
                </div>
            </div>
            
            <div class="concept">
                <h3>Natural Sorting vs. Standard Sorting</h3>
                <p>When sorting strings that contain numbers, PHP offers two approaches:</p>
                <ul>
                    <li><strong>Standard sorting</strong>: Uses character-by-character comparison (e.g., "image10.jpg" comes before "image2.jpg" because "1" comes before "2")</li>
                    <li><strong>Natural sorting</strong>: Recognizes and sorts numbers within strings as humans would expect (e.g., "image2.jpg" comes before "image10.jpg" because 2 is less than 10)</li>
                </ul>
                
                <div class="comparison">
                    <pre><code>// Standard sorting
$files = ["image10.jpg", "image2.jpg", "image1.jpg"];
sort($files);
// Result: ["image1.jpg", "image10.jpg", "image2.jpg"]

// Natural sorting
$files = ["image10.jpg", "image2.jpg", "image1.jpg"];
natsort($files);
// Result: ["image1.jpg", "image2.jpg", "image10.jpg"]</code></pre>
                </div>
            </div>
        </section>

        <section class="basic_sorting">
            <h2>Basic Array Sorting Functions</h2>
            
            <p>Let's start with the fundamental sorting functions that form the backbone of PHP's array organization capabilities:</p>
            
            <div class="function">
                <h3>sort() - Basic Value Sorting</h3>
                <p>The <code>sort()</code> function sorts an array by values in ascending order and reindexes the array with numeric keys (0, 1, 2...). Think of it as organizing books on a shelf from smallest to largest, removing all the original shelf labels and replacing them with sequential numbers.</p>
                
                <div class="code_example">
                    <pre><code>// Sorting numbers
$scores = [42, 15, 87, 33, 61];
sort($scores);
print_r($scores);
// Outputs: Array ( [0] => 15 [1] => 33 [2] => 42 [3] => 61 [4] => 87 )

// Sorting strings (alphabetically)
$colors = ["red", "blue", "green", "yellow", "purple"];
sort($colors);
print_r($colors);
// Outputs: Array ( [0] => blue [1] => green [2] => purple [3] => red [4] => yellow )

// Mixed content (notice how sorting works)
$mixed = [5, "apple", 10, "banana", 1, "cherry"];
sort($mixed);
print_r($mixed);
// Outputs: Array ( [0] => 1 [1] => 5 [2] => 10 [3] => apple [4] => banana [5] => cherry )</code></pre>
                </div>
                
                <div class="note">
                    <p><strong>Important Note:</strong> When you use <code>sort()</code>, PHP doesn't just reorder the values - it also discards the original keys and creates new numeric indexes starting from 0. This is perfect for indexed arrays but can be problematic for associative arrays when you need to preserve key-value relationships.</p>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress development, <code>sort()</code> is useful when displaying chronological blog posts or sorting comments by date - situations where you need a simple ordered list and don't care about preserving custom keys.</p>
                    <pre><code>// Get recent post titles and sort them alphabetically
function get_sorted_post_titles() {
    $args = [
        'post_type' => 'post',
        'posts_per_page' => 10
    ];
    
    $recent_posts = get_posts($args);
    $titles = [];
    
    foreach ($recent_posts as $post) {
        $titles[] = $post->post_title;
    }
    
    sort($titles); // Alphabetical order
    return $titles;
}</code></pre>
                </div>
            </div>
            
            <div class="function">
                <h3>rsort() - Reverse Value Sorting</h3>
                <p>The <code>rsort()</code> function sorts an array by values in descending order (largest to smallest, Z to A) and reindexes with numeric keys. Think of it as organizing books on a shelf from largest to smallest, with new sequential labels.</p>
                
                <div class="code_example">
                    <pre><code>// Sorting numbers in descending order
$prices = [12.99, 5.99, 25.50, 9.99, 15.75];
rsort($prices);
print_r($prices);
// Outputs: Array ( [0] => 25.5 [1] => 15.75 [2] => 12.99 [3] => 9.99 [4] => 5.99 )

// Sorting strings in reverse alphabetical order
$fruits = ["apple", "banana", "cherry", "date", "elderberry"];
rsort($fruits);
print_r($fruits);
// Outputs: Array ( [0] => elderberry [1] => date [2] => cherry [3] => banana [4] => apple )</code></pre>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress e-commerce sites, <code>rsort()</code> is perfect for displaying "newest first" content or "highest-rated" product lists where you want to emphasize the most recent or highest-value items.</p>
                    <pre><code>// Display most recent comments at the top
function get_recent_comments_sorted() {
    $args = [
        'number' => 10,
        'status' => 'approve'
    ];
    
    $comments = get_comments($args);
    $comment_dates = [];
    
    foreach ($comments as $comment) {
        $comment_dates[$comment->comment_ID] = strtotime($comment->comment_date);
    }
    
    rsort($comment_dates); // Most recent first
    
    $sorted_comment_ids = array_keys($comment_dates);
    return $sorted_comment_ids;
}</code></pre>
                </div>
            </div>
        </section>

        <section class="associative_sorting">
            <h2>Associative Array Sorting Functions</h2>
            
            <p>When working with associative arrays (key-value pairs), you often need to maintain the relationship between keys and values during sorting. PHP provides specialized functions for this purpose:</p>
            
            <div class="function">
                <h3>asort() - Sort by Value while Preserving Keys</h3>
                <p>The <code>asort()</code> function sorts an array by values in ascending order while preserving the key associations. Imagine rearranging labeled filing cabinet drawers based on what's inside them, but keeping each drawer's original label intact.</p>
                
                <div class="code_example">
                    <pre><code>// Product prices (associative array)
$prices = [
    "laptop" => 999.99,
    "phone" => 549.00,
    "tablet" => 399.95,
    "headphones" => 129.99,
    "mouse" => 24.50
];

asort($prices);
print_r($prices);
// Outputs: Array ( [mouse] => 24.5 [headphones] => 129.99 [tablet] => 399.95 
//                  [phone] => 549 [laptop] => 999.99 )</code></pre>
                </div>
                
                <div class="visualization">
                    <div class="mermaid">
                    graph TD
                        subgraph "Before asort()"
                            B1["laptop"] --> BV1["999.99"]
                            B2["phone"] --> BV2["549.00"]
                            B3["tablet"] --> BV3["399.95"]
                            B4["headphones"] --> BV4["129.99"]
                            B5["mouse"] --> BV5["24.50"]
                        end
                        
                        subgraph "After asort()"
                            A5["mouse"] --> AV5["24.50"]
                            A4["headphones"] --> AV4["129.99"]
                            A3["tablet"] --> AV3["399.95"]
                            A2["phone"] --> AV2["549.00"]
                            A1["laptop"] --> AV1["999.99"]
                        end
                        
                        style B1 fill:#f96,stroke:#333,stroke-width:2px
                        style B2 fill:#f96,stroke:#333,stroke-width:2px
                        style B3 fill:#f96,stroke:#333,stroke-width:2px
                        style B4 fill:#f96,stroke:#333,stroke-width:2px
                        style B5 fill:#f96,stroke:#333,stroke-width:2px
                        
                        style A1 fill:#f96,stroke:#333,stroke-width:2px
                        style A2 fill:#f96,stroke:#333,stroke-width:2px
                        style A3 fill:#f96,stroke:#333,stroke-width:2px
                        style A4 fill:#f96,stroke:#333,stroke-width:2px
                        style A5 fill:#f96,stroke:#333,stroke-width:2px
                    </div>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress theme or plugin options, <code>asort()</code> is valuable for displaying configuration settings in order of importance or frequency while maintaining their original option names as keys.</p>
                    <pre><code>// Sort plugin options by priority but keep their option keys
function display_sorted_settings($settings) {
    // Each setting has a 'priority' value
    $priorities = [];
    
    foreach ($settings as $key => $setting) {
        $priorities[$key] = $setting['priority'];
    }
    
    asort($priorities); // Sort by priority value
    
    // Now display settings in priority order
    foreach ($priorities as $key => $priority) {
        echo "Setting: " . $key . " (Priority: " . $priority . ")<br>";
        // Display the setting form field here
    }
}</code></pre>
                </div>
            </div>
            
            <div class="function">
                <h3>arsort() - Sort by Value in Reverse while Preserving Keys</h3>
                <p>The <code>arsort()</code> function sorts an array by values in descending order while preserving key associations. Think of it as reorganizing your bookshelf from longest to shortest books, but keeping each book's original identification number.</p>
                
                <div class="code_example">
                    <pre><code>// User scores in a game
$user_scores = [
    "john_doe" => 1250,
    "jane_smith" => 1840,
    "bob_jones" => 920,
    "alice_wong" => 1560,
    "mike_davis" => 1390
];

arsort($user_scores);
print_r($user_scores);
// Outputs: Array ( [jane_smith] => 1840 [alice_wong] => 1560 [mike_davis] => 1390 
//                  [john_doe] => 1250 [bob_jones] => 920 )</code></pre>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress, <code>arsort()</code> is perfect for creating leaderboards, "most popular posts" widgets, or displaying user rankings while maintaining user identifiers.</p>
                    <pre><code>// Display most popular posts based on view count
function display_popular_posts() {
    $args = [
        'post_type' => 'post',
        'posts_per_page' => -1
    ];
    
    $posts = get_posts($args);
    $view_counts = [];
    
    foreach ($posts as $post) {
        // Get view count from post meta
        $views = get_post_meta($post->ID, 'post_views', true);
        $view_counts[$post->ID] = $views ? intval($views) : 0;
    }
    
    // Sort by view count (highest first)
    arsort($view_counts);
    
    // Display top 5 posts
    $count = 0;
    echo '<ul class="popular-posts">';
    foreach ($view_counts as $post_id => $views) {
        if ($count >= 5) break;
        
        $post_title = get_the_title($post_id);
        $post_link = get_permalink($post_id);
        
        echo '<li>';
        echo '<a href="' . $post_link . '">' . $post_title . '</a>';
        echo ' (' . $views . ' views)';
        echo '</li>';
        
        $count++;
    }
    echo '</ul>';
}</code></pre>
                </div>
            </div>
            
            <div class="function">
                <h3>ksort() - Sort by Key in Ascending Order</h3>
                <p>The <code>ksort()</code> function sorts an array by keys in ascending order. Imagine organizing a filing cabinet alphabetically by the label on each drawer, regardless of what's inside.</p>
                
                <div class="code_example">
                    <pre><code>// Configuration options
$config = [
    "timezone" => "UTC",
    "language" => "en",
    "debug_mode" => false,
    "cache_time" => 3600,
    "api_key" => "abc123"
];

ksort($config);
print_r($config);
// Outputs: Array ( [api_key] => abc123 [cache_time] => 3600 [debug_mode] => false 
//                  [language] => en [timezone] => UTC )</code></pre>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress plugin development, <code>ksort()</code> helps create alphabetically organized settings pages or display configuration options in a predictable order.</p>
                    <pre><code>// Display plugin options alphabetically
function display_plugin_options($options) {
    // Sort options by key (alphabetically)
    ksort($options);
    
    echo '<table class="form-table">';
    foreach ($options as $key => $value) {
        echo '<tr>';
        echo '<th><label for="' . $key . '">' . ucwords(str_replace('_', ' ', $key)) . '</label></th>';
        echo '<td><input type="text" id="' . $key . '" name="options[' . $key . ']" value="' . esc_attr($value) . '" /></td>';
        echo '</tr>';
    }
    echo '</table>';
}</code></pre>
                </div>
            </div>
            
            <div class="function">
                <h3>krsort() - Sort by Key in Descending Order</h3>
                <p>The <code>krsort()</code> function sorts an array by keys in descending order (Z to A, 9 to 0). Imagine organizing your email inbox with the messages starting with 'Z' at the top and 'A' at the bottom.</p>
                
                <div class="code_example">
                    <pre><code>// Monthly revenue data
$monthly_revenue = [
    "January" => 45000,
    "February" => 42000,
    "March" => 50500,
    "April" => 52000,
    "May" => 48000
];

krsort($monthly_revenue);
print_r($monthly_revenue);
// Outputs: Array ( [May] => 48000 [March] => 50500 [January] => 45000 
//                  [February] => 42000 [April] => 52000 )</code></pre>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress archive pages, <code>krsort()</code> can help display content in reverse chronological order by year or organize product categories from Z to A for variety.</p>
                    <pre><code>// Display archives in reverse alphabetical order
function display_reverse_category_list() {
    $categories = get_categories([
        'orderby' => 'name',
        'order' => 'ASC',
        'hide_empty' => false
    ]);
    
    $category_list = [];
    foreach ($categories as $category) {
        $category_list[$category->name] = $category->term_id;
    }
    
    // Sort categories in reverse alphabetical order
    krsort($category_list);
    
    echo '<ul class="category-list">';
    foreach ($category_list as $name => $id) {
        $category_link = get_category_link($id);
        echo '<li><a href="' . $category_link . '">' . $name . '</a></li>';
    }
    echo '</ul>';
}</code></pre>
                </div>
            </div>
        </section>

        <section class="natural_sorting">
            <h2>Natural Order Sorting Functions</h2>
            
            <p>When sorting strings that contain numbers, standard sorting functions can produce counterintuitive results. Natural sorting functions solve this problem by recognizing and handling numbers within strings the way humans would expect:</p>
            
            <div class="function">
                <h3>natsort() - Natural Order Sorting</h3>
                <p>The <code>natsort()</code> function sorts an array using a "natural order" algorithm, which sorts strings containing numbers in a way that makes sense to humans. Think of it as sorting like a human would - recognizing that "page10" comes after "page2" because 10 is greater than 2.</p>
                
                <div class="code_example">
                    <pre><code>// File names with numbers
$files = [
    "image1.jpg",
    "image10.jpg",
    "image2.jpg",
    "image20.jpg",
    "image3.jpg"
];

// Standard sort (lexicographical)
$standard_sort = $files;
sort($standard_sort);
print_r($standard_sort);
// Outputs: Array ( [0] => image1.jpg [1] => image10.jpg [2] => image2.jpg 
//                  [3] => image20.jpg [4] => image3.jpg )

// Natural sort (treats numbers as numbers)
$natural_sort = $files;
natsort($natural_sort);
print_r($natural_sort);
// Outputs: Array ( [0] => image1.jpg [2] => image2.jpg [4] => image3.jpg 
//                  [1] => image10.jpg [3] => image20.jpg )</code></pre>
                </div>
                
                <div class="comparison_diagram">
                    <svg width="700" height="250" xmlns="http://www.w3.org/2000/svg">
                        <!-- Standard Sort -->
                        <rect x="10" y="10" width="320" height="230" fill="#f5f5f5" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="90" y="30" font-family="Arial" font-size="14" font-weight="bold">Standard Sort</text>
                        
                        <rect x="30" y="50" width="280" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="40" y="70" font-family="Arial" font-size="12">[0] => image1.jpg</text>
                        
                        <rect x="30" y="90" width="280" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="40" y="110" font-family="Arial" font-size="12">[1] => image10.jpg</text>
                        
                        <rect x="30" y="130" width="280" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="40" y="150" font-family="Arial" font-size="12">[2] => image2.jpg</text>
                        
                        <rect x="30" y="170" width="280" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="40" y="190" font-family="Arial" font-size="12">[3] => image20.jpg</text>
                        
                        <rect x="30" y="210" width="280" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="40" y="230" font-family="Arial" font-size="12">[4] => image3.jpg</text>
                        
                        <!-- Natural Sort -->
                        <rect x="370" y="10" width="320" height="230" fill="#e6f7ff" stroke="#333" stroke-width="2" rx="5"/>
                        <text x="450" y="30" font-family="Arial" font-size="14" font-weight="bold">Natural Sort</text>
                        
                        <rect x="390" y="50" width="280" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="400" y="70" font-family="Arial" font-size="12">[0] => image1.jpg</text>
                        
                        <rect x="390" y="90" width="280" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="400" y="110" font-family="Arial" font-size="12">[2] => image2.jpg</text>
                        
                        <rect x="390" y="130" width="280" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="400" y="150" font-family="Arial" font-size="12">[4] => image3.jpg</text>
                        
                        <rect x="390" y="170" width="280" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="400" y="190" font-family="Arial" font-size="12">[1] => image10.jpg</text>
                        
                        <rect x="390" y="210" width="280" height="30" fill="#d1e7dd" stroke="#333" rx="3"/>
                        <text x="400" y="230" font-family="Arial" font-size="12">[3] => image20.jpg</text>
                    </svg>
                </div>
                
                <div class="note">
                    <p><strong>Important Note:</strong> <code>natsort()</code> maintains the original array keys, which is why you see the keys out of order in the output above. This is actually beneficial when you need to preserve associations between values and their original positions.</p>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress media libraries or document management systems, <code>natsort()</code> ensures files with numeric naming conventions display in a logical order.</p>
                    <pre><code>// Display chapter files in natural reading order
function display_chapter_files() {
    // Get all chapter files from a directory
    $chapter_files = scandir(WP_CONTENT_DIR . '/chapters/');
    
    // Remove . and .. directories
    $chapter_files = array_diff($chapter_files, ['.', '..']);
    
    // Sort chapters in natural order (chapter1, chapter2, chapter10, etc.)
    natsort($chapter_files);
    
    echo '<ul class="chapter-list">';
    foreach ($chapter_files as $file) {
        echo '<li><a href="' . content_url('/chapters/' . $file) . '">' . $file . '</a></li>';
    }
    echo '</ul>';
}</code></pre>
                </div>
            </div>
            
            <div class="function">
                <h3>natcasesort() - Case-Insensitive Natural Order Sorting</h3>
                <p>The <code>natcasesort()</code> function sorts strings using natural order algorithm but ignores case sensitivity. Imagine sorting a list of book titles that include chapter numbers, treating "Chapter" and "chapter" as the same while still recognizing that Chapter 10 comes after Chapter 2.</p>
                
                <div class="code_example">
                    <pre><code>// Mixed case file names with numbers
$files = [
    "Chapter1.pdf",
    "chapter10.pdf",
    "Chapter2.pdf",
    "chapter20.pdf",
    "Chapter3.pdf"
];

// Natural case-insensitive sort
natcasesort($files);
print_r($files);
// Outputs: Array ( [0] => Chapter1.pdf [2] => Chapter2.pdf [4] => Chapter3.pdf 
//                  [1] => chapter10.pdf [3] => chapter20.pdf )</code></pre>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress document libraries or e-learning platforms, <code>natcasesort()</code> ensures content with inconsistent capitalization still appears in logical order.</p>
                    <pre><code>// Display tutorial sections in natural order, ignoring case
function display_tutorial_sections() {
    $sections = [
        'Introduction.html',
        'section1-Basics.html',
        'Section2-intermediate.html',
        'SECTION3-advanced.html',
        'section10-expert.html'
    ];
    
    // Sort sections naturally ignoring case
    natcasesort($sections);
    
    echo '<div class="tutorial-navigation">';
    echo '<h3>Tutorial Sections</h3>';
    echo '<ol>';
    foreach ($sections as $section) {
        $title = str_replace(['.html', '-'], [' ', ': '], $section);
        echo '<li><a href="/tutorials/' . $section . '">' . $title . '</a></li>';
    }
    echo '</ol>';
    echo '</div>';
}</code></pre>
                </div>
            </div>
        </section>

        <section class="custom_sorting">
            <h2>Custom Sorting with User-Defined Functions</h2>
            
            <p>For complex sorting needs, PHP provides powerful functions that let you define your own sorting logic:</p>
            
            <div class="function">
                <h3>usort() - Custom Sorting for Indexed Arrays</h3>
                <p>The <code>usort()</code> function sorts an array by values using a user-defined comparison function and reindexes with numeric keys. Think of it as giving specific instructions to someone organizing your bookshelf according to your unique preferences, then having them relabel everything with sequential numbers.</p>
                
                <div class="code_example">
                    <pre><code>// Complex objects to sort
$products = [
    ["name" => "Laptop", "price" => 999.99, "stock" => 15],
    ["name" => "Smartphone", "price" => 549.00, "stock" => 8],
    ["name" => "Tablet", "price" => 399.95, "stock" => 0],
    ["name" => "Headphones", "price" => 129.99, "stock" => 24],
    ["name" => "Monitor", "price" => 299.50, "stock" => 12]
];

// Sort by stock availability first, then by price (lowest first)
usort($products, function($a, $b) {
    // First compare stock (in stock items first)
    if ($a["stock"] > 0 && $b["stock"] <= 0) return -1;
    if ($a["stock"] <= 0 && $b["stock"] > 0) return 1;
    
    // If both have same stock status, compare by price
    return $a["price"] <=> $b["price"];
});

// Print sorted products
foreach ($products as $index => $product) {
    echo $index . ": " . $product["name"] . " - $" . $product["price"] . 
         " (Stock: " . $product["stock"] . ")<br>";
}
/* Outputs:
0: Headphones - $129.99 (Stock: 24)
1: Monitor - $299.5 (Stock: 12)
2: Smartphone - $549 (Stock: 8)
3: Laptop - $999.99 (Stock: 15)
4: Tablet - $399.95 (Stock: 0)
*/</code></pre>
                </div>
                
                <div class="comparison_operator">
                    <h4>The Spaceship Operator (<=>)</h4>
                    <p>In PHP 7 and later, the "spaceship operator" (<=>), officially called the combined comparison operator, simplifies comparison functions.</p>
                    <pre><code>// Traditional comparison
function compare($a, $b) {
    if ($a < $b) {
        return -1;
    } elseif ($a > $b) {
        return 1;
    } else {
        return 0;
    }
}

// Spaceship operator equivalent
function compare($a, $b) {
    return $a <=> $b;
}

// It returns:
// -1 if the left is less than the right
//  0 if both values are equal
//  1 if the left is greater than the right</code></pre>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress e-commerce, <code>usort()</code> allows for complex product sorting logic that combines multiple factors like availability, popularity, and price.</p>
                    <pre><code>// Sort WooCommerce products by custom criteria
function sort_products_by_relevance($products, $search_term) {
    usort($products, function($a, $b) use ($search_term) {
        // Score products based on:
        // 1. Title match (highest priority)
        // 2. Stock availability
        // 3. Average rating
        // 4. Price (lower is better)
        
        // Calculate title match score (0-10)
        $score_a = similar_text($a->get_name(), $search_term, $percent_a);
        $score_b = similar_text($b->get_name(), $search_term, $percent_b);
        
        // Title match comparison
        if (abs($percent_a - $percent_b) > 10) {
            return $percent_b <=> $percent_a; // Higher percentage first
        }
        
        // If title match is similar, check stock
        $in_stock_a = $a->is_in_stock();
        $in_stock_b = $b->is_in_stock();
        
        if ($in_stock_a !== $in_stock_b) {
            return $in_stock_b <=> $in_stock_a; // In-stock first
        }
        
        // If both have same stock status, compare by rating
        $rating_a = $a->get_average_rating();
        $rating_b = $b->get_average_rating();
        
        if (abs($rating_a - $rating_b) >= 0.5) {
            return $rating_b <=> $rating_a; // Higher rating first
        }
        
        // If ratings are similar, compare by price
        return $a->get_price() <=> $b->get_price(); // Lower price first
    });
    
    return $products;
}</code></pre>
                </div>
            </div>
            
            <div class="function">
                <h3>uasort() - Custom Sorting for Associative Arrays</h3>
                <p>The <code>uasort()</code> function sorts an array by values using a user-defined comparison function while preserving key associations. Imagine rearranging your filing cabinet according to complex rules about the contents of each drawer, but keeping each drawer's original label.</p>
                
                <div class="code_example">
                    <pre><code>// User data with multiple attributes
$users = [
    "user123" => [
        "name" => "John Smith",
        "role" => "subscriber",
        "last_active" => "2023-05-15"
    ],
    "admin007" => [
        "name" => "Jane Doe",
        "role" => "administrator",
        "last_active" => "2023-06-01"
    ],
    "editor42" => [
        "name" => "Bob Johnson",
        "role" => "editor",
        "last_active" => "2023-05-28"
    ],
    "user456" => [
        "name" => "Alice Brown",
        "role" => "subscriber",
        "last_active" => "2023-04-10"
    ]
];

// Custom sorting: admins first, then by last active date (most recent first)
uasort($users, function($a, $b) {
    // Define role priority
    $roles = [
        "administrator" => 1,
        "editor" => 2, 
        "author" => 3,
        "contributor" => 4,
        "subscriber" => 5
    ];
    
    // Compare by role first
    $role_a = $roles[$a["role"]] ?? 99;
    $role_b = $roles[$b["role"]] ?? 99;
    
    if ($role_a !== $role_b) {
        return $role_a <=> $role_b; // Lower role value (higher priority) first
    }
    
    // If same role, compare by last active date (most recent first)
    $date_a = strtotime($a["last_active"]);
    $date_b = strtotime($b["last_active"]);
    
    return $date_b <=> $date_a;
});

// Print sorted users
foreach ($users as $user_id => $user_data) {
    echo $user_id . ": " . $user_data["name"] . " (" . $user_data["role"] . ") - Last active: " . 
         $user_data["last_active"] . "<br>";
}
/* Outputs:
admin007: Jane Doe (administrator) - Last active: 2023-06-01
editor42: Bob Johnson (editor) - Last active: 2023-05-28
user123: John Smith (subscriber) - Last active: 2023-05-15
user456: Alice Brown (subscriber) - Last active: 2023-04-10
*/</code></pre>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress membership sites, <code>uasort()</code> helps organize user listings with complex criteria while preserving user IDs as keys.</p>
                    <pre><code>// Sort members by membership level and activity
function display_sorted_members() {
    // Get members
    $members = get_users(['role__in' => ['subscriber', 'customer']]);
    
    $member_data = [];
    foreach ($members as $member) {
        // Get membership level and last activity from user meta
        $level = get_user_meta($member->ID, 'membership_level', true) ?: 'free';
        $last_login = get_user_meta($member->ID, 'last_login', true) ?: '0';
        $points = get_user_meta($member->ID, 'activity_points', true) ?: 0;
        
        $member_data[$member->ID] = [
            'name' => $member->display_name,
            'email' => $member->user_email,
            'level' => $level,
            'last_login' => $last_login,
            'points' => intval($points)
        ];
    }
    
    // Sort by membership level, then activity points (highest first)
    uasort($member_data, function($a, $b) {
        // Define level priority
        $levels = [
            'platinum' => 1,
            'gold' => 2,
            'silver' => 3,
            'bronze' => 4,
            'free' => 5
        ];
        
        $level_a = $levels[$a['level']] ?? 99;
        $level_b = $levels[$b['level']] ?? 99;
        
        // Compare by level first
        if ($level_a !== $level_b) {
            return $level_a <=> $level_b;
        }
        
        // If same level, compare by activity points
        return $b['points'] <=> $a['points'];
    });
    
    // Display members
    echo '<table class="member-list">';
    echo '<tr><th>Name</th><th>Level</th><th>Points</th><th>Last Login</th></tr>';
    
    foreach ($member_data as $id => $data) {
        echo '<tr>';
        echo '<td>' . esc_html($data['name']) . '</td>';
        echo '<td>' . ucfirst(esc_html($data['level'])) . '</td>';
        echo '<td>' . esc_html($data['points']) . '</td>';
        echo '<td>' . date('Y-m-d', intval($data['last_login'])) . '</td>';
        echo '</tr>';
    }
    
    echo '</table>';
}</code></pre>
                </div>
            </div>
            
            <div class="function">
                <h3>uksort() - Custom Sorting by Keys</h3>
                <p>The <code>uksort()</code> function sorts an array by keys using a user-defined comparison function. Imagine reorganizing your library catalog based on complex rules about the catalog codes, regardless of what books are on each shelf.</p>
                
                <div class="code_example">
                    <pre><code>// Products organized by SKU
$inventory = [
    "LAPTOP-15-PRO" => ["name" => "Professional Laptop 15\"", "stock" => 12],
    "PHONE-12-BLK" => ["name" => "Smartphone 12 Black", "stock" => 8],
    "TABLET-10-SLV" => ["name" => "Tablet 10\" Silver", "stock" => 15],
    "LAPTOP-13-STD" => ["name" => "Standard Laptop 13\"", "stock" => 6],
    "PHONE-12-RED" => ["name" => "Smartphone 12 Red", "stock" => 3]
];

// Sort SKUs by product type, then size, then variant
uksort($inventory, function($a, $b) {
    // Split SKUs into parts
    $parts_a = explode('-', $a);
    $parts_b = explode('-', $b);
    
    // Compare product types first
    $type_a = $parts_a[0];
    $type_b = $parts_b[0];
    
    if ($type_a !== $type_b) {
        return strcmp($type_a, $type_b);
    }
    
    // If same type, compare sizes
    $size_a = intval($parts_a[1]);
    $size_b = intval($parts_b[1]);
    
    if ($size_a !== $size_b) {
        return $size_a <=> $size_b; // Smaller sizes first
    }
    
    // If same size, compare variants
    $variant_a = $parts_a[2] ?? '';
    $variant_b = $parts_b[2] ?? '';
    
    return strcmp($variant_a, $variant_b);
});

// Print sorted inventory
foreach ($inventory as $sku => $item) {
    echo $sku . ": " . $item["name"] . " (Stock: " . $item["stock"] . ")<br>";
}
/* Outputs:
LAPTOP-13-STD: Standard Laptop 13" (Stock: 6)
LAPTOP-15-PRO: Professional Laptop 15" (Stock: 12)
PHONE-12-BLK: Smartphone 12 Black (Stock: 8)
PHONE-12-RED: Smartphone 12 Red (Stock: 3)
TABLET-10-SLV: Tablet 10" Silver (Stock: 15)
*/</code></pre>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress e-commerce, <code>uksort()</code> helps organize product variations with complex SKU patterns in a logical order.</p>
                    <pre><code>// Sort WooCommerce product variations by attribute combinations
function sort_product_variations($product) {
    if (!$product->is_type('variable')) {
        return;
    }
    
    $variations = $product->get_available_variations();
    $variation_data = [];
    
    // Extract variation data
    foreach ($variations as $variation) {
        $variation_id = $variation['variation_id'];
        $attributes = [];
        
        // Extract attribute values
        foreach ($variation['attributes'] as $key => $value) {
            $attribute_name = str_replace('attribute_', '', $key);
            $attributes[$attribute_name] = $value;
        }
        
        $variation_data[$variation_id] = $attributes;
    }
    
    // Create attribute priority map
    $attribute_priority = [
        'pa_size' => 1,
        'pa_color' => 2,
        'pa_material' => 3
        // Add more attributes as needed
    ];
    
    // Sort variation IDs by attribute values
    uksort($variation_data, function($a, $b) use ($variation_data, $attribute_priority) {
        $attrs_a = $variation_data[$a];
        $attrs_b = $variation_data[$b];
        
        // Compare each attribute according to priority
        foreach ($attribute_priority as $attr_name => $priority) {
            if (isset($attrs_a[$attr_name]) && isset($attrs_b[$attr_name])) {
                if ($attrs_a[$attr_name] !== $attrs_b[$attr_name]) {
                    // For size, sort numerically if possible
                    if ($attr_name === 'pa_size') {
                        $size_a = preg_replace('/[^0-9.]/', '', $attrs_a[$attr_name]);
                        $size_b = preg_replace('/[^0-9.]/', '', $attrs_b[$attr_name]);
                        
                        if (is_numeric($size_a) && is_numeric($size_b)) {
                            return floatval($size_a) <=> floatval($size_b);
                        }
                    }
                    
                    return strcmp($attrs_a[$attr_name], $attrs_b[$attr_name]);
                }
            }
        }
        
        return 0; // If all attributes are equal
    });
    
    // Display variations in custom order
    echo '<div class="product-variations">';
    foreach ($variation_data as $variation_id => $attributes) {
        $variation = wc_get_product($variation_id);
        
        echo '<div class="variation">';
        echo '<h4>' . $variation->get_formatted_name() . '</h4>';
        echo '<p>Price: ' . wc_price($variation->get_price()) . '</p>';
        
        if ($variation->is_in_stock()) {
            echo '<button class="add-to-cart" data-variation-id="' . $variation_id . '">Add to Cart</button>';
        } else {
            echo '<p class="out-of-stock">Out of Stock</p>';
        }
        
        echo '</div>';
    }
    echo '</div>';
}</code></pre>
                </div>
            </div>
        </section>

        <section class="array_multisort">
            <h2>Sorting by Multiple Keys with array_multisort()</h2>
            
            <p>For complex datasets where sorting needs to consider multiple criteria simultaneously, PHP provides the powerful <code>array_multisort()</code> function:</p>
            
            <div class="function">
                <h3>array_multisort() - Sort Multiple Arrays or Multi-dimensional Arrays</h3>
                <p>The <code>array_multisort()</code> function can sort several arrays at once, or a multi-dimensional array according to multiple keys. Think of it as organizing student records by grade, then by last name, then by first name ‚Äì using multiple sorting criteria in a specific order of precedence.</p>
                
                <div class="code_example">
                    <pre><code>// Sort multiple arrays simultaneously
$names = ["John", "Jane", "Bob", "Alice"];
$ages = [35, 28, 42, 31];
$cities = ["New York", "Chicago", "Los Angeles", "Boston"];

// Sort by age (ascending), then by name (ascending)
array_multisort($ages, SORT_ASC, $names, SORT_ASC, $cities);

echo "Sorted by age, then by name:<br>";
for ($i = 0; $i < count($names); $i++) {
    echo $names[$i] . " (" . $ages[$i] . ") - " . $cities[$i] . "<br>";
}
/* Outputs:
Jane (28) - Chicago
Alice (31) - Boston
John (35) - New York
Bob (42) - Los Angeles
*/

// Sort multi-dimensional array
$students = [
    ["name" => "John Smith", "grade" => "B", "score" => 85],
    ["name" => "Jane Doe", "grade" => "A", "score" => 92],
    ["name" => "Bob Johnson", "grade" => "B", "score" => 78],
    ["name" => "Alice Brown", "grade" => "A", "score" => 95],
    ["name" => "Mike Davis", "grade" => "C", "score" => 71]
];

// Extract the columns for sorting
$names = array_column($students, 'name');
$grades = array_column($students, 'grade');
$scores = array_column($students, 'score');

// Sort by grade (ascending), then by score (descending)
array_multisort($grades, SORT_ASC, $scores, SORT_DESC, $students);

echo "<br>Sorted by grade, then by score (highest first):<br>";
foreach ($students as $student) {
    echo $student["name"] . " - Grade: " . $student["grade"] . 
         ", Score: " . $student["score"] . "<br>";
}
/* Outputs:
Alice Brown - Grade: A, Score: 95
Jane Doe - Grade: A, Score: 92
John Smith - Grade: B, Score: 85
Bob Johnson - Grade: B, Score: 78
Mike Davis - Grade: C, Score: 71
*/</code></pre>
                </div>
                
                <div class="sort_flags">
                    <h4>Common Sort Flags</h4>
                    <p>The <code>array_multisort()</code> function accepts several flags to customize sorting behavior:</p>
                    <ul>
                        <li><strong>SORT_ASC</strong>: Sort in ascending order (default)</li>
                        <li><strong>SORT_DESC</strong>: Sort in descending order</li>
                        <li><strong>SORT_REGULAR</strong>: Compare items normally (default)</li>
                        <li><strong>SORT_NUMERIC</strong>: Compare items numerically</li>
                        <li><strong>SORT_STRING</strong>: Compare items as strings</li>
                        <li><strong>SORT_LOCALE_STRING</strong>: Compare items as strings based on current locale</li>
                        <li><strong>SORT_NATURAL</strong>: Compare items using natural ordering (PHP 5.4+)</li>
                        <li><strong>SORT_FLAG_CASE</strong>: Used with SORT_STRING or SORT_NATURAL to sort case-insensitively</li>
                    </ul>
                </div>
                
                <div class="real_world">
                    <h4>Real-World Application</h4>
                    <p>In WordPress data reporting, <code>array_multisort()</code> helps organize complex analytics data with multiple sorting criteria.</p>
                    <pre><code>// Sort posts by multiple statistics
function display_post_analytics() {
    // Get top 20 posts
    $args = [
        'post_type' => 'post',
        'posts_per_page' => 20,
        'meta_query' => [
            [
                'key' => '_yoast_wpseo_primary_category',
                'compare' => 'EXISTS'
            ]
        ]
    ];
    
    $posts = get_posts($args);
    $post_data = [];
    
    // Collect data for each post
    foreach ($posts as $post) {
        $views = get_post_meta($post->ID, 'post_views', true) ?: 0;
        $comments = get_comments_number($post->ID);
        $shares = get_post_meta($post->ID, 'social_shares', true) ?: 0;
        $category_id = get_post_meta($post->ID, '_yoast_wpseo_primary_category', true);
        $category = get_term($category_id, 'category');
        
        $post_data[] = [
            'id' => $post->ID,
            'title' => get_the_title($post->ID),
            'category' => $category->name,
            'date' => get_the_date('Y-m-d', $post->ID),
            'views' => intval($views),
            'comments' => intval($comments),
            'shares' => intval($shares),
            'engagement' => intval($views) + (intval($comments) * 10) + (intval($shares) * 5)
        ];
    }
    
    // Extract columns for sorting
    $categories = array_column($post_data, 'category');
    $engagement = array_column($post_data, 'engagement');
    $dates = array_column($post_data, 'date');
    
    // Sort by category (asc), then by engagement (desc), then by date (desc)
    array_multisort(
        $categories, SORT_ASC, SORT_STRING,
        $engagement, SORT_DESC, SORT_NUMERIC,
        $dates, SORT_DESC, SORT_STRING,
        $post_data
    );
    
    // Display sorted results
    echo '<table class="analytics-table">';
    echo '<tr><th>Title</th><th>Category</th><th>Date</th><th>Views</th><th>Comments</th><th>Shares</th><th>Engagement</th></tr>';
    
    foreach ($post_data as $post) {
        echo '<tr>';
        echo '<td><a href="' . get_permalink($post['id']) . '">' . esc_html($post['title']) . '</a></td>';
        echo '<td>' . esc_html($post['category']) . '</td>';
        echo '<td>' . esc_html($post['date']) . '</td>';
        echo '<td>' . number_format($post['views']) . '</td>';
        echo '<td>' . $post['comments'] . '</td>';
        echo '<td>' . $post['shares'] . '</td>';
        echo '<td>' . number_format($post['engagement']) . '</td>';
        echo '</tr>';
    }
    
    echo '</table>';
}</code></pre>
                </div>
            </div>
        </section>

        <section class="practical_applications">
            <h2>Practical Applications in WordPress Development</h2>
            
            <p>Let's explore some real-world scenarios where PHP array sorting becomes crucial in WordPress development:</p>
            
            <div class="example">
                <h3>Building a Custom Post Sort Order</h3>
                <p>WordPress developers often need to create custom sorting rules for post types. Here's how you might implement a custom product sorting function for WooCommerce:</p>
                
                <div class="code_example">
                    <pre><code>// Add custom sort options to WooCommerce
function add_custom_sorting_options($options) {
    $options['popularity_and_stock'] = 'Popularity (In-Stock First)';
    $options['rating_and_price'] = 'Rating (Highest First) & Price (Lowest First)';
    return $options;
}
add_filter('woocommerce_catalog_orderby', 'add_custom_sorting_options');

// Implement custom sort logic
function apply_custom_sorting($args, $orderby, $order) {
    switch($orderby) {
        case 'popularity_and_stock':
            // We'll handle this with a custom query modification
            add_filter('posts_clauses', 'sort_by_popularity_and_stock');
            break;
            
        case 'rating_and_price':
            // We'll use array sorting functions after the query
            add_filter('the_posts', 'sort_by_rating_and_price');
            break;
    }
    
    return $args;
}
add_filter('woocommerce_get_catalog_ordering_args', 'apply_custom_sorting', 10, 3);

// Custom SQL sorting for popularity and stock status
function sort_by_popularity_and_stock($clauses) {
    global $wpdb;
    
    // Join stock status meta
    $clauses['join'] .= " LEFT JOIN {$wpdb->postmeta} as stock_meta ON {$wpdb->posts}.ID = stock_meta.post_id AND stock_meta.meta_key = '_stock_status'";
    
    // Join popularity meta (total sales)
    $clauses['join'] .= " LEFT JOIN {$wpdb->postmeta} as pop_meta ON {$wpdb->posts}.ID = pop_meta.post_id AND pop_meta.meta_key = 'total_sales'";
    
    // Order by stock status first, then by popularity
    $clauses['orderby'] = "CASE WHEN stock_meta.meta_value = 'instock' THEN 0 ELSE 1 END ASC, 
                          CAST(pop_meta.meta_value AS SIGNED) DESC, 
                          {$wpdb->posts}.post_title ASC";
    
    remove_filter('posts_clauses', 'sort_by_popularity_and_stock');
    
    return $clauses;
}

// PHP array sorting for rating and price
function sort_by_rating_and_price($posts) {
    if (!is_woocommerce() || !is_product_category() || empty($posts)) {
        return $posts;
    }
    
    // Get product data
    $products_data = [];
    foreach ($posts as $post) {
        $product = wc_get_product($post->ID);
        if (!$product) continue;
        
        $products_data[$post->ID] = [
            'post' => $post,
            'rating' => $product->get_average_rating(),
            'price' => $product->get_price()
        ];
    }
    
    // Extract columns for sorting
    $ratings = array_column($products_data, 'rating');
    $prices = array_column($products_data, 'price');
    
    // Sort by rating (desc), then by price (asc)
    array_multisort(
        $ratings, SORT_DESC, SORT_NUMERIC,
        $prices, SORT_ASC, SORT_NUMERIC,
        $products_data
    );
    
    // Reindex posts array
    $sorted_posts = [];
    foreach ($products_data as $product_data) {
        $sorted_posts[] = $product_data['post'];
    }
    
    remove_filter('the_posts', 'sort_by_rating_and_price');
    
    return $sorted_posts;
}</code></pre>
                </div>
            </div>
            
            <div class="example">
                <h3>Creating a Custom Related Posts Widget</h3>
                <p>Building a "related posts" feature often requires complex sorting logic to determine post relevance:</p>
                
                <div class="code_example">
                    <pre><code>// Get related posts by tag similarity and sort by relevance
function get_related_posts_by_tags($post_id, $max_posts = 5) {
    // Get current post's tags
    $tags = wp_get_post_tags($post_id);
    
    if (empty($tags)) {
        return [];
    }
    
    // Extract tag IDs
    $tag_ids = [];
    foreach ($tags as $tag) {
        $tag_ids[] = $tag->term_id;
    }
    
    // Query posts that share tags
    $args = [
        'tag__in' => $tag_ids,
        'post__not_in' => [$post_id], // Exclude current post
        'posts_per_page' => 20, // Get more than needed for sorting
        'ignore_sticky_posts' => 1
    ];
    
    $query = new WP_Query($args);
    
    if (!$query->have_posts()) {
        return [];
    }
    
    // Calculate relevance score for each post
    $scored_posts = [];
    
    while ($query->have_posts()) {
        $query->the_post();
        $related_post_id = get_the_ID();
        
        // Get this post's tags
        $related_tags = wp_get_post_tags($related_post_id);
        $related_tag_ids = [];
        
        foreach ($related_tags as $tag) {
            $related_tag_ids[] = $tag->term_id;
        }
        
        // Calculate tag overlap (number of matching tags)
        $matching_tags = count(array_intersect($tag_ids, $related_tag_ids));
        
        // Calculate recency bonus (newer posts get slightly higher score)
        $days_old = (time() - get_the_time('U')) / DAY_IN_SECONDS;
        $recency_score = max(0, 100 - min($days_old, 100));
        
        // Calculate final relevance score
        $relevance_score = ($matching_tags * 100) + ($recency_score * 0.2);
        
        $scored_posts[] = [
            'ID' => $related_post_id,
            'title' => get_the_title(),
            'permalink' => get_permalink(),
            'score' => $relevance_score,
            'matching_tags' => $matching_tags,
            'date' => get_the_date()
        ];
    }
    
    wp_reset_postdata();
    
    // Sort posts by relevance score (highest first)
    usort($scored_posts, function($a, $b) {
        if ($a['matching_tags'] !== $b['matching_tags']) {
            return $b['matching_tags'] <=> $a['matching_tags']; // More matching tags first
        }
        
        return $b['score'] <=> $a['score']; // Higher score first if tags match
    });
    
    // Return only the requested number of posts
    return array_slice($scored_posts, 0, $max_posts);
}

// Display related posts
function display_related_posts() {
    $current_post_id = get_the_ID();
    $related_posts = get_related_posts_by_tags($current_post_id);
    
    if (empty($related_posts)) {
        return;
    }
    
    echo '<div class="related-posts">';
    echo '<h3>Related Articles</h3>';
    echo '<ul>';
    
    foreach ($related_posts as $post) {
        echo '<li>';
        echo '<a href="' . esc_url($post['permalink']) . '">';
        echo esc_html($post['title']);
        echo '</a>';
        echo '<span class="post-date">' . esc_html($post['date']) . '</span>';
        echo '</li>';
    }
    
    echo '</ul>';
    echo '</div>';
}</code></pre>
                </div>
            </div>
            
            <div class="example">
                <h3>Building a Custom Menu Order with Priorities</h3>
                <p>Custom menu ordering can improve user experience by intelligently organizing navigation elements:</p>
                
                <div class="code_example">
                    <pre><code>// Sort menu items based on custom priority
function sort_menu_items_by_priority($sorted_menu_items) {
    // Only customize the main navigation menu
    if (!is_main_query() || !is_page()) {
        return $sorted_menu_items;
    }
    
    // Get current page ID
    $current_page_id = get_queried_object_id();
    
    // Calculate priority value for each menu item
    $menu_items_with_priority = [];
    foreach ($sorted_menu_items as $item) {
        $priority = 0;
        
        // If this is the current page, highest priority
        if ($item->object_id == $current_page_id) {
            $priority = 1000;
        } 
        // If this is a parent of current page, high priority
        elseif ($current_page_id && $item->object_id == wp_get_post_parent_id($current_page_id)) {
            $priority = 800;
        }
        // If this is in the same section (shares parent with current page)
        elseif ($current_page_id && wp_get_post_parent_id($current_page_id) && 
                wp_get_post_parent_id($current_page_id) == wp_get_post_parent_id($item->object_id)) {
            $priority = 600;
        }
        // If custom priority is set in menu item description (format: "priority:X")
        elseif (preg_match('/priority:(\d+)/', $item->description, $matches)) {
            $priority = intval($matches[1]);
        }
        // Default priority based on menu order
        else {
            $priority = 100 - min($item->menu_order, 100);
        }
        
        $menu_items_with_priority[] = [
            'item' => $item,
            'priority' => $priority
        ];
    }
    
    // Sort items by priority (highest first)
    usort($menu_items_with_priority, function($a, $b) {
        return $b['priority'] <=> $a['priority'];
    });
    
    // Extract just the menu items from sorted array
    $new_sorted_items = [];
    foreach ($menu_items_with_priority as $item_data) {
        $new_sorted_items[] = $item_data['item'];
    }
    
    return $new_sorted_items;
}
add_filter('wp_nav_menu_objects', 'sort_menu_items_by_priority', 10);</code></pre>
                </div>
            </div>
        </section>

        <section class="performance">
            <h2>Performance Considerations</h2>
            
            <p>When working with array sorting in PHP, especially on large datasets, performance becomes a critical factor. Here are some best practices to optimize your sorting operations:</p>
            
            <div class="performance_tips">
                <h3>Choosing the Right Sorting Function</h3>
                <p>Different sorting functions have different performance characteristics:</p>
                <ul>
                    <li><strong>Built-in Functions vs. Custom Sorts</strong>: PHP's built-in sort functions are generally faster than custom sorting with <code>usort()</code>, but custom sorts provide more flexibility.</li>
                    <li><strong>Database Sorting vs. PHP Sorting</strong>: For large datasets, it's usually more efficient to sort at the database level (using ORDER BY in SQL queries) rather than retrieving all data and sorting in PHP.</li>
                    <li><strong>Pre-sorting vs. On-demand Sorting</strong>: Consider pre-sorting data during less busy times and caching the results rather than sorting on every request.</li>
                </ul>
                
                <div class="comparison">
                    <h4>Performance Comparison</h4>
                    <table>
                        <thead>
                            <tr>
                                <th>Function</th>
                                <th>Speed</th>
                                <th>Memory Usage</th>
                                <th>Best For</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>sort(), rsort()</td>
                                <td>Fastest</td>
                                <td>Low</td>
                                <td>Simple indexed arrays, when keys don't matter</td>
                            </tr>
                            <tr>
                                <td>asort(), arsort(), ksort(), krsort()</td>
                                <td>Fast</td>
                                <td>Low</td>
                                <td>Associative arrays when preserving keys is important</td>
                            </tr>
                            <tr>
                                <td>natsort(), natcasesort()</td>
                                <td>Medium</td>
                                <td>Medium</td>
                                <td>Strings containing numbers that need human-logical ordering</td>
                            </tr>
                            <tr>
                                <td>usort(), uasort(), uksort()</td>
                                <td>Slowest</td>
                                <td>Medium</td>
                                <td>Complex sorting logic requiring custom comparison functions</td>
                            </tr>
                            <tr>
                                <td>array_multisort()</td>
                                <td>Medium</td>
                                <td>High</td>
                                <td>Multi-dimensional arrays requiring sorting by multiple keys</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
            
            <div class="optimization_tips">
                <h3>Optimization Strategies</h3>
                <ul>
                    <li><strong>Avoid Repeated Sorting</strong>: Sort once and store the results rather than re-sorting the same data multiple times.</li>
                    <li><strong>Use Pagination</strong>: For large datasets, only sort the current page of results instead of the entire dataset.</li>
                    <li><strong>Cache Sort Results</strong>: Use WordPress transients to cache sorted results, especially for complex sorts.</li>
                    <li><strong>Optimize Comparison Functions</strong>: In custom sorting functions, keep comparison logic as simple as possible.</li>
                    <li><strong>Pre-calculate Sort Keys</strong>: If sorting by complex criteria, calculate and store sort keys in advance.</li>
                </ul>
                
                <div class="code_example">
                    <pre><code>// Example of caching sort results with transients
function get_sorted_products_by_popularity($category_id = null) {
    // Create a unique cache key
    $cache_key = 'sorted_products_popularity';
    if ($category_id) {
        $cache_key .= '_cat_' . $category_id;
    }
    
    // Try to get cached results
    $sorted_products = get_transient($cache_key);
    
    // If no cached results or cache expired, perform the sort
    if (false === $sorted_products) {
        // Query products
        $args = [
            'post_type' => 'product',
            'posts_per_page' => -1
        ];
        
        if ($category_id) {
            $args['tax_query'] = [
                [
                    'taxonomy' => 'product_cat',
                    'field' => 'id',
                    'terms' => $category_id
                ]
            ];
        }
        
        $products = get_posts($args);
        $product_data = [];
        
        // Extract product data and popularity metrics
        foreach ($products as $product) {
            $wc_product = wc_get_product($product->ID);
            if (!$wc_product) continue;
            
            // Calculate popularity score based on views, sales, and reviews
            $views = get_post_meta($product->ID, 'product_views', true) ?: 0;
            $sales = get_post_meta($product->ID, 'total_sales', true) ?: 0;
            $rating = $wc_product->get_average_rating() ?: 0;
            
            $popularity_score = ($views * 0.3) + ($sales * 0.5) + ($rating * 20);
            
            $product_data[] = [
                'id' => $product->ID,
                'title' => $product->post_title,
                'popularity' => $popularity_score
            ];
        }
        
        // Sort by popularity (highest first)
        usort($product_data, function($a, $b) {
            return $b['popularity'] <=> $a['popularity'];
        });
        
        // Only store product IDs in cache to save space
        $sorted_products = array_column($product_data, 'id');
        
        // Cache results for 12 hours
        set_transient($cache_key, $sorted_products, 12 * HOUR_IN_SECONDS);
    }
    
    return $sorted_products;
}</code></pre>
                </div>
            </div>
        </section>

        <section class="homework">
            <h2>Homework Assignment</h2>
            <p>Put your array sorting knowledge to work with this WordPress-themed assignment:</p>
            
            <div class="assignment">
                <h3>WordPress Content Organizer</h3>
                <p>Create a PHP function that sorts a collection of WordPress posts according to multiple criteria:</p>
                
                <ol>
                    <li>Primary sort: Sort posts by category (using a pre-defined category priority list)</li>
                    <li>Secondary sort: Within each category, sort by post date (newest first)</li>
                    <li>Tertiary sort: For posts with the same date, sort by comment count (highest first)</li>
                    <li>Final sort: If all above are equal, sort alphabetically by title</li>
                </ol>
                
                <p>Your solution should work with the sample data provided and use at least 3 different PHP array sorting functions we covered in this lecture.</p>
                
                <div class="starter_code">
                    <pre><code>// Sample WordPress post data
$posts = [
    [
        'ID' => 101,
        'post_title' => 'Getting Started with WordPress',
        'post_date' => '2023-05-15 10:30:45',
        'comment_count' => 8,
        'category' => 'Tutorials'
    ],
    [
        'ID' => 102,
        'post_title' => 'Advanced WordPress Security',
        'post_date' => '2023-05-20 14:15:22',
        'comment_count' => 12,
        'category' => 'Security'
    ],
    [
        'ID' => 103,
        'post_title' => 'Optimizing WordPress Performance',
        'post_date' => '2023-05-18 09:45:30',
        'comment_count' => 5,
        'category' => 'Performance'
    ],
    [
        'ID' => 104,
        'post_title' => 'WordPress SEO Best Practices',
        'post_date' => '2023-05-20 11:20:15',
        'comment_count' => 15,
        'category' => 'SEO'
    ],
    [
        'ID' => 105,
        'post_title' => 'Creating Custom WordPress Themes',
        'post_date' => '2023-05-18 16:30:00',
        'comment_count' => 10,
        'category' => 'Tutorials'
    ],
    [
        'ID' => 106,
        'post_title' => 'WordPress Backup Strategies',
        'post_date' => '2023-05-20 14:15:22',
        'comment_count' => 7,
        'category' => 'Security'
    ],
    [
        'ID' => 107,
        'post_title' => 'Mastering WordPress Gutenberg',
        'post_date' => '2023-05-18 09:45:30',
        'comment_count' => 5,
        'category' => 'Tutorials'
    ]
];

// Category priority (lower number = higher priority)
$category_priority = [
    'Security' => 1,
    'Performance' => 2,
    'SEO' => 3,
    'Tutorials' => 4
];

// Your solution here
function sort_wordpress_posts($posts, $category_priority) {
    // Implement your sorting logic here
    
    return $sorted_posts;
}

// Sort the posts
$sorted_posts = sort_wordpress_posts($posts, $category_priority);

// Display the sorted posts
echo "<h3>Sorted WordPress Posts</h3>";
echo "<table border='1' cellpadding='5'>";
echo "<tr><th>ID</th><th>Title</th><th>Category</th><th>Date</th><th>Comments</th></tr>";

foreach ($sorted_posts as $post) {
    echo "<tr>";
    echo "<td>{$post['ID']}</td>";
    echo "<td>{$post['post_title']}</td>";
    echo "<td>{$post['category']}</td>";
    echo "<td>{$post['post_date']}</td>";
    echo "<td>{$post['comment_count']}</td>";
    echo "</tr>";
}

echo "</table>";</code></pre>
                </div>
            </div>
        </section>

        <section class="further_reading">
            <h2>Further Reading and Resources</h2>
            <ul>
                <li><a href="https://www.php.net/manual/en/array.sorting.php" target="_blank">PHP Manual: Array Sorting Functions</a> - Official documentation</li>
                <li><a href="https://developer.wordpress.org/reference/functions/usort/" target="_blank">WordPress Developer Reference: usort()</a> - WordPress-specific usage examples</li>
                <li><a href="https://code.tutsplus.com/tutorials/data-structures-in-php-arrays-in-depth--cms-34215" target="_blank">Data Structures in PHP: Arrays in Depth</a> - Advanced array handling techniques</li>
                <li><a href="https://www.smashingmagazine.com/2016/03/advanced-wordpress-development-techniques/" target="_blank">Advanced WordPress Development Techniques</a> - Real-world applications</li>
            </ul>
        </section>

        <section class="next_session">
            <h2>Coming Up Next: Session 6 - PHP Functions</h2>
            <p>In our next session, we'll dive into PHP functions - the building blocks that will allow you to encapsulate your array sorting logic and other code into reusable components. We'll explore function declarations, parameters, return values, and more advanced function concepts.</p>
            <p>To prepare for the next session, try creating functions that implement some of the sorting operations we've learned about today!</p>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 PHP WordPress Development Course</p>
        <p><a href="module2.html">Back to Module 2</a> | <a href="index.html">Back to Syllabus</a></p>
    </footer>
</body>
</html>
