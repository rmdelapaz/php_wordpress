<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form Validation Techniques</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="icon" href="/favicon.png">
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <header>
        <h1>Form Validation Techniques</h1>
        <p><a href="index.html">‚Üê Back to Syllabus</a></p>
    </header>
    
    <main>
        <section class="intro">
            <h2>Understanding Form Validation</h2>
            <p>Form validation is the process of ensuring user input meets the expected criteria before processing it. Proper validation is essential for data integrity, security, and user experience. In this lecture, we'll explore various techniques for validating form data in both client-side and server-side contexts.</p>
            
            <div class="analogy">
                <h3>The Bouncer Analogy</h3>
                <p>Think of form validation like a bouncer at an exclusive club:</p>
                <ul>
                    <li><strong>Client-side validation</strong> is like the bouncer checking your ID at the door - it's a quick initial check that can immediately turn away obviously unsuitable entries.</li>
                    <li><strong>Server-side validation</strong> is like the security team inside the club that does a more thorough background check - it's the essential, definitive verification process.</li>
                    <li><strong>Validation rules</strong> are like the club's entry requirements - they define what makes input acceptable or unacceptable.</li>
                    <li><strong>Validation errors</strong> are like being denied entry with an explanation - they inform users what they need to fix.</li>
                </ul>
                <p>Just as a club needs both bouncers and security, a web application needs both client-side and server-side validation to be truly secure.</p>
            </div>
        </section>

        <section class="validation_overview">
            <h2>The Validation Landscape</h2>
            <p>Let's explore the different aspects of form validation and how they work together to create a secure and user-friendly system.</p>
            
            <div class="mermaid_diagram">
                <h3>Form Validation Flow</h3>
                <div class="mermaid">
flowchart TD
    A[User Fills Form] --> B[Client-Side Validation]
    B -- Valid --> C[Form Submission]
    B -- Invalid --> D[Show Error Messages]
    D --> A
    C --> E[Server-Side Validation]
    E -- Valid --> F[Process Data]
    E -- Invalid --> G[Return Errors]
    G --> A
    F --> H[Success Response]
                </div>
            </div>
            
            <div class="validation_types">
                <h3>Types of Validation</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Validation Type</th>
                            <th>Description</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Required Fields</td>
                            <td>Ensuring mandatory fields are filled</td>
                            <td>Username cannot be empty</td>
                        </tr>
                        <tr>
                            <td>Data Type</td>
                            <td>Ensuring input matches expected type</td>
                            <td>Age must be a number</td>
                        </tr>
                        <tr>
                            <td>Format</td>
                            <td>Ensuring input follows specific pattern</td>
                            <td>Email must include @ symbol</td>
                        </tr>
                        <tr>
                            <td>Range</td>
                            <td>Ensuring numeric values within bounds</td>
                            <td>Age must be between 18-100</td>
                        </tr>
                        <tr>
                            <td>Length</td>
                            <td>Ensuring text length within limits</td>
                            <td>Password must be at least 8 characters</td>
                        </tr>
                        <tr>
                            <td>Comparison</td>
                            <td>Comparing multiple fields</td>
                            <td>Confirm password must match password</td>
                        </tr>
                        <tr>
                            <td>Custom Logic</td>
                            <td>Application-specific validations</td>
                            <td>Username must not be already taken</td>
                        </tr>
                        <tr>
                            <td>Cross-Field</td>
                            <td>Validation dependent on other fields</td>
                            <td>If "Other" selected, "Please specify" is required</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section class="client_side_validation">
            <h2>Client-Side Validation</h2>
            <p>Client-side validation occurs in the user's browser before the form is submitted to the server. It provides immediate feedback and improves user experience by catching errors early.</p>
            
            <div class="html5_validation">
                <h3>HTML5 Built-in Validation</h3>
                <p>HTML5 introduced several validation features through attributes and input types.</p>
                
                <pre><code>&lt;!-- HTML5 Validation Attributes --&gt;
&lt;form id="registration-form"&gt;
    &lt;!-- Required attribute --&gt;
    &lt;label for="username"&gt;Username:&lt;/label&gt;
    &lt;input type="text" id="username" name="username" required&gt;
    
    &lt;!-- Email validation with pattern --&gt;
    &lt;label for="email"&gt;Email:&lt;/label&gt;
    &lt;input type="email" id="email" name="email" required&gt;
    
    &lt;!-- Min/max length validation --&gt;
    &lt;label for="password"&gt;Password:&lt;/label&gt;
    &lt;input type="password" id="password" name="password" 
           minlength="8" maxlength="20" required&gt;
    
    &lt;!-- Number with range validation --&gt;
    &lt;label for="age"&gt;Age:&lt;/label&gt;
    &lt;input type="number" id="age" name="age" 
           min="18" max="120" required&gt;
    
    &lt;!-- Pattern validation (regex) --&gt;
    &lt;label for="phone"&gt;Phone Number:&lt;/label&gt;
    &lt;input type="tel" id="phone" name="phone" 
           pattern="[0-9]{3}-[0-9]{3}-[0-9]{4}" 
           placeholder="123-456-7890" required&gt;
    
    &lt;!-- Date validation --&gt;
    &lt;label for="birthdate"&gt;Birthdate:&lt;/label&gt;
    &lt;input type="date" id="birthdate" name="birthdate" 
           min="1900-01-01" max="2010-01-01" required&gt;
    
    &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
                
                <h3>HTML5 Validation Attributes</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Attribute</th>
                            <th>Description</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>required</code></td>
                            <td>Field must not be empty</td>
                            <td><code>&lt;input required&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>minlength</code>/<code>maxlength</code></td>
                            <td>Minimum/maximum text length</td>
                            <td><code>&lt;input minlength="8" maxlength="20"&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>min</code>/<code>max</code></td>
                            <td>Minimum/maximum numeric value</td>
                            <td><code>&lt;input type="number" min="0" max="100"&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>pattern</code></td>
                            <td>Regular expression pattern</td>
                            <td><code>&lt;input pattern="[A-Za-z0-9]+"&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>type</code></td>
                            <td>Input type with built-in validation</td>
                            <td><code>&lt;input type="email"&gt;</code></td>
                        </tr>
                        <tr>
                            <td><code>step</code></td>
                            <td>Valid increment steps for numeric inputs</td>
                            <td><code>&lt;input type="number" step="0.01"&gt;</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="javascript_validation">
                <h3>JavaScript Validation</h3>
                <p>For more complex validation logic, JavaScript provides greater flexibility and control.</p>
                
                <pre><code>&lt;!-- HTML Form --&gt;
&lt;form id="registration-form" novalidate&gt;
    &lt;div class="form-group"&gt;
        &lt;label for="username"&gt;Username:&lt;/label&gt;
        &lt;input type="text" id="username" name="username"&gt;
        &lt;div class="error" id="username-error"&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="email"&gt;Email:&lt;/label&gt;
        &lt;input type="email" id="email" name="email"&gt;
        &lt;div class="error" id="email-error"&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="password"&gt;Password:&lt;/label&gt;
        &lt;input type="password" id="password" name="password"&gt;
        &lt;div class="error" id="password-error"&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="confirm-password"&gt;Confirm Password:&lt;/label&gt;
        &lt;input type="password" id="confirm-password" name="confirm_password"&gt;
        &lt;div class="error" id="confirm-password-error"&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;

&lt;!-- JavaScript Validation --&gt;
&lt;script&gt;
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('registration-form');
    
    form.addEventListener('submit', function(event) {
        // Prevent form submission by default
        event.preventDefault();
        
        // Reset previous error messages
        const errorElements = document.querySelectorAll('.error');
        errorElements.forEach(element => {
            element.textContent = '';
        });
        
        // Get form values
        const username = document.getElementById('username').value.trim();
        const email = document.getElementById('email').value.trim();
        const password = document.getElementById('password').value;
        const confirmPassword = document.getElementById('confirm-password').value;
        
        let isValid = true;
        
        // Validate username
        if (username === '') {
            document.getElementById('username-error').textContent = 'Username is required';
            isValid = false;
        } else if (username.length < 3) {
            document.getElementById('username-error').textContent = 'Username must be at least 3 characters';
            isValid = false;
        }
        
        // Validate email
        if (email === '') {
            document.getElementById('email-error').textContent = 'Email is required';
            isValid = false;
        } else if (!isValidEmail(email)) {
            document.getElementById('email-error').textContent = 'Please enter a valid email address';
            isValid = false;
        }
        
        // Validate password
        if (password === '') {
            document.getElementById('password-error').textContent = 'Password is required';
            isValid = false;
        } else if (password.length < 8) {
            document.getElementById('password-error').textContent = 'Password must be at least 8 characters';
            isValid = false;
        } else if (!hasUpperCase(password) || !hasLowerCase(password) || !hasNumber(password)) {
            document.getElementById('password-error').textContent = 
                'Password must include uppercase, lowercase, and numbers';
            isValid = false;
        }
        
        // Validate confirm password
        if (confirmPassword === '') {
            document.getElementById('confirm-password-error').textContent = 'Please confirm your password';
            isValid = false;
        } else if (confirmPassword !== password) {
            document.getElementById('confirm-password-error').textContent = 'Passwords do not match';
            isValid = false;
        }
        
        // If valid, submit the form
        if (isValid) {
            form.submit();
        }
    });
    
    // Helper functions
    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
    
    function hasUpperCase(str) {
        return /[A-Z]/.test(str);
    }
    
    function hasLowerCase(str) {
        return /[a-z]/.test(str);
    }
    
    function hasNumber(str) {
        return /\d/.test(str);
    }
});
&lt;/script&gt;</code></pre>
            </div>
            
            <div class="javascript_libraries">
                <h3>JavaScript Validation Libraries</h3>
                <p>Several libraries simplify client-side validation. Here's an example using jQuery Validation Plugin:</p>
                
                <pre><code>&lt;!-- Include jQuery and jQuery Validation Plugin --&gt;
&lt;script src="https://code.jquery.com/jquery-3.6.0.min.js"&gt;&lt;/script&gt;
&lt;script src="https://cdn.jsdelivr.net/npm/jquery-validation@1.19.3/dist/jquery.validate.min.js"&gt;&lt;/script&gt;

&lt;!-- HTML Form --&gt;
&lt;form id="registration-form"&gt;
    &lt;div class="form-group"&gt;
        &lt;label for="username"&gt;Username:&lt;/label&gt;
        &lt;input type="text" id="username" name="username" class="form-control"&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="email"&gt;Email:&lt;/label&gt;
        &lt;input type="email" id="email" name="email" class="form-control"&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="password"&gt;Password:&lt;/label&gt;
        &lt;input type="password" id="password" name="password" class="form-control"&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="confirm_password"&gt;Confirm Password:&lt;/label&gt;
        &lt;input type="password" id="confirm_password" name="confirm_password" class="form-control"&gt;
    &lt;/div&gt;
    
    &lt;button type="submit" class="btn btn-primary"&gt;Register&lt;/button&gt;
&lt;/form&gt;

&lt;!-- jQuery Validation --&gt;
&lt;script&gt;
$(document).ready(function() {
    // Add custom validation method for password
    $.validator.addMethod("strongPassword", function(value, element) {
        return this.optional(element) || 
            (/[A-Z]/.test(value) && /[a-z]/.test(value) && /\d/.test(value));
    }, "Password must contain uppercase, lowercase, and numbers");
    
    // Initialize validation
    $("#registration-form").validate({
        // Validation rules
        rules: {
            username: {
                required: true,
                minlength: 3
            },
            email: {
                required: true,
                email: true
            },
            password: {
                required: true,
                minlength: 8,
                strongPassword: true
            },
            confirm_password: {
                required: true,
                equalTo: "#password"
            }
        },
        // Error messages
        messages: {
            username: {
                required: "Please enter a username",
                minlength: "Username must be at least 3 characters"
            },
            email: {
                required: "Please enter an email address",
                email: "Please enter a valid email address"
            },
            password: {
                required: "Please enter a password",
                minlength: "Password must be at least 8 characters"
            },
            confirm_password: {
                required: "Please confirm your password",
                equalTo: "Passwords do not match"
            }
        },
        // Error placement
        errorElement: "div",
        errorClass: "invalid-feedback",
        highlight: function(element) {
            $(element).addClass("is-invalid").removeClass("is-valid");
        },
        unhighlight: function(element) {
            $(element).addClass("is-valid").removeClass("is-invalid");
        },
        // Submit handler
        submitHandler: function(form) {
            // Form is valid, you can submit it or perform AJAX
            alert("Form is valid! Would submit to server.");
            // form.submit();
        }
    });
});
&lt;/script&gt;</code></pre>
            </div>
            
            <div class="real_time_validation">
                <h3>Real-Time Validation</h3>
                <p>Validating as users type provides immediate feedback and improves user experience.</p>
                
                <pre><code>&lt;!-- HTML Form --&gt;
&lt;form id="contact-form"&gt;
    &lt;div class="form-group"&gt;
        &lt;label for="name"&gt;Name:&lt;/label&gt;
        &lt;input type="text" id="name" name="name"&gt;
        &lt;div class="error" id="name-error"&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="email"&gt;Email:&lt;/label&gt;
        &lt;input type="email" id="email" name="email"&gt;
        &lt;div class="error" id="email-error"&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;button type="submit"&gt;Submit&lt;/button&gt;
&lt;/form&gt;

&lt;!-- JavaScript for real-time validation --&gt;
&lt;script&gt;
document.addEventListener('DOMContentLoaded', function() {
    const nameInput = document.getElementById('name');
    const emailInput = document.getElementById('email');
    
    // Name validation
    nameInput.addEventListener('input', function() {
        validateName();
    });
    
    // Email validation
    emailInput.addEventListener('input', function() {
        validateEmail();
    });
    
    // Form submission
    document.getElementById('contact-form').addEventListener('submit', function(event) {
        event.preventDefault();
        
        // Validate all fields
        const isNameValid = validateName();
        const isEmailValid = validateEmail();
        
        // Submit if all valid
        if (isNameValid && isEmailValid) {
            this.submit();
        }
    });
    
    // Validation functions
    function validateName() {
        const name = nameInput.value.trim();
        const nameError = document.getElementById('name-error');
        
        nameError.textContent = '';
        
        if (name === '') {
            nameError.textContent = 'Name is required';
            nameInput.classList.add('invalid');
            nameInput.classList.remove('valid');
            return false;
        } else if (name.length < 2) {
            nameError.textContent = 'Name must be at least 2 characters';
            nameInput.classList.add('invalid');
            nameInput.classList.remove('valid');
            return false;
        } else {
            nameInput.classList.add('valid');
            nameInput.classList.remove('invalid');
            return true;
        }
    }
    
    function validateEmail() {
        const email = emailInput.value.trim();
        const emailError = document.getElementById('email-error');
        
        emailError.textContent = '';
        
        if (email === '') {
            emailError.textContent = 'Email is required';
            emailInput.classList.add('invalid');
            emailInput.classList.remove('valid');
            return false;
        } else if (!isValidEmail(email)) {
            emailError.textContent = 'Please enter a valid email address';
            emailInput.classList.add('invalid');
            emailInput.classList.remove('valid');
            return false;
        } else {
            emailInput.classList.add('valid');
            emailInput.classList.remove('invalid');
            return true;
        }
    }
    
    function isValidEmail(email) {
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        return emailRegex.test(email);
    }
});
&lt;/script&gt;</code></pre>
            </div>
        </section>

        <section class="server_side_validation">
            <h2>Server-Side Validation with PHP</h2>
            <p>Server-side validation is essential for security and data integrity. It ensures all data is validated even if client-side validation is bypassed.</p>
            
            <div class="basic_php_validation">
                <h3>Basic PHP Validation</h3>
                <pre><code>&lt;?php
// Form processing script

// Check if form was submitted
if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Initialize errors array
    $errors = [];
    
    // Validate username
    $username = $_POST['username'] ?? '';
    $username = trim($username);
    
    if (empty($username)) {
        $errors['username'] = 'Username is required';
    } elseif (strlen($username) < 3) {
        $errors['username'] = 'Username must be at least 3 characters';
    }
    
    // Validate email
    $email = $_POST['email'] ?? '';
    $email = trim($email);
    
    if (empty($email)) {
        $errors['email'] = 'Email is required';
    } elseif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        $errors['email'] = 'Please enter a valid email address';
    }
    
    // Validate password
    $password = $_POST['password'] ?? '';
    
    if (empty($password)) {
        $errors['password'] = 'Password is required';
    } elseif (strlen($password) < 8) {
        $errors['password'] = 'Password must be at least 8 characters';
    } elseif (!preg_match('/[A-Z]/', $password) || 
              !preg_match('/[a-z]/', $password) || 
              !preg_match('/\d/', $password)) {
        $errors['password'] = 'Password must include uppercase, lowercase, and numbers';
    }
    
    // Validate confirm password
    $confirm_password = $_POST['confirm_password'] ?? '';
    
    if (empty($confirm_password)) {
        $errors['confirm_password'] = 'Please confirm your password';
    } elseif ($confirm_password !== $password) {
        $errors['confirm_password'] = 'Passwords do not match';
    }
    
    // If no errors, process the form
    if (empty($errors)) {
        // Form is valid, proceed with processing
        // e.g., save to database, send email, etc.
        
        // Redirect to success page
        header('Location: success.php');
        exit;
    }
}
?&gt;

&lt;!-- HTML Form with error display --&gt;
&lt;form method="post" action="&lt;?php echo htmlspecialchars($_SERVER['PHP_SELF']); ?&gt;"&gt;
    &lt;div class="form-group"&gt;
        &lt;label for="username"&gt;Username:&lt;/label&gt;
        &lt;input type="text" id="username" name="username" 
               value="&lt;?php echo htmlspecialchars($username ?? ''); ?&gt;"&gt;
        &lt;span class="error"&gt;&lt;?php echo $errors['username'] ?? ''; ?&gt;&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="email"&gt;Email:&lt;/label&gt;
        &lt;input type="email" id="email" name="email" 
               value="&lt;?php echo htmlspecialchars($email ?? ''); ?&gt;"&gt;
        &lt;span class="error"&gt;&lt;?php echo $errors['email'] ?? ''; ?&gt;&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="password"&gt;Password:&lt;/label&gt;
        &lt;input type="password" id="password" name="password"&gt;
        &lt;span class="error"&gt;&lt;?php echo $errors['password'] ?? ''; ?&gt;&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="confirm_password"&gt;Confirm Password:&lt;/label&gt;
        &lt;input type="password" id="confirm_password" name="confirm_password"&gt;
        &lt;span class="error"&gt;&lt;?php echo $errors['confirm_password'] ?? ''; ?&gt;&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
            </div>
            
            <div class="filter_functions">
                <h3>Using PHP Filter Functions</h3>
                <p>PHP provides built-in filter functions for validating common data types.</p>
                
                <pre><code>&lt;?php
// Form processing with filter functions

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $errors = [];
    
    // Validate email
    $email = filter_input(INPUT_POST, 'email', FILTER_VALIDATE_EMAIL);
    if ($email === false || $email === null) {
        $errors['email'] = 'Please enter a valid email address';
    }
    
    // Validate integer within range
    $age = filter_input(INPUT_POST, 'age', FILTER_VALIDATE_INT, [
        'options' => ['min_range' => 18, 'max_range' => 120]
    ]);
    if ($age === false || $age === null) {
        $errors['age'] = 'Age must be between 18 and 120';
    }
    
    // Validate URL
    $website = filter_input(INPUT_POST, 'website', FILTER_VALIDATE_URL);
    if ($website === false && !empty($_POST['website'])) {
        $errors['website'] = 'Please enter a valid URL';
    }
    
    // Validate IP address
    $ip = filter_input(INPUT_POST, 'ip_address', FILTER_VALIDATE_IP);
    if ($ip === false && !empty($_POST['ip_address'])) {
        $errors['ip_address'] = 'Please enter a valid IP address';
    }
    
    // Sanitize string input
    $name = filter_input(INPUT_POST, 'name', FILTER_SANITIZE_STRING);
    if (empty($name)) {
        $errors['name'] = 'Name is required';
    }
    
    // Process form if no errors
    if (empty($errors)) {
        // Form is valid
        // ...
    }
}
?&gt;</code></pre>
                
                <h3>Common PHP Filter Constants</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Filter</th>
                            <th>Description</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>FILTER_VALIDATE_EMAIL</code></td>
                            <td>Validates email address</td>
                            <td><code>filter_var($email, FILTER_VALIDATE_EMAIL)</code></td>
                        </tr>
                        <tr>
                            <td><code>FILTER_VALIDATE_INT</code></td>
                            <td>Validates integer</td>
                            <td><code>filter_var($age, FILTER_VALIDATE_INT)</code></td>
                        </tr>
                        <tr>
                            <td><code>FILTER_VALIDATE_FLOAT</code></td>
                            <td>Validates float</td>
                            <td><code>filter_var($price, FILTER_VALIDATE_FLOAT)</code></td>
                        </tr>
                        <tr>
                            <td><code>FILTER_VALIDATE_URL</code></td>
                            <td>Validates URL</td>
                            <td><code>filter_var($url, FILTER_VALIDATE_URL)</code></td>
                        </tr>
                        <tr>
                            <td><code>FILTER_VALIDATE_IP</code></td>
                            <td>Validates IP address</td>
                            <td><code>filter_var($ip, FILTER_VALIDATE_IP)</code></td>
                        </tr>
                        <tr>
                            <td><code>FILTER_SANITIZE_STRING</code></td>
                            <td>Strip tags and remove/encode special characters</td>
                            <td><code>filter_var($text, FILTER_SANITIZE_STRING)</code></td>
                        </tr>
                        <tr>
                            <td><code>FILTER_SANITIZE_EMAIL</code></td>
                            <td>Remove illegal email characters</td>
                            <td><code>filter_var($email, FILTER_SANITIZE_EMAIL)</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="regex_validation">
                <h3>Regular Expression Validation</h3>
                <p>Regular expressions (regex) provide powerful pattern matching for validation.</p>
                
                <pre><code>&lt;?php
// Validation using regular expressions

function validateInput($input, $pattern, $errorMessage) {
    if (empty($input)) {
        return 'This field is required';
    }
    
    if (!preg_match($pattern, $input)) {
        return $errorMessage;
    }
    
    return ''; // Empty string means valid
}

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    $errors = [];
    
    // Validate username (alphanumeric, 3-20 chars)
    $username = $_POST['username'] ?? '';
    $usernamePattern = '/^[a-zA-Z0-9_]{3,20}$/';
    $usernameError = validateInput($username, $usernamePattern, 
        'Username must be 3-20 characters and contain only letters, numbers, and underscores');
    
    if (!empty($usernameError)) {
        $errors['username'] = $usernameError;
    }
    
    // Validate password (at least 8 chars, 1 uppercase, 1 lowercase, 1 number)
    $password = $_POST['password'] ?? '';
    $passwordPattern = '/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/';
    $passwordError = validateInput($password, $passwordPattern,
        'Password must be at least 8 characters and include uppercase, lowercase, and numbers');
    
    if (!empty($passwordError)) {
        $errors['password'] = $passwordError;
    }
    
    // Validate phone number (US format: xxx-xxx-xxxx)
    $phone = $_POST['phone'] ?? '';
    $phonePattern = '/^\d{3}-\d{3}-\d{4}$/';
    $phoneError = validateInput($phone, $phonePattern,
        'Phone must be in format XXX-XXX-XXXX');
    
    if (!empty($phoneError)) {
        $errors['phone'] = $phoneError;
    }
    
    // Validate ZIP code (US format: 5 digits or 5+4)
    $zip = $_POST['zip'] ?? '';
    $zipPattern = '/^\d{5}(-\d{4})?$/';
    $zipError = validateInput($zip, $zipPattern,
        'ZIP must be 5 digits or 5+4 format (e.g., 12345 or 12345-6789)');
    
    if (!empty($zipError)) {
        $errors['zip'] = $zipError;
    }
    
    // Process form if no errors
    if (empty($errors)) {
        // Form is valid
        // ...
    }
}
?&gt;</code></pre>
                
                <h3>Common Regex Patterns</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Data Type</th>
                            <th>Regular Expression</th>
                            <th>Description</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Username</td>
                            <td><code>/^[a-zA-Z0-9_]{3,20}$/</code></td>
                            <td>Alphanumeric, 3-20 characters</td>
                        </tr>
                        <tr>
                            <td>Password</td>
                            <td><code>/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).{8,}$/</code></td>
                            <td>At least 8 chars with uppercase, lowercase, and number</td>
                        </tr>
                        <tr>
                            <td>Email</td>
                            <td><code>/^[^\s@]+@[^\s@]+\.[^\s@]+$/</code></td>
                            <td>Basic email format validation</td>
                        </tr>
                        <tr>
                            <td>Phone (US)</td>
                            <td><code>/^\d{3}-\d{3}-\d{4}$/</code></td>
                            <td>Format: XXX-XXX-XXXX</td>
                        </tr>
                        <tr>
                            <td>Date (YYYY-MM-DD)</td>
                            <td><code>/^\d{4}-\d{2}-\d{2}$/</code></td>
                            <td>Format: YYYY-MM-DD</td>
                        </tr>
                        <tr>
                            <td>ZIP Code (US)</td>
                            <td><code>/^\d{5}(-\d{4})?$/</code></td>
                            <td>5 digits or 5+4 format</td>
                        </tr>
                        <tr>
                            <td>Credit Card</td>
                            <td><code>/^\d{13,19}$/</code></td>
                            <td>13-19 digits (basic format check)</td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="php_validation_class">
                <h3>Creating a Reusable PHP Validation Class</h3>
                <pre><code>&lt;?php
/**
 * Form Validator Class
 * A reusable class for server-side form validation
 */
class FormValidator {
    // Store errors
    private $errors = [];
    
    // Store validation rules
    private $rules = [];
    
    // Store form data
    private $data = [];
    
    /**
     * Constructor
     * @param array $rules Validation rules
     */
    public function __construct(array $rules = []) {
        $this->rules = $rules;
    }
    
    /**
     * Set validation rules
     * @param array $rules Validation rules
     */
    public function setRules(array $rules) {
        $this->rules = $rules;
    }
    
    /**
     * Validate form data
     * @param array $data Form data to validate
     * @return bool True if validation passes
     */
    public function validate(array $data) {
        $this->data = $data;
        $this->errors = [];
        
        foreach ($this->rules as $field => $fieldRules) {
            $this->validateField($field, $fieldRules);
        }
        
        return empty($this->errors);
    }
    
    /**
     * Validate a single field
     * @param string $field Field name
     * @param array $rules Rules for this field
     */
    private function validateField($field, $rules) {
        // Skip if field doesn't exist and not required
        if (!isset($this->data[$field]) && !in_array('required', $rules)) {
            return;
        }
        
        $value = $this->data[$field] ?? '';
        
        // Check each rule
        foreach ($rules as $rule => $ruleValue) {
            // Simple rules (e.g., 'required')
            if (is_numeric($rule)) {
                $rule = $ruleValue;
                $ruleValue = true;
            }
            
            switch ($rule) {
                case 'required':
                    if ($ruleValue && empty($value)) {
                        $this->addError($field, 'This field is required');
                    }
                    break;
                    
                case 'email':
                    if (!empty($value) && !filter_var($value, FILTER_VALIDATE_EMAIL)) {
                        $this->addError($field, 'Please enter a valid email address');
                    }
                    break;
                    
                case 'min':
                    if (!empty($value) && strlen($value) < $ruleValue) {
                        $this->addError($field, "Minimum length is $ruleValue characters");
                    }
                    break;
                    
                case 'max':
                    if (!empty($value) && strlen($value) > $ruleValue) {
                        $this->addError($field, "Maximum length is $ruleValue characters");
                    }
                    break;
                    
                case 'matches':
                    if ($value !== ($this->data[$ruleValue] ?? '')) {
                        $this->addError($field, "This field must match $ruleValue");
                    }
                    break;
                    
                case 'regex':
                    if (!empty($value) && !preg_match($ruleValue, $value)) {
                        $this->addError($field, 'This field has an invalid format');
                    }
                    break;
                    
                case 'integer':
                    if (!empty($value) && !filter_var($value, FILTER_VALIDATE_INT)) {
                        $this->addError($field, 'Please enter a valid integer');
                    }
                    break;
                    
                case 'min_value':
                    if (!empty($value) && $value < $ruleValue) {
                        $this->addError($field, "Minimum value is $ruleValue");
                    }
                    break;
                    
                case 'max_value':
                    if (!empty($value) && $value > $ruleValue) {
                        $this->addError($field, "Maximum value is $ruleValue");
                    }
                    break;
                    
                case 'in_array':
                    if (!empty($value) && !in_array($value, $ruleValue)) {
                        $this->addError($field, 'This value is not allowed');
                    }
                    break;
            }
        }
    }
    
    /**
     * Add an error message
     * @param string $field Field name
     * @param string $message Error message
     */
    private function addError($field, $message) {
        if (!isset($this->errors[$field])) {
            $this->errors[$field] = $message;
        }
    }
    
    /**
     * Get all errors
     * @return array Validation errors
     */
    public function getErrors() {
        return $this->errors;
    }
    
    /**
     * Get error for specific field
     * @param string $field Field name
     * @return string Error message or empty string
     */
    public function getError($field) {
        return $this->errors[$field] ?? '';
    }
    
    /**
     * Check if field has an error
     * @param string $field Field name
     * @return bool True if field has error
     */
    public function hasError($field) {
        return isset($this->errors[$field]);
    }
    
    /**
     * Get sanitized value
     * @param string $field Field name
     * @return mixed Sanitized value
     */
    public function getValue($field) {
        $value = $this->data[$field] ?? '';
        return htmlspecialchars($value);
    }
}

// Example usage:
$rules = [
    'username' => [
        'required',
        'min' => 3,
        'max' => 20,
        'regex' => '/^[a-zA-Z0-9_]+$/'
    ],
    'email' => [
        'required',
        'email'
    ],
    'password' => [
        'required',
        'min' => 8,
        'regex' => '/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d).+$/'
    ],
    'confirm_password' => [
        'required',
        'matches' => 'password'
    ],
    'age' => [
        'integer',
        'min_value' => 18,
        'max_value' => 120
    ],
    'country' => [
        'required',
        'in_array' => ['US', 'CA', 'UK', 'AU']
    ]
];

$validator = new FormValidator($rules);

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    if ($validator->validate($_POST)) {
        // Validation passed, process the form
        // ...
    } else {
        // Validation failed
        $errors = $validator->getErrors();
    }
}
?&gt;

&lt;!-- Form with validator --&gt;
&lt;form method="post"&gt;
    &lt;div class="form-group"&gt;
        &lt;label for="username"&gt;Username:&lt;/label&gt;
        &lt;input type="text" id="username" name="username" 
               value="&lt;?php echo $validator->getValue('username'); ?&gt;"&gt;
        &lt;span class="error"&gt;&lt;?php echo $validator->getError('username'); ?&gt;&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="email"&gt;Email:&lt;/label&gt;
        &lt;input type="email" id="email" name="email" 
               value="&lt;?php echo $validator->getValue('email'); ?&gt;"&gt;
        &lt;span class="error"&gt;&lt;?php echo $validator->getError('email'); ?&gt;&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="password"&gt;Password:&lt;/label&gt;
        &lt;input type="password" id="password" name="password"&gt;
        &lt;span class="error"&gt;&lt;?php echo $validator->getError('password'); ?&gt;&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="confirm_password"&gt;Confirm Password:&lt;/label&gt;
        &lt;input type="password" id="confirm_password" name="confirm_password"&gt;
        &lt;span class="error"&gt;&lt;?php echo $validator->getError('confirm_password'); ?&gt;&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="age"&gt;Age:&lt;/label&gt;
        &lt;input type="number" id="age" name="age" 
               value="&lt;?php echo $validator->getValue('age'); ?&gt;"&gt;
        &lt;span class="error"&gt;&lt;?php echo $validator->getError('age'); ?&gt;&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;div class="form-group"&gt;
        &lt;label for="country"&gt;Country:&lt;/label&gt;
        &lt;select id="country" name="country"&gt;
            &lt;option value=""&gt;Select a country&lt;/option&gt;
            &lt;option value="US" &lt;?php if ($validator->getValue('country') === 'US') echo 'selected'; ?&gt;&gt;United States&lt;/option&gt;
            &lt;option value="CA" &lt;?php if ($validator->getValue('country') === 'CA') echo 'selected'; ?&gt;&gt;Canada&lt;/option&gt;
            &lt;option value="UK" &lt;?php if ($validator->getValue('country') === 'UK') echo 'selected'; ?&gt;&gt;United Kingdom&lt;/option&gt;
            &lt;option value="AU" &lt;?php if ($validator->getValue('country') === 'AU') echo 'selected'; ?&gt;&gt;Australia&lt;/option&gt;
        &lt;/select&gt;
        &lt;span class="error"&gt;&lt;?php echo $validator->getError('country'); ?&gt;&lt;/span&gt;
    &lt;/div&gt;
    
    &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;</code></pre>
            </div>
        </section>

        <section class="validation_best_practices">
            <h2>Validation Best Practices</h2>
            <p>Implementing proper validation requires following established best practices for security, usability, and maintainability.</p>
            
            <div class="best_practices">
                <h3>Essential Validation Principles</h3>
                <ol>
                    <li><strong>Always validate on the server</strong>: Client-side validation is for user experience, server-side validation is for security.</li>
                    <li><strong>Whitelist, don't blacklist</strong>: Define what is allowed rather than what isn't.</li>
                    <li><strong>Validate data type, length, format, and range</strong>: Apply comprehensive validation rules.</li>
                    <li><strong>Sanitize all input</strong>: Remove or encode potentially dangerous characters.</li>
                    <li><strong>Provide clear error messages</strong>: Help users understand what's wrong and how to fix it.</li>
                    <li><strong>Preserve valid input</strong>: Don't make users re-enter information that was already valid.</li>
                    <li><strong>Fail securely</strong>: When in doubt, reject the input rather than trying to "fix" it.</li>
                    <li><strong>Separate validation logic from processing logic</strong>: Maintain clean, modular code.</li>
                    <li><strong>Test with invalid input</strong>: Try to break your validation to ensure it's robust.</li>
                    <li><strong>Log validation failures</strong>: Monitor for potential attack patterns.</li>
                </ol>
            </div>
            
            <div class="usability_considerations">
                <h3>Usability Considerations</h3>
                <ul>
                    <li><strong>Indicate required fields</strong>: Use asterisks (*) or other clear indicators.</li>
                    <li><strong>Show validation rules upfront</strong>: Don't make users guess what's required.</li>
                    <li><strong>Position error messages appropriately</strong>: Place them near the relevant field.</li>
                    <li><strong>Use color and icons</strong>: Visual cues help users identify issues quickly.</li>
                    <li><strong>Provide positive feedback</strong>: Indicate when input is valid, not just when it's invalid.</li>
                    <li><strong>Use inline validation</strong>: Validate as users type for immediate feedback.</li>
                    <li><strong>Be forgiving with format</strong>: Accept phone numbers with or without dashes, for example.</li>
                    <li><strong>Limit required fields</strong>: Only ask for information you actually need.</li>
                </ul>
                
                <div class="svg_diagram">
                    <h3>Error Message Positioning</h3>
                    <svg viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">
                        <!-- Form Field 1 - Inline Error -->
                        <rect x="50" y="50" width="250" height="40" rx="5" fill="#f9f9f9" stroke="#ccc" stroke-width="1"/>
                        <text x="60" y="75" font-family="Arial" font-size="14">Username</text>
                        <rect x="150" y="55" width="140" height="30" rx="3" fill="#ffffff" stroke="#ff6b6b" stroke-width="2"/>
                        <text x="295" y="75" font-family="Arial" font-size="14" fill="#ff6b6b">‚úó</text>
                        <text x="155" y="115" font-family="Arial" font-size="12" fill="#ff6b6b">Username must be at least 3 characters</text>
                        
                        <!-- Form Field 2 - Right-side Error -->
                        <rect x="50" y="150" width="250" height="40" rx="5" fill="#f9f9f9" stroke="#ccc" stroke-width="1"/>
                        <text x="60" y="175" font-family="Arial" font-size="14">Email</text>
                        <rect x="150" y="155" width="140" height="30" rx="3" fill="#ffffff" stroke="#ff6b6b" stroke-width="2"/>
                        <text x="295" y="175" font-family="Arial" font-size="14" fill="#ff6b6b">‚úó</text>
                        <rect x="320" y="155" width="200" height="30" rx="5" fill="#ffe8e8" stroke="#ff6b6b" stroke-width="1"/>
                        <text x="330" y="175" font-family="Arial" font-size="12" fill="#ff6b6b">Please enter a valid email address</text>
                        
                        <!-- Form Field 3 - Valid Input -->
                        <rect x="50" y="250" width="250" height="40" rx="5" fill="#f9f9f9" stroke="#ccc" stroke-width="1"/>
                        <text x="60" y="275" font-family="Arial" font-size="14">Password</text>
                        <rect x="150" y="255" width="140" height="30" rx="3" fill="#ffffff" stroke="#2ecc71" stroke-width="2"/>
                        <text x="295" y="275" font-family="Arial" font-size="14" fill="#2ecc71">‚úì</text>
                    </svg>
                </div>
            </div>
            
            <div class="common_validation_errors">
                <h3>Common Validation Errors to Watch For</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Error Type</th>
                            <th>Description</th>
                            <th>Prevention</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>XSS (Cross-Site Scripting)</td>
                            <td>Injection of client-side scripts</td>
                            <td>Use <code>htmlspecialchars()</code> or <code>strip_tags()</code></td>
                        </tr>
                        <tr>
                            <td>SQL Injection</td>
                            <td>Injection of SQL commands</td>
                            <td>Use prepared statements and parameterized queries</td>
                        </tr>
                        <tr>
                            <td>Character Encoding Issues</td>
                            <td>Mishandling of special characters</td>
                            <td>Set proper charset and use <code>mb_*</code> functions</td>
                        </tr>
                        <tr>
                            <td>Format Inconsistency</td>
                            <td>Different formats for same data type</td>
                            <td>Normalize input formats before validation</td>
                        </tr>
                        <tr>
                            <td>Buffer Overflow</td>
                            <td>Input exceeding allocated space</td>
                            <td>Always validate length constraints</td>
                        </tr>
                        <tr>
                            <td>Type Confusion</td>
                            <td>Interpreting one data type as another</td>
                            <td>Explicitly validate and cast types</td>
                        </tr>
                        <tr>
                            <td>Path Traversal</td>
                            <td>Using "../" to access parent directories</td>
                            <td>Validate file paths and use <code>basename()</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </section>

        <section class="combining_client_server">
            <h2>Combining Client and Server Validation</h2>
            <p>The most effective validation strategy combines both client-side and server-side validation for the best security and user experience.</p>
            
            <div class="combined_approach">
                <h3>A Complete Validation Strategy</h3>
                <pre><code>&lt;!-- HTML Form with both client and server validation --&gt;
&lt;?php
// Server-side validation
$errors = [];
$form_data = [];

if ($_SERVER['REQUEST_METHOD'] === 'POST') {
    // Validate and sanitize input
    $username = filter_input(INPUT_POST, 'username', FILTER_SANITIZE_STRING);
    $email = filter_input(INPUT_POST, 'email', FILTER_SANITIZE_EMAIL);
    $password = $_POST['password'] ?? '';
    
    // Store sanitized values
    $form_data = [
        'username' => $username,
        'email' => $email
    ];
    
    // Validate username
    if (empty($username)) {
        $errors['username'] = 'Username is required';
    } elseif (strlen($username) < 3) {
        $errors['username'] = 'Username must be at least 3 characters';
    } elseif (!preg_match('/^[a-zA-Z0-9_]+$/', $username)) {
        $errors['username'] = 'Username can only contain letters, numbers, and underscores';
    }
    
    // Validate email
    if (empty($email)) {
        $errors['email'] = 'Email is required';
    } elseif (!filter_var($email, FILTER_VALIDATE_EMAIL)) {
        $errors['email'] = 'Please enter a valid email address';
    }
    
    // Validate password
    if (empty($password)) {
        $errors['password'] = 'Password is required';
    } elseif (strlen($password) < 8) {
        $errors['password'] = 'Password must be at least 8 characters';
    } elseif (!preg_match('/[A-Z]/', $password) || 
              !preg_match('/[a-z]/', $password) || 
              !preg_match('/\d/', $password)) {
        $errors['password'] = 'Password must include uppercase, lowercase, and numbers';
    }
    
    // If no errors, process the form
    if (empty($errors)) {
        // Success! Process the data
        $success = true;
    }
}
?&gt;

&lt;!DOCTYPE html&gt;
&lt;html lang="en"&gt;
&lt;head&gt;
    &lt;meta charset="UTF-8"&gt;
    &lt;meta name="viewport" content="width=device-width, initial-scale=1.0"&gt;
    &lt;title&gt;Registration Form&lt;/title&gt;
    &lt;style&gt;
        .form-group { margin-bottom: 15px; }
        .error { color: #ff0000; font-size: 0.9em; }
        .field-error { border-color: #ff0000; }
        .field-valid { border-color: #00cc00; }
        .success-message { color: #00cc00; font-weight: bold; }
    &lt;/style&gt;
&lt;/head&gt;
&lt;body&gt;
    &lt;h1&gt;Registration Form&lt;/h1&gt;
    
    &lt;?php if (isset($success)): ?&gt;
        &lt;div class="success-message"&gt;
            Registration successful! Thank you for signing up.
        &lt;/div&gt;
    &lt;?php else: ?&gt;
        &lt;form id="registration-form" method="post" novalidate&gt;
            &lt;div class="form-group"&gt;
                &lt;label for="username"&gt;Username:&lt;/label&gt;
                &lt;input type="text" id="username" name="username" 
                       value="&lt;?php echo htmlspecialchars($form_data['username'] ?? ''); ?&gt;"
                       class="&lt;?php echo isset($errors['username']) ? 'field-error' : ''; ?&gt;"&gt;
                &lt;div class="error" id="username-error"&gt;
                    &lt;?php echo $errors['username'] ?? ''; ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="email"&gt;Email:&lt;/label&gt;
                &lt;input type="email" id="email" name="email" 
                       value="&lt;?php echo htmlspecialchars($form_data['email'] ?? ''); ?&gt;"
                       class="&lt;?php echo isset($errors['email']) ? 'field-error' : ''; ?&gt;"&gt;
                &lt;div class="error" id="email-error"&gt;
                    &lt;?php echo $errors['email'] ?? ''; ?&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="password"&gt;Password:&lt;/label&gt;
                &lt;input type="password" id="password" name="password"
                       class="&lt;?php echo isset($errors['password']) ? 'field-error' : ''; ?&gt;"&gt;
                &lt;div class="error" id="password-error"&gt;
                    &lt;?php echo $errors['password'] ?? ''; ?&gt;
                &lt;/div&gt;
                &lt;div class="password-requirements"&gt;
                    Password must:
                    &lt;ul&gt;
                        &lt;li id="length-check"&gt;Be at least 8 characters long&lt;/li&gt;
                        &lt;li id="uppercase-check"&gt;Contain at least one uppercase letter&lt;/li&gt;
                        &lt;li id="lowercase-check"&gt;Contain at least one lowercase letter&lt;/li&gt;
                        &lt;li id="number-check"&gt;Contain at least one number&lt;/li&gt;
                    &lt;/ul&gt;
                &lt;/div&gt;
            &lt;/div&gt;
            
            &lt;button type="submit"&gt;Register&lt;/button&gt;
        &lt;/form&gt;
        
        &lt;script&gt;
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('registration-form');
            
            // Elements
            const usernameInput = document.getElementById('username');
            const emailInput = document.getElementById('email');
            const passwordInput = document.getElementById('password');
            
            const usernameError = document.getElementById('username-error');
            const emailError = document.getElementById('email-error');
            const passwordError = document.getElementById('password-error');
            
            // Password requirement elements
            const lengthCheck = document.getElementById('length-check');
            const uppercaseCheck = document.getElementById('uppercase-check');
            const lowercaseCheck = document.getElementById('lowercase-check');
            const numberCheck = document.getElementById('number-check');
            
            // Real-time validation functions
            function validateUsername() {
                const username = usernameInput.value.trim();
                
                // Reset error
                usernameError.textContent = '';
                usernameInput.classList.remove('field-error', 'field-valid');
                
                if (username === '') {
                    usernameError.textContent = 'Username is required';
                    usernameInput.classList.add('field-error');
                    return false;
                } else if (username.length < 3) {
                    usernameError.textContent = 'Username must be at least 3 characters';
                    usernameInput.classList.add('field-error');
                    return false;
                } else if (!/^[a-zA-Z0-9_]+$/.test(username)) {
                    usernameError.textContent = 'Username can only contain letters, numbers, and underscores';
                    usernameInput.classList.add('field-error');
                    return false;
                } else {
                    usernameInput.classList.add('field-valid');
                    return true;
                }
            }
            
            function validateEmail() {
                const email = emailInput.value.trim();
                
                // Reset error
                emailError.textContent = '';
                emailInput.classList.remove('field-error', 'field-valid');
                
                if (email === '') {
                    emailError.textContent = 'Email is required';
                    emailInput.classList.add('field-error');
                    return false;
                } else if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
                    emailError.textContent = 'Please enter a valid email address';
                    emailInput.classList.add('field-error');
                    return false;
                } else {
                    emailInput.classList.add('field-valid');
                    return true;
                }
            }
            
            function validatePassword() {
                const password = passwordInput.value;
                
                // Reset error
                passwordError.textContent = '';
                passwordInput.classList.remove('field-error', 'field-valid');
                
                // Check individual requirements
                const hasLength = password.length >= 8;
                const hasUpper = /[A-Z]/.test(password);
                const hasLower = /[a-z]/.test(password);
                const hasNumber = /\d/.test(password);
                
                // Update requirement indicators
                lengthCheck.style.color = hasLength ? 'green' : 'inherit';
                uppercaseCheck.style.color = hasUpper ? 'green' : 'inherit';
                lowercaseCheck.style.color = hasLower ? 'green' : 'inherit';
                numberCheck.style.color = hasNumber ? 'green' : 'inherit';
                
                if (password === '') {
                    passwordError.textContent = 'Password is required';
                    passwordInput.classList.add('field-error');
                    return false;
                } else if (!(hasLength && hasUpper && hasLower && hasNumber)) {
                    passwordError.textContent = 'Password does not meet all requirements';
                    passwordInput.classList.add('field-error');
                    return false;
                } else {
                    passwordInput.classList.add('field-valid');
                    return true;
                }
            }
            
            // Add event listeners for real-time validation
            usernameInput.addEventListener('blur', validateUsername);
            emailInput.addEventListener('blur', validateEmail);
            passwordInput.addEventListener('input', validatePassword);
            
            // Form submission
            form.addEventListener('submit', function(e) {
                // Run all validations
                const isUsernameValid = validateUsername();
                const isEmailValid = validateEmail();
                const isPasswordValid = validatePassword();
                
                // Prevent submission if any validation fails
                if (!(isUsernameValid && isEmailValid && isPasswordValid)) {
                    e.preventDefault();
                }
            });
        });
        &lt;/script&gt;
    &lt;?php endif; ?&gt;
&lt;/body&gt;
&lt;/html&gt;</code></pre>
            </div>
        </section>

        <section class="advanced_techniques">
            <h2>Advanced Validation Techniques</h2>
            <p>Beyond basic validation, there are more advanced techniques to handle complex validation scenarios.</p>
            
            <div class="async_validation">
                <h3>Asynchronous Validation</h3>
                <p>Some validation checks require server interaction, such as checking if a username is already taken.</p>
                
                <pre><code>&lt;!-- HTML Form with username availability check --&gt;
&lt;form id="registration-form"&gt;
    &lt;div class="form-group"&gt;
        &lt;label for="username"&gt;Username:&lt;/label&gt;
        &lt;input type="text" id="username" name="username"&gt;
        &lt;div class="error" id="username-error"&gt;&lt;/div&gt;
        &lt;div class="status" id="username-status"&gt;&lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- Other form fields --&gt;
    
    &lt;button type="submit"&gt;Register&lt;/button&gt;
&lt;/form&gt;

&lt;script&gt;
document.addEventListener('DOMContentLoaded', function() {
    const usernameInput = document.getElementById('username');
    const usernameStatus = document.getElementById('username-status');
    let usernameTimer;
    let usernameAvailable = false;
    
    // Check username availability
    usernameInput.addEventListener('input', function() {
        const username = this.value.trim();
        
        // Clear previous status
        usernameStatus.textContent = '';
        usernameStatus.className = 'status';
        
        // Clear any existing timer
        clearTimeout(usernameTimer);
        
        if (username.length < 3) {
            return; // Wait until username is at least 3 characters
        }
        
        // Set a small delay to avoid too many requests while typing
        usernameTimer = setTimeout(function() {
            // Show loading indicator
            usernameStatus.textContent = 'Checking availability...';
            usernameStatus.className = 'status status-loading';
            
            // Make AJAX request to check username
            fetch('check_username.php?username=' + encodeURIComponent(username))
                .then(response => response.json())
                .then(data => {
                    if (data.available) {
                        usernameStatus.textContent = 'Username available';
                        usernameStatus.className = 'status status-success';
                        usernameAvailable = true;
                    } else {
                        usernameStatus.textContent = 'Username already taken';
                        usernameStatus.className = 'status status-error';
                        usernameAvailable = false;
                    }
                })
                .catch(error => {
                    usernameStatus.textContent = 'Error checking availability';
                    usernameStatus.className = 'status status-error';
                    console.error('Error:', error);
                });
        }, 500);
    });
    
    // Form submission
    document.getElementById('registration-form').addEventListener('submit', function(e) {
        // Prevent form submission if username is not available
        if (!usernameAvailable) {
            e.preventDefault();
            alert('Please choose an available username');
        }
        
        // Other validation...
    });
});
&lt;/script&gt;</code></pre>
                
                <h3>Server-side implementation for username check</h3>
                <pre><code>&lt;?php
// check_username.php

// Set header to return JSON
header('Content-Type: application/json');

// Get username from request
$username = $_GET['username'] ?? '';

// Validate username format first
if (empty($username) || strlen($username) < 3 || !preg_match('/^[a-zA-Z0-9_]+$/', $username)) {
    echo json_encode(['available' => false, 'error' => 'Invalid username format']);
    exit;
}

try {
    // Connect to database (using PDO)
    $pdo = new PDO('mysql:host=localhost;dbname=myapp', 'username', 'password');
    $pdo->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);
    
    // Prepare and execute query
    $stmt = $pdo->prepare('SELECT COUNT(*) FROM users WHERE username = ?');
    $stmt->execute([$username]);
    
    // Get result
    $count = $stmt->fetchColumn();
    
    // Return result
    echo json_encode(['available' => ($count === 0)]);
} catch (PDOException $e) {
    // Log error (but don't expose details to user)
    error_log('Database error: ' . $e->getMessage());
    echo json_encode(['available' => false, 'error' => 'Server error']);
}
?&gt;</code></pre>
            </div>
            
            <div class="complex_validation">
                <h3>Complex Validation Rules</h3>
                <p>Some forms require conditional validation or complex rules based on multiple fields.</p>
                
                <pre><code>&lt;!-- HTML Form with conditional validation --&gt;
&lt;form id="payment-form" method="post"&gt;
    &lt;div class="form-group"&gt;
        &lt;label&gt;Payment Method:&lt;/label&gt;
        &lt;div class="radio-group"&gt;
            &lt;label&gt;
                &lt;input type="radio" name="payment_method" value="credit_card" checked&gt; Credit Card
            &lt;/label&gt;
            &lt;label&gt;
                &lt;input type="radio" name="payment_method" value="paypal"&gt; PayPal
            &lt;/label&gt;
            &lt;label&gt;
                &lt;input type="radio" name="payment_method" value="bank_transfer"&gt; Bank Transfer
            &lt;/label&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- Credit Card Fields (conditionally shown) --&gt;
    &lt;div id="credit-card-fields"&gt;
        &lt;div class="form-group"&gt;
            &lt;label for="card_number"&gt;Card Number:&lt;/label&gt;
            &lt;input type="text" id="card_number" name="card_number" maxlength="19"&gt;
            &lt;div class="error" id="card-number-error"&gt;&lt;/div&gt;
        &lt;/div&gt;
        
        &lt;div class="form-row"&gt;
            &lt;div class="form-group"&gt;
                &lt;label for="expiry_date"&gt;Expiry Date (MM/YY):&lt;/label&gt;
                &lt;input type="text" id="expiry_date" name="expiry_date" maxlength="5"&gt;
                &lt;div class="error" id="expiry-date-error"&gt;&lt;/div&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="cvv"&gt;CVV:&lt;/label&gt;
                &lt;input type="text" id="cvv" name="cvv" maxlength="4"&gt;
                &lt;div class="error" id="cvv-error"&gt;&lt;/div&gt;
            &lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- PayPal Fields (conditionally shown) --&gt;
    &lt;div id="paypal-fields" style="display: none;"&gt;
        &lt;div class="form-group"&gt;
            &lt;label for="paypal_email"&gt;PayPal Email:&lt;/label&gt;
            &lt;input type="email" id="paypal_email" name="paypal_email"&gt;
            &lt;div class="error" id="paypal-email-error"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;!-- Bank Transfer Fields (conditionally shown) --&gt;
    &lt;div id="bank-fields" style="display: none;"&gt;
        &lt;div class="form-group"&gt;
            &lt;label for="account_name"&gt;Account Holder Name:&lt;/label&gt;
            &lt;input type="text" id="account_name" name="account_name"&gt;
            &lt;div class="error" id="account-name-error"&gt;&lt;/div&gt;
        &lt;/div&gt;
        
        &lt;div class="form-group"&gt;
            &lt;label for="account_number"&gt;Account Number:&lt;/label&gt;
            &lt;input type="text" id="account_number" name="account_number"&gt;
            &lt;div class="error" id="account-number-error"&gt;&lt;/div&gt;
        &lt;/div&gt;
        
        &lt;div class="form-group"&gt;
            &lt;label for="routing_number"&gt;Routing Number:&lt;/label&gt;
            &lt;input type="text" id="routing_number" name="routing_number"&gt;
            &lt;div class="error" id="routing-number-error"&gt;&lt;/div&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;button type="submit"&gt;Complete Payment&lt;/button&gt;
&lt;/form&gt;

&lt;script&gt;
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('payment-form');
    const paymentMethods = document.getElementsByName('payment_method');
    
    const creditCardFields = document.getElementById('credit-card-fields');
    const paypalFields = document.getElementById('paypal-fields');
    const bankFields = document.getElementById('bank-fields');
    
    // Function to toggle payment method fields
    function togglePaymentFields() {
        let selectedMethod;
        
        // Find selected payment method
        for (let i = 0; i < paymentMethods.length; i++) {
            if (paymentMethods[i].checked) {
                selectedMethod = paymentMethods[i].value;
                break;
            }
        }
        
        // Hide all payment method fields
        creditCardFields.style.display = 'none';
        paypalFields.style.display = 'none';
        bankFields.style.display = 'none';
        
        // Show selected payment method fields
        if (selectedMethod === 'credit_card') {
            creditCardFields.style.display = 'block';
        } else if (selectedMethod === 'paypal') {
            paypalFields.style.display = 'block';
        } else if (selectedMethod === 'bank_transfer') {
            bankFields.style.display = 'block';
        }
    }
    
    // Add event listeners to payment method radios
    for (let i = 0; i < paymentMethods.length; i++) {
        paymentMethods[i].addEventListener('change', togglePaymentFields);
    }
    
    // Initialize display
    togglePaymentFields();
    
    // Credit card validation functions
    function validateCreditCard() {
        const cardNumber = document.getElementById('card_number').value.replace(/\s/g, '');
        const cardError = document.getElementById('card-number-error');
        
        cardError.textContent = '';
        
        if (!cardNumber) {
            cardError.textContent = 'Card number is required';
            return false;
        }
        
        if (!/^\d+$/.test(cardNumber)) {
            cardError.textContent = 'Card number must contain only digits';
            return false;
        }
        
        if (cardNumber.length < 13 || cardNumber.length > 19) {
            cardError.textContent = 'Card number must be between 13 and 19 digits';
            return false;
        }
        
        // Luhn algorithm for credit card validation
        let sum = 0;
        let shouldDouble = false;
        
        // Loop through values starting from the rightmost digit
        for (let i = cardNumber.length - 1; i >= 0; i--) {
            let digit = parseInt(cardNumber.charAt(i));
            
            if (shouldDouble) {
                digit *= 2;
                if (digit > 9) {
                    digit -= 9;
                }
            }
            
            sum += digit;
            shouldDouble = !shouldDouble;
        }
        
        // Valid card numbers should be divisible by 10
        if (sum % 10 !== 0) {
            cardError.textContent = 'Invalid card number';
            return false;
        }
        
        return true;
    }
    
    function validateExpiryDate() {
        const expiry = document.getElementById('expiry_date').value;
        const expiryError = document.getElementById('expiry-date-error');
        
        expiryError.textContent = '';
        
        if (!expiry) {
            expiryError.textContent = 'Expiry date is required';
            return false;
        }
        
        // Check format (MM/YY)
        if (!/^\d{2}\/\d{2}$/.test(expiry)) {
            expiryError.textContent = 'Use format MM/YY';
            return false;
        }
        
        const parts = expiry.split('/');
        const month = parseInt(parts[0], 10);
        const year = parseInt('20' + parts[1], 10); // Convert to 4-digit year
        
        if (month < 1 || month > 12) {
            expiryError.textContent = 'Month must be between 01 and 12';
            return false;
        }
        
        // Get current date
        const now = new Date();
        const currentYear = now.getFullYear();
        const currentMonth = now.getMonth() + 1; // JavaScript months are 0-indexed
        
        // Check if card is expired
        if (year < currentYear || (year === currentYear && month < currentMonth)) {
            expiryError.textContent = 'Card has expired';
            return false;
        }
        
        return true;
    }
    
    function validateCVV() {
        const cvv = document.getElementById('cvv').value;
        const cvvError = document.getElementById('cvv-error');
        
        cvvError.textContent = '';
        
        if (!cvv) {
            cvvError.textContent = 'CVV is required';
            return false;
        }
        
        if (!/^\d{3,4}$/.test(cvv)) {
            cvvError.textContent = 'CVV must be 3 or 4 digits';
            return false;
        }
        
        return true;
    }
    
    // PayPal validation
    function validatePayPalEmail() {
        const email = document.getElementById('paypal_email').value;
        const emailError = document.getElementById('paypal-email-error');
        
        emailError.textContent = '';
        
        if (!email) {
            emailError.textContent = 'PayPal email is required';
            return false;
        }
        
        if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
            emailError.textContent = 'Please enter a valid email address';
            return false;
        }
        
        return true;
    }
    
    // Bank account validation
    function validateBankDetails() {
        let isValid = true;
        
        // Account Name
        const accountName = document.getElementById('account_name').value;
        const accountNameError = document.getElementById('account-name-error');
        
        accountNameError.textContent = '';
        
        if (!accountName) {
            accountNameError.textContent = 'Account name is required';
            isValid = false;
        }
        
        // Account Number
        const accountNumber = document.getElementById('account_number').value;
        const accountNumberError = document.getElementById('account-number-error');
        
        accountNumberError.textContent = '';
        
        if (!accountNumber) {
            accountNumberError.textContent = 'Account number is required';
            isValid = false;
        } else if (!/^\d{8,17}$/.test(accountNumber)) {
            accountNumberError.textContent = 'Please enter a valid account number';
            isValid = false;
        }
        
        // Routing Number
        const routingNumber = document.getElementById('routing_number').value;
        const routingNumberError = document.getElementById('routing-number-error');
        
        routingNumberError.textContent = '';
        
        if (!routingNumber) {
            routingNumberError.textContent = 'Routing number is required';
            isValid = false;
        } else if (!/^\d{9}$/.test(routingNumber)) {
            routingNumberError.textContent = 'Routing number must be 9 digits';
            isValid = false;
        }
        
        return isValid;
    }
    
    // Form submission
    form.addEventListener('submit', function(e) {
        let isValid = true;
        let selectedMethod;
        
        // Find selected payment method
        for (let i = 0; i < paymentMethods.length; i++) {
            if (paymentMethods[i].checked) {
                selectedMethod = paymentMethods[i].value;
                break;
            }
        }
        
        // Validate based on payment method
        if (selectedMethod === 'credit_card') {
            if (!(validateCreditCard() && validateExpiryDate() && validateCVV())) {
                isValid = false;
            }
        } else if (selectedMethod === 'paypal') {
            if (!validatePayPalEmail()) {
                isValid = false;
            }
        } else if (selectedMethod === 'bank_transfer') {
            if (!validateBankDetails()) {
                isValid = false;
            }
        }
        
        if (!isValid) {
            e.preventDefault();
        }
    });
    
    // Add blur event listeners for real-time validation
    document.getElementById('card_number').addEventListener('blur', validateCreditCard);
    document.getElementById('expiry_date').addEventListener('blur', validateExpiryDate);
    document.getElementById('cvv').addEventListener('blur', validateCVV);
    document.getElementById('paypal_email').addEventListener('blur', validatePayPalEmail);
});
&lt;/script&gt;</code></pre>
            </div>
            
            <div class="multilingual_validation">
                <h3>Multilingual Validation</h3>
                <p>For international applications, validation messages should be available in multiple languages.</p>
                
                <pre><code>&lt;?php
// validation_messages.php

// Define validation messages for different languages
$validation_messages = [
    'en' => [
        'required' => 'This field is required',
        'email' => 'Please enter a valid email address',
        'min_length' => 'This field must be at least {min} characters',
        'max_length' => 'This field must be at most {max} characters',
        'numeric' => 'This field must contain numbers only',
        'alpha' => 'This field must contain letters only',
        'alphanumeric' => 'This field must contain letters and numbers only',
        'password_strength' => 'Password must include uppercase, lowercase, and numbers',
        'passwords_match' => 'Passwords do not match',
        'invalid_date' => 'Please enter a valid date',
        'invalid_url' => 'Please enter a valid URL',
        'invalid_credit_card' => 'Please enter a valid credit card number',
        'invalid_phone' => 'Please enter a valid phone number'
    ],
    'es' => [
        'required' => 'Este campo es obligatorio',
        'email' => 'Por favor, introduce una direcci√≥n de correo v√°lida',
        'min_length' => 'Este campo debe tener al menos {min} caracteres',
        'max_length' => 'Este campo debe tener como m√°ximo {max} caracteres',
        'numeric' => 'Este campo solo debe contener n√∫meros',
        'alpha' => 'Este campo solo debe contener letras',
        'alphanumeric' => 'Este campo solo debe contener letras y n√∫meros',
        'password_strength' => 'La contrase√±a debe incluir may√∫sculas, min√∫sculas y n√∫meros',
        'passwords_match' => 'Las contrase√±as no coinciden',
        'invalid_date' => 'Por favor, introduce una fecha v√°lida',
        'invalid_url' => 'Por favor, introduce una URL v√°lida',
        'invalid_credit_card' => 'Por favor, introduce un n√∫mero de tarjeta v√°lido',
        'invalid_phone' => 'Por favor, introduce un n√∫mero de tel√©fono v√°lido'
    ],
    'fr' => [
        'required' => 'Ce champ est obligatoire',
        'email' => 'Veuillez entrer une adresse e-mail valide',
        'min_length' => 'Ce champ doit comporter au moins {min} caract√®res',
        'max_length' => 'Ce champ doit comporter au maximum {max} caract√®res',
        'numeric' => 'Ce champ ne doit contenir que des chiffres',
        'alpha' => 'Ce champ ne doit contenir que des lettres',
        'alphanumeric' => 'Ce champ ne doit contenir que des lettres et des chiffres',
        'password_strength' => 'Le mot de passe doit contenir des majuscules, des minuscules et des chiffres',
        'passwords_match' => 'Les mots de passe ne correspondent pas',
        'invalid_date' => 'Veuillez entrer une date valide',
        'invalid_url' => 'Veuillez entrer une URL valide',
        'invalid_credit_card' => 'Veuillez entrer un num√©ro de carte de cr√©dit valide',
        'invalid_phone' => 'Veuillez entrer un num√©ro de t√©l√©phone valide'
    ]
];

// Function to get a validation message
function get_validation_message($key, $lang = 'en', $replacements = []) {
    global $validation_messages;
    
    // Default to English if language not found
    if (!isset($validation_messages[$lang])) {
        $lang = 'en';
    }
    
    // Default message if key not found
    if (!isset($validation_messages[$lang][$key])) {
        return 'Validation error';
    }
    
    $message = $validation_messages[$lang][$key];
    
    // Replace placeholders
    foreach ($replacements as $placeholder => $value) {
        $message = str_replace('{' . $placeholder . '}', $value, $message);
    }
    
    return $message;
}
?&gt;</code></pre>
                
                <h3>Usage Example</h3>
                <pre><code>&lt;?php
// Include validation messages
require_once 'validation_messages.php';

// Determine user language (from session, cookie, browser, etc.)
$user_lang = $_SESSION['user_lang'] ?? 'en';

// Validate field
$username = $_POST['username'] ?? '';
$errors = [];

if (empty($username)) {
    $errors['username'] = get_validation_message('required', $user_lang);
} elseif (strlen($username) < 3) {
    $errors['username'] = get_validation_message('min_length', $user_lang, ['min' => 3]);
}

// Display error message in template
echo '&lt;span class="error"&gt;' . ($errors['username'] ?? '') . '&lt;/span&gt;';
?&gt;</code></pre>
            </div>
        </section>

        <section class="wordpress_validation">
            <h2>Form Validation in WordPress</h2>
            <p>WordPress provides several built-in functions for validation and sanitization of form data.</p>
            
            <div class="wp_validation_functions">
                <h3>WordPress Validation and Sanitization Functions</h3>
                <table>
                    <thead>
                        <tr>
                            <th>Function</th>
                            <th>Purpose</th>
                            <th>Example</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td><code>sanitize_text_field()</code></td>
                            <td>Sanitizes a text field</td>
                            <td><code>$name = sanitize_text_field($_POST['name']);</code></td>
                        </tr>
                        <tr>
                            <td><code>sanitize_email()</code></td>
                            <td>Sanitizes an email address</td>
                            <td><code>$email = sanitize_email($_POST['email']);</code></td>
                        </tr>
                        <tr>
                            <td><code>sanitize_title()</code></td>
                            <td>Sanitizes a string for use as a slug</td>
                            <td><code>$slug = sanitize_title($_POST['title']);</code></td>
                        </tr>
                        <tr>
                            <td><code>sanitize_textarea_field()</code></td>
                            <td>Sanitizes a textarea field</td>
                            <td><code>$message = sanitize_textarea_field($_POST['message']);</code></td>
                        </tr>
                        <tr>
                            <td><code>esc_url()</code></td>
                            <td>Sanitizes a URL</td>
                            <td><code>$url = esc_url($_POST['website']);</code></td>
                        </tr>
                        <tr>
                            <td><code>absint()</code></td>
                            <td>Converts to positive integer</td>
                            <td><code>$id = absint($_GET['id']);</code></td>
                        </tr>
                        <tr>
                            <td><code>intval()</code></td>
                            <td>Converts to integer</td>
                            <td><code>$age = intval($_POST['age']);</code></td>
                        </tr>
                        <tr>
                            <td><code>floatval()</code></td>
                            <td>Converts to float</td>
                            <td><code>$price = floatval($_POST['price']);</code></td>
                        </tr>
                        <tr>
                            <td><code>wp_kses()</code></td>
                            <td>Sanitizes content with allowed HTML tags</td>
                            <td><code>$content = wp_kses($_POST['content'], $allowed_html);</code></td>
                        </tr>
                        <tr>
                            <td><code>is_email()</code></td>
                            <td>Validates an email address</td>
                            <td><code>if (is_email($_POST['email'])) { ... }</code></td>
                        </tr>
                        <tr>
                            <td><code>wp_verify_nonce()</code></td>
                            <td>Verifies a nonce for security</td>
                            <td><code>if (wp_verify_nonce($_POST['nonce'], 'action')) { ... }</code></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            
            <div class="wp_form_example">
                <h3>WordPress Form Processing Example</h3>
                <pre><code>&lt;?php
// Template for a contact form in WordPress

// Check if form was submitted
if (isset($_POST['contact_submit']) && wp_verify_nonce($_POST['contact_nonce'], 'contact_form')) {
    // Initialize errors array
    $errors = [];
    
    // Sanitize and validate name
    $name = sanitize_text_field($_POST['name'] ?? '');
    if (empty($name)) {
        $errors['name'] = 'Please enter your name';
    }
    
    // Sanitize and validate email
    $email = sanitize_email($_POST['email'] ?? '');
    if (empty($email) || !is_email($email)) {
        $errors['email'] = 'Please enter a valid email address';
    }
    
    // Sanitize and validate subject
    $subject = sanitize_text_field($_POST['subject'] ?? '');
    if (empty($subject)) {
        $errors['subject'] = 'Please enter a subject';
    }
    
    // Sanitize and validate message
    $message = sanitize_textarea_field($_POST['message'] ?? '');
    if (empty($message)) {
        $errors['message'] = 'Please enter your message';
    }
    
    // If no errors, process the form
    if (empty($errors)) {
        // Prepare email content
        $to = get_option('admin_email');
        $email_subject = 'Contact Form: ' . $subject;
        $email_body = "Name: $name\n";
        $email_body .= "Email: $email\n\n";
        $email_body .= "Message:\n$message";
        $headers = "From: $name <$email>";
        
        // Send email
        $mail_sent = wp_mail($to, $email_subject, $email_body, $headers);
        
        if ($mail_sent) {
            $form_success = true;
            
            // Reset form fields
            $name = $email = $subject = $message = '';
        } else {
            $form_error = 'There was a problem sending your message. Please try again.';
        }
    }
}
?&gt;

&lt;!-- Display form with validation --&gt;
&lt;div class="contact-form-container"&gt;
    &lt;?php if (isset($form_success) && $form_success): ?&gt;
        &lt;div class="success-message"&gt;
            &lt;p&gt;Thank you for your message! We will get back to you soon.&lt;/p&gt;
        &lt;/div&gt;
    &lt;?php else: ?&gt;
        &lt;?php if (isset($form_error)): ?&gt;
            &lt;div class="error-message"&gt;
                &lt;p&gt;&lt;?php echo $form_error; ?&gt;&lt;/p&gt;
            &lt;/div&gt;
        &lt;?php endif; ?&gt;
        
        &lt;form method="post" action="" class="contact-form"&gt;
            &lt;?php wp_nonce_field('contact_form', 'contact_nonce'); ?&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="name"&gt;Name *&lt;/label&gt;
                &lt;input type="text" id="name" name="name" value="&lt;?php echo esc_attr($name ?? ''); ?&gt;" class="&lt;?php echo isset($errors['name']) ? 'error' : ''; ?&gt;"&gt;
                &lt;?php if (isset($errors['name'])): ?&gt;
                    &lt;span class="error-message"&gt;&lt;?php echo $errors['name']; ?&gt;&lt;/span&gt;
                &lt;?php endif; ?&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="email"&gt;Email *&lt;/label&gt;
                &lt;input type="email" id="email" name="email" value="&lt;?php echo esc_attr($email ?? ''); ?&gt;" class="&lt;?php echo isset($errors['email']) ? 'error' : ''; ?&gt;"&gt;
                &lt;?php if (isset($errors['email'])): ?&gt;
                    &lt;span class="error-message"&gt;&lt;?php echo $errors['email']; ?&gt;&lt;/span&gt;
                &lt;?php endif; ?&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="subject"&gt;Subject *&lt;/label&gt;
                &lt;input type="text" id="subject" name="subject" value="&lt;?php echo esc_attr($subject ?? ''); ?&gt;" class="&lt;?php echo isset($errors['subject']) ? 'error' : ''; ?&gt;"&gt;
                &lt;?php if (isset($errors['subject'])): ?&gt;
                    &lt;span class="error-message"&gt;&lt;?php echo $errors['subject']; ?&gt;&lt;/span&gt;
                &lt;?php endif; ?&gt;
            &lt;/div&gt;
            
            &lt;div class="form-group"&gt;
                &lt;label for="message"&gt;Message *&lt;/label&gt;
                &lt;textarea id="message" name="message" rows="5" class="&lt;?php echo isset($errors['message']) ? 'error' : ''; ?&gt;"&gt;&lt;?php echo esc_textarea($message ?? ''); ?&gt;&lt;/textarea&gt;
                &lt;?php if (isset($errors['message'])): ?&gt;
                    &lt;span class="error-message"&gt;&lt;?php echo $errors['message']; ?&gt;&lt;/span&gt;
                &lt;?php endif; ?&gt;
            &lt;/div&gt;
            
            &lt;div class="form-submit"&gt;
                &lt;input type="submit" name="contact_submit" value="Send Message" class="submit-button"&gt;
            &lt;/div&gt;
        &lt;/form&gt;
    &lt;?php endif; ?&gt;
&lt;/div&gt;</code></pre>
                
                <h3>Adding Custom Validation to a Plugin Form</h3>
                <pre><code>&lt;?php
/**
 * Custom Contact Form Plugin
 */
class Custom_Contact_Form {
    
    // Constructor
    public function __construct() {
        // Register shortcode
        add_shortcode('custom_contact_form', array($this, 'render_form'));
        
        // Handle form submission
        add_action('init', array($this, 'handle_form_submission'));
    }
    
    // Render form
    public function render_form($atts) {
        // Extract shortcode attributes
        $atts = shortcode_atts(array(
            'recipient' => get_option('admin_email'),
            'subject' => 'New Contact Form Submission',
            'success_message' => 'Thank you for your message!'
        ), $atts);
        
        // Start output buffering
        ob_start();
        
        // Get any messages
        $success = isset($_GET['contact_success']) ? true : false;
        
        if ($success) {
            echo '&lt;div class="success-message"&gt;' . esc_html($atts['success_message']) . '&lt;/div&gt;';
        } else {
            // Include form template
            include(plugin_dir_path(__FILE__) . 'templates/form-template.php');
        }
        
        // Return buffered content
        return ob_get_clean();
    }
    
    // Handle form submission
    public function handle_form_submission() {
        if (isset($_POST['custom_contact_submit']) && wp_verify_nonce($_POST['custom_contact_nonce'], 'custom_contact_form')) {
            
            // Validate form data
            $errors = $this->validate_form_data($_POST);
            
            // If validation passes
            if (empty($errors)) {
                // Get form data
                $name = sanitize_text_field($_POST['name']);
                $email = sanitize_email($_POST['email']);
                $subject = sanitize_text_field($_POST['subject']);
                $message = sanitize_textarea_field($_POST['message']);
                
                // Create email content
                $to = $_POST['recipient'] ?? get_option('admin_email');
                $email_subject = $subject ? "Contact Form: $subject" : 'New Contact Form Submission';
                $email_body = "Name: $name\n";
                $email_body .= "Email: $email\n\n";
                $email_body .= "Message:\n$message";
                $headers = "From: $name <$email>";
                
                // Send email
                $mail_sent = wp_mail($to, $email_subject, $email_body, $headers);
                
                if ($mail_sent) {
                    // Redirect to prevent form resubmission
                    wp_redirect(add_query_arg('contact_success', '1', wp_get_referer()));
                    exit;
                } else {
                    // Store error in session
                    $this->set_form_error('There was a problem sending your message. Please try again.');
                }
            } else {
                // Store errors in session
                $this->set_form_errors($errors);
                $this->set_form_data($_POST);
            }
        }
    }
    
    // Validate form data
    private function validate_form_data($data) {
        $errors = array();
        
        // Validate name
        $name = sanitize_text_field($data['name'] ?? '');
        if (empty($name)) {
            $errors['name'] = 'Please enter your name';
        }
        
        // Validate email
        $email = sanitize_email($data['email'] ?? '');
        if (empty($email)) {
            $errors['email'] = 'Please enter your email address';
        } elseif (!is_email($email)) {
            $errors['email'] = 'Please enter a valid email address';
        }
        
        // Validate message
        $message = sanitize_textarea_field($data['message'] ?? '');
        if (empty($message)) {
            $errors['message'] = 'Please enter your message';
        } elseif (strlen($message) < 10) {
            $errors['message'] = 'Your message is too short. Please provide more details.';
        }
        
        // Allow plugins/themes to add their own validation
        return apply_filters('custom_contact_form_validate', $errors, $data);
    }
    
    // Store form errors in session
    private function set_form_errors($errors) {
        if (!session_id()) {
            session_start();
        }
        $_SESSION['custom_contact_errors'] = $errors;
    }
    
    // Store general form error
    private function set_form_error($error) {
        if (!session_id()) {
            session_start();
        }
        $_SESSION['custom_contact_error'] = $error;
    }
    
    // Store form data in session for repopulation
    private function set_form_data($data) {
        if (!session_id()) {
            session_start();
        }
        $_SESSION['custom_contact_data'] = $data;
    }
    
    // Get form errors
    public static function get_form_errors() {
        if (!session_id()) {
            session_start();
        }
        $errors = isset($_SESSION['custom_contact_errors']) ? $_SESSION['custom_contact_errors'] : array();
        unset($_SESSION['custom_contact_errors']);
        return $errors;
    }
    
    // Get general form error
    public static function get_form_error() {
        if (!session_id()) {
            session_start();
        }
        $error = isset($_SESSION['custom_contact_error']) ? $_SESSION['custom_contact_error'] : '';
        unset($_SESSION['custom_contact_error']);
        return $error;
    }
    
    // Get stored form data
    public static function get_form_data($field = null) {
        if (!session_id()) {
            session_start();
        }
        $data = isset($_SESSION['custom_contact_data']) ? $_SESSION['custom_contact_data'] : array();
        
        if ($field) {
            return isset($data[$field]) ? $data[$field] : '';
        }
        
        unset($_SESSION['custom_contact_data']);
        return $data;
    }
}

// Initialize the plugin
$custom_contact_form = new Custom_Contact_Form();
?&gt;</code></pre>
            </div>
        </section>

        <section class="homework">
            <h2>Homework: Form Validation Practice</h2>
            <p>Complete the following exercises to practice form validation techniques.</p>
            
            <div class="homework_tasks">
                <h3>Task 1: Client-Side Validation</h3>
                <p>Create a registration form with the following fields, implementing client-side validation with JavaScript:</p>
                <ul>
                    <li>Username (alphanumeric, 3-20 characters)</li>
                    <li>Email (valid email format)</li>
                    <li>Password (at least 8 characters, must include uppercase, lowercase, and number)</li>
                    <li>Confirm Password (must match password)</li>
                    <li>Date of Birth (must be at least 18 years ago)</li>
                    <li>Phone Number (format: XXX-XXX-XXXX)</li>
                </ul>
                <p>Requirements:</p>
                <ol>
                    <li>Use real-time validation (validate as the user types or blurs fields)</li>
                    <li>Show appropriate error messages next to each field</li>
                    <li>Use visual indicators for valid/invalid fields (colors, icons)</li>
                    <li>Prevent form submission if validation fails</li>
                </ol>
                
                <h3>Task 2: Server-Side Validation</h3>
                <p>Create a PHP script to handle the server-side validation for the form in Task 1:</p>
                <ol>
                    <li>Implement all the same validation rules on the server side</li>
                    <li>Sanitize all input data</li>
                    <li>Return appropriate error messages</li>
                    <li>Preserve valid input when errors occur</li>
                    <li>Display a success message when all validation passes</li>
                </ol>
                
                <h3>Task 3: Create a Reusable Validation Class</h3>
                <p>Create a PHP validation class that can be reused across different forms:</p>
                <ol>
                    <li>Implement methods for common validation rules (required, email, min/max length, etc.)</li>
                    <li>Allow for custom validation rules</li>
                    <li>Include appropriate error messages</li>
                    <li>Create a simple API for using the validation class</li>
                    <li>Demonstrate its use with at least two different forms</li>
                </ol>
                
                <h3>Bonus Challenge: AJAX Validation</h3>
                <p>Enhance the form from Task 1 with AJAX validation:</p>
                <ol>
                    <li>Implement username availability checking with AJAX</li>
                    <li>Implement email validation with AJAX</li>
                    <li>Show loading indicators during AJAX requests</li>
                    <li>Use AJAX for form submission to avoid page refresh</li>
                    <li>Implement proper error handling for AJAX requests</li>
                </ol>
            </div>
        </section>

        <section class="additional_resources">
            <h2>Additional Resources</h2>
            
            <div class="resources_list">
                <h3>Documentation</h3>
                <ul>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Learn/Forms/Form_validation" target="_blank">MDN Web Docs: Form Validation</a></li>
                    <li><a href="https://www.php.net/manual/en/filter.filters.php" target="_blank">PHP Manual: Filter Functions</a></li>
                    <li><a href="https://www.php.net/manual/en/book.pcre.php" target="_blank">PHP Manual: Regular Expressions</a></li>
                </ul>
                
                <h3>Tutorials and Guides</h3>
                <ul>
                    <li><a href="https://www.smashingmagazine.com/2009/07/web-form-validation-best-practices-and-tutorials/" target="_blank">Smashing Magazine: Web Form Validation Best Practices</a></li>
                    <li><a href="https://www.sitepoint.com/community/t/php-form-validation-the-right-way/4369" target="_blank">SitePoint: PHP Form Validation the Right Way</a></li>
                    <li><a href="https://phptherightway.com/" target="_blank">PHP: The Right Way</a></li>
                </ul>
                
                <h3>WordPress Resources</h3>
                <ul>
                    <li><a href="https://developer.wordpress.org/themes/theme-security/data-sanitization-escaping/" target="_blank">WordPress Developer Handbook: Data Sanitization/Escaping</a></li>
                    <li><a href="https://developer.wordpress.org/plugins/security/data-validation/" target="_blank">WordPress Developer Handbook: Data Validation</a></li>
                    <li><a href="https://developer.wordpress.org/plugins/security/nonces/" target="_blank">WordPress Developer Handbook: Nonces</a></li>
                </ul>
                
                <h3>JavaScript Libraries</h3>
                <ul>
                    <li><a href="https://jqueryvalidation.org/" target="_blank">jQuery Validation Plugin</a></li>
                    <li><a href="https://github.com/validatorjs/validator.js" target="_blank">validator.js</a></li>
                    <li><a href="https://formvalidation.io/" target="_blank">FormValidation.io</a></li>
                </ul>
                
                <h3>PHP Libraries</h3>
                <ul>
                    <li><a href="https://github.com/Respect/Validation" target="_blank">Respect/Validation</a></li>
                    <li><a href="https://github.com/vlucas/valitron" target="_blank">Valitron</a></li>
                    <li><a href="https://github.com/rakit/validation" target="_blank">Rakit/Validation</a></li>
                </ul>
            </div>
        </section>

        <section class="next_lesson_preview">
            <h2>Coming Up Next: Sanitizing User Input</h2>
            <p>In our next lecture, we'll dive deeper into sanitizing user input:</p>
            <ul>
                <li>Understanding the difference between validation and sanitization</li>
                <li>PHP sanitization functions</li>
                <li>Protecting against common vulnerabilities (XSS, SQL injection, etc.)</li>
                <li>Content filtering techniques</li>
                <li>Best practices for handling user-generated content</li>
            </ul>
            <p>Be sure to complete the homework exercises to practice the validation techniques we've covered in this lecture!</p>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 PHP WordPress Development Course</p>
        <p><a href="accessing_form_data.html">Previous Lesson: Accessing Form Data with $_GET and $_POST</a> | <a href="index.html">Back to Syllabus</a> | <a href="sanitizing_user_input.html">Next Lesson: Sanitizing User Input</a></p>
    </footer>
</body>
</html>
