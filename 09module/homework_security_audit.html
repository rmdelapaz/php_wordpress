<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Homework: Security Audit & Optimization - WordPress Plugin Development</title>
    <meta name="description" content="Conduct a security audit and performance optimization of a WordPress plugin. Apply security principles and optimization techniques.">
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/sidebar-enhanced.css">
    <style>
        .homework-header {
            background: linear-gradient(135deg, #7c3aed 0%, #a855f7 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }
        .assignment-overview {
            background: white;
            border: 3px solid #7c3aed;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }
        .requirements-section {
            background: #faf5ff;
            border: 2px solid #a855f7;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }
        .code-structure {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            overflow-x: auto;
        }
        .grading-rubric {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            margin: 2rem 0;
        }
        .rubric-table {
            width: 100%;
            border-collapse: collapse;
        }
        .rubric-table th {
            background: #7c3aed;
            color: white;
            padding: 1rem;
            text-align: left;
        }
        .rubric-table td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }
        .points {
            background: #fbbf24;
            color: #92400e;
            padding: 0.25rem 0.5rem;
            border-radius: 4px;
            font-weight: bold;
        }
    </style>
</head>
<body>
    <div class="page-wrapper">
        <header class="site-header">
            <div class="header-container">
                <div class="site-branding">
                    <a href="/" class="site-logo">
                        <h1 class="site-title">PHP WordPress Development</h1>
                    </a>
                </div>
            </div>
        </header>
        
        <nav class="breadcrumb container">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item"><a href="/">Home</a> /</li>
                <li class="breadcrumb-item"><a href="/module6.html">Module 6</a> /</li>
                <li class="breadcrumb-item">Homework: Security Audit</li>
            </ol>
        </nav>
        
        <main class="main-content">
            <div class="container">
                <div class="content-with-sidebar">
                    <aside class="sidebar">
                        <div class="sidebar-nav">
                            <h3 class="sidebar-title">Session 9: Security & Performance</h3>
                            <ul class="sidebar-menu">
                                <li><a href="/09module/security_principles.html">Security Principles</a></li>
                                <li><a href="/09module/input_validation.html">Input Validation & Sanitization</a></li>
                                <li><a href="/09module/capability_checks.html">Capability Checks & Permissions</a></li>
                                <li><a href="/09module/data_encryption.html">Data Encryption</a></li>
                                <li><a href="/09module/preventing_attacks.html">Preventing Common Attacks</a></li>
                                <li><a href="/09module/performance_optimization.html">Performance Optimization</a></li>
                                <li><a href="/09module/caching_strategies.html">Caching Strategies</a></li>
                                <li class="active"><a href="/09module/homework_security_audit.html">Homework: Security Audit</a></li>
                            </ul>
                        </div>
                    </aside>
                    
                    <article class="lesson-content">
                        <div class="homework-header">
                            <h1>üìù Homework: Security Audit & Optimization</h1>
                            <p class="lead">Secure and optimize a WordPress plugin</p>
                            <p>Apply security principles and performance optimization techniques</p>
                        </div>

                        <div class="assignment-overview">
                            <h3>üéØ Assignment Overview</h3>
                            <p>You will receive a <strong>vulnerable WordPress plugin</strong> with security issues and performance problems. Your task is to conduct a thorough security audit, fix all vulnerabilities, and optimize the plugin's performance.</p>
                            
                            <h4>Learning Goals</h4>
                            <ul>
                                <li>Identify security vulnerabilities</li>
                                <li>Implement security fixes</li>
                                <li>Optimize database queries</li>
                                <li>Implement caching strategies</li>
                                <li>Document security improvements</li>
                            </ul>
                        </div>

                        <div class="requirements-section">
                            <h3>üìã Part 1: Security Audit (50 points)</h3>
                            
                            <h4>Security Issues to Find and Fix:</h4>
                            <ul>
                                <li>SQL injection vulnerabilities</li>
                                <li>Cross-site scripting (XSS) issues</li>
                                <li>Cross-site request forgery (CSRF) vulnerabilities</li>
                                <li>Missing capability checks</li>
                                <li>Unvalidated/unsanitized input</li>
                                <li>Unescaped output</li>
                                <li>Insecure file uploads</li>
                                <li>Hardcoded credentials</li>
                            </ul>
                            
                            <h4>Required Security Implementations:</h4>
                            <ul>
                                <li>Add nonce verification to all forms</li>
                                <li>Implement proper capability checks</li>
                                <li>Sanitize all user inputs</li>
                                <li>Escape all outputs</li>
                                <li>Use prepared statements for database queries</li>
                                <li>Secure file upload handling</li>
                                <li>Implement data encryption for sensitive data</li>
                            </ul>
                        </div>

                        <div class="requirements-section">
                            <h3>üìã Part 2: Performance Optimization (30 points)</h3>
                            
                            <h4>Performance Issues to Address:</h4>
                            <ul>
                                <li>Inefficient database queries</li>
                                <li>Missing caching implementation</li>
                                <li>Unnecessary asset loading</li>
                                <li>Large uncached operations</li>
                                <li>Missing lazy loading</li>
                            </ul>
                            
                            <h4>Required Optimizations:</h4>
                            <ul>
                                <li>Optimize all database queries</li>
                                <li>Implement transient caching</li>
                                <li>Add object caching where appropriate</li>
                                <li>Conditional asset loading</li>
                                <li>Implement AJAX lazy loading</li>
                                <li>Minify CSS and JavaScript</li>
                            </ul>
                        </div>

                        <section>
                            <h2>Vulnerable Plugin Code (Example)</h2>
                            <div class="code-structure">
                                <pre><code><?php
/**
 * Plugin Name: Vulnerable Contact Manager
 * Description: A contact management plugin with security issues
 * Version: 1.0.0
 */

// VULNERABLE CODE - DO NOT USE IN PRODUCTION
class Vulnerable_Contact_Manager {
    
    public function __construct() {
        add_action('init', array($this, 'handle_form'));
        add_shortcode('contact_form', array($this, 'render_form'));
    }
    
    // Vulnerable form handler
    public function handle_form() {
        if ($_POST['action'] == 'save_contact') {
            global $wpdb;
            
            // SQL Injection vulnerability
            $name = $_POST['name'];
            $email = $_POST['email'];
            $query = "INSERT INTO {$wpdb->prefix}contacts (name, email) 
                      VALUES ('$name', '$email')";
            $wpdb->query($query);
            
            // No capability check
            // No nonce verification
            // No input sanitization
        }
        
        // Vulnerable delete
        if ($_GET['delete']) {
            $id = $_GET['delete'];
            $wpdb->query("DELETE FROM {$wpdb->prefix}contacts WHERE id = $id");
        }
    }
    
    // Vulnerable display
    public function render_form() {
        // XSS vulnerability
        echo '<h2>Welcome ' . $_GET['user'] . '</h2>';
        
        // No nonce field
        ?>
        <form method="post">
            <input type="hidden" name="action" value="save_contact">
            <input type="text" name="name" placeholder="Name">
            <input type="email" name="email" placeholder="Email">
            <input type="submit" value="Save">
        </form>
        
        <?php
        // Inefficient query - no caching
        global $wpdb;
        $contacts = $wpdb->get_results("SELECT * FROM {$wpdb->prefix}contacts");
        
        foreach ($contacts as $contact) {
            // Unescaped output
            echo '<div>' . $contact->name . ' - ' . $contact->email . '</div>';
        }
    }
}

new Vulnerable_Contact_Manager();</code></pre>
                            </div>
                        </section>

                        <section>
                            <h2>Deliverables</h2>
                            <ol>
                                <li><strong>Security Audit Report</strong> - Document all vulnerabilities found</li>
                                <li><strong>Fixed Plugin Code</strong> - Secure version with all fixes</li>
                                <li><strong>Performance Report</strong> - Before/after metrics</li>
                                <li><strong>Implementation Documentation</strong> - Explain all changes</li>
                                <li><strong>Test Results</strong> - Security and performance tests</li>
                            </ol>
                        </section>

                        <section>
                            <h2>Security Audit Report Template</h2>
                            <div class="code-structure">
                                <pre><code># Security Audit Report

## Executive Summary
- Total vulnerabilities found: X
- Critical: X
- High: X
- Medium: X
- Low: X

## Vulnerabilities Found

### 1. SQL Injection
- **Location:** Line X in file.php
- **Severity:** Critical
- **Description:** Direct SQL query with unsanitized user input
- **Fix Applied:** Used $wpdb->prepare() with placeholders

### 2. XSS Vulnerability
- **Location:** Line X in file.php
- **Severity:** High
- **Description:** Unescaped user input in output
- **Fix Applied:** Added esc_html() for output escaping

## Performance Issues

### 1. Uncached Database Queries
- **Impact:** X ms per request
- **Fix:** Implemented transient caching
- **Result:** X% improvement

## Testing

### Security Tests
- [ ] SQL injection tests passed
- [ ] XSS tests passed
- [ ] CSRF tests passed

### Performance Tests
- Page load time: Before X ms ‚Üí After X ms
- Database queries: Before X ‚Üí After X

## Recommendations
- Additional security measures
- Future optimization opportunities</code></pre>
                            </div>
                        </section>

                        <div class="grading-rubric">
                            <table class="rubric-table">
                                <thead>
                                    <tr>
                                        <th>Criteria</th>
                                        <th>Points</th>
                                        <th>Description</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <tr>
                                        <td><strong>Security Fixes</strong></td>
                                        <td><span class="points">30</span></td>
                                        <td>All vulnerabilities identified and fixed</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Input Validation</strong></td>
                                        <td><span class="points">10</span></td>
                                        <td>Proper validation and sanitization</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Output Escaping</strong></td>
                                        <td><span class="points">10</span></td>
                                        <td>All output properly escaped</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Performance Optimization</strong></td>
                                        <td><span class="points">20</span></td>
                                        <td>Query optimization and caching</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Caching Implementation</strong></td>
                                        <td><span class="points">10</span></td>
                                        <td>Proper use of transients/object cache</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Documentation</strong></td>
                                        <td><span class="points">10</span></td>
                                        <td>Clear audit report and documentation</td>
                                    </tr>
                                    <tr>
                                        <td><strong>Testing</strong></td>
                                        <td><span class="points">10</span></td>
                                        <td>Comprehensive security and performance tests</td>
                                    </tr>
                                    <tr>
                                        <td><strong>TOTAL</strong></td>
                                        <td><span class="points">100</span></td>
                                        <td></td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>

                        <section>
                            <h2>Bonus Points (Up to 20 extra)</h2>
                            <ul>
                                <li><strong>+5 pts:</strong> Implement automated security testing</li>
                                <li><strong>+5 pts:</strong> Add performance monitoring</li>
                                <li><strong>+5 pts:</strong> Create security plugin scanner</li>
                                <li><strong>+5 pts:</strong> Implement advanced caching strategies</li>
                            </ul>
                        </section>

                        <section>
                            <h2>Tips for Success</h2>
                            <ul>
                                <li>Use security scanning tools first</li>
                                <li>Test each fix thoroughly</li>
                                <li>Measure performance before and after</li>
                                <li>Document everything</li>
                                <li>Follow WordPress coding standards</li>
                                <li>Test with different user roles</li>
                            </ul>
                        </section>

                        <section class="resources">
                            <h2>Helpful Resources</h2>
                            <ul>
                                <li><a href="https://developer.wordpress.org/plugins/security/">WordPress Security Guide</a></li>
                                <li><a href="https://www.wordfence.com/learn/">Wordfence Learning Center</a></li>
                                <li><a href="https://github.com/WordPress/WordPress-Coding-Standards">WordPress Coding Standards</a></li>
                                <li><a href="https://wpvulndb.com/">WPScan Vulnerability Database</a></li>
                            </ul>
                        </section>

                        <div class="lesson-navigation">
                            <a href="/09module/caching_strategies.html" class="lesson-nav-button prev">Previous: Caching Strategies</a>
                            <button class="complete-lesson-btn">Mark as Complete</button>
                            <a href="/10module/" class="lesson-nav-button next">Next: Session 10</a>
                        </div>
                    </article>
                </div>
            </div>
        </main>

        <footer class="site-footer">
            <div class="footer-container">
                <p>&copy; 2024 PHP WordPress Course. All rights reserved.</p>
            </div>
        </footer>
    </div>
    
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/progress-tracker.js"></script>
</body>
</html>