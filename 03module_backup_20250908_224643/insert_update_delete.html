<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <!-- SEO Meta Tags -->
  <title>Data Manipulation - INSERT, UPDATE, DELETE - PHP WordPress Course</title>
  <meta content="Master MySQL DML commands - INSERT, UPDATE, DELETE for managing data in databases" name="description"/>
  <meta content="PHP, WordPress, MySQL, DML, INSERT, UPDATE, DELETE, data manipulation" name="keywords"/>
  <meta content="PHP WordPress Course" name="author"/>
  <link href="/assets/css/main.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
  <!-- Favicon -->
  <link href="/favicon.png" rel="icon" type="image/png"/>
  <link href="/favicon.png" rel="apple-touch-icon"/>
  <!-- CSS -->
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
 </head>
 <body>
  <!-- Skip to main content -->
  <a class="sr-only" href="#main-content">Skip to main content</a>
  <div class="page-wrapper">
   <!-- Header -->
   <header class="site-header" role="banner">
    <div class="header-container">
     <div class="site-branding">
      <a class="site-logo" href="/">
       <h1 class="site-title">PHP WordPress Development</h1>
      </a>
     </div>
     <nav aria-label="Main navigation" class="main-navigation" role="navigation">
      <button aria-expanded="false" aria-label="Toggle navigation" class="mobile-menu-btn">
       <span>
       </span>
       <span>
       </span>
       <span>
       </span>
      </button>
      <div class="nav-menu">
       <ul class="nav-list">
        <li class="nav-item">
         <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item dropdown">
         <button aria-haspopup="true" class="nav-link dropdown-toggle active">Modules</button>
         <div class="dropdown-menu">
          <a class="dropdown-item" href="/module1.html">Module 1: Web Fundamentals</a>
          <a class="dropdown-item" href="/module2.html">Module 2: PHP Fundamentals</a>
          <a class="dropdown-item active" href="/module3.html">Module 3: MySQL Database</a>
          <a class="dropdown-item" href="/module4.html">Module 4: WordPress &amp; Docker</a>
          <a class="dropdown-item" href="/module5.html">Module 5: Theme Development</a>
          <a class="dropdown-item" href="/module6.html">Module 6: Plugin Development</a>
          <a class="dropdown-item" href="/module7.html">Module 7: Advanced WordPress</a>
          <a class="dropdown-item" href="/module8.html">Module 8: Deployment</a>
          <a class="dropdown-item" href="/module9.html">Module 9: Final Project</a>
         </div>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/resources.html">Resources</a>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/about.html">About</a>
        </li>
       </ul>
      </div>
     </nav>
     <div class="search-container">
      <div class="search-input-wrapper">
       <svg class="search-icon" fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
        <path clip-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" fill-rule="evenodd">
        </path>
       </svg>
       <input aria-label="Search" class="search-input" placeholder="Search lessons..." type="search"/>
      </div>
      <div class="search-results">
      </div>
     </div>
    </div>
   </header>
   <!-- Progress Bar -->
   <div class="progress-container">
    <div class="progress-header">
     <h2 class="progress-title">Course Progress</h2>
     <span class="progress-text">Loading...</span>
    </div>
    <div class="progress-bar">
     <div class="progress-bar-fill">
      <span class="progress-bar-text">
      </span>
     </div>
    </div>
   </div>
   <!-- Breadcrumb -->
   <nav aria-label="Breadcrumb" class="breadcrumb container">
    <ol class="breadcrumb-list">
     <li class="breadcrumb-item">
      <a href="/">Home</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <a href="/module3.html">Module 3</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <span aria-current="page">INSERT, UPDATE, DELETE</span>
     </li>
    </ol>
   </nav>
   <!-- Main Content -->
   <main class="main-content" id="main-content" role="main">
    <div class="container">
     <div class="content-with-sidebar">
      <!-- Sidebar -->
      <aside class="sidebar">
       <div class="sidebar-nav">
        <h3 class="sidebar-title">Module 3: MySQL Database</h3>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 1: Introduction to Databases</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/database_concepts_terminology.html">Database concepts and terminology</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/types_of_databases.html">Types of databases (relational vs. non-relational)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/introduction_to_mysql.html">Introduction to MySQL</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/mysql_xampp_mamp.html">MySQL in XAMPP/MAMP environment</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/using_phpmyadmin.html">Using phpMyAdmin</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/creating_databases_tables.html">Creating databases and tables</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_database_schema.html">Homework: Create a database schema for a simple application</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 2: Database Design</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/data_modeling_concepts.html">Data modeling concepts</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/entity_relationship_diagrams.html">Entity-Relationship diagrams</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/normalization_principles.html">Normalization principles (1NF, 2NF, 3NF)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/primary_foreign_keys.html">Primary keys and foreign keys</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/indexes_importance.html">Indexes and their importance</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/database_constraints.html">Database constraints</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_database_design.html">Homework: Design a normalized database for an e-commerce website</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 3: SQL Fundamentals</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/sql_syntax_conventions.html">SQL syntax and conventions</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/mysql_data_types.html">Data types in MySQL</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/database_structure_ddl.html">Creating and modifying database structures (CREATE, ALTER, DROP)</a>
          </li>
          <li class="active">
           <a class="sidebar-link active" href="/03module/insert_update_delete.html">Basic data manipulation (INSERT, UPDATE, DELETE)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/select_queries.html">Simple queries with SELECT</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/where_filtering.html">Filtering data with WHERE</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/order_by_sorting.html">Sorting results with ORDER BY</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_sql_queries.html">Homework: Write SQL queries to manipulate data in your database</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 4: Advanced SQL</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/sql_joins.html">Joins (INNER, LEFT, RIGHT, FULL)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/aggregate_functions.html">Aggregating data (COUNT, SUM, AVG, MIN, MAX)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/group_by_having.html">Grouping data with GROUP BY</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/having_deep_dive.html">Filtering groups with HAVING</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/subqueries.html">Subqueries</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/views.html">Views</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/transactions.html">Transactions</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/stored_procedures.html">Stored procedures and functions</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_sql_queries.html">Homework: Write complex SQL queries with joins and aggregations</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 5: PHP and MySQL Integration</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/connecting_mysql.html">Connecting to MySQL with PHP</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/executing_queries.html">Executing SQL queries through PHP</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/prepared_statements.html">Prepared statements and security concerns</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/crud_operations.html">CRUD operations in PHP applications</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/result_sets.html">Handling results sets</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/error_debugging.html">Error handling and debugging</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/php_mysql_integration.html">Final Project: Build a complete data-driven PHP application with MySQL backend</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Quick Links</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/module3.html">Module Overview</a>
          </li>
          <li>
           <a class="sidebar-link prev-session" href="/module2.html">‚Üê Prev: Module 2</a>
          </li>
          <li>
           <a class="sidebar-link next-session" href="/module4.html">Next: Module 4 ‚Üí</a>
          </li>
          <li>
           <a class="sidebar-link" href="/resources.html">Resources</a>
          </li>
         </ul>
        </div>
       </div>
      </aside>
      <!-- Main Lesson Content -->
      <article class="lesson-content">
       <header class="lesson-header">
        <h1>Data Manipulation: INSERT, UPDATE, DELETE</h1>
        <div class="lesson-meta">
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">
           </path>
          </svg>
          <span>Duration: 90 minutes</span>
         </div>
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 14l9-5-9-5-9 5 9 5z">
           </path>
          </svg>
          <span>Module 3: Session 4</span>
         </div>
        </div>
       </header>
       <!-- Learning Objectives -->
       <div class="lesson-objectives">
        <h2>Learning Objectives</h2>
        <ul>
         <li>Master INSERT statements for adding data</li>
         <li>Use UPDATE statements safely and efficiently</li>
         <li>Perform DELETE operations with proper conditions</li>
         <li>Handle bulk operations and imports</li>
         <li>Understand transaction safety for DML operations</li>
         <li>Work with INSERT...SELECT and REPLACE statements</li>
         <li>Implement upsert operations and conflict handling</li>
        </ul>
       </div>
       <!-- Lesson Body -->
       <div class="lesson-body">
        <section>
         <h2>DML Commands Overview</h2>
         <p class="lead">Data Manipulation Language (DML) commands are used to manage data within database tables. These are the CRUD operations that power every application! üíæ</p>
         <canvas height="400" id="dmlOverviewCanvas" width="600">
         </canvas>
         <script>const ctx = document.getElementById('dmlOverviewCanvas').getContext('2d');
                                    
                                    // Title
                                    ctx.font = 'bold 18px Arial';
                                    ctx.fillStyle = '#1f2937';
                                    ctx.fillText('DML Operations Flow', 220, 30);
                                    
                                    // INSERT box
                                    ctx.fillStyle = '#dcfce7';
                                    ctx.fillRect(50, 60, 160, 120);
                                    ctx.strokeStyle = '#16a34a';
                                    ctx.lineWidth = 2;
                                    ctx.strokeRect(50, 60, 160, 120);
                                    ctx.fillStyle = '#166534';
                                    ctx.font = 'bold 14px Arial';
                                    ctx.fillText('‚ûï INSERT', 95, 85);
                                    
                                    ctx.fillStyle = '#374151';
                                    ctx.font = '11px Arial';
                                    ctx.fillText('‚Ä¢ Single row', 60, 110);
                                    ctx.fillText('‚Ä¢ Multiple rows', 60, 125);
                                    ctx.fillText('‚Ä¢ From SELECT', 60, 140);
                                    ctx.fillText('‚Ä¢ ON DUPLICATE KEY', 60, 155);
                                    ctx.fillText('‚Ä¢ REPLACE INTO', 60, 170);
                                    
                                    // UPDATE box
                                    ctx.fillStyle = '#dbeafe';
                                    ctx.fillRect(220, 60, 160, 120);
                                    ctx.strokeStyle = '#2563eb';
                                    ctx.strokeRect(220, 60, 160, 120);
                                    ctx.fillStyle = '#1e40af';
                                    ctx.font = 'bold 14px Arial';
                                    ctx.fillText('‚úèÔ∏è UPDATE', 265, 85);
                                    
                                    ctx.fillStyle = '#374151';
                                    ctx.font = '11px Arial';
                                    ctx.fillText('‚Ä¢ Single column', 230, 110);
                                    ctx.fillText('‚Ä¢ Multiple columns', 230, 125);
                                    ctx.fillText('‚Ä¢ With conditions', 230, 140);
                                    ctx.fillText('‚Ä¢ Using JOINs', 230, 155);
                                    ctx.fillText('‚Ä¢ LIMIT clause', 230, 170);
                                    
                                    // DELETE box
                                    ctx.fillStyle = '#fee2e2';
                                    ctx.fillRect(390, 60, 160, 120);
                                    ctx.strokeStyle = '#dc2626';
                                    ctx.strokeRect(390, 60, 160, 120);
                                    ctx.fillStyle = '#991b1b';
                                    ctx.font = 'bold 14px Arial';
                                    ctx.fillText('üóëÔ∏è DELETE', 435, 85);
                                    
                                    ctx.fillStyle = '#374151';
                                    ctx.font = '11px Arial';
                                    ctx.fillText('‚Ä¢ With WHERE', 400, 110);
                                    ctx.fillText('‚Ä¢ Multiple tables', 400, 125);
                                    ctx.fillText('‚Ä¢ Using JOINs', 400, 140);
                                    ctx.fillText('‚Ä¢ TRUNCATE', 400, 155);
                                    ctx.fillText('‚Ä¢ Soft deletes', 400, 170);
                                    
                                    // Transaction safety box
                                    ctx.fillStyle = '#fef3c7';
                                    ctx.fillRect(50, 200, 500, 80);
                                    ctx.strokeStyle = '#ca8a04';
                                    ctx.strokeRect(50, 200, 500, 80);
                                    ctx.fillStyle = '#92400e';
                                    ctx.font = 'bold 14px Arial';
                                    ctx.fillText('üîí Transaction Safety', 230, 225);
                                    
                                    ctx.fillStyle = '#374151';
                                    ctx.font = '11px Arial';
                                    ctx.fillText('START TRANSACTION ‚Üí Execute DML ‚Üí COMMIT or ROLLBACK', 150, 250);
                                    ctx.fillText('DML operations can be rolled back (unlike DDL)', 180, 265);
                                    
                                    // CRUD mapping
                                    ctx.fillStyle = '#f3f4f6';
                                    ctx.fillRect(50, 300, 500, 80);
                                    ctx.fillStyle = '#374151';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('CRUD to SQL Mapping:', 60, 320);
                                    ctx.font = '11px Arial';
                                    ctx.fillText('Create ‚Üí INSERT', 60, 340);
                                    ctx.fillText('Read ‚Üí SELECT', 180, 340);
                                    ctx.fillText('Update ‚Üí UPDATE', 300, 340);
                                    ctx.fillText('Delete ‚Üí DELETE', 420, 340);
                                    ctx.fillText('These form the foundation of all database applications!', 150, 360);</script>
         <div class="alert alert-info">
          <div class="alert-icon">üí°</div>
          <div class="alert-content">
           <div class="alert-title">DML vs DDL Key Difference</div>
           <div class="alert-message">
            <ul>
             <li>
              <strong>DML (Data Manipulation):</strong>Changes data, can be rolled back</li>
             <li>
              <strong>DDL (Data Definition):</strong>Changes structure, auto-commits</li>
             <li>Always use transactions for critical DML operations!</li>
            </ul>
           </div>
          </div>
         </div>
        </section>
        <section>
         <h2>INSERT Statements</h2>
         <div class="mermaid">graph LR
                                        A[INSERT INTO] --&gt; B[Single Row]
                                        A --&gt; C[Multiple Rows]
                                        A --&gt; D[INSERT SELECT]
                                        A --&gt; E[INSERT IGNORE]
                                        A --&gt; F[ON DUPLICATE KEY]
                                        A --&gt; G[REPLACE INTO]
                                        
                                        style A fill:#dcfce7
                                        style B fill:#dbeafe
                                        style C fill:#dbeafe
                                        style D fill:#fef3c7
                                        style E fill:#fee2e2
                                        style F fill:#e9d5ff
                                        style G fill:#e0f2fe</div>
         <div class="real_world_example">
          <h3>INSERT Statement Variations</h3>
          <pre><code class="language-sql">-- ========================================
-- BASIC INSERT STATEMENTS
-- ========================================

-- Insert single row with all columns
INSERT INTO users (username, email, password_hash, created_at)
VALUES ('johndoe', 'john@example.com', 'hashed_password_here', NOW());

-- Insert with column names (recommended)
INSERT INTO products (name, price, stock_quantity)
VALUES ('Laptop', 999.99, 50);

-- Insert without column names (not recommended)
INSERT INTO categories
VALUES (NULL, 'Electronics', 'electronics', 'Electronic devices', NULL);

-- Insert with DEFAULT values
INSERT INTO users (username, email, password_hash)
VALUES ('janedoe', 'jane@example.com', DEFAULT);  -- Uses column default

-- Insert NULL values
INSERT INTO products (name, price, description)
VALUES ('Mystery Item', 0.01, NULL);

-- ========================================
-- MULTIPLE ROW INSERTS
-- ========================================

-- Insert multiple rows in one statement (faster)
INSERT INTO products (name, price, stock_quantity) VALUES
    ('iPhone 15', 1299.00, 100),
    ('Samsung Galaxy', 999.00, 75),
    ('Google Pixel', 799.00, 50),
    ('OnePlus', 699.00, 30);

-- Insert with mixed values
INSERT INTO order_items (order_id, product_id, quantity, unit_price) VALUES
    (1001, 5, 2, 29.99),
    (1001, 8, 1, 149.99),
    (1002, 5, 3, 29.99),
    (1002, 12, 1, 599.99);

-- ========================================
-- INSERT...SELECT
-- ========================================

-- Copy data from another table
INSERT INTO users_archive
SELECT * FROM users
WHERE created_at &lt; '2024-01-01';

-- Insert with transformation
INSERT INTO customer_summary (customer_id, total_orders, total_spent)
SELECT 
    customer_id,
    COUNT(order_id) as total_orders,
    SUM(total_amount) as total_spent
FROM orders
GROUP BY customer_id;

-- Insert from multiple tables
INSERT INTO order_report (order_date, customer_name, total_amount)
SELECT 
    o.order_date,
    c.customer_name,
    o.total_amount
FROM orders o
JOIN customers c ON o.customer_id = c.customer_id
WHERE o.status = 'completed';

-- ========================================
-- INSERT IGNORE (Skip errors)
-- ========================================

-- Ignore duplicate key errors
INSERT IGNORE INTO tags (name, slug) VALUES
    ('Technology', 'technology'),  -- Will insert
    ('Technology', 'technology'),  -- Will be ignored (duplicate)
    ('Science', 'science');        -- Will insert

-- Check how many rows were actually inserted
SELECT ROW_COUNT();  -- Returns number of inserted rows

-- ========================================
-- ON DUPLICATE KEY UPDATE (Upsert)
-- ========================================

-- Update if exists, insert if not
INSERT INTO product_views (product_id, view_count, last_viewed)
VALUES (101, 1, NOW())
ON DUPLICATE KEY UPDATE
    view_count = view_count + 1,
    last_viewed = NOW();

-- More complex upsert
INSERT INTO user_stats (user_id, login_count, last_login, total_purchases)
VALUES (123, 1, NOW(), 0)
ON DUPLICATE KEY UPDATE
    login_count = login_count + 1,
    last_login = VALUES(last_login),  -- Use the new value
    total_purchases = total_purchases;  -- Keep existing value

-- Bulk upsert
INSERT INTO inventory (product_id, quantity, updated_at) VALUES
    (1, 100, NOW()),
    (2, 150, NOW()),
    (3, 200, NOW())
ON DUPLICATE KEY UPDATE
    quantity = VALUES(quantity),
    updated_at = VALUES(updated_at);

-- ========================================
-- REPLACE INTO (Delete + Insert)
-- ========================================

-- Replace deletes existing row and inserts new
REPLACE INTO settings (user_id, setting_key, setting_value)
VALUES (1, 'theme', 'dark');

-- Multiple replace
REPLACE INTO cache_table (cache_key, cache_value, expires_at) VALUES
    ('user_1_profile', '{"name":"John"}', DATE_ADD(NOW(), INTERVAL 1 HOUR)),
    ('user_2_profile', '{"name":"Jane"}', DATE_ADD(NOW(), INTERVAL 1 HOUR));

-- ========================================
-- INSERT WITH SUBQUERIES
-- ========================================

-- Insert with calculated values
INSERT INTO monthly_reports (month, year, total_sales, avg_order_value)
SELECT 
    MONTH(order_date) as month,
    YEAR(order_date) as year,
    SUM(total_amount) as total_sales,
    AVG(total_amount) as avg_order_value
FROM orders
WHERE order_date &gt;= DATE_SUB(CURDATE(), INTERVAL 1 MONTH)
GROUP BY YEAR(order_date), MONTH(order_date);

-- Insert with EXISTS check
INSERT INTO notifications (user_id, message, created_at)
SELECT 
    u.user_id,
    'Your order has shipped!',
    NOW()
FROM users u
WHERE EXISTS (
    SELECT 1 FROM orders o 
    WHERE o.user_id = u.user_id 
    AND o.status = 'shipped'
    AND o.notified = FALSE
);

-- ========================================
-- PREPARED STATEMENTS (For security)
-- ========================================

-- Prepare statement
PREPARE insert_user FROM 
'INSERT INTO users (username, email, password_hash) VALUES (?, ?, ?)';

-- Execute with values
SET @username = 'newuser';
SET @email = 'new@example.com';
SET @password = 'hashed_password';
EXECUTE insert_user USING @username, @email, @password;

-- Deallocate
DEALLOCATE PREPARE insert_user;</code></pre>
         </div>
         <div class="alert alert-warning">
          <div class="alert-icon">‚ö†Ô∏è</div>
          <div class="alert-content">
           <div class="alert-title">INSERT Best Practices</div>
           <div class="alert-message">
            <ul>
             <li>Always specify column names for clarity</li>
             <li>Use bulk inserts for better performance</li>
             <li>Consider using transactions for multiple inserts</li>
             <li>Use prepared statements to prevent SQL injection</li>
             <li>Be aware of AUTO_INCREMENT behavior</li>
            </ul>
           </div>
          </div>
         </div>
        </section>
        <section>
         <h2>UPDATE Statements</h2>
         <canvas height="350" id="updateCanvas" width="600">
         </canvas>
         <script>const uCtx = document.getElementById('updateCanvas').getContext('2d');
                                    
                                    // Title
                                    uCtx.font = 'bold 16px Arial';
                                    uCtx.fillStyle = '#1f2937';
                                    uCtx.fillText('UPDATE Statement Components', 180, 30);
                                    
                                    // UPDATE keyword
                                    uCtx.fillStyle = '#2563eb';
                                    uCtx.fillRect(50, 60, 500, 40);
                                    uCtx.fillStyle = 'white';
                                    uCtx.font = 'bold 14px Arial';
                                    uCtx.fillText('UPDATE table_name', 230, 85);
                                    
                                    // SET clause
                                    uCtx.fillStyle = '#dbeafe';
                                    uCtx.fillRect(50, 110, 240, 80);
                                    uCtx.fillStyle = '#1e40af';
                                    uCtx.font = 'bold 12px Arial';
                                    uCtx.fillText('SET Clause', 130, 130);
                                    uCtx.fillStyle = '#374151';
                                    uCtx.font = '10px Arial';
                                    uCtx.fillText('column1 = value1,', 60, 150);
                                    uCtx.fillText('column2 = value2,', 60, 165);
                                    uCtx.fillText('column3 = expression', 60, 180);
                                    
                                    // WHERE clause
                                    uCtx.fillStyle = '#fee2e2';
                                    uCtx.fillRect(310, 110, 240, 80);
                                    uCtx.fillStyle = '#dc2626';
                                    uCtx.font = 'bold 12px Arial';
                                    uCtx.fillText('WHERE Clause (CRITICAL!)', 360, 130);
                                    uCtx.fillStyle = '#374151';
                                    uCtx.font = '10px Arial';
                                    uCtx.fillText('condition1 AND', 320, 150);
                                    uCtx.fillText('condition2 OR', 320, 165);
                                    uCtx.fillText('condition3', 320, 180);
                                    
                                    // Optional clauses
                                    uCtx.fillStyle = '#fef3c7';
                                    uCtx.fillRect(50, 200, 500, 60);
                                    uCtx.fillStyle = '#92400e';
                                    uCtx.font = 'bold 12px Arial';
                                    uCtx.fillText('Optional Clauses', 240, 220);
                                    uCtx.fillStyle = '#374151';
                                    uCtx.font = '10px Arial';
                                    uCtx.fillText('ORDER BY column', 60, 240);
                                    uCtx.fillText('LIMIT n', 200, 240);
                                    uCtx.fillText('JOIN other_table', 300, 240);
                                    uCtx.fillText('USING (column)', 430, 240);
                                    
                                    // Warning box
                                    uCtx.fillStyle = '#fff7ed';
                                    uCtx.fillRect(50, 280, 500, 50);
                                    uCtx.strokeStyle = '#ea580c';
                                    uCtx.lineWidth = 2;
                                    uCtx.strokeRect(50, 280, 500, 50);
                                    uCtx.fillStyle = '#ea580c';
                                    uCtx.font = 'bold 12px Arial';
                                    uCtx.fillText('‚ö†Ô∏è DANGER:', 60, 305);
                                    uCtx.fillStyle = '#7c2d12';
                                    uCtx.font = '11px Arial';
                                    uCtx.fillText('UPDATE without WHERE clause updates ALL rows!', 150, 305);</script>
         <div class="best_practice">
          <h3>UPDATE Statement Examples</h3>
          <pre><code class="language-sql">-- ========================================
-- BASIC UPDATE STATEMENTS
-- ========================================

-- Update single column
UPDATE users 
SET last_login = NOW()
WHERE user_id = 123;

-- Update multiple columns
UPDATE products 
SET 
    price = 899.99,
    stock_quantity = 100,
    updated_at = NOW()
WHERE product_id = 456;

-- Update with arithmetic
UPDATE products 
SET 
    price = price * 1.10,  -- 10% price increase
    stock_quantity = stock_quantity - 5
WHERE category_id = 3;

-- Update with CASE statement
UPDATE orders 
SET status = CASE
    WHEN total_amount &lt; 100 THEN 'small_order'
    WHEN total_amount &lt; 500 THEN 'medium_order'
    ELSE 'large_order'
END
WHERE status IS NULL;

-- ========================================
-- UPDATE WITH CONDITIONS
-- ========================================

-- Complex WHERE conditions
UPDATE users 
SET 
    account_status = 'inactive',
    deactivated_at = NOW()
WHERE 
    last_login &lt; DATE_SUB(NOW(), INTERVAL 6 MONTH)
    AND account_status = 'active'
    AND user_type != 'admin';

-- Update with subquery in WHERE
UPDATE products 
SET is_featured = TRUE
WHERE product_id IN (
    SELECT product_id 
    FROM order_items 
    GROUP BY product_id 
    ORDER BY SUM(quantity) DESC 
    LIMIT 10
);

-- Update with EXISTS
UPDATE customers c
SET is_vip = TRUE
WHERE EXISTS (
    SELECT 1 
    FROM orders o 
    WHERE o.customer_id = c.customer_id 
    GROUP BY o.customer_id 
    HAVING SUM(total_amount) &gt; 10000
);

-- ========================================
-- UPDATE WITH JOINS
-- ========================================

-- Update with INNER JOIN
UPDATE orders o
INNER JOIN customers c ON o.customer_id = c.customer_id
SET 
    o.customer_type = c.customer_type,
    o.customer_region = c.region
WHERE o.customer_type IS NULL;

-- Update with LEFT JOIN
UPDATE products p
LEFT JOIN product_reviews pr ON p.product_id = pr.product_id
SET p.average_rating = (
    SELECT AVG(rating) 
    FROM product_reviews 
    WHERE product_id = p.product_id
)
WHERE pr.product_id IS NOT NULL;

-- Multiple table update
UPDATE 
    orders o,
    order_items oi,
    products p
SET 
    o.status = 'out_of_stock',
    oi.status = 'cancelled',
    p.stock_quantity = 0
WHERE 
    o.order_id = oi.order_id
    AND oi.product_id = p.product_id
    AND p.discontinued = TRUE;

-- ========================================
-- UPDATE WITH LIMIT AND ORDER BY
-- ========================================

-- Update only first 10 rows
UPDATE products 
SET discount_percent = 20
WHERE category_id = 5
ORDER BY created_at DESC
LIMIT 10;

-- Update oldest records
UPDATE user_logs 
SET archived = TRUE
WHERE created_at &lt; '2024-01-01'
ORDER BY created_at ASC
LIMIT 1000;

-- ========================================
-- SAFE UPDATE PRACTICES
-- ========================================

-- Always use transactions for important updates
START TRANSACTION;

UPDATE accounts 
SET balance = balance - 100
WHERE account_id = 1001;

UPDATE accounts 
SET balance = balance + 100
WHERE account_id = 1002;

-- Check the changes
SELECT * FROM accounts WHERE account_id IN (1001, 1002);

-- If correct:
COMMIT;
-- If wrong:
-- ROLLBACK;

-- Test with SELECT first
SELECT * FROM users 
WHERE last_login &lt; DATE_SUB(NOW(), INTERVAL 1 YEAR);
-- Then UPDATE
UPDATE users 
SET status = 'dormant'
WHERE last_login &lt; DATE_SUB(NOW(), INTERVAL 1 YEAR);

-- ========================================
-- UPDATE WITH VALUES FROM ANOTHER TABLE
-- ========================================

-- Update from temporary table
CREATE TEMPORARY TABLE price_updates (
    product_id INT,
    new_price DECIMAL(10,2)
);

INSERT INTO price_updates VALUES 
    (1, 29.99),
    (2, 39.99),
    (3, 49.99);

UPDATE products p
INNER JOIN price_updates pu ON p.product_id = pu.product_id
SET p.price = pu.new_price;

-- Update with correlated subquery
UPDATE orders o
SET total_amount = (
    SELECT SUM(quantity * unit_price)
    FROM order_items oi
    WHERE oi.order_id = o.order_id
)
WHERE status = 'pending';

-- ========================================
-- BULK UPDATE OPTIMIZATION
-- ========================================

-- Use CASE for different updates
UPDATE users 
SET role = CASE user_id
    WHEN 1 THEN 'admin'
    WHEN 2 THEN 'editor'
    WHEN 3 THEN 'author'
    ELSE role
END
WHERE user_id IN (1, 2, 3);

-- Batch updates with prepared statements
PREPARE update_price FROM 
'UPDATE products SET price = ? WHERE product_id = ?';

SET @price1 = 99.99; SET @id1 = 1;
EXECUTE update_price USING @price1, @id1;

SET @price2 = 149.99; SET @id2 = 2;
EXECUTE update_price USING @price2, @id2;

DEALLOCATE PREPARE update_price;</code></pre>
         </div>
        </section>
        <section>
         <h2>DELETE Statements</h2>
         <div class="alert alert-danger">
          <div class="alert-icon">üö®</div>
          <div class="alert-content">
           <div class="alert-title">DELETE Command Warning</div>
           <div class="alert-message">DELETE permanently removes data! Always:<ul>
             <li>Use WHERE clause (without it, ALL rows are deleted)</li>
             <li>Test with SELECT first</li>
             <li>Consider soft deletes for important data</li>
             <li>Use transactions when deleting from multiple tables</li>
             <li>Have backups before bulk deletions</li>
            </ul>
           </div>
          </div>
         </div>
         <div class="real_world_example">
          <h3>DELETE Statement Variations</h3>
          <pre><code class="language-sql">-- ========================================
-- BASIC DELETE STATEMENTS
-- ========================================

-- Delete single row
DELETE FROM users 
WHERE user_id = 999;

-- Delete with multiple conditions
DELETE FROM orders 
WHERE 
    status = 'cancelled'
    AND created_at &lt; DATE_SUB(NOW(), INTERVAL 30 DAY);

-- Delete with IN clause
DELETE FROM products 
WHERE product_id IN (101, 102, 103);

-- Delete with subquery
DELETE FROM comments 
WHERE post_id IN (
    SELECT post_id 
    FROM posts 
    WHERE status = 'deleted'
);

-- ========================================
-- DELETE WITH LIMIT
-- ========================================

-- Delete only first N rows
DELETE FROM user_logs 
WHERE created_at &lt; '2024-01-01'
ORDER BY created_at ASC
LIMIT 1000;

-- Delete oldest records in batches
DELETE FROM activity_log 
WHERE log_date &lt; DATE_SUB(NOW(), INTERVAL 90 DAY)
ORDER BY log_date ASC
LIMIT 10000;

-- ========================================
-- DELETE WITH JOINS
-- ========================================

-- Delete with INNER JOIN
DELETE o
FROM orders o
INNER JOIN customers c ON o.customer_id = c.customer_id
WHERE c.status = 'banned';

-- Delete from multiple tables
DELETE o, oi
FROM orders o
INNER JOIN order_items oi ON o.order_id = oi.order_id
WHERE o.created_at &lt; '2023-01-01';

-- Delete with LEFT JOIN (delete orphaned records)
DELETE oi
FROM order_items oi
LEFT JOIN orders o ON oi.order_id = o.order_id
WHERE o.order_id IS NULL;

-- ========================================
-- SAFE DELETE PRACTICES
-- ========================================

-- Always test with SELECT first
SELECT COUNT(*) 
FROM users 
WHERE last_login &lt; DATE_SUB(NOW(), INTERVAL 2 YEAR);

-- Then delete
DELETE FROM users 
WHERE last_login &lt; DATE_SUB(NOW(), INTERVAL 2 YEAR);

-- Use transactions for critical deletes
START TRANSACTION;

-- Check what will be deleted
SELECT * FROM orders WHERE customer_id = 123;
SELECT * FROM order_items WHERE order_id IN (
    SELECT order_id FROM orders WHERE customer_id = 123
);

-- Perform deletion
DELETE FROM order_items WHERE order_id IN (
    SELECT order_id FROM orders WHERE customer_id = 123
);
DELETE FROM orders WHERE customer_id = 123;
DELETE FROM customers WHERE customer_id = 123;

-- Verify
SELECT COUNT(*) FROM orders WHERE customer_id = 123;

COMMIT;  -- or ROLLBACK if something went wrong

-- ========================================
-- SOFT DELETE PATTERN
-- ========================================

-- Instead of DELETE, use UPDATE with deleted flag
ALTER TABLE users ADD COLUMN deleted_at TIMESTAMP NULL;

-- Soft delete
UPDATE users 
SET deleted_at = NOW()
WHERE user_id = 123;

-- Query only active records
SELECT * FROM users 
WHERE deleted_at IS NULL;

-- Create view for active records
CREATE VIEW active_users AS
SELECT * FROM users 
WHERE deleted_at IS NULL;

-- Restore soft deleted record
UPDATE users 
SET deleted_at = NULL
WHERE user_id = 123;

-- Permanently delete old soft-deleted records
DELETE FROM users 
WHERE deleted_at &lt; DATE_SUB(NOW(), INTERVAL 90 DAY);

-- ========================================
-- TRUNCATE vs DELETE
-- ========================================

-- DELETE: Slow for large tables, can rollback, triggers fire
DELETE FROM large_table;  -- Deletes row by row

-- TRUNCATE: Fast, cannot rollback, no triggers, resets AUTO_INCREMENT
TRUNCATE TABLE large_table;  -- Drops and recreates table

-- DELETE with specific conditions
DELETE FROM logs WHERE created_at &lt; '2024-01-01';

-- TRUNCATE for complete cleanup (be very careful!)
TRUNCATE TABLE temporary_data;

-- ========================================
-- CASCADE DELETE
-- ========================================

-- Setup foreign key with CASCADE DELETE
CREATE TABLE orders (
    order_id INT PRIMARY KEY,
    customer_id INT,
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
        ON DELETE CASCADE  -- Automatically deletes orders when customer deleted
);

-- When you delete parent, children are auto-deleted
DELETE FROM customers WHERE customer_id = 100;
-- This automatically deletes all orders for customer 100

-- ========================================
-- ARCHIVING BEFORE DELETION
-- ========================================

-- Archive data before deleting
CREATE TABLE orders_archive LIKE orders;

-- Copy old data to archive
INSERT INTO orders_archive
SELECT * FROM orders 
WHERE order_date &lt; DATE_SUB(NOW(), INTERVAL 2 YEAR);

-- Delete archived data from main table
DELETE FROM orders 
WHERE order_date &lt; DATE_SUB(NOW(), INTERVAL 2 YEAR);

-- ========================================
-- PERFORMANCE OPTIMIZATION
-- ========================================

-- Delete in smaller batches for large datasets
DELIMITER $$
CREATE PROCEDURE delete_old_logs()
BEGIN
    DECLARE rows_affected INT DEFAULT 1;
    
    WHILE rows_affected &gt; 0 DO
        DELETE FROM logs 
        WHERE created_at &lt; DATE_SUB(NOW(), INTERVAL 90 DAY)
        LIMIT 1000;
        
        SET rows_affected = ROW_COUNT();
        
        -- Optional: Add delay to reduce load
        DO SLEEP(0.1);
    END WHILE;
END$$
DELIMITER ;

CALL delete_old_logs();</code></pre>
         </div>
        </section>
        <section>
         <h2>Bulk Operations and Performance</h2>
         <canvas height="300" id="performanceCanvas" width="600">
         </canvas>
         <script>const pCtx = document.getElementById('performanceCanvas').getContext('2d');
                                    
                                    // Title
                                    pCtx.font = 'bold 16px Arial';
                                    pCtx.fillStyle = '#1f2937';
                                    pCtx.fillText('Bulk Operation Performance Comparison', 150, 30);
                                    
                                    // Draw bars
                                    const operations = [
                                        { name: 'Single INSERT (1000x)', time: 500, color: '#dc2626', y: 60 },
                                        { name: 'Bulk INSERT (1 query)', time: 50, color: '#16a34a', y: 100 },
                                        { name: 'INSERT...SELECT', time: 30, color: '#2563eb', y: 140 },
                                        { name: 'LOAD DATA INFILE', time: 10, color: '#7c3aed', y: 180 }
                                    ];
                                    
                                    operations.forEach(op =>{
                                        // Bar
                                        pCtx.fillStyle = op.color;
                                        pCtx.fillRect(200, op.y, op.time, 25);
                                        
                                        // Label
                                        pCtx.fillStyle = '#374151';
                                        pCtx.font = '11px Arial';
                                        pCtx.fillText(op.name, 50, op.y + 17);
                                        
                                        // Time
                                        pCtx.fillText(op.time + 'ms', 210 + op.time, op.y + 17);
                                    });
                                    
                                    // Note
                                    pCtx.fillStyle = '#6b7280';
                                    pCtx.font = '10px Arial';
                                    pCtx.fillText('* Times are approximate for 1000 rows insertion', 150, 250);</script>
         <div class="homework">
          <h3>Performance Best Practices</h3>
          <pre><code class="language-sql">-- ========================================
-- BULK INSERT OPTIMIZATION
-- ========================================

-- Disable indexes temporarily for bulk insert
ALTER TABLE large_table DISABLE KEYS;

INSERT INTO large_table (col1, col2, col3) VALUES
    -- Insert thousands of rows
    (val1, val2, val3),
    (val4, val5, val6),
    -- ... many more rows
    (valN, valN+1, valN+2);

ALTER TABLE large_table ENABLE KEYS;

-- Use LOAD DATA INFILE for CSV imports
LOAD DATA INFILE '/tmp/data.csv'
INTO TABLE products
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
LINES TERMINATED BY '\n'
IGNORE 1 ROWS  -- Skip header
(name, @price, @stock, description)
SET 
    price = CAST(@price AS DECIMAL(10,2)),
    stock_quantity = CAST(@stock AS UNSIGNED),
    created_at = NOW();

-- ========================================
-- BATCH PROCESSING
-- ========================================

-- Process updates in batches
SET @batch_size = 1000;
SET @offset = 0;
SET @total_rows = (SELECT COUNT(*) FROM users);

WHILE @offset &lt; @total_rows DO
    UPDATE users 
    SET processed = TRUE
    WHERE processed = FALSE
    LIMIT @batch_size;
    
    SET @offset = @offset + @batch_size;
    
    -- Optional delay to prevent locking
    DO SLEEP(0.5);
END WHILE;

-- ========================================
-- MONITORING DML PERFORMANCE
-- ========================================

-- Check affected rows
UPDATE products SET price = price * 1.1 WHERE category_id = 5;
SELECT ROW_COUNT();  -- Number of rows updated

-- Profile query execution
SET profiling = 1;
DELETE FROM old_logs WHERE created_at &lt; '2023-01-01';
SHOW PROFILES;
SHOW PROFILE FOR QUERY 1;

-- Check table locks
SHOW PROCESSLIST;
SHOW ENGINE INNODB STATUS;

-- ========================================
-- OPTIMIZATION TIPS
-- ========================================

/*
1. Bulk Operations:
   - Use multi-row INSERT instead of multiple single INSERTs
   - Use INSERT...SELECT for table-to-table copies
   - Use LOAD DATA INFILE for large CSV imports

2. Updates:
   - Update indexes columns sparingly
   - Use JOIN instead of subqueries when possible
   - Batch large updates to avoid long locks

3. Deletes:
   - Archive before deleting
   - Use soft deletes for important data
   - Delete in small batches for large datasets
   
4. General:
   - Use transactions for data consistency
   - Test with EXPLAIN before running
   - Monitor slow query log
   - Keep statistics updated with ANALYZE TABLE
*/</code></pre>
         </div>
        </section>
        <!-- Practice Exercise -->
        <section>
         <h2>Practice Exercise</h2>
         <div class="alert alert-success">
          <div class="alert-icon">üíª</div>
          <div class="alert-content">
           <div class="alert-title">E-Commerce Data Management</div>
           <div class="alert-message">Complete these data manipulation tasks:<ol>
             <li>Insert 5 new products with different categories</li>
             <li>Update prices with 10% discount for a category</li>
             <li>Insert an order with multiple items</li>
             <li>Update stock after order</li>
             <li>Delete cancelled orders older than 30 days</li>
             <li>Implement soft delete for customers</li>
             <li>Create an upsert for product views</li>
            </ol>
           </div>
          </div>
         </div>
         <details>
          <summary>üí° Click for Solution</summary>
          <pre><code class="language-sql">-- 1. Insert 5 new products
INSERT INTO products (name, category_id, price, stock_quantity, description) VALUES
    ('Wireless Mouse', 1, 29.99, 150, 'Ergonomic wireless mouse with USB receiver'),
    ('Mechanical Keyboard', 1, 89.99, 75, 'RGB backlit mechanical keyboard'),
    ('USB-C Hub', 1, 49.99, 200, '7-in-1 USB-C hub with HDMI'),
    ('Laptop Stand', 2, 39.99, 100, 'Adjustable aluminum laptop stand'),
    ('Webcam HD', 3, 79.99, 50, '1080p HD webcam with microphone');

-- 2. Update prices with 10% discount
START TRANSACTION;

-- First check what will be updated
SELECT product_id, name, price, price * 0.9 as new_price 
FROM products 
WHERE category_id = 1;

-- Apply discount
UPDATE products 
SET 
    price = ROUND(price * 0.9, 2),
    discount_percent = 10,
    updated_at = NOW()
WHERE category_id = 1;

COMMIT;

-- 3. Insert an order with multiple items
START TRANSACTION;

-- Insert order
INSERT INTO orders (customer_id, order_date, status, total_amount)
VALUES (123, NOW(), 'pending', 0);

SET @order_id = LAST_INSERT_ID();

-- Insert order items
INSERT INTO order_items (order_id, product_id, quantity, unit_price) VALUES
    (@order_id, 1, 2, 29.99),
    (@order_id, 2, 1, 89.99),
    (@order_id, 3, 3, 49.99);

-- Update order total
UPDATE orders o
SET total_amount = (
    SELECT SUM(quantity * unit_price)
    FROM order_items oi
    WHERE oi.order_id = o.order_id
)
WHERE order_id = @order_id;

COMMIT;

-- 4. Update stock after order
UPDATE products p
INNER JOIN order_items oi ON p.product_id = oi.product_id
SET p.stock_quantity = p.stock_quantity - oi.quantity
WHERE oi.order_id = @order_id;

-- Check for low stock
SELECT product_id, name, stock_quantity 
FROM products 
WHERE stock_quantity &lt; 10;

-- 5. Delete cancelled orders older than 30 days
START TRANSACTION;

-- Archive before deleting
CREATE TABLE IF NOT EXISTS orders_archive LIKE orders;

INSERT INTO orders_archive
SELECT * FROM orders 
WHERE status = 'cancelled' 
AND order_date &lt; DATE_SUB(NOW(), INTERVAL 30 DAY);

-- Delete order items first (or use CASCADE)
DELETE oi FROM order_items oi
INNER JOIN orders o ON oi.order_id = o.order_id
WHERE o.status = 'cancelled' 
AND o.order_date &lt; DATE_SUB(NOW(), INTERVAL 30 DAY);

-- Delete orders
DELETE FROM orders 
WHERE status = 'cancelled' 
AND order_date &lt; DATE_SUB(NOW(), INTERVAL 30 DAY);

SELECT ROW_COUNT() as deleted_orders;

COMMIT;

-- 6. Implement soft delete for customers
-- Add soft delete column
ALTER TABLE customers 
ADD COLUMN deleted_at TIMESTAMP NULL,
ADD INDEX idx_deleted (deleted_at);

-- Soft delete a customer
UPDATE customers 
SET 
    deleted_at = NOW(),
    status = 'deleted'
WHERE customer_id = 999;

-- Create view for active customers
CREATE OR REPLACE VIEW active_customers AS
SELECT * FROM customers 
WHERE deleted_at IS NULL;

-- Query only active customers
SELECT * FROM active_customers;

-- 7. Create upsert for product views
-- Create table if not exists
CREATE TABLE IF NOT EXISTS product_views (
    product_id INT PRIMARY KEY,
    view_count INT DEFAULT 1,
    last_viewed TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (product_id) REFERENCES products(product_id)
);

-- Upsert operation
INSERT INTO product_views (product_id, view_count, last_viewed)
VALUES (1, 1, NOW())
ON DUPLICATE KEY UPDATE
    view_count = view_count + 1,
    last_viewed = NOW();

-- Test multiple views
INSERT INTO product_views (product_id, view_count, last_viewed) VALUES
    (1, 1, NOW()),
    (2, 1, NOW()),
    (1, 1, NOW()),  -- Will increment product 1
    (3, 1, NOW())
ON DUPLICATE KEY UPDATE
    view_count = view_count + VALUES(view_count),
    last_viewed = VALUES(last_viewed);

-- Check results
SELECT p.name, pv.view_count, pv.last_viewed
FROM products p
LEFT JOIN product_views pv ON p.product_id = pv.product_id
ORDER BY pv.view_count DESC;</code></pre>
         </details>
        </section>
        <!-- Resources -->
        <section class="resources">
         <h2>Additional Resources</h2>
         <ul>
          <li>
           <a href="https://dev.mysql.com/doc/refman/8.0/en/insert.html" target="_blank">MySQL INSERT Reference</a>
          </li>
          <li>
           <a href="https://dev.mysql.com/doc/refman/8.0/en/update.html" target="_blank">MySQL UPDATE Reference</a>
          </li>
          <li>
           <a href="https://dev.mysql.com/doc/refman/8.0/en/delete.html" target="_blank">MySQL DELETE Reference</a>
          </li>
          <li>
           <a href="https://www.mysqltutorial.org/mysql-insert-multiple-rows/" target="_blank">Bulk Insert Tutorial</a>
          </li>
          <li>
           <a href="https://dev.mysql.com/doc/refman/8.0/en/insert-on-duplicate.html" target="_blank">INSERT ON DUPLICATE KEY</a>
          </li>
         </ul>
        </section>
       </div>
       <!-- Lesson Navigation -->
       <div class="lesson-navigation">
        <a class="lesson-nav-button prev" href="/03module/select_queries.html">
         <svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
          <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z">
          </path>
         </svg>
         <span>
          <small>Previous</small>
          <br/>SELECT Queries</span>
        </a>
        <button class="complete-lesson-btn">Mark as Complete</button>
        <a class="lesson-nav-button next" href="/03module/joins_relationships.html">
         <span>
          <small>Next</small>
          <br/>JOINs &amp; Relationships</span>
         <svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
          <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z">
          </path>
         </svg>
        </a>
       </div>
      </article>
     </div>
    </div>
   </main>
   <!-- Footer -->
   <footer class="site-footer" role="contentinfo">
    <div class="footer-container">
     <div class="footer-content">
      <div class="footer-section footer-about">
       <h3>PHP WordPress Development</h3>
       <p>Complete Web Development Course</p>
      </div>
      <div class="footer-section">
       <h4>Quick Links</h4>
       <ul class="footer-links">
        <li>
         <a href="/">Home</a>
        </li>
        <li>
         <a class="active" href="/module3.html">Module 3</a>
        </li>
        <li>
         <a href="/resources.html">Resources</a>
        </li>
       </ul>
      </div>
      <div class="footer-section">
       <h4>Support</h4>
       <ul class="footer-links">
        <li>
         <a href="/help.html">Help Center</a>
        </li>
        <li>
         <a href="/faq.html">FAQ</a>
        </li>
        <li>
         <a href="/contact.html">Contact</a>
        </li>
       </ul>
      </div>
     </div>
     <div class="footer-bottom">
      <div class="footer-bottom-content">
       <p class="copyright">¬© 2025 PHP WordPress Development Course</p>
       <nav class="footer-bottom-links">
        <a href="/privacy.html">Privacy</a>
        <span class="separator">|</span>
        <a href="/terms.html">Terms</a>
       </nav>
      </div>
     </div>
    </div>
   </footer>
  </div>
  <!-- Back to Top -->
  <button aria-label="Back to top" class="back-to-top" id="back-to-top">
   <svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="24">
    <path d="M12 19V5M12 5l-7 7M12 5l7 7">
    </path>
   </svg>
  </button>
  <!-- JavaScript -->
  <script src="/assets/js/navigation.js">
  </script>
  <script src="/assets/js/site-config.js">
  </script>
  <script src="/assets/js/sidebar-toggle.js">
  </script>
  <!-- Universal Mermaid Fix (Enhanced) -->
  <!-- Universal Mermaid Fix -->
  <script src="/assets/js/mermaid-universal-fix.js">
  </script>
 </body>
</html>
