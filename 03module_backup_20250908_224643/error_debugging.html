<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <!-- SEO Meta Tags -->
  <title>Error Handling and Debugging - PHP MySQL Development - PHP WordPress Course</title>
  <meta content="Master error handling, debugging techniques, logging strategies, and troubleshooting PHP MySQL applications" name="description"/>
  <meta content="PHP, MySQL, error handling, debugging, exceptions, logging, troubleshooting" name="keywords"/>
  <meta content="PHP WordPress Course" name="author"/>
  <link href="/assets/css/main.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
  <!-- Favicon -->
  <link href="/favicon.png" rel="icon" type="image/png"/>
  <link href="/favicon.png" rel="apple-touch-icon"/>
  <!-- CSS -->
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
 </head>
 <body>
  <!-- Skip to main content -->
  <a class="sr-only" href="#main-content">Skip to main content</a>
  <div class="page-wrapper">
   <!-- Header -->
   <header class="site-header" role="banner">
    <div class="header-container">
     <div class="site-branding">
      <a class="site-logo" href="/">
       <h1 class="site-title">PHP WordPress Development</h1>
      </a>
     </div>
     <nav aria-label="Main navigation" class="main-navigation" role="navigation">
      <button aria-expanded="false" aria-label="Toggle navigation" class="mobile-menu-btn">
       <span>
       </span>
       <span>
       </span>
       <span>
       </span>
      </button>
      <div class="nav-menu">
       <ul class="nav-list">
        <li class="nav-item">
         <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item dropdown">
         <button aria-haspopup="true" class="nav-link dropdown-toggle active">Modules</button>
         <div class="dropdown-menu">
          <a class="dropdown-item" href="/module1.html">Module 1: Web Fundamentals</a>
          <a class="dropdown-item" href="/module2.html">Module 2: PHP Fundamentals</a>
          <a class="dropdown-item active" href="/module3.html">Module 3: MySQL Database</a>
          <a class="dropdown-item" href="/module4.html">Module 4: WordPress &amp; Docker</a>
          <a class="dropdown-item" href="/module5.html">Module 5: Theme Development</a>
          <a class="dropdown-item" href="/module6.html">Module 6: Plugin Development</a>
          <a class="dropdown-item" href="/module7.html">Module 7: Advanced WordPress</a>
          <a class="dropdown-item" href="/module8.html">Module 8: Deployment</a>
          <a class="dropdown-item" href="/module9.html">Module 9: Final Project</a>
         </div>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/resources.html">Resources</a>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/about.html">About</a>
        </li>
       </ul>
      </div>
     </nav>
     <div class="search-container">
      <div class="search-input-wrapper">
       <svg class="search-icon" fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
        <path clip-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" fill-rule="evenodd">
        </path>
       </svg>
       <input aria-label="Search" class="search-input" placeholder="Search lessons..." type="search"/>
      </div>
      <div class="search-results">
      </div>
     </div>
    </div>
   </header>
   <!-- Progress Bar -->
   <div class="progress-container">
    <div class="progress-header">
     <h2 class="progress-title">Course Progress</h2>
     <span class="progress-text">Loading...</span>
    </div>
    <div class="progress-bar">
     <div class="progress-bar-fill">
      <span class="progress-bar-text">
      </span>
     </div>
    </div>
   </div>
   <!-- Breadcrumb -->
   <nav aria-label="Breadcrumb" class="breadcrumb container">
    <ol class="breadcrumb-list">
     <li class="breadcrumb-item">
      <a href="/">Home</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <a href="/module3.html">Module 3</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <span aria-current="page">Error Handling</span>
     </li>
    </ol>
   </nav>
   <!-- Main Content -->
   <main class="main-content" id="main-content" role="main">
    <div class="container">
     <div class="content-with-sidebar">
      <!-- Sidebar -->
      <aside class="sidebar">
       <div class="sidebar-nav">
        <h3 class="sidebar-title">Module 3: MySQL Database</h3>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 1: Introduction to Databases</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/database_concepts_terminology.html">Database concepts and terminology</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/types_of_databases.html">Types of databases (relational vs. non-relational)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/introduction_to_mysql.html">Introduction to MySQL</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/mysql_xampp_mamp.html">MySQL in XAMPP/MAMP environment</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/using_phpmyadmin.html">Using phpMyAdmin</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/creating_databases_tables.html">Creating databases and tables</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_database_schema.html">Homework: Create a database schema for a simple application</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 2: Database Design</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/data_modeling_concepts.html">Data modeling concepts</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/entity_relationship_diagrams.html">Entity-Relationship diagrams</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/normalization_principles.html">Normalization principles (1NF, 2NF, 3NF)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/primary_foreign_keys.html">Primary keys and foreign keys</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/indexes_importance.html">Indexes and their importance</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/database_constraints.html">Database constraints</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_database_design.html">Homework: Design a normalized database for an e-commerce website</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 3: SQL Fundamentals</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/sql_syntax_conventions.html">SQL syntax and conventions</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/mysql_data_types.html">Data types in MySQL</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/database_structure_ddl.html">Creating and modifying database structures (CREATE, ALTER, DROP)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/insert_update_delete.html">Basic data manipulation (INSERT, UPDATE, DELETE)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/select_queries.html">Simple queries with SELECT</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/where_filtering.html">Filtering data with WHERE</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/order_by_sorting.html">Sorting results with ORDER BY</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_sql_queries.html">Homework: Write SQL queries to manipulate data in your database</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 4: Advanced SQL</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/sql_joins.html">Joins (INNER, LEFT, RIGHT, FULL)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/aggregate_functions.html">Aggregating data (COUNT, SUM, AVG, MIN, MAX)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/group_by_having.html">Grouping data with GROUP BY</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/having_deep_dive.html">Filtering groups with HAVING</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/subqueries.html">Subqueries</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/views.html">Views</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/transactions.html">Transactions</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/stored_procedures.html">Stored procedures and functions</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_sql_queries.html">Homework: Write complex SQL queries with joins and aggregations</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 5: PHP and MySQL Integration</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/connecting_mysql.html">Connecting to MySQL with PHP</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/executing_queries.html">Executing SQL queries through PHP</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/prepared_statements.html">Prepared statements and security concerns</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/crud_operations.html">CRUD operations in PHP applications</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/result_sets.html">Handling results sets</a>
          </li>
          <li class="active">
           <a class="sidebar-link active" href="/03module/error_debugging.html">Error handling and debugging</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/php_mysql_integration.html">Final Project: Build a complete data-driven PHP application with MySQL backend</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Quick Links</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/module3.html">Module Overview</a>
          </li>
          <li>
           <a class="sidebar-link prev-session" href="/module2.html">← Prev: Module 2</a>
          </li>
          <li>
           <a class="sidebar-link next-session" href="/module4.html">Next: Module 4 →</a>
          </li>
          <li>
           <a class="sidebar-link" href="/resources.html">Resources</a>
          </li>
         </ul>
        </div>
       </div>
      </aside>
      <!-- Main Lesson Content -->
      <article class="lesson-content">
       <header class="lesson-header">
        <h1>Error Handling and Debugging</h1>
        <div class="lesson-meta">
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">
           </path>
          </svg>
          <span>Duration: 85 minutes</span>
         </div>
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 14l9-5-9-5-9 5 9 5z">
           </path>
          </svg>
          <span>Module 3: Debugging</span>
         </div>
        </div>
       </header>
       <!-- Learning Objectives -->
       <div class="lesson-objectives">
        <h2>Learning Objectives</h2>
        <ul>
         <li>Implement comprehensive error handling strategies</li>
         <li>Master exception handling in PHP</li>
         <li>Set up effective logging systems</li>
         <li>Use debugging tools and techniques</li>
         <li>Handle database-specific errors</li>
         <li>Create custom error handlers</li>
         <li>Implement error monitoring and alerting</li>
         <li>Debug performance issues</li>
        </ul>
       </div>
       <!-- Lesson Body -->
       <div class="lesson-body">
        <section>
         <h2>Error Handling Strategy</h2>
         <p class="lead">Robust error handling is crucial for maintaining stable applications and providing good user experience. Let's build a comprehensive system! 🛡️</p>
         <canvas height="450" id="errorCanvas" width="600">
         </canvas>
         <script>const ctx = document.getElementById('errorCanvas').getContext('2d');
                                    
                                    // Title
                                    ctx.font = 'bold 18px Arial';
                                    ctx.fillStyle = '#1f2937';
                                    ctx.fillText('Error Handling Architecture', 180, 30);
                                    
                                    // Error types
                                    const errorTypes = [
                                        { type: 'Syntax Errors', desc: 'Parse errors', color: '#fee2e2', border: '#dc2626', x: 50, y: 60 },
                                        { type: 'Runtime Errors', desc: 'Fatal/Warning', color: '#fef3c7', border: '#ca8a04', x: 220, y: 60 },
                                        { type: 'Logic Errors', desc: 'Bugs', color: '#dbeafe', border: '#2563eb', x: 390, y: 60 }
                                    ];
                                    
                                    errorTypes.forEach(error =>{
                                        ctx.fillStyle = error.color;
                                        ctx.fillRect(error.x, error.y, 160, 80);
                                        ctx.strokeStyle = error.border;
                                        ctx.lineWidth = 2;
                                        ctx.strokeRect(error.x, error.y, 160, 80);
                                        
                                        ctx.fillStyle = error.border;
                                        ctx.font = 'bold 12px Arial';
                                        ctx.fillText(error.type, error.x + 35, error.y + 35);
                                        
                                        ctx.fillStyle = '#6b7280';
                                        ctx.font = '10px Arial';
                                        ctx.fillText(error.desc, error.x + 50, error.y + 55);
                                    });
                                    
                                    // Handling layers
                                    ctx.fillStyle = '#e9d5ff';
                                    ctx.fillRect(50, 160, 520, 60);
                                    ctx.strokeStyle = '#7c3aed';
                                    ctx.strokeRect(50, 160, 520, 60);
                                    
                                    ctx.fillStyle = '#7c3aed';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('Error Handling Layer', 250, 180);
                                    
                                    ctx.font = '10px Arial';
                                    ctx.fillStyle = '#374151';
                                    ctx.fillText('try-catch | set_error_handler | set_exception_handler | register_shutdown_function', 100, 200);
                                    
                                    // Logging layer
                                    ctx.fillStyle = '#dcfce7';
                                    ctx.fillRect(50, 240, 520, 60);
                                    ctx.strokeStyle = '#16a34a';
                                    ctx.strokeRect(50, 240, 520, 60);
                                    
                                    ctx.fillStyle = '#166534';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('Logging & Monitoring', 245, 260);
                                    
                                    ctx.font = '10px Arial';
                                    ctx.fillStyle = '#374151';
                                    ctx.fillText('error_log | Monolog | Sentry | New Relic | Custom Logging', 150, 280);
                                    
                                    // User feedback
                                    ctx.fillStyle = '#e0f2fe';
                                    ctx.fillRect(50, 320, 520, 60);
                                    ctx.strokeStyle = '#0891b2';
                                    ctx.strokeRect(50, 320, 520, 60);
                                    
                                    ctx.fillStyle = '#0c4a6e';
                                    ctx.font = 'bold 12px Arial';
                                    ctx.fillText('User Feedback', 260, 340);
                                    
                                    ctx.font = '10px Arial';
                                    ctx.fillStyle = '#374151';
                                    ctx.fillText('Friendly error pages | Toast notifications | Form validation | Recovery options', 120, 360);
                                    
                                    // Arrows
                                    ctx.strokeStyle = '#6b7280';
                                    ctx.setLineDash([5, 5]);
                                    for (let i = 0; i< 3; i++) {
                                        ctx.beginPath();
                                        ctx.moveTo(130 + (i * 170), 140);
                                        ctx.lineTo(130 + (i * 170), 160);
                                        ctx.stroke();
                                    }
                                    ctx.setLineDash([]);</script>
         <div class="alert alert-info">
          <div class="alert-icon">💡</div>
          <div class="alert-content">
           <div class="alert-title">Error Handling Best Practices</div>
           <div class="alert-message">
            <ul>
             <li>Never display raw error messages to end users</li>
             <li>Log all errors for debugging and monitoring</li>
             <li>Use appropriate error levels (E_ERROR, E_WARNING, etc.)</li>
             <li>Implement graceful degradation</li>
             <li>Provide helpful error messages and recovery options</li>
             <li>Monitor errors in production environments</li>
            </ul>
           </div>
          </div>
         </div>
        </section>
        <section>
         <h2>Comprehensive Error Handling System</h2>
         <div class="mermaid">graph TB
                                        ERROR[Error Occurs] --&gt; CATCH[Error Handler]
                                        
                                        CATCH --&gt; TYPE{Error Type}
                                        TYPE --&gt; |Database| DB[Database Handler]
                                        TYPE --&gt; |Validation| VAL[Validation Handler]
                                        TYPE --&gt; |System| SYS[System Handler]
                                        
                                        DB --&gt; LOG[Log Error]
                                        VAL --&gt; LOG
                                        SYS --&gt; LOG
                                        
                                        LOG --&gt; NOTIFY{Severity}
                                        NOTIFY --&gt; |Critical| ALERT[Send Alert]
                                        NOTIFY --&gt; |Warning| MONITOR[Monitor]
                                        
                                        LOG --&gt; USER[User Message]
                                        
                                        style ERROR fill:#fee2e2
                                        style CATCH fill:#dbeafe
                                        style LOG fill:#dcfce7
                                        style ALERT fill:#fef3c7</div>
         <div class="real_world_example">
          <h3>Complete Error Handling Implementation</h3>
          <pre><code class="language-php">&lt;?php
// ========================================
// ERROR HANDLER CLASS
// ========================================

class ErrorHandler {
    private static $instance = null;
    private $logger;
    private $isDevelopment;
    private $errorLevels = [
        E_ERROR =&gt; 'Fatal Error',
        E_WARNING =&gt; 'Warning',
        E_PARSE =&gt; 'Parse Error',
        E_NOTICE =&gt; 'Notice',
        E_CORE_ERROR =&gt; 'Core Error',
        E_CORE_WARNING =&gt; 'Core Warning',
        E_COMPILE_ERROR =&gt; 'Compile Error',
        E_COMPILE_WARNING =&gt; 'Compile Warning',
        E_USER_ERROR =&gt; 'User Error',
        E_USER_WARNING =&gt; 'User Warning',
        E_USER_NOTICE =&gt; 'User Notice',
        E_STRICT =&gt; 'Strict Notice',
        E_RECOVERABLE_ERROR =&gt; 'Recoverable Error',
        E_DEPRECATED =&gt; 'Deprecated',
        E_USER_DEPRECATED =&gt; 'User Deprecated'
    ];
    
    private function __construct() {
        $this-&gt;isDevelopment = $_ENV['APP_ENV'] === 'development';
        $this-&gt;logger = new Logger();
        $this-&gt;registerHandlers();
    }
    
    public static function getInstance() {
        if (self::$instance === null) {
            self::$instance = new self();
        }
        return self::$instance;
    }
    
    /**
     * Register all error handlers
     */
    private function registerHandlers() {
        // Error handler
        set_error_handler([$this, 'handleError']);
        
        // Exception handler
        set_exception_handler([$this, 'handleException']);
        
        // Fatal error handler
        register_shutdown_function([$this, 'handleShutdown']);
        
        // Set error reporting level
        if ($this-&gt;isDevelopment) {
            error_reporting(E_ALL);
            ini_set('display_errors', 1);
        } else {
            error_reporting(E_ALL &amp; ~E_NOTICE &amp; ~E_DEPRECATED);
            ini_set('display_errors', 0);
        }
        
        ini_set('log_errors', 1);
        ini_set('error_log', __DIR__ . '/logs/php-error.log');
    }
    
    /**
     * Handle PHP errors
     */
    public function handleError($errno, $errstr, $errfile, $errline) {
        // Check if error reporting is disabled
        if (!(error_reporting() &amp; $errno)) {
            return false;
        }
        
        $errorType = $this-&gt;errorLevels[$errno] ?? 'Unknown Error';
        
        // Create error context
        $error = [
            'type' =&gt; $errorType,
            'message' =&gt; $errstr,
            'file' =&gt; $errfile,
            'line' =&gt; $errline,
            'trace' =&gt; debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS),
            'time' =&gt; date('Y-m-d H:i:s'),
            'request' =&gt; [
                'method' =&gt; $_SERVER['REQUEST_METHOD'] ?? 'CLI',
                'uri' =&gt; $_SERVER['REQUEST_URI'] ?? 'CLI',
                'ip' =&gt; $_SERVER['REMOTE_ADDR'] ?? 'localhost'
            ]
        ];
        
        // Log error
        $this-&gt;logError($error, $errno);
        
        // Display error in development
        if ($this-&gt;isDevelopment) {
            $this-&gt;displayError($error);
        }
        
        // Don't execute PHP internal error handler
        return true;
    }
    
    /**
     * Handle uncaught exceptions
     */
    public function handleException($exception) {
        $error = [
            'type' =&gt; 'Exception',
            'class' =&gt; get_class($exception),
            'message' =&gt; $exception-&gt;getMessage(),
            'file' =&gt; $exception-&gt;getFile(),
            'line' =&gt; $exception-&gt;getLine(),
            'trace' =&gt; $exception-&gt;getTrace(),
            'time' =&gt; date('Y-m-d H:i:s'),
            'request' =&gt; [
                'method' =&gt; $_SERVER['REQUEST_METHOD'] ?? 'CLI',
                'uri' =&gt; $_SERVER['REQUEST_URI'] ?? 'CLI',
                'ip' =&gt; $_SERVER['REMOTE_ADDR'] ?? 'localhost'
            ]
        ];
        
        // Log exception
        $this-&gt;logger-&gt;critical('Uncaught Exception', $error);
        
        // Display error page
        $this-&gt;displayErrorPage($exception);
    }
    
    /**
     * Handle fatal errors
     */
    public function handleShutdown() {
        $error = error_get_last();
        
        if ($error !== null &amp;&amp; in_array($error['type'], [E_ERROR, E_CORE_ERROR, E_COMPILE_ERROR, E_PARSE])) {
            $this-&gt;handleError($error['type'], $error['message'], $error['file'], $error['line']);
            
            // Send alert for fatal errors
            $this-&gt;sendAlert('Fatal Error', $error);
        }
    }
    
    /**
     * Log error based on severity
     */
    private function logError($error, $errno) {
        switch ($errno) {
            case E_ERROR:
            case E_CORE_ERROR:
            case E_COMPILE_ERROR:
            case E_PARSE:
                $this-&gt;logger-&gt;critical($error['message'], $error);
                $this-&gt;sendAlert('Critical Error', $error);
                break;
                
            case E_WARNING:
            case E_CORE_WARNING:
            case E_COMPILE_WARNING:
            case E_USER_WARNING:
                $this-&gt;logger-&gt;warning($error['message'], $error);
                break;
                
            case E_NOTICE:
            case E_USER_NOTICE:
                $this-&gt;logger-&gt;notice($error['message'], $error);
                break;
                
            default:
                $this-&gt;logger-&gt;info($error['message'], $error);
        }
    }
    
    /**
     * Display error in development
     */
    private function displayError($error) {
        echo "&lt;div style='border:2px solid #ff0000; padding:10px; margin:10px;'&gt;";
        echo "&lt;h3&gt;{$error['type']}: {$error['message']}&lt;/h3&gt;";
        echo "&lt;p&gt;File: {$error['file']} on line {$error['line']}&lt;/p&gt;";
        
        if (!empty($error['trace'])) {
            echo "&lt;h4&gt;Stack Trace:&lt;/h4&gt;&lt;pre&gt;";
            foreach ($error['trace'] as $i =&gt; $trace) {
                echo "#{$i} ";
                echo isset($trace['file']) ? $trace['file'] : '[internal]';
                echo isset($trace['line']) ? "({$trace['line']})" : '';
                echo isset($trace['function']) ? ": {$trace['function']}()" : '';
                echo "\n";
            }
            echo "&lt;/pre&gt;";
        }
        echo "&lt;/div&gt;";
    }
    
    /**
     * Display user-friendly error page
     */
    private function displayErrorPage($exception = null) {
        // Clear any existing output
        if (ob_get_length()) {
            ob_clean();
        }
        
        // Set appropriate HTTP status code
        http_response_code(500);
        
        // Load error template
        if ($this-&gt;isDevelopment &amp;&amp; $exception) {
            include __DIR__ . '/templates/error-dev.php';
        } else {
            include __DIR__ . '/templates/error-500.php';
        }
        
        exit;
    }
    
    /**
     * Send alert for critical errors
     */
    private function sendAlert($subject, $error) {
        // Email alert
        if (defined('ALERT_EMAIL')) {
            $message = "Error Details:\n" . print_r($error, true);
            mail(ALERT_EMAIL, $subject, $message);
        }
        
        // Slack notification
        if (defined('SLACK_WEBHOOK')) {
            $this-&gt;sendSlackNotification($subject, $error);
        }
    }
    
    /**
     * Send Slack notification
     */
    private function sendSlackNotification($subject, $error) {
        $payload = [
            'text' =&gt; $subject,
            'attachments' =&gt; [[
                'color' =&gt; 'danger',
                'fields' =&gt; [
                    ['title' =&gt; 'Error', 'value' =&gt; $error['message'], 'short' =&gt; false],
                    ['title' =&gt; 'File', 'value' =&gt; $error['file'], 'short' =&gt; true],
                    ['title' =&gt; 'Line', 'value' =&gt; $error['line'], 'short' =&gt; true],
                    ['title' =&gt; 'Time', 'value' =&gt; $error['time'], 'short' =&gt; true],
                    ['title' =&gt; 'URL', 'value' =&gt; $error['request']['uri'] ?? 'N/A', 'short' =&gt; true]
                ]
            ]]
        ];
        
        $ch = curl_init(SLACK_WEBHOOK);
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, json_encode($payload));
        curl_setopt($ch, CURLOPT_HTTPHEADER, ['Content-Type: application/json']);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, true);
        curl_exec($ch);
        curl_close($ch);
    }
}

// ========================================
// DATABASE ERROR HANDLER
// ========================================

class DatabaseErrorHandler {
    
    /**
     * Handle database connection errors
     */
    public static function handleConnectionError(PDOException $e) {
        $error = [
            'type' =&gt; 'Database Connection Error',
            'message' =&gt; self::sanitizeMessage($e-&gt;getMessage()),
            'code' =&gt; $e-&gt;getCode(),
            'time' =&gt; date('Y-m-d H:i:s')
        ];
        
        // Log error
        error_log(json_encode($error));
        
        // User-friendly message
        if ($_ENV['APP_ENV'] === 'production') {
            throw new Exception('Unable to connect to the database. Please try again later.');
        } else {
            throw $e;
        }
    }
    
    /**
     * Handle query errors
     */
    public static function handleQueryError(PDOException $e, $query = null) {
        $error = [
            'type' =&gt; 'Database Query Error',
            'message' =&gt; self::sanitizeMessage($e-&gt;getMessage()),
            'code' =&gt; $e-&gt;getCode(),
            'query' =&gt; $query,
            'time' =&gt; date('Y-m-d H:i:s')
        ];
        
        // Log error
        error_log(json_encode($error));
        
        // Check for specific error types
        if (strpos($e-&gt;getMessage(), 'Duplicate entry') !== false) {
            throw new ValidationException('This record already exists.');
        } elseif (strpos($e-&gt;getMessage(), 'foreign key constraint') !== false) {
            throw new ValidationException('This record cannot be deleted as it is referenced by other data.');
        } else {
            throw new Exception('A database error occurred. Please try again.');
        }
    }
    
    /**
     * Sanitize error messages
     */
    private static function sanitizeMessage($message) {
        // Remove sensitive information
        $message = preg_replace('/password=[\S]+/', 'password=***', $message);
        $message = preg_replace('/\b\d{4,}\b/', '***', $message); // Hide long numbers
        
        return $message;
    }
}

// ========================================
// CUSTOM EXCEPTIONS
// ========================================

class ValidationException extends Exception {
    protected $errors = [];
    
    public function __construct($message = "", $errors = [], $code = 400) {
        parent::__construct($message, $code);
        $this-&gt;errors = $errors;
    }
    
    public function getErrors() {
        return $this-&gt;errors;
    }
}

class AuthenticationException extends Exception {
    public function __construct($message = "Authentication failed", $code = 401) {
        parent::__construct($message, $code);
    }
}

class AuthorizationException extends Exception {
    public function __construct($message = "Access denied", $code = 403) {
        parent::__construct($message, $code);
    }
}

class NotFoundException extends Exception {
    public function __construct($message = "Resource not found", $code = 404) {
        parent::__construct($message, $code);
    }
}

// ========================================
// LOGGER CLASS
// ========================================

class Logger {
    private $logFile;
    private $logLevels = [
        'DEBUG' =&gt; 0,
        'INFO' =&gt; 1,
        'NOTICE' =&gt; 2,
        'WARNING' =&gt; 3,
        'ERROR' =&gt; 4,
        'CRITICAL' =&gt; 5,
        'ALERT' =&gt; 6,
        'EMERGENCY' =&gt; 7
    ];
    
    public function __construct($logFile = null) {
        $this-&gt;logFile = $logFile ?: __DIR__ . '/logs/app.log';
        $this-&gt;ensureLogDirectory();
    }
    
    private function ensureLogDirectory() {
        $dir = dirname($this-&gt;logFile);
        if (!is_dir($dir)) {
            mkdir($dir, 0777, true);
        }
    }
    
    public function log($level, $message, $context = []) {
        $timestamp = date('Y-m-d H:i:s');
        $contextJson = !empty($context) ? json_encode($context) : '';
        
        $logEntry = "[{$timestamp}] {$level}: {$message} {$contextJson}" . PHP_EOL;
        
        file_put_contents($this-&gt;logFile, $logEntry, FILE_APPEND | LOCK_EX);
        
        // Also log to separate files by level
        if (in_array($level, ['ERROR', 'CRITICAL', 'ALERT', 'EMERGENCY'])) {
            $errorFile = str_replace('.log', '-error.log', $this-&gt;logFile);
            file_put_contents($errorFile, $logEntry, FILE_APPEND | LOCK_EX);
        }
    }
    
    public function debug($message, $context = []) {
        $this-&gt;log('DEBUG', $message, $context);
    }
    
    public function info($message, $context = []) {
        $this-&gt;log('INFO', $message, $context);
    }
    
    public function notice($message, $context = []) {
        $this-&gt;log('NOTICE', $message, $context);
    }
    
    public function warning($message, $context = []) {
        $this-&gt;log('WARNING', $message, $context);
    }
    
    public function error($message, $context = []) {
        $this-&gt;log('ERROR', $message, $context);
    }
    
    public function critical($message, $context = []) {
        $this-&gt;log('CRITICAL', $message, $context);
    }
    
    public function alert($message, $context = []) {
        $this-&gt;log('ALERT', $message, $context);
    }
    
    public function emergency($message, $context = []) {
        $this-&gt;log('EMERGENCY', $message, $context);
    }
}</code></pre>
         </div>
        </section>
        <section>
         <h2>Debugging Techniques</h2>
         <canvas height="350" id="debugCanvas" width="600">
         </canvas>
         <script>const dCtx = document.getElementById('debugCanvas').getContext('2d');
                                    
                                    // Title
                                    dCtx.font = 'bold 16px Arial';
                                    dCtx.fillStyle = '#1f2937';
                                    dCtx.fillText('Debugging Tools & Techniques', 180, 30);
                                    
                                    // Debugging methods
                                    const methods = [
                                        { name: 'var_dump()', desc: 'Display variable info', x: 50, y: 60 },
                                        { name: 'print_r()', desc: 'Human-readable info', x: 220, y: 60 },
                                        { name: 'error_log()', desc: 'Log to file', x: 390, y: 60 },
                                        { name: 'Xdebug', desc: 'Step debugging', x: 50, y: 150 },
                                        { name: 'Debug Bar', desc: 'Toolbar info', x: 220, y: 150 },
                                        { name: 'Query Log', desc: 'SQL debugging', x: 390, y: 150 }
                                    ];
                                    
                                    methods.forEach((method, i) =>{
                                        const color = i< 3 ? '#dbeafe' : '#dcfce7';
                                        const border = i< 3 ? '#2563eb' : '#16a34a';
                                        
                                        dCtx.fillStyle = color;
                                        dCtx.fillRect(method.x, method.y, 150, 70);
                                        dCtx.strokeStyle = border;
                                        dCtx.lineWidth = 2;
                                        dCtx.strokeRect(method.x, method.y, 150, 70);
                                        
                                        dCtx.fillStyle = border;
                                        dCtx.font = 'bold 11px Arial';
                                        dCtx.fillText(method.name, method.x + 35, method.y + 30);
                                        
                                        dCtx.fillStyle = '#6b7280';
                                        dCtx.font = '10px Arial';
                                        dCtx.fillText(method.desc, method.x + 30, method.y + 50);
                                    });
                                    
                                    // Performance profiling
                                    dCtx.fillStyle = '#fef3c7';
                                    dCtx.fillRect(50, 240, 500, 90);
                                    dCtx.strokeStyle = '#ca8a04';
                                    dCtx.strokeRect(50, 240, 500, 90);
                                    
                                    dCtx.fillStyle = '#92400e';
                                    dCtx.font = 'bold 12px Arial';
                                    dCtx.fillText('Performance Profiling', 230, 260);
                                    
                                    dCtx.font = '10px Arial';
                                    dCtx.fillStyle = '#374151';
                                    const tools = ['• microtime() for timing', '• memory_get_usage()', '• Query EXPLAIN', '• Blackfire.io', '• New Relic'];
                                    tools.forEach((tool, i) =>{
                                        const x = 70 + (i % 3) * 160;
                                        const y = 280 + Math.floor(i / 3) * 20;
                                        dCtx.fillText(tool, x, y);
                                    });</script>
         <div class="best_practice">
          <h3>Advanced Debugging Implementation</h3>
          <pre><code class="language-php">&lt;?php
// ========================================
// DEBUG HELPER CLASS
// ========================================

class Debug {
    private static $startTime;
    private static $queries = [];
    private static $timers = [];
    
    /**
     * Pretty print variable
     */
    public static function dump($variable, $label = null, $exit = false) {
        echo "&lt;pre style='background:#f4f4f4; padding:10px; border:1px solid #ddd;'&gt;";
        
        if ($label) {
            echo "&lt;strong&gt;{$label}:&lt;/strong&gt;\n";
        }
        
        if (is_bool($variable)) {
            echo $variable ? 'true' : 'false';
        } elseif (is_null($variable)) {
            echo 'null';
        } else {
            print_r($variable);
        }
        
        echo "&lt;/pre&gt;";
        
        if ($exit) {
            exit;
        }
    }
    
    /**
     * Debug with backtrace
     */
    public static function trace($variable = null, $depth = 5) {
        $trace = debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS, $depth);
        
        echo "&lt;div style='background:#fff3cd; padding:10px; border:1px solid #ffc107;'&gt;";
        echo "&lt;h4&gt;Debug Trace&lt;/h4&gt;";
        
        if ($variable !== null) {
            echo "&lt;strong&gt;Value:&lt;/strong&gt; ";
            var_dump($variable);
            echo "&lt;br&gt;&lt;br&gt;";
        }
        
        echo "&lt;strong&gt;Call Stack:&lt;/strong&gt;&lt;ol&gt;";
        foreach ($trace as $item) {
            echo "&lt;li&gt;";
            echo isset($item['file']) ? $item['file'] : '[internal]';
            echo isset($item['line']) ? " ({$item['line']})" : '';
            echo isset($item['function']) ? " - {$item['function']}()" : '';
            echo "&lt;/li&gt;";
        }
        echo "&lt;/ol&gt;&lt;/div&gt;";
    }
    
    /**
     * Log to file with context
     */
    public static function log($data, $label = null) {
        $logFile = __DIR__ . '/logs/debug.log';
        $timestamp = date('Y-m-d H:i:s');
        
        $entry = "[{$timestamp}]";
        
        if ($label) {
            $entry .= " {$label}:";
        }
        
        $entry .= " " . (is_string($data) ? $data : json_encode($data)) . PHP_EOL;
        
        file_put_contents($logFile, $entry, FILE_APPEND | LOCK_EX);
    }
    
    /**
     * Start timer
     */
    public static function startTimer($name = 'default') {
        self::$timers[$name] = microtime(true);
    }
    
    /**
     * End timer and display result
     */
    public static function endTimer($name = 'default', $display = true) {
        if (!isset(self::$timers[$name])) {
            return false;
        }
        
        $elapsed = microtime(true) - self::$timers[$name];
        $milliseconds = round($elapsed * 1000, 2);
        
        if ($display) {
            echo "&lt;div style='background:#d4edda; padding:5px; border:1px solid #c3e6cb;'&gt;";
            echo "Timer '{$name}': {$milliseconds}ms";
            echo "&lt;/div&gt;";
        }
        
        unset(self::$timers[$name]);
        
        return $milliseconds;
    }
    
    /**
     * Memory usage
     */
    public static function memory($label = null) {
        $usage = memory_get_usage(true);
        $peak = memory_get_peak_usage(true);
        
        $format = function($bytes) {
            $units = ['B', 'KB', 'MB', 'GB'];
            $bytes = max($bytes, 0);
            $pow = floor(($bytes ? log($bytes) : 0) / log(1024));
            $pow = min($pow, count($units) - 1);
            
            return round($bytes / pow(1024, $pow), 2) . ' ' . $units[$pow];
        };
        
        echo "&lt;div style='background:#e2e3e5; padding:5px; border:1px solid #d6d8db;'&gt;";
        
        if ($label) {
            echo "&lt;strong&gt;{$label}&lt;/strong&gt;&lt;br&gt;";
        }
        
        echo "Memory: " . $format($usage) . " / Peak: " . $format($peak);
        echo "&lt;/div&gt;";
    }
    
    /**
     * SQL query logger
     */
    public static function logQuery($query, $params = [], $time = null) {
        self::$queries[] = [
            'query' =&gt; $query,
            'params' =&gt; $params,
            'time' =&gt; $time,
            'backtrace' =&gt; debug_backtrace(DEBUG_BACKTRACE_IGNORE_ARGS, 3)
        ];
    }
    
    /**
     * Display all queries
     */
    public static function showQueries() {
        if (empty(self::$queries)) {
            return;
        }
        
        echo "&lt;div style='background:#f8f9fa; padding:10px; border:1px solid #dee2e6;'&gt;";
        echo "&lt;h4&gt;SQL Queries (" . count(self::$queries) . ")&lt;/h4&gt;";
        
        $totalTime = 0;
        
        foreach (self::$queries as $i =&gt; $query) {
            echo "&lt;div style='margin-bottom:10px; padding:5px; background:white;'&gt;";
            echo "&lt;strong&gt;Query #" . ($i + 1) . "&lt;/strong&gt;";
            
            if ($query['time']) {
                echo " ({$query['time']}ms)";
                $totalTime += $query['time'];
            }
            
            echo "&lt;pre style='margin:5px 0;'&gt;" . htmlspecialchars($query['query']) . "&lt;/pre&gt;";
            
            if (!empty($query['params'])) {
                echo "&lt;small&gt;Params: " . json_encode($query['params']) . "&lt;/small&gt;";
            }
            
            echo "&lt;/div&gt;";
        }
        
        echo "&lt;strong&gt;Total time: {$totalTime}ms&lt;/strong&gt;";
        echo "&lt;/div&gt;";
    }
    
    /**
     * Debug bar for development
     */
    public static function renderDebugBar() {
        if (($_ENV['APP_ENV'] ?? 'production') !== 'development') {
            return;
        }
        
        $executionTime = isset($_SERVER['REQUEST_TIME_FLOAT']) 
            ? round((microtime(true) - $_SERVER['REQUEST_TIME_FLOAT']) * 1000, 2)
            : 0;
        $memoryUsage = round(memory_get_peak_usage(true) / 1024 / 1024, 2);
        $queryCount = count(self::$queries);
        
        echo &lt;&lt;<html $password);="" $pdo="new" $query="SELECT * FROM users WHERE status = ?" $stmt="$pdo-" $username,="" &gt;="" &gt;⏱️="" &gt;✖&lt;="" &gt;👤="" &gt;💾="" &gt;📁="" &gt;🔍="" &lt;="" &lt;button="" &lt;div="" &lt;span="" ;="" =="//" button&gt;="" debug="" debug::starttimer('database');="" div&gt;="" error="" errorhandler::getinstance();="" examples="" handler="" html;="" id="debug-bar" initialize="" log="" onclick="document.getElementById('debug-bar').style.display='none'" pdo($dsn,="" queries&lt;="" query="" span&gt;="" style="float:right; background:transparent; color:white; border:none; cursor:pointer;" try="" usage="" {="" {$_server['remote_addr']}&lt;="" {$_server['request_uri']}&lt;="" {$executiontime}ms&lt;="" {$memoryusage}mb&lt;="" {$querycount}="" }="">prepare($query);
    $stmt-&gt;execute(['active']);
    
    Debug::logQuery($query, ['active'], Debug::endTimer('database', false));
    
} catch (PDOException $e) {
    DatabaseErrorHandler::handleConnectionError($e);
}

// Debug output
Debug::dump($_POST, 'POST Data');
Debug::trace('Checkpoint reached');
Debug::memory('After processing');
Debug::showQueries();
Debug::renderDebugBar();</html></code></pre>
         </div>
        </section>
        <!-- Practice Exercise -->
        <section>
         <h2>Practice Exercise</h2>
         <div class="alert alert-success">
          <div class="alert-icon">💻</div>
          <div class="alert-content">
           <div class="alert-title">Error Handling Challenges</div>
           <div class="alert-message">Implement these debugging features:<ol>
             <li>Create a comprehensive error logging system</li>
             <li>Build custom exception classes for your app</li>
             <li>Implement error monitoring dashboard</li>
             <li>Create debugging toolbar for development</li>
             <li>Build query profiler and analyzer</li>
             <li>Implement error recovery mechanisms</li>
             <li>Create user-friendly error pages</li>
             <li>Build automated error alerting system</li>
            </ol>
           </div>
          </div>
         </div>
        </section>
        <!-- Resources -->
        <section class="resources">
         <h2>Additional Resources</h2>
         <ul>
          <li>
           <a href="https://www.php.net/manual/en/book.errorfunc.php" target="_blank">PHP Error Handling</a>
          </li>
          <li>
           <a href="https://xdebug.org/" target="_blank">Xdebug Documentation</a>
          </li>
          <li>
           <a href="https://github.com/Seldaek/monolog" target="_blank">Monolog Logger</a>
          </li>
          <li>
           <a href="https://sentry.io/for/php/" target="_blank">Sentry Error Tracking</a>
          </li>
          <li>
           <a href="https://blackfire.io/" target="_blank">Blackfire Profiler</a>
          </li>
         </ul>
        </section>
       </div>
       <!-- Lesson Navigation -->
       <div class="lesson-navigation">
        <a class="lesson-nav-button prev" href="/03module/result_sets.html">
         <svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
          <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z">
          </path>
         </svg>
         <span>
          <small>Previous</small>
          <br/>Result Sets</span>
        </a>
        <button class="complete-lesson-btn">Mark as Complete</button>
        <a class="lesson-nav-button next" href="/03module/final_project.html">
         <span>
          <small>Next</small>
          <br/>Final Project</span>
         <svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
          <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z">
          </path>
         </svg>
        </a>
       </div>
      </article>
     </div>
    </div>
   </main>
   <!-- Footer -->
   <footer class="site-footer" role="contentinfo">
    <div class="footer-container">
     <div class="footer-content">
      <div class="footer-section footer-about">
       <h3>PHP WordPress Development</h3>
       <p>Complete Web Development Course</p>
      </div>
      <div class="footer-section">
       <h4>Quick Links</h4>
       <ul class="footer-links">
        <li>
         <a href="/">Home</a>
        </li>
        <li>
         <a class="active" href="/module3.html">Module 3</a>
        </li>
        <li>
         <a href="/resources.html">Resources</a>
        </li>
       </ul>
      </div>
      <div class="footer-section">
       <h4>Support</h4>
       <ul class="footer-links">
        <li>
         <a href="/help.html">Help Center</a>
        </li>
        <li>
         <a href="/faq.html">FAQ</a>
        </li>
        <li>
         <a href="/contact.html">Contact</a>
        </li>
       </ul>
      </div>
     </div>
     <div class="footer-bottom">
      <div class="footer-bottom-content">
       <p class="copyright">© 2025 PHP WordPress Development Course</p>
       <nav class="footer-bottom-links">
        <a href="/privacy.html">Privacy</a>
        <span class="separator">|</span>
        <a href="/terms.html">Terms</a>
       </nav>
      </div>
     </div>
    </div>
   </footer>
  </div>
  <!-- Back to Top -->
  <button aria-label="Back to top" class="back-to-top" id="back-to-top">
   <svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="24">
    <path d="M12 19V5M12 5l-7 7M12 5l7 7">
    </path>
   </svg>
  </button>
  <!-- JavaScript -->
  <script src="/assets/js/navigation.js">
  </script>
  <script src="/assets/js/site-config.js">
  </script>
  <script src="/assets/js/sidebar-toggle.js">
  </script>
  <!-- Universal Mermaid Fix (Enhanced) -->
  <!-- Universal Mermaid Fix -->
  <script src="/assets/js/mermaid-universal-fix.js">
  </script>
 </body>
</html>
