<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <!-- SEO Meta Tags -->
  <title>Primary Keys and Foreign Keys - PHP WordPress Course</title>
  <meta content="Master database keys and relationships - the foundation of relational database design" name="description"/>
  <meta content="PHP, WordPress, MySQL, primary key, foreign key, database relationships, constraints" name="keywords"/>
  <meta content="PHP WordPress Course" name="author"/>
  <link href="/assets/css/main.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
  <!-- Favicon -->
  <link href="/favicon.png" rel="icon" type="image/png"/>
  <link href="/favicon.png" rel="apple-touch-icon"/>
  <!-- CSS -->
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
 </head>
 <body>
  <!-- Skip to main content -->
  <a class="sr-only" href="#main-content">Skip to main content</a>
  <div class="page-wrapper">
   <!-- Header -->
   <header class="site-header" role="banner">
    <div class="header-container">
     <div class="site-branding">
      <a class="site-logo" href="/">
       <h1 class="site-title">PHP WordPress Development</h1>
      </a>
     </div>
     <nav aria-label="Main navigation" class="main-navigation" role="navigation">
      <button aria-expanded="false" aria-label="Toggle navigation" class="mobile-menu-btn">
       <span>
       </span>
       <span>
       </span>
       <span>
       </span>
      </button>
      <div class="nav-menu">
       <ul class="nav-list">
        <li class="nav-item">
         <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item dropdown">
         <button aria-haspopup="true" class="nav-link dropdown-toggle active">Modules</button>
         <div class="dropdown-menu">
          <a class="dropdown-item" href="/module1.html">Module 1: Web Fundamentals</a>
          <a class="dropdown-item" href="/module2.html">Module 2: PHP Fundamentals</a>
          <a class="dropdown-item active" href="/module3.html">Module 3: MySQL Database</a>
          <a class="dropdown-item" href="/module4.html">Module 4: WordPress &amp; Docker</a>
          <a class="dropdown-item" href="/module5.html">Module 5: Theme Development</a>
          <a class="dropdown-item" href="/module6.html">Module 6: Plugin Development</a>
          <a class="dropdown-item" href="/module7.html">Module 7: Advanced WordPress</a>
          <a class="dropdown-item" href="/module8.html">Module 8: Deployment</a>
          <a class="dropdown-item" href="/module9.html">Module 9: Final Project</a>
         </div>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/resources.html">Resources</a>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/about.html">About</a>
        </li>
       </ul>
      </div>
     </nav>
     <div class="search-container">
      <div class="search-input-wrapper">
       <svg class="search-icon" fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
        <path clip-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" fill-rule="evenodd">
        </path>
       </svg>
       <input aria-label="Search" class="search-input" placeholder="Search lessons..." type="search"/>
      </div>
      <div class="search-results">
      </div>
     </div>
    </div>
   </header>
   <!-- Progress Bar -->
   <div class="progress-container">
    <div class="progress-header">
     <h2 class="progress-title">Course Progress</h2>
     <span class="progress-text">Loading...</span>
    </div>
    <div class="progress-bar">
     <div class="progress-bar-fill">
      <span class="progress-bar-text">
      </span>
     </div>
    </div>
   </div>
   <!-- Breadcrumb -->
   <nav aria-label="Breadcrumb" class="breadcrumb container">
    <ol class="breadcrumb-list">
     <li class="breadcrumb-item">
      <a href="/">Home</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <a href="/module3.html">Module 3</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <span aria-current="page">Keys &amp; Relationships</span>
     </li>
    </ol>
   </nav>
   <!-- Main Content -->
   <main class="main-content" id="main-content" role="main">
    <div class="container">
     <div class="content-with-sidebar">
      <!-- Sidebar -->
      <aside class="sidebar">
       <div class="sidebar-nav">
        <h3 class="sidebar-title">Module 3: MySQL Database</h3>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 1: Introduction to Databases</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/database_concepts_terminology.html">Database concepts and terminology</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/types_of_databases.html">Types of databases (relational vs. non-relational)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/introduction_to_mysql.html">Introduction to MySQL</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/mysql_xampp_mamp.html">MySQL in XAMPP/MAMP environment</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/using_phpmyadmin.html">Using phpMyAdmin</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/creating_databases_tables.html">Creating databases and tables</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_database_schema.html">Homework: Create a database schema for a simple application</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 2: Database Design</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/data_modeling_concepts.html">Data modeling concepts</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/entity_relationship_diagrams.html">Entity-Relationship diagrams</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/normalization_principles.html">Normalization principles (1NF, 2NF, 3NF)</a>
          </li>
          <li class="active">
           <a class="sidebar-link active" href="/03module/primary_foreign_keys.html">Primary keys and foreign keys</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/indexes_importance.html">Indexes and their importance</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/database_constraints.html">Database constraints</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_database_design.html">Homework: Design a normalized database for an e-commerce website</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 3: SQL Fundamentals</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/sql_syntax_conventions.html">SQL syntax and conventions</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/mysql_data_types.html">Data types in MySQL</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/database_structure_ddl.html">Creating and modifying database structures (CREATE, ALTER, DROP)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/insert_update_delete.html">Basic data manipulation (INSERT, UPDATE, DELETE)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/select_queries.html">Simple queries with SELECT</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/where_filtering.html">Filtering data with WHERE</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/order_by_sorting.html">Sorting results with ORDER BY</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_sql_queries.html">Homework: Write SQL queries to manipulate data in your database</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 4: Advanced SQL</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/sql_joins.html">Joins (INNER, LEFT, RIGHT, FULL)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/aggregate_functions.html">Aggregating data (COUNT, SUM, AVG, MIN, MAX)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/group_by_having.html">Grouping data with GROUP BY</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/having_deep_dive.html">Filtering groups with HAVING</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/subqueries.html">Subqueries</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/views.html">Views</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/transactions.html">Transactions</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/stored_procedures.html">Stored procedures and functions</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/homework_sql_queries.html">Homework: Write complex SQL queries with joins and aggregations</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 5: PHP and MySQL Integration</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/03module/connecting_mysql.html">Connecting to MySQL with PHP</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/executing_queries.html">Executing SQL queries through PHP</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/prepared_statements.html">Prepared statements and security concerns</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/crud_operations.html">CRUD operations in PHP applications</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/result_sets.html">Handling results sets</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/error_debugging.html">Error handling and debugging</a>
          </li>
          <li>
           <a class="sidebar-link" href="/03module/php_mysql_integration.html">Final Project: Build a complete data-driven PHP application with MySQL backend</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Quick Links</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/module3.html">Module Overview</a>
          </li>
          <li>
           <a class="sidebar-link prev-session" href="/module2.html">← Prev: Module 2</a>
          </li>
          <li>
           <a class="sidebar-link next-session" href="/module4.html">Next: Module 4 →</a>
          </li>
          <li>
           <a class="sidebar-link" href="/resources.html">Resources</a>
          </li>
         </ul>
        </div>
       </div>
      </aside>
      <!-- Main Lesson Content -->
      <article class="lesson-content">
       <header class="lesson-header">
        <h1>Primary Keys and Foreign Keys</h1>
        <div class="lesson-meta">
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">
           </path>
          </svg>
          <span>Duration: 75 minutes</span>
         </div>
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 14l9-5-9-5-9 5 9 5z">
           </path>
          </svg>
          <span>Module 3: Session 2</span>
         </div>
        </div>
       </header>
       <!-- Learning Objectives -->
       <div class="lesson-objectives">
        <h2>Learning Objectives</h2>
        <ul>
         <li>Understand the purpose and importance of primary keys</li>
         <li>Learn different types of primary keys (natural vs surrogate)</li>
         <li>Master foreign key concepts and referential integrity</li>
         <li>Implement one-to-one, one-to-many, and many-to-many relationships</li>
         <li>Apply CASCADE operations and constraints</li>
         <li>Design composite keys when appropriate</li>
        </ul>
       </div>
       <!-- Lesson Body -->
       <div class="lesson-body">
        <section>
         <h2>What are Database Keys?</h2>
         <p class="lead">Keys are the foundation of relational databases. They uniquely identify records and establish relationships between tables. Think of them as the ID cards and connections in your database! 🔑</p>
         <canvas height="400" id="keysOverviewCanvas" width="600">
         </canvas>
         <script>const ctx = document.getElementById('keysOverviewCanvas').getContext('2d');
                                    
                                    // Title
                                    ctx.font = 'bold 18px Arial';
                                    ctx.fillStyle = '#1f2937';
                                    ctx.fillText('Database Keys Overview', 200, 30);
                                    
                                    // Primary Key Box
                                    ctx.fillStyle = '#dbeafe';
                                    ctx.fillRect(50, 60, 250, 150);
                                    ctx.strokeStyle = '#2563eb';
                                    ctx.lineWidth = 2;
                                    ctx.strokeRect(50, 60, 250, 150);
                                    
                                    // Key icon
                                    ctx.fillStyle = '#fbbf24';
                                    ctx.beginPath();
                                    ctx.arc(90, 100, 15, 0, Math.PI * 2);
                                    ctx.fill();
                                    ctx.fillStyle = '#2563eb';
                                    ctx.fillRect(85, 100, 30, 20);
                                    
                                    ctx.fillStyle = '#1e40af';
                                    ctx.font = 'bold 16px Arial';
                                    ctx.fillText('PRIMARY KEY', 130, 100);
                                    
                                    ctx.fillStyle = '#64748b';
                                    ctx.font = '12px Arial';
                                    ctx.fillText('• Uniquely identifies each row', 70, 140);
                                    ctx.fillText('• Cannot be NULL', 70, 160);
                                    ctx.fillText('• Only one per table', 70, 180);
                                    ctx.fillText('• Never changes', 70, 200);
                                    
                                    // Foreign Key Box
                                    ctx.fillStyle = '#dcfce7';
                                    ctx.fillRect(320, 60, 250, 150);
                                    ctx.strokeStyle = '#16a34a';
                                    ctx.strokeRect(320, 60, 250, 150);
                                    
                                    // Link icon
                                    ctx.strokeStyle = '#16a34a';
                                    ctx.lineWidth = 3;
                                    ctx.beginPath();
                                    ctx.moveTo(360, 90);
                                    ctx.lineTo(380, 110);
                                    ctx.moveTo(380, 90);
                                    ctx.lineTo(360, 110);
                                    ctx.stroke();
                                    
                                    ctx.fillStyle = '#166534';
                                    ctx.font = 'bold 16px Arial';
                                    ctx.fillText('FOREIGN KEY', 400, 100);
                                    
                                    ctx.fillStyle = '#64748b';
                                    ctx.font = '12px Arial';
                                    ctx.fillText('• Links to another table', 340, 140);
                                    ctx.fillText('• References primary key', 340, 160);
                                    ctx.fillText('• Can be NULL', 340, 180);
                                    ctx.fillText('• Multiple allowed per table', 340, 200);
                                    
                                    // Relationship arrow
                                    ctx.strokeStyle = '#6b7280';
                                    ctx.lineWidth = 2;
                                    ctx.setLineDash([5, 5]);
                                    ctx.beginPath();
                                    ctx.moveTo(175, 220);
                                    ctx.lineTo(175, 260);
                                    ctx.lineTo(445, 260);
                                    ctx.lineTo(445, 220);
                                    ctx.stroke();
                                    ctx.setLineDash([]);
                                    
                                    ctx.fillStyle = '#dc2626';
                                    ctx.font = 'bold 14px Arial';
                                    ctx.fillText('Creates Relationships', 240, 280);
                                    
                                    // Example tables
                                    ctx.fillStyle = '#f3f4f6';
                                    ctx.fillRect(50, 310, 230, 70);
                                    ctx.fillStyle = '#374151';
                                    ctx.font = '11px Arial';
                                    ctx.fillText('users table:', 60, 330);
                                    ctx.fillText('user_id (PK) | name | email', 60, 350);
                                    ctx.fillText('1 | John | john@email.com', 60, 365);
                                    
                                    ctx.fillStyle = '#f3f4f6';
                                    ctx.fillRect(320, 310, 230, 70);
                                    ctx.fillStyle = '#374151';
                                    ctx.fillText('posts table:', 330, 330);
                                    ctx.fillText('post_id (PK) | user_id (FK) | title', 330, 350);
                                    ctx.fillText('101 | 1 | My First Post', 330, 365);</script>
         <div class="alert alert-info">
          <div class="alert-icon">💡</div>
          <div class="alert-content">
           <div class="alert-title">Key Concept</div>
           <div class="alert-message">Every table should have a primary key, and foreign keys create the "relational" part of relational databases!</div>
          </div>
         </div>
        </section>
        <section>
         <h2>Primary Keys in Detail</h2>
         <div class="best_practice">
          <h3>Primary Key Rules</h3>
          <ul>
           <li>🔑<strong>Unique:</strong>No two rows can have the same primary key value</li>
           <li>🚫<strong>Not NULL:</strong>Every row must have a primary key value</li>
           <li>1️⃣<strong>Single:</strong>Only one primary key per table (but can be composite)</li>
           <li>🔒<strong>Immutable:</strong>Should never change once assigned</li>
           <li>⚡<strong>Indexed:</strong>Automatically creates a clustered index</li>
          </ul>
         </div>
         <h3>Types of Primary Keys</h3>
         <canvas height="350" id="pkTypesCanvas" width="600">
         </canvas>
         <script>const pkCtx = document.getElementById('pkTypesCanvas').getContext('2d');
                                    
                                    // Title
                                    pkCtx.font = 'bold 14px Arial';
                                    pkCtx.fillStyle = '#1f2937';
                                    pkCtx.fillText('Primary Key Types', 240, 25);
                                    
                                    // Natural Key
                                    pkCtx.fillStyle = '#fef3c7';
                                    pkCtx.fillRect(50, 50, 250, 130);
                                    pkCtx.fillStyle = '#92400e';
                                    pkCtx.font = 'bold 12px Arial';
                                    pkCtx.fillText('Natural Key', 130, 70);
                                    
                                    pkCtx.fillStyle = '#78350f';
                                    pkCtx.font = '11px Arial';
                                    pkCtx.fillText('Uses existing data as key', 60, 95);
                                    pkCtx.fillText('Examples:', 60, 115);
                                    pkCtx.fillText('• Email address', 70, 135);
                                    pkCtx.fillText('• ISBN for books', 70, 150);
                                    pkCtx.fillText('• Social Security Number', 70, 165);
                                    
                                    // Surrogate Key
                                    pkCtx.fillStyle = '#dbeafe';
                                    pkCtx.fillRect(320, 50, 250, 130);
                                    pkCtx.fillStyle = '#1e40af';
                                    pkCtx.font = 'bold 12px Arial';
                                    pkCtx.fillText('Surrogate Key', 390, 70);
                                    
                                    pkCtx.fillStyle = '#1e3a8a';
                                    pkCtx.font = '11px Arial';
                                    pkCtx.fillText('System-generated identifier', 330, 95);
                                    pkCtx.fillText('Examples:', 330, 115);
                                    pkCtx.fillText('• AUTO_INCREMENT id', 340, 135);
                                    pkCtx.fillText('• UUID', 340, 150);
                                    pkCtx.fillText('• Sequential number', 340, 165);
                                    
                                    // Composite Key
                                    pkCtx.fillStyle = '#e9d5ff';
                                    pkCtx.fillRect(175, 200, 250, 130);
                                    pkCtx.fillStyle = '#6b21a8';
                                    pkCtx.font = 'bold 12px Arial';
                                    pkCtx.fillText('Composite Key', 260, 220);
                                    
                                    pkCtx.fillStyle = '#581c87';
                                    pkCtx.font = '11px Arial';
                                    pkCtx.fillText('Multiple columns form the key', 190, 245);
                                    pkCtx.fillText('Example: order_items table', 190, 265);
                                    pkCtx.fillText('PRIMARY KEY (order_id, product_id)', 190, 285);
                                    pkCtx.fillText('Used for junction tables', 190, 305);</script>
         <div class="real_world_example">
          <h3>Creating Primary Keys in MySQL</h3>
          <pre><code class="language-sql">-- Method 1: Define during table creation
CREATE TABLE users (
    id INT AUTO_INCREMENT PRIMARY KEY,
    email VARCHAR(100) UNIQUE NOT NULL,
    username VARCHAR(50) NOT NULL
);

-- Method 2: Natural key example
CREATE TABLE books (
    isbn VARCHAR(13) PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    author VARCHAR(100)
);

-- Method 3: Composite primary key
CREATE TABLE order_items (
    order_id INT,
    product_id INT,
    quantity INT NOT NULL,
    price DECIMAL(10,2),
    PRIMARY KEY (order_id, product_id)
);

-- Method 4: Add primary key to existing table
ALTER TABLE customers 
ADD PRIMARY KEY (customer_id);

-- Method 5: UUID as primary key
CREATE TABLE sessions (
    session_id CHAR(36) PRIMARY KEY DEFAULT (UUID()),
    user_id INT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);</code></pre>
         </div>
        </section>
        <section>
         <h2>Foreign Keys and Relationships</h2>
         <div class="mermaid">graph TB
                                        subgraph "One-to-One"
                                            U1[User] ---|1:1| P1[Profile]
                                        end
                                        
                                        subgraph "One-to-Many"
                                            D1[Department] ---|1:N| E1[Employees]
                                        end
                                        
                                        subgraph "Many-to-Many"
                                            S1[Students] ---|M:N| C1[Courses]
                                            S1 ---|through| SC[student_courses]
                                            SC ---|through| C1
                                        end
                                        
                                        style U1 fill:#dbeafe
                                        style D1 fill:#dcfce7
                                        style S1 fill:#fef3c7
                                        style SC fill:#e9d5ff</div>
         <div class="best_practice">
          <h3>Foreign Key Rules</h3>
          <ul>
           <li>Must reference a PRIMARY KEY or UNIQUE column in another table</li>
           <li>Values must exist in the referenced table (referential integrity)</li>
           <li>Can be NULL (unless specified NOT NULL)</li>
           <li>Multiple foreign keys allowed in one table</li>
           <li>Can reference the same table (self-referencing)</li>
          </ul>
         </div>
         <h3>Implementing Relationships</h3>
         <pre><code class="language-sql">-- One-to-One Relationship
CREATE TABLE users (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL
);

CREATE TABLE user_profiles (
    profile_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT UNIQUE NOT NULL,  -- UNIQUE ensures 1:1
    bio TEXT,
    avatar_url VARCHAR(255),
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

-- One-to-Many Relationship
CREATE TABLE departments (
    dept_id INT AUTO_INCREMENT PRIMARY KEY,
    dept_name VARCHAR(50) NOT NULL
);

CREATE TABLE employees (
    emp_id INT AUTO_INCREMENT PRIMARY KEY,
    emp_name VARCHAR(100) NOT NULL,
    dept_id INT,
    FOREIGN KEY (dept_id) REFERENCES departments(dept_id)
);

-- Many-to-Many Relationship (requires junction table)
CREATE TABLE students (
    student_id INT AUTO_INCREMENT PRIMARY KEY,
    student_name VARCHAR(100) NOT NULL
);

CREATE TABLE courses (
    course_id INT AUTO_INCREMENT PRIMARY KEY,
    course_name VARCHAR(100) NOT NULL,
    credits INT DEFAULT 3
);

CREATE TABLE enrollments (
    student_id INT,
    course_id INT,
    enrollment_date DATE,
    grade CHAR(2),
    PRIMARY KEY (student_id, course_id),
    FOREIGN KEY (student_id) REFERENCES students(student_id),
    FOREIGN KEY (course_id) REFERENCES courses(course_id)
);</code></pre>
        </section>
        <section>
         <h2>Referential Integrity and CASCADE Operations</h2>
         <canvas height="400" id="cascadeCanvas" width="600">
         </canvas>
         <script>const cCtx = document.getElementById('cascadeCanvas').getContext('2d');
                                    
                                    // Title
                                    cCtx.font = 'bold 16px Arial';
                                    cCtx.fillStyle = '#1f2937';
                                    cCtx.fillText('CASCADE Operations', 220, 30);
                                    
                                    // Parent table
                                    cCtx.fillStyle = '#dbeafe';
                                    cCtx.fillRect(50, 60, 200, 100);
                                    cCtx.strokeStyle = '#2563eb';
                                    cCtx.lineWidth = 2;
                                    cCtx.strokeRect(50, 60, 200, 100);
                                    cCtx.fillStyle = '#1e40af';
                                    cCtx.font = 'bold 14px Arial';
                                    cCtx.fillText('Parent Table', 110, 85);
                                    cCtx.font = '12px Arial';
                                    cCtx.fillText('categories', 120, 105);
                                    cCtx.fillStyle = '#374151';
                                    cCtx.font = '11px Arial';
                                    cCtx.fillText('cat_id | name', 80, 125);
                                    cCtx.fillText('1 | Electronics', 80, 140);
                                    cCtx.fillText('2 | Books', 80, 155);
                                    
                                    // Child table
                                    cCtx.fillStyle = '#dcfce7';
                                    cCtx.fillRect(350, 60, 200, 100);
                                    cCtx.strokeStyle = '#16a34a';
                                    cCtx.strokeRect(350, 60, 200, 100);
                                    cCtx.fillStyle = '#166534';
                                    cCtx.font = 'bold 14px Arial';
                                    cCtx.fillText('Child Table', 410, 85);
                                    cCtx.font = '12px Arial';
                                    cCtx.fillText('products', 420, 105);
                                    cCtx.fillStyle = '#374151';
                                    cCtx.font = '11px Arial';
                                    cCtx.fillText('prod_id | cat_id | name', 370, 125);
                                    cCtx.fillText('101 | 1 | Laptop', 370, 140);
                                    cCtx.fillText('102 | 1 | Phone', 370, 155);
                                    
                                    // Relationship arrow
                                    cCtx.strokeStyle = '#6b7280';
                                    cCtx.lineWidth = 2;
                                    cCtx.beginPath();
                                    cCtx.moveTo(250, 110);
                                    cCtx.lineTo(350, 110);
                                    cCtx.stroke();
                                    
                                    // Arrow head
                                    cCtx.beginPath();
                                    cCtx.moveTo(345, 105);
                                    cCtx.lineTo(350, 110);
                                    cCtx.lineTo(345, 115);
                                    cCtx.stroke();
                                    
                                    // CASCADE actions
                                    cCtx.fillStyle = '#fee2e2';
                                    cCtx.fillRect(50, 190, 500, 180);
                                    cCtx.fillStyle = '#dc2626';
                                    cCtx.font = 'bold 12px Arial';
                                    cCtx.fillText('CASCADE Actions', 250, 210);
                                    
                                    // ON DELETE CASCADE
                                    cCtx.fillStyle = '#fca5a5';
                                    cCtx.fillRect(70, 220, 210, 60);
                                    cCtx.fillStyle = '#991b1b';
                                    cCtx.font = '11px Arial';
                                    cCtx.fillText('ON DELETE CASCADE', 120, 240);
                                    cCtx.fillText('Delete parent → Delete children', 80, 260);
                                    
                                    // ON DELETE SET NULL
                                    cCtx.fillStyle = '#fde68a';
                                    cCtx.fillRect(290, 220, 210, 60);
                                    cCtx.fillStyle = '#92400e';
                                    cCtx.fillText('ON DELETE SET NULL', 340, 240);
                                    cCtx.fillText('Delete parent → Set FK to NULL', 300, 260);
                                    
                                    // ON DELETE RESTRICT
                                    cCtx.fillStyle = '#bfdbfe';
                                    cCtx.fillRect(70, 290, 210, 60);
                                    cCtx.fillStyle = '#1e40af';
                                    cCtx.fillText('ON DELETE RESTRICT', 120, 310);
                                    cCtx.fillText('Prevent deletion if children exist', 80, 330);
                                    
                                    // ON UPDATE CASCADE
                                    cCtx.fillStyle = '#bbf7d0';
                                    cCtx.fillRect(290, 290, 210, 60);
                                    cCtx.fillStyle = '#166534';
                                    cCtx.fillText('ON UPDATE CASCADE', 340, 310);
                                    cCtx.fillText('Update parent → Update children', 300, 330);</script>
         <div class="real_world_example">
          <h3>Implementing CASCADE Operations</h3>
          <pre><code class="language-sql">-- CASCADE DELETE: Delete related records
CREATE TABLE posts (
    post_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    title VARCHAR(200),
    content TEXT,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
        ON DELETE CASCADE  -- Delete posts when user is deleted
);

-- SET NULL: Set foreign key to NULL
CREATE TABLE orders (
    order_id INT AUTO_INCREMENT PRIMARY KEY,
    customer_id INT,
    order_date DATETIME,
    FOREIGN KEY (customer_id) REFERENCES customers(customer_id)
        ON DELETE SET NULL  -- Keep order but remove customer reference
);

-- RESTRICT: Prevent deletion (default)
CREATE TABLE products (
    product_id INT AUTO_INCREMENT PRIMARY KEY,
    category_id INT NOT NULL,
    product_name VARCHAR(100),
    FOREIGN KEY (category_id) REFERENCES categories(category_id)
        ON DELETE RESTRICT  -- Can't delete category if products exist
);

-- CASCADE UPDATE: Update foreign keys
CREATE TABLE order_items (
    item_id INT AUTO_INCREMENT PRIMARY KEY,
    order_id INT,
    product_sku VARCHAR(20),
    FOREIGN KEY (product_sku) REFERENCES products(sku)
        ON UPDATE CASCADE  -- Update SKU in order_items if product SKU changes
        ON DELETE RESTRICT
);

-- Multiple actions
CREATE TABLE comments (
    comment_id INT AUTO_INCREMENT PRIMARY KEY,
    post_id INT NOT NULL,
    user_id INT,
    comment_text TEXT,
    FOREIGN KEY (post_id) REFERENCES posts(post_id)
        ON DELETE CASCADE      -- Delete comment if post deleted
        ON UPDATE CASCADE,      -- Update if post_id changes
    FOREIGN KEY (user_id) REFERENCES users(user_id)
        ON DELETE SET NULL     -- Keep comment but anonymize if user deleted
        ON UPDATE CASCADE
);</code></pre>
         </div>
         <div class="alert alert-warning">
          <div class="alert-icon">⚠️</div>
          <div class="alert-content">
           <div class="alert-title">Caution with CASCADE DELETE</div>
           <div class="alert-message">CASCADE DELETE can be dangerous! It can delete large amounts of data unintentionally. Always consider:<ul>
             <li>Use CASCADE DELETE only for truly dependent data</li>
             <li>Consider SET NULL for historical records</li>
             <li>Use RESTRICT when unsure</li>
             <li>Test thoroughly in development</li>
            </ul>
           </div>
          </div>
         </div>
        </section>
        <section>
         <h2>Self-Referencing Foreign Keys</h2>
         <div class="mermaid">graph TD
                                        E1[CEO<br/>emp_id: 1<br/>manager_id: NULL]
                                        E2[VP Sales<br/>emp_id: 2<br/>manager_id: 1]
                                        E3[VP Tech<br/>emp_id: 3<br/>manager_id: 1]
                                        E4[Sales Rep<br/>emp_id: 4<br/>manager_id: 2]
                                        E5[Developer<br/>emp_id: 5<br/>manager_id: 3]
                                        
                                        E1 --&gt; E2
                                        E1 --&gt; E3
                                        E2 --&gt; E4
                                        E3 --&gt; E5
                                        
                                        style E1 fill:#fee2e2
                                        style E2 fill:#dcfce7
                                        style E3 fill:#dbeafe
                                        style E4 fill:#fef3c7
                                        style E5 fill:#e9d5ff</div>
         <pre><code class="language-sql">-- Self-referencing for hierarchical data
CREATE TABLE employees (
    emp_id INT AUTO_INCREMENT PRIMARY KEY,
    emp_name VARCHAR(100) NOT NULL,
    manager_id INT,
    hire_date DATE,
    FOREIGN KEY (manager_id) REFERENCES employees(emp_id)
        ON DELETE SET NULL
);

-- Insert hierarchical data
INSERT INTO employees (emp_name, manager_id) VALUES
('John CEO', NULL),           -- CEO has no manager
('Sarah VP Sales', 1),         -- Reports to CEO
('Mike VP Tech', 1),           -- Reports to CEO
('Lisa Sales Rep', 2),         -- Reports to VP Sales
('Tom Developer', 3);          -- Reports to VP Tech

-- Query to show hierarchy
SELECT 
    e1.emp_name AS employee,
    e2.emp_name AS manager
FROM employees e1
LEFT JOIN employees e2 ON e1.manager_id = e2.emp_id;</code></pre>
        </section>
        <section>
         <h2>Best Practices for Keys</h2>
         <div class="best_practice">
          <h3>Primary Key Best Practices</h3>
          <ul>
           <li>✅ Use surrogate keys (AUTO_INCREMENT) for most tables</li>
           <li>✅ Keep primary keys small (INT is usually sufficient)</li>
           <li>✅ Never use sensitive data as primary keys</li>
           <li>✅ Avoid composite keys unless necessary</li>
           <li>✅ Consider UUID for distributed systems</li>
          </ul>
          <h3>Foreign Key Best Practices</h3>
          <ul>
           <li>✅ Always define foreign keys explicitly</li>
           <li>✅ Name foreign keys descriptively (table_id format)</li>
           <li>✅ Index foreign key columns for performance</li>
           <li>✅ Choose appropriate CASCADE actions carefully</li>
           <li>✅ Document relationships in your schema</li>
          </ul>
         </div>
         <div class="alert alert-success">
          <div class="alert-icon">🎯</div>
          <div class="alert-content">
           <div class="alert-title">Pro Tip</div>
           <div class="alert-message">Consistent naming conventions make relationships clear:<ul>
             <li>Primary keys:<code>id</code>or<code>tablename_id</code>
             </li>
             <li>Foreign keys:<code>referenced_table_id</code>
             </li>
             <li>Junction tables:<code>table1_table2</code>
             </li>
            </ul>
           </div>
          </div>
         </div>
        </section>
        <!-- Practice Exercise -->
        <section>
         <h2>Practice Exercise</h2>
         <div class="alert alert-success">
          <div class="alert-icon">💻</div>
          <div class="alert-content">
           <div class="alert-title">Build a Blog Database</div>
           <div class="alert-message">Create a database schema with proper keys for a blog system:<ul>
             <li>Users can write multiple posts</li>
             <li>Posts can have multiple comments</li>
             <li>Posts can have multiple tags (many-to-many)</li>
             <li>Comments belong to users and posts</li>
            </ul>
           </div>
          </div>
         </div>
         <details>
          <summary>💡 Click for Solution</summary>
          <pre><code class="language-sql">-- Create database
CREATE DATABASE blog_system;
USE blog_system;

-- Users table
CREATE TABLE users (
    user_id INT AUTO_INCREMENT PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Posts table
CREATE TABLE posts (
    post_id INT AUTO_INCREMENT PRIMARY KEY,
    user_id INT NOT NULL,
    title VARCHAR(200) NOT NULL,
    content TEXT,
    published_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
        ON DELETE CASCADE
);

-- Tags table
CREATE TABLE tags (
    tag_id INT AUTO_INCREMENT PRIMARY KEY,
    tag_name VARCHAR(50) UNIQUE NOT NULL
);

-- Post-Tags junction table (many-to-many)
CREATE TABLE post_tags (
    post_id INT,
    tag_id INT,
    PRIMARY KEY (post_id, tag_id),
    FOREIGN KEY (post_id) REFERENCES posts(post_id)
        ON DELETE CASCADE,
    FOREIGN KEY (tag_id) REFERENCES tags(tag_id)
        ON DELETE CASCADE
);

-- Comments table
CREATE TABLE comments (
    comment_id INT AUTO_INCREMENT PRIMARY KEY,
    post_id INT NOT NULL,
    user_id INT,
    comment_text TEXT NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (post_id) REFERENCES posts(post_id)
        ON DELETE CASCADE,
    FOREIGN KEY (user_id) REFERENCES users(user_id)
        ON DELETE SET NULL
);

-- Create indexes for foreign keys
CREATE INDEX idx_posts_user ON posts(user_id);
CREATE INDEX idx_comments_post ON comments(post_id);
CREATE INDEX idx_comments_user ON comments(user_id);</code></pre>
         </details>
        </section>
        <!-- Resources -->
        <section class="resources">
         <h2>Additional Resources</h2>
         <ul>
          <li>
           <a href="https://dev.mysql.com/doc/refman/8.0/en/create-table-foreign-keys.html" target="_blank">MySQL Foreign Keys Documentation</a>
          </li>
          <li>
           <a href="https://www.w3schools.com/sql/sql_primarykey.asp" target="_blank">SQL Primary Key Tutorial</a>
          </li>
          <li>
           <a href="https://www.mysqltutorial.org/mysql-foreign-key/" target="_blank">MySQL Foreign Key Tutorial</a>
          </li>
          <li>
           <a href="https://www.sqlshack.com/learn-sql-types-of-relations/" target="_blank">Database Relationships Guide</a>
          </li>
         </ul>
        </section>
       </div>
       <!-- Lesson Navigation -->
       <div class="lesson-navigation">
        <a class="lesson-nav-button prev" href="/03module/normalization_principles.html">
         <svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
          <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z">
          </path>
         </svg>
         <span>
          <small>Previous</small>
          <br/>Normalization</span>
        </a>
        <button class="complete-lesson-btn">Mark as Complete</button>
        <a class="lesson-nav-button next" href="/03module/indexes_importance.html">
         <span>
          <small>Next</small>
          <br/>Indexes</span>
         <svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
          <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z">
          </path>
         </svg>
        </a>
       </div>
      </article>
     </div>
    </div>
   </main>
   <!-- Footer -->
   <footer class="site-footer" role="contentinfo">
    <div class="footer-container">
     <div class="footer-content">
      <div class="footer-section footer-about">
       <h3>PHP WordPress Development</h3>
       <p>Complete Web Development Course</p>
      </div>
      <div class="footer-section">
       <h4>Quick Links</h4>
       <ul class="footer-links">
        <li>
         <a href="/">Home</a>
        </li>
        <li>
         <a class="active" href="/module3.html">Module 3</a>
        </li>
        <li>
         <a href="/resources.html">Resources</a>
        </li>
       </ul>
      </div>
      <div class="footer-section">
       <h4>Support</h4>
       <ul class="footer-links">
        <li>
         <a href="/help.html">Help Center</a>
        </li>
        <li>
         <a href="/faq.html">FAQ</a>
        </li>
        <li>
         <a href="/contact.html">Contact</a>
        </li>
       </ul>
      </div>
     </div>
     <div class="footer-bottom">
      <div class="footer-bottom-content">
       <p class="copyright">© 2025 PHP WordPress Development Course</p>
       <nav class="footer-bottom-links">
        <a href="/privacy.html">Privacy</a>
        <span class="separator">|</span>
        <a href="/terms.html">Terms</a>
       </nav>
      </div>
     </div>
    </div>
   </footer>
  </div>
  <!-- Back to Top -->
  <button aria-label="Back to top" class="back-to-top" id="back-to-top">
   <svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="24">
    <path d="M12 19V5M12 5l-7 7M12 5l7 7">
    </path>
   </svg>
  </button>
  <!-- JavaScript -->
  <script src="/assets/js/navigation.js">
  </script>
  <script src="/assets/js/site-config.js">
  </script>
  <script src="/assets/js/sidebar-toggle.js">
  </script>
  <!-- Universal Mermaid Fix (Enhanced) -->
  <!-- Universal Mermaid Fix -->
  <script src="/assets/js/mermaid-universal-fix.js">
  </script>
 </body>
</html>
