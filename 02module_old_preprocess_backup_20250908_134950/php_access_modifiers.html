<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Access Modifiers in PHP: Public, Private, Protected</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="icon" href="/favicon.png">
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <header>
        <h1>Access Modifiers in PHP: Public, Private, Protected</h1>
        <p><a href="index.html">← Back to Syllabus</a></p>
    </header>
    
    <main>
        <section class="lecture-intro">
            <h2>Building Secure Boundaries: Understanding Access Modifiers</h2>
            <p>Welcome to our exploration of PHP access modifiers! Today, we'll discover how these simple keywords—<code>public</code>, <code>private</code>, and <code>protected</code>—can transform your code from a chaotic open field into a well-organized structure with clear boundaries and secure interactions.</p>
            
            <p>In the WordPress ecosystem, understanding access modifiers is crucial for building plugins and themes that are maintainable, secure, and play well with others. As we progress through this tutorial, we'll see how WordPress core uses these concepts and how you can apply them in your own WordPress development projects.</p>
        </section>

        <section class="access-modifiers-overview">
            <h2>The Security Guards of OOP: What Are Access Modifiers?</h2>
            
            <div class="mermaid">
                classDiagram
                    class AccessModifiers {
                        +public propertyA
                        #protected propertyB
                        -private propertyC
                        +public methodA()
                        #protected methodB()
                        -private methodC()
                    }
                    
                    AccessModifiers <|-- ChildClass
                    
                    class Outside {
                        Can access public members
                    }
                    
                    class ChildClass {
                        Can access public and protected members
                    }
                    
                    note for AccessModifiers "This class can access all its own members"
                    note for ChildClass "Child classes inherit public and protected members"
                    note for Outside "Outside code can only access public members"
            </div>
            
            <p>Access modifiers control the visibility of properties and methods in a class. Think of them as security clearance levels:</p>
            <ul>
                <li><strong>Public</strong>: Everyone has access (no restrictions)</li>
                <li><strong>Protected</strong>: Only family members have access (class itself and child classes)</li>
                <li><strong>Private</strong>: Only the class itself has access (strictly internal)</li>
            </ul>
            
            <p>Let's use a real-world analogy to understand this better:</p>
            
            <div class="analogy">
                <h3>The House Analogy</h3>
                <p>Imagine a class as a house:</p>
                <ul>
                    <li><strong>Public</strong> members are like the front yard and porch — anyone walking by can see and interact with them</li>
                    <li><strong>Protected</strong> members are like the living room — only family members (the class and its descendants) can access them</li>
                    <li><strong>Private</strong> members are like your bedroom — only you (the class itself) can access them, not even family members</li>
                </ul>
            </div>
        </section>

        <section class="public-modifier">
            <h2>Public: Open to Everyone</h2>
            
            <div class="svg-container">
                <svg viewBox="0 0 800 300" width="800" height="300">
                    <!-- Background -->
                    <rect x="0" y="0" width="800" height="300" fill="#f8f9fa" />
                    
                    <!-- Class boundary -->
                    <rect x="50" y="50" width="700" height="200" rx="10" ry="10" fill="#ffffff" stroke="#333333" stroke-width="2" />
                    <text x="400" y="35" font-family="Arial" font-size="18" text-anchor="middle" fill="#333333">BlogPost Class</text>
                    
                    <!-- Public area -->
                    <rect x="70" y="70" width="660" height="160" rx="5" ry="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" />
                    <text x="400" y="95" font-family="Arial" font-size="16" text-anchor="middle" fill="#333333">Public Area (Anyone can access)</text>
                    
                    <!-- Public members -->
                    <circle cx="150" cy="150" r="30" fill="#4caf50" />
                    <text x="150" y="155" font-family="Arial" font-size="14" text-anchor="middle" fill="#ffffff">title</text>
                    
                    <circle cx="250" cy="150" r="30" fill="#4caf50" />
                    <text x="250" y="155" font-family="Arial" font-size="14" text-anchor="middle" fill="#ffffff">author</text>
                    
                    <circle cx="350" cy="150" r="30" fill="#4caf50" />
                    <text x="350" y="155" font-family="Arial" font-size="14" text-anchor="middle" fill="#ffffff">content</text>
                    
                    <rect x="450" cy="120" width="100" height="60" rx="5" ry="5" fill="#4caf50" />
                    <text x="500" y="155" font-family="Arial" font-size="14" text-anchor="middle" fill="#ffffff">display()</text>
                    
                    <rect x="600" cy="120" width="100" height="60" rx="5" ry="5" fill="#4caf50" />
                    <text x="650" y="155" font-family="Arial" font-size="14" text-anchor="middle" fill="#ffffff">getTitle()</text>
                    
                    <!-- Arrows from outside -->
                    <path d="M 400,275 L 400,240" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead)" />
                    <text x="420" y="265" font-family="Arial" font-size="14" fill="#333333">External Access</text>
                    
                    <!-- Arrow marker definition -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#333333" />
                        </marker>
                    </defs>
                </svg>
            </div>
            
            <h3>When to Use Public</h3>
            <p>Use <code>public</code> for:</p>
            <ul>
                <li>Methods that should be part of the class's public API</li>
                <li>Properties that external code needs to access directly</li>
                <li>Functionality that needs to be accessible from anywhere</li>
            </ul>
            
            <h3>Public in Action</h3>
            <pre><code>&lt;?php
class BlogPost {
    // Public properties - accessible from anywhere
    public $title;
    public $author;
    public $content;
    public $publicationDate;
    
    // Public methods - accessible from anywhere
    public function __construct($title, $content, $author) {
        $this->title = $title;
        $this->content = $content;
        $this->author = $author;
        $this->publicationDate = date('Y-m-d H:i:s');
    }
    
    public function getExcerpt($length = 100) {
        return substr($this->content, 0, $length) . '...';
    }
    
    public function display() {
        echo "&lt;article&gt;";
        echo "&lt;h2&gt;{$this->title}&lt;/h2&gt;";
        echo "&lt;p class='meta'&gt;By {$this->author} on {$this->publicationDate}&lt;/p&gt;";
        echo "&lt;div class='content'&gt;{$this->content}&lt;/div&gt;";
        echo "&lt;/article&gt;";
    }
}

// Using the public members from outside the class
$post = new BlogPost(
    "Understanding Access Modifiers in PHP",
    "Access modifiers control the visibility and accessibility of properties and methods...",
    "Jane Developer"
);

// We can directly access public properties
echo $post->title;  // Works fine
$post->author = "John Developer";  // We can modify them too

// We can call public methods
echo $post->getExcerpt();  // Works fine
$post->display();  // Works fine
?&gt;</code></pre>

            <p>In this example, all properties and methods are <code>public</code>, making them fully accessible from outside the class. This is simple but not always ideal for encapsulation.</p>
            
            <h3>Public in WordPress</h3>
            <p>WordPress uses public members extensively, especially in older code. For example, the <code>WP_Post</code> object has many public properties:</p>
            
            <pre><code>&lt;?php
// WordPress core code (simplified)
class WP_Post {
    // Public properties available to any code
    public $ID;
    public $post_author;
    public $post_date;
    public $post_content;
    public $post_title;
    public $post_status;
    // ...more properties...
    
    // Public methods
    public function __construct($post) {
        // initialization...
    }
    
    public function filter($filter) {
        // filtering logic...
    }
}

// Using a WordPress post object
$post = get_post(123);  // Returns a WP_Post object

// We can directly access its public properties
echo $post->post_title;  // Access the title
echo $post->post_content;  // Access the content
?&gt;</code></pre>

            <p>This public accessibility is why you can easily access post data in your themes and plugins.</p>
        </section>

        <section class="private-modifier">
            <h2>Private: For Internal Use Only</h2>
            
            <div class="svg-container">
                <svg viewBox="0 0 800 300" width="800" height="300">
                    <!-- Background -->
                    <rect x="0" y="0" width="800" height="300" fill="#f8f9fa" />
                    
                    <!-- Class boundary -->
                    <rect x="50" y="50" width="700" height="200" rx="10" ry="10" fill="#ffffff" stroke="#333333" stroke-width="2" />
                    <text x="400" y="35" font-family="Arial" font-size="18" text-anchor="middle" fill="#333333">PaymentProcessor Class</text>
                    
                    <!-- Public area -->
                    <rect x="70" y="70" width="660" height="50" rx="5" ry="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" />
                    <text x="400" y="95" font-family="Arial" font-size="14" text-anchor="middle" fill="#333333">Public Area</text>
                    
                    <!-- Public methods -->
                    <rect x="100" y="75" width="120" height="40" rx="5" ry="5" fill="#4caf50" />
                    <text x="160" y="100" font-family="Arial" font-size="14" text-anchor="middle" fill="#ffffff">processPayment()</text>
                    
                    <rect x="250" y="75" width="120" height="40" rx="5" ry="5" fill="#4caf50" />
                    <text x="310" y="100" font-family="Arial" font-size="14" text-anchor="middle" fill="#ffffff">getStatus()</text>
                    
                    <!-- Private area -->
                    <rect x="70" y="140" width="660" height="90" rx="5" ry="5" fill="#ffebee" stroke="#f44336" stroke-width="2" />
                    <text x="400" y="165" font-family="Arial" font-size="14" text-anchor="middle" fill="#333333">Private Area (Only this class can access)</text>
                    
                    <!-- Private members -->
                    <circle cx="150" cy="195" r="25" fill="#f44336" />
                    <text x="150" y="200" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">apiKey</text>
                    
                    <circle cx="250" cy="195" r="25" fill="#f44336" />
                    <text x="250" y="200" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">secret</text>
                    
                    <rect x="330" y="175" width="100" height="40" rx="5" ry="5" fill="#f44336" />
                    <text x="380" y="200" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">validateCard()</text>
                    
                    <rect x="460" y="175" width="100" height="40" rx="5" ry="5" fill="#f44336" />
                    <text x="510" y="200" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">encryptData()</text>
                    
                    <rect x="590" y="175" width="100" height="40" rx="5" ry="5" fill="#f44336" />
                    <text x="640" y="200" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">callApi()</text>
                    
                    <!-- Arrows -->
                    <path d="M 400,275 L 400,130" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead2)" />
                    <text x="420" y="265" font-family="Arial" font-size="14" fill="#333333">External Access</text>
                    
                    <!-- Blocked access -->
                    <line x1="400" y1="130" x2="400" y2="160" stroke="#f44336" stroke-width="4" />
                    <circle cx="400" cy="145" r="15" fill="#ffffff" stroke="#f44336" stroke-width="2" />
                    <text x="400" y="150" font-family="Arial" font-size="15" font-weight="bold" text-anchor="middle" fill="#f44336">X</text>
                    
                    <!-- Arrow marker definition -->
                    <defs>
                        <marker id="arrowhead2" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#333333" />
                        </marker>
                    </defs>
                </svg>
            </div>
            
            <h3>When to Use Private</h3>
            <p>Use <code>private</code> for:</p>
            <ul>
                <li>Internal implementation details that should be hidden</li>
                <li>Methods that should only be called from within the class</li>
                <li>Properties that contain sensitive data or should not be directly manipulated</li>
                <li>Functionality that might change in the future</li>
            </ul>
            
            <h3>Private in Action</h3>
            <pre><code>&lt;?php
class PaymentProcessor {
    // Private properties - only accessible within this class
    private $apiKey = 'sk_live_123456789';
    private $secret = 'super_secret_key';
    private $endpoint = 'https://api.payment.com/v1/';
    private $lastResponse;
    
    // Public methods - the external API
    public function __construct() {
        // Initialize the processor
    }
    
    public function processPayment($amount, $cardNumber, $expiry, $cvv) {
        // Validate inputs
        if (!$this->validateCard($cardNumber, $expiry, $cvv)) {
            return false;
        }
        
        // Prepare the payment data
        $paymentData = [
            'amount' => $amount,
            'card' => $this->encryptCardData($cardNumber, $expiry, $cvv)
        ];
        
        // Process the payment
        $response = $this->callApi('payments', $paymentData);
        $this->lastResponse = $response;
        
        return $response['success'] ?? false;
    }
    
    public function getTransactionId() {
        return $this->lastResponse['transaction_id'] ?? null;
    }
    
    // Private methods - internal use only
    private function validateCard($number, $expiry, $cvv) {
        // Card validation logic
        $valid = (
            preg_match('/^\d{16}$/', $number) &&
            preg_match('/^\d{2}\/\d{2}$/', $expiry) &&
            preg_match('/^\d{3,4}$/', $cvv)
        );
        
        return $valid;
    }
    
    private function encryptCardData($number, $expiry, $cvv) {
        // In a real implementation, this would use proper encryption
        return base64_encode(json_encode([
            'number' => $number,
            'expiry' => $expiry,
            'cvv' => $cvv
        ]));
    }
    
    private function callApi($endpoint, $data) {
        // Add authentication
        $data['api_key'] = $this->apiKey;
        $data['signature'] = hash_hmac('sha256', json_encode($data), $this->secret);
        
        // In a real implementation, this would make an actual API call
        // For this example, we'll just return a dummy response
        return [
            'success' => true,
            'transaction_id' => 'txn_' . uniqid()
        ];
    }
}

// Using the payment processor
$processor = new PaymentProcessor();

// We can call public methods
$success = $processor->processPayment(
    99.99,
    '4242424242424242',
    '12/25',
    '123'
);

if ($success) {
    echo "Payment processed successfully!";
    echo "Transaction ID: " . $processor->getTransactionId();
} else {
    echo "Payment failed!";
}

// But we CANNOT access private members
// These would all cause errors:
// echo $processor->apiKey;  // Fatal error
// echo $processor->secret;  // Fatal error
// $processor->validateCard('4242424242424242', '12/25', '123');  // Fatal error
// $processor->callApi('payments', []);  // Fatal error
?&gt;</code></pre>

            <p>In this example, the private members protect sensitive data and internal implementation details. The class provides a clean public API while hiding how it works internally.</p>
            
            <h3>Private in WordPress</h3>
            <p>WordPress uses private members in newer code and in areas handling sensitive operations. For example, in user authentication:</p>
            
            <pre><code>&lt;?php
// WordPress core code (simplified example)
class WP_User {
    // Public properties
    public $ID;
    public $user_login;
    public $display_name;
    
    // Private property for sensitive data
    private $user_pass;
    
    // Public method to check password
    public function check_password($password) {
        return $this->verify_password($password, $this->user_pass);
    }
    
    // Private method for password verification
    private function verify_password($password, $hash) {
        // Secure password verification logic
        return wp_check_password($password, $hash);
    }
}

// Using the WordPress user object
$user = get_user_by('id', 1);

// We can access public properties
echo $user->display_name;  // Works fine

// But we cannot access private members
// echo $user->user_pass;  // Fatal error
// $user->verify_password('password', 'hash');  // Fatal error
?&gt;</code></pre>

            <p>This prevents accidental or malicious access to sensitive data or internal methods.</p>
        </section>

        <section class="protected-modifier">
            <h2>Protected: Family Access Only</h2>
            
            <div class="svg-container">
                <svg viewBox="0 0 800 400" width="800" height="400">
                    <!-- Background -->
                    <rect x="0" y="0" width="800" height="400" fill="#f8f9fa" />
                    
                    <!-- Parent Class -->
                    <rect x="50" y="50" width="700" height="150" rx="10" ry="10" fill="#ffffff" stroke="#333333" stroke-width="2" />
                    <text x="400" y="35" font-family="Arial" font-size="18" text-anchor="middle" fill="#333333">WP_Widget (Parent Class)</text>
                    
                    <!-- Public area in parent -->
                    <rect x="70" y="70" width="660" height="40" rx="5" ry="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" />
                    <text x="400" y="95" font-family="Arial" font-size="14" text-anchor="middle" fill="#333333">Public Area</text>
                    
                    <rect x="100" y="75" width="80" height="30" rx="5" ry="5" fill="#4caf50" />
                    <text x="140" y="95" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">widget()</text>
                    
                    <rect x="200" y="75" width="80" height="30" rx="5" ry="5" fill="#4caf50" />
                    <text x="240" y="95" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">form()</text>
                    
                    <!-- Protected area in parent -->
                    <rect x="70" y="120" width="660" height="60" rx="5" ry="5" fill="#fff8e1" stroke="#ffc107" stroke-width="2" />
                    <text x="400" y="145" font-family="Arial" font-size="14" text-anchor="middle" fill="#333333">Protected Area (Available to child classes)</text>
                    
                    <circle cx="150" cy="160" r="20" fill="#ffc107" />
                    <text x="150" y="165" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">id_base</text>
                    
                    <circle cx="250" cy="160" r="20" fill="#ffc107" />
                    <text x="250" y="165" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">name</text>
                    
                    <rect x="330" y="140" width="120" height="40" rx="5" ry="5" fill="#ffc107" />
                    <text x="390" y="165" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">get_field_name()</text>
                    
                    <rect x="480" y="140" width="120" height="40" rx="5" ry="5" fill="#ffc107" />
                    <text x="540" y="165" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">get_field_id()</text>
                    
                    <!-- Child Class -->
                    <rect x="50" y="230" width="700" height="150" rx="10" ry="10" fill="#ffffff" stroke="#333333" stroke-width="2" />
                    <text x="400" y="215" font-family="Arial" font-size="18" text-anchor="middle" fill="#333333">Custom_Widget (Child Class)</text>
                    
                    <!-- Public area in child -->
                    <rect x="70" y="250" width="660" height="40" rx="5" ry="5" fill="#e8f5e9" stroke="#4caf50" stroke-width="2" />
                    <text x="400" y="275" font-family="Arial" font-size="14" text-anchor="middle" fill="#333333">Public Area</text>
                    
                    <rect x="100" y="255" width="120" height="30" rx="5" ry="5" fill="#4caf50" />
                    <text x="160" y="275" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">widget() (Override)</text>
                    
                    <rect x="240" y="255" width="120" height="30" rx="5" ry="5" fill="#4caf50" />
                    <text x="300" y="275" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">form() (Override)</text>
                    
                    <!-- Protected area in child -->
                    <rect x="70" y="300" width="660" height="60" rx="5" ry="5" fill="#fff8e1" stroke="#ffc107" stroke-width="2" />
                    <text x="400" y="325" font-family="Arial" font-size="14" text-anchor="middle" fill="#333333">Protected Area - Can Access Parent's Protected Members</text>
                    
                    <circle cx="150" cy="340" r="20" fill="#ffc107" />
                    <text x="150" y="345" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">defaults</text>
                    
                    <rect x="230" y="320" width="120" height="40" rx="5" ry="5" fill="#ffc107" />
                    <text x="290" y="345" font-family="Arial" font-size="12" text-anchor="middle" fill="#ffffff">render_content()</text>
                    
                    <!-- Arrows -->
                    <path d="M 400,200 L 400,230" stroke="#333333" stroke-width="2" marker-end="url(#arrowhead3)" />
                    <text x="430" y="215" font-family="Arial" font-size="14" fill="#333333">Inheritance</text>
                    
                    <!-- Access arrows -->
                    <path d="M 150,300 L 150,190" stroke="#ffc107" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead3)" />
                    <path d="M 250,300 L 250,190" stroke="#ffc107" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead3)" />
                    <path d="M 380,320 L 380,190" stroke="#ffc107" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead3)" />
                    <path d="M 520,320 L 520,190" stroke="#ffc107" stroke-width="2" stroke-dasharray="5,5" marker-end="url(#arrowhead3)" />
                    
                    <!-- Arrow marker definition -->
                    <defs>
                        <marker id="arrowhead3" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#333333" />
                        </marker>
                    </defs>
                </svg>
            </div>
            
            <h3>When to Use Protected</h3>
            <p>Use <code>protected</code> for:</p>
            <ul>
                <li>Members that should be available to child classes</li>
                <li>Properties and methods that are part of the inheritance API</li>
                <li>Functionality that child classes might need to override or extend</li>
                <li>Internal functionality that might be shared across a family of classes</li>
            </ul>
            
            <h3>Protected in Action</h3>
            <pre><code>&lt;?php
// Base abstract widget class
abstract class Base_Widget {
    // Protected properties accessible to child classes
    protected $widget_id;
    protected $widget_name;
    protected $widget_options;
    protected $control_options;
    
    // Public constructor
    public function __construct($id, $name, $widget_options = [], $control_options = []) {
        $this->widget_id = $id;
        $this->widget_name = $name;
        $this->widget_options = wp_parse_args($widget_options, [
            'classname' => 'widget_' . $id,
            'description' => '',
            'customize_selective_refresh' => true
        ]);
        $this->control_options = $control_options;
        
        // Register with WordPress (simplified example)
        $this->register();
    }
    
    // Public method to register the widget
    public function register() {
        // Registration logic
    }
    
    // Protected method for field name generation
    protected function get_field_name($field) {
        return 'widget-' . $this->widget_id . '[' . $field . ']';
    }
    
    // Protected method for field ID generation
    protected function get_field_id($field) {
        return 'widget-' . $this->widget_id . '-' . $field;
    }
    
    // Protected method for rendering a text field
    protected function render_text_field($label, $field, $value, $placeholder = '') {
        ?>
        &lt;p&gt;
            &lt;label for="&lt;?php echo $this->get_field_id($field); ?&gt;"&gt;&lt;?php echo $label; ?&gt;:&lt;/label&gt;
            &lt;input class="widefat" id="&lt;?php echo $this->get_field_id($field); ?&gt;" 
                   name="&lt;?php echo $this->get_field_name($field); ?&gt;" 
                   type="text" value="&lt;?php echo esc_attr($value); ?&gt;" 
                   placeholder="&lt;?php echo esc_attr($placeholder); ?&gt;"&gt;
        &lt;/p&gt;
        <?php
    }
    
    // Abstract public methods that child classes must implement
    abstract public function widget($args, $instance);
    abstract public function form($instance);
    abstract public function update($new_instance, $old_instance);
}

// Child widget implementation
class Recent_Posts_Widget extends Base_Widget {
    // Child-specific protected properties
    protected $defaults = [
        'title' => 'Recent Posts',
        'number' => 5,
        'show_date' => false
    ];
    
    // Constructor
    public function __construct() {
        // Call parent constructor
        parent::__construct(
            'recent-posts',
            'Recent Posts',
            ['description' => 'Display your site\'s recent posts with thumbnails']
        );
    }
    
    // Implement required methods
    public function widget($args, $instance) {
        $instance = wp_parse_args($instance, $this->defaults);
        
        echo $args['before_widget'];
        
        if (!empty($instance['title'])) {
            echo $args['before_title'] . esc_html($instance['title']) . $args['after_title'];
        }
        
        // Render widget content using protected methods
        $this->render_posts_list($instance);
        
        echo $args['after_widget'];
    }
    
    public function form($instance) {
        $instance = wp_parse_args($instance, $this->defaults);
        
        // Use protected parent method to render form fields
        $this->render_text_field('Title', 'title', $instance['title']);
        
        // Number field
        ?>
        &lt;p&gt;
            &lt;label for="&lt;?php echo $this->get_field_id('number'); ?&gt;"&gt;Number of posts:&lt;/label&gt;
            &lt;input class="tiny-text" id="&lt;?php echo $this->get_field_id('number'); ?&gt;" 
                   name="&lt;?php echo $this->get_field_name('number'); ?&gt;" 
                   type="number" step="1" min="1" 
                   value="&lt;?php echo esc_attr($instance['number']); ?&gt;" size="3"&gt;
        &lt;/p&gt;
        
        &lt;p&gt;
            &lt;input class="checkbox" type="checkbox" 
                   id="&lt;?php echo $this->get_field_id('show_date'); ?&gt;" 
                   name="&lt;?php echo $this->get_field_name('show_date'); ?&gt;" 
                   &lt;?php checked($instance['show_date']); ?&gt;&gt;
            &lt;label for="&lt;?php echo $this->get_field_id('show_date'); ?&gt;"&gt;Display post date?&lt;/label&gt;
        &lt;/p&gt;
        <?php
    }
    
    public function update($new_instance, $old_instance) {
        $instance = [];
        $instance['title'] = sanitize_text_field($new_instance['title']);
        $instance['number'] = absint($new_instance['number']);
        $instance['show_date'] = isset($new_instance['show_date']) ? (bool) $new_instance['show_date'] : false;
        
        return $instance;
    }
    
    // Protected method specific to this widget
    protected function render_posts_list($instance) {
        $number = $instance['number'];
        $show_date = $instance['show_date'];
        
        // Fetch recent posts - simplified example
        echo "&lt;ul&gt;";
        for ($i = 1; $i <= $number; $i++) {
            echo "&lt;li&gt;";
            echo "Post #{$i} Title";
            if ($show_date) {
                echo " &lt;span class='post-date'&gt;April " . (20 + $i) . ", 2025&lt;/span&gt;";
            }
            echo "&lt;/li&gt;";
        }
        echo "&lt;/ul&gt;";
    }
}

// Using the widget
$widget = new Recent_Posts_Widget();

// We can call public methods
$widget->register();

// But we CANNOT access protected members from outside
// echo $widget->widget_id;  // Fatal error
// $widget->get_field_name('title');  // Fatal error
// $widget->render_posts_list(['number' => 5]);  // Fatal error

// However, child classes CAN access the parent's protected members
?&gt;</code></pre>

            <p>In this example, the <code>Base_Widget</code> provides a framework with protected methods that child widgets can use. This creates a clean inheritance hierarchy while still maintaining encapsulation.</p>
            
            <h3>Protected in WordPress</h3>
            <p>WordPress uses protected members extensively in class hierarchies. For example, in the admin dashboard:</p>
            
            <pre><code>&lt;?php
// WordPress core code (simplified example)
class WP_List_Table {
    // Protected properties for child classes
    protected $items;
    protected $columns;
    protected $sortable_columns;
    
    // Public methods
    public function display() {
        // Display the table
        $this->display_header();
        $this->display_rows();
        $this->display_footer();
    }
    
    // Protected methods for child classes to use or override
    protected function get_columns() {
        return [];
    }
    
    protected function get_sortable_columns() {
        return [];
    }
    
    protected function display_header() {
        // Header display logic
    }
    
    protected function display_rows() {
        // Default rows display
    }
    
    protected function display_footer() {
        // Footer display logic
    }
}

// WordPress child class
class WP_Posts_List_Table extends WP_List_Table {
    // Override protected methods
    protected function get_columns() {
        return [
            'cb' => '&lt;input type="checkbox" /&gt;',
            'title' => 'Title',
            'author' => 'Author',
            'date' => 'Date'
        ];
    }
    
    protected function get_sortable_columns() {
        return [
            'title' => ['title', true],
            'author' => ['author', false],
            'date' => ['date', false]
        ];
    }
    
    // Override to customize row display
    protected function display_rows() {
        // Custom row display for posts
    }
}
?&gt;</code></pre>

            <p>This pattern allows WordPress to create a flexible framework that can be extended for different admin tables (posts, pages, users, etc.) while ensuring that certain functionality remains consistent.</p>
        </section>

        <section class="practical-examples">
            <h2>Practical Examples: Access Modifiers in WordPress Development</h2>
            
            <h3>WordPress Plugin with Proper Encapsulation</h3>
            <pre><code>&lt;?php
/**
 * Plugin Name: Custom Analytics Tracker
 * Description: Tracks page views and events and sends to an analytics service
 * Version: 1.0.0
 */
 
class Custom_Analytics_Tracker {
    // Singleton instance
    private static $instance = null;
    
    // Private properties - internal data
    private $api_key;
    private $domain;
    private $tracking_enabled = true;
    private $debug_mode = false;
    private $events_queue = [];
    
    // Protected properties - accessible to extensions
    protected $version = '1.0.0';
    protected $tracking_path = '/api/track';
    protected $endpoints = [
        'pageview' => '/v1/pageview',
        'event' => '/v1/event',
        'timing' => '/v1/timing'
    ];
    
    /**
     * Private constructor - singleton pattern
     */
    private function __construct() {
        // Load settings
        $this->api_key = get_option('cat_api_key', '');
        $this->domain = get_option('cat_tracking_domain', 'analytics.example.com');
        $this->tracking_enabled = get_option('cat_tracking_enabled', true);
        $this->debug_mode = get_option('cat_debug_mode', false);
        
        // Set up hooks
        add_action('wp_enqueue_scripts', [$this, 'enqueue_scripts']);
        add_action('wp_footer', [$this, 'output_tracking_code']);
        add_action('admin_menu', [$this, 'add_admin_menu']);
        add_action('admin_init', [$this, 'register_settings']);
        add_action('wp_ajax_cat_track_event', [$this, 'ajax_track_event']);
        add_action('wp_ajax_nopriv_cat_track_event', [$this, 'ajax_track_event']);
    }
    
    /**
     * Get singleton instance
     * 
     * @return Custom_Analytics_Tracker
     */
    public static function get_instance() {
        if (null === self::$instance) {
            self::$instance = new self();
        }
        return self::$instance;
    }
    
    /**
     * Enqueue necessary scripts
     */
    public function enqueue_scripts() {
        if (!$this->tracking_enabled) {
            return;
        }
        
        wp_enqueue_script(
            'custom-analytics',
            plugin_dir_url(__FILE__) . 'assets/js/tracking.js',
            ['jquery'],
            $this->version,
            true
        );
        
        wp_localize_script('custom-analytics', 'catParams', [
            'ajaxurl' => admin_url('admin-ajax.php'),
            'debug' => $this->debug_mode
        ]);
    }
    
    /**
     * Output the tracking code in footer
     */
    public function output_tracking_code() {
        if (!$this->tracking_enabled || empty($this->api_key)) {
            return;
        }
        
        // Get tracking data
        $user_id = $this->get_visitor_id();
        $page_data = $this->get_page_data();
        
        // Prepare tracking code
        $tracking_code = $this->prepare_tracking_code($user_id, $page_data);
        
        // Output the code
        echo $tracking_code;
        
        // Track pageview
        $this->track_pageview($page_data);
    }
    
    /**
     * Track a custom event
     * 
     * @param string $category Event category
     * @param string $action Event action
     * @param string $label Optional event label
     * @param int $value Optional event value
     * @return bool Success
     */
    public function track_event($category, $action, $label = '', $value = 0) {
        if (!$this->tracking_enabled || empty($this->api_key)) {
            return false;
        }
        
        $event_data = [
            'category' => $category,
            'action' => $action,
            'label' => $label,
            'value' => $value,
            'timestamp' => time()
        ];
        
        // Add to queue for batch processing
        $this->events_queue[] = $event_data;
        
        // If debugging, track immediately
        if ($this->debug_mode) {
            return $this->send_tracking_data('event', $event_data);
        }
        
        return true;
    }
    
    /**
     * Ajax handler for tracking events
     */
    public function ajax_track_event() {
        // Verify nonce and get parameters
        // ...
        
        $category = sanitize_text_field($_POST['category'] ?? '');
        $action = sanitize_text_field($_POST['action'] ?? '');
        $label = sanitize_text_field($_POST['label'] ?? '');
        $value = intval($_POST['value'] ?? 0);
        
        $result = $this->track_event($category, $action, $label, $value);
        
        wp_send_json(['success' => $result]);
    }
    
    /**
     * Add admin menu
     */
    public function add_admin_menu() {
        add_options_page(
            'Custom Analytics',
            'Custom Analytics',
            'manage_options',
            'custom-analytics',
            [$this, 'render_settings_page']
        );
    }
    
    /**
     * Register plugin settings
     */
    public function register_settings() {
        register_setting('cat_settings', 'cat_api_key');
        register_setting('cat_settings', 'cat_tracking_domain');
        register_setting('cat_settings', 'cat_tracking_enabled');
        register_setting('cat_settings', 'cat_debug_mode');
        
        add_settings_section(
            'cat_section_main',
            'Analytics Settings',
            [$this, 'settings_section_callback'],
            'custom-analytics'
        );
        
        add_settings_field(
            'cat_api_key',
            'API Key',
            [$this, 'render_api_key_field'],
            'custom-analytics',
            'cat_section_main'
        );
        
        // Additional settings fields...
    }
    
    /**
     * Render the settings page
     */
    public function render_settings_page() {
        // Settings form markup
        ?>
        &lt;div class="wrap"&gt;
            &lt;h1&gt;Custom Analytics Settings&lt;/h1&gt;
            &lt;form method="post" action="options.php"&gt;
                &lt;?php
                settings_fields('cat_settings');
                do_settings_sections('custom-analytics');
                submit_button();
                ?&gt;
            &lt;/form&gt;
        &lt;/div&gt;
        <?php
    }
    
    /**
     * Settings section intro
     */
    public function settings_section_callback() {
        echo '&lt;p&gt;Configure your analytics tracking settings.&lt;/p&gt;';
    }
    
    /**
     * API key field renderer
     */
    public function render_api_key_field() {
        $api_key = get_option('cat_api_key', '');
        ?>
        &lt;input type="text" name="cat_api_key" value="&lt;?php echo esc_attr($api_key); ?&gt;" class="regular-text"&gt;
        &lt;p class="description"&gt;Enter your analytics API key.&lt;/p&gt;
        <?php
    }
    
    // PRIVATE METHODS - Internal implementation details
    
    /**
     * Get unique visitor ID
     * 
     * @return string Visitor ID
     */
    private function get_visitor_id() {
        // Check for logged in user
        if (is_user_logged_in()) {
            $user_id = get_current_user_id();
            return md5('user_' . $user_id . wp_salt());
        }
        
        // Check for visitor cookie
        $cookie_name = 'cat_visitor_id';
        if (isset($_COOKIE[$cookie_name])) {
            return sanitize_text_field($_COOKIE[$cookie_name]);
        }
        
        // Generate new ID
        $visitor_id = md5('visitor_' . time() . wp_salt() . mt_rand());
        
        // Set cookie for 2 years
        setcookie(
            $cookie_name,
            $visitor_id,
            time() + (2 * YEAR_IN_SECONDS),
            COOKIEPATH,
            COOKIE_DOMAIN,
            is_ssl()
        );
        
        return $visitor_id;
    }
    
    /**
     * Get current page data
     * 
     * @return array Page data
     */
    private function get_page_data() {
        global $wp;
        
        $data = [
            'url' => home_url($wp->request),
            'title' => wp_get_document_title(),
            'referrer' => wp_get_referer() ?: '',
            'type' => $this->get_page_type()
        ];
        
        return $data;
    }
    
    /**
     * Get current page type
     * 
     * @return string Page type
     */
    private function get_page_type() {
        if (is_front_page()) return 'home';
        if (is_singular('post')) return 'post';
        if (is_singular('page')) return 'page';
        if (is_archive()) return 'archive';
        if (is_search()) return 'search';
        return 'other';
    }
    
    /**
     * Prepare tracking code for output
     * 
     * @param string $visitor_id Visitor ID
     * @param array $page_data Page data
     * @return string HTML/JS tracking code
     */
    private function prepare_tracking_code($visitor_id, $page_data) {
        $output = "&lt;!-- Custom Analytics Tracker --&gt;\n";
        $output .= "&lt;script&gt;\n";
        $output .= "window.catData = {\n";
        $output .= "  visitor: '{$visitor_id}',\n";
        $output .= "  page: " . json_encode($page_data) . ",\n";
        $output .= "  api_key: '" . esc_js($this->api_key) . "',\n";
        $output .= "  domain: '" . esc_js($this->domain) . "',\n";
        $output .= "  debug: " . ($this->debug_mode ? 'true' : 'false') . "\n";
        $output .= "};\n";
        $output .= "&lt;/script&gt;\n";
        
        return $output;
    }
    
    /**
     * Track a pageview
     * 
     * @param array $page_data Page data
     * @return bool Success
     */
    private function track_pageview($page_data) {
        return $this->send_tracking_data('pageview', $page_data);
    }
    
    /**
     * Send tracking data to analytics service
     * 
     * @param string $type Tracking type (pageview, event)
     * @param array $data Tracking data
     * @return bool Success
     */
    private function send_tracking_data($type, $data) {
        if (!isset($this->endpoints[$type])) {
            $this->log_error("Invalid tracking type: {$type}");
            return false;
        }
        
        if ($this->debug_mode) {
            $this->log_debug("Sending {$type} data: " . json_encode($data));
        }
        
        // In a real plugin, this would make an API request
        // For this example, we'll just return true
        return true;
    }
    
    /**
     * Log a debug message
     * 
     * @param string $message Debug message
     */
    private function log_debug($message) {
        if ($this->debug_mode) {
            error_log("Custom Analytics Debug: {$message}");
        }
    }
    
    /**
     * Log an error message
     * 
     * @param string $message Error message
     */
    private function log_error($message) {
        error_log("Custom Analytics Error: {$message}");
    }
}

// Initialize the plugin
function custom_analytics_tracker() {
    return Custom_Analytics_Tracker::get_instance();
}

// Start the plugin
custom_analytics_tracker();

// Public API function to track events
function cat_track_event($category, $action, $label = '', $value = 0) {
    return custom_analytics_tracker()->track_event($category, $action, $label, $value);
}
?&gt;</code></pre>

            <p>This example demonstrates a well-structured WordPress plugin with:</p>
            <ul>
                <li><strong>Public methods</strong> that form the plugin's external API</li>
                <li><strong>Protected properties</strong> that extensions might need</li>
                <li><strong>Private methods and properties</strong> for internal implementation details</li>
            </ul>
            
            <p>The plugin uses the singleton pattern, provides a clean public API, and properly encapsulates its internal workings.</p>
        </section>

        <section class="common-mistakes">
            <h2>Common Mistakes with Access Modifiers</h2>
            
            <h3>Everything Is Public</h3>
            <pre><code>&lt;?php
// BAD PRACTICE: Everything is public
class User_Manager {
    // All properties are public - no encapsulation
    public $users;
    public $current_user;
    public $database_connection;
    public $user_table;
    public $password_hash_algo;
    public $hash_salt;
    
    public function __construct() {
        $this->users = [];
        $this->user_table = 'wp_users';
        $this->password_hash_algo = PASSWORD_DEFAULT;
        $this->hash_salt = wp_salt();
        
        // Set up database connection
        $this->database_connection = new PDO('mysql:host=localhost;dbname=wordpress', 'username', 'password');
    }
    
    public function add_user($username, $password, $email) {
        // User creation logic
    }
    
    public function verify_password($password, $hash) {
        // Password verification logic
    }
    
    public function generate_password_hash($password) {
        return password_hash($password, $this->password_hash_algo);
    }
}

// Outside code can access everything, even sensitive details
$user_manager = new User_Manager();
echo $user_manager->hash_salt; // Security issue!
$user_manager->password_hash_algo = 'md5'; // Security vulnerability!
$user_manager->database_connection->exec("DROP TABLE wp_users"); // Security disaster!
?&gt;</code></pre>

            <h3>BETTER APPROACH</h3>
            <pre><code>&lt;?php
// GOOD PRACTICE: Proper encapsulation
class User_Manager {
    // Private properties for internal state
    private $users = [];
    private $current_user = null;
    private $db_connection;
    private $user_table;
    private $password_hash_algo;
    private $hash_salt;
    
    public function __construct() {
        global $wpdb;
        
        $this->user_table = $wpdb->users;
        $this->password_hash_algo = PASSWORD_DEFAULT;
        $this->hash_salt = wp_salt();
        $this->db_connection = $wpdb;
    }
    
    // Public API
    public function add_user($username, $password, $email) {
        // Validate inputs
        if (!$this->validate_username($username)) {
            return new WP_Error('invalid_username', 'Invalid username');
        }
        
        if (!$this->validate_email($email)) {
            return new WP_Error('invalid_email', 'Invalid email');
        }
        
        // Generate password hash
        $password_hash = $this->generate_password_hash($password);
        
        // Add user to database
        $result = $this->insert_user($username, $password_hash, $email);
        
        return $result;
    }
    
    public function authenticate($username, $password) {
        // Get user from database
        $user = $this->get_user_by_username($username);
        
        if (!$user) {
            return false;
        }
        
        // Verify password
        if (!$this->verify_password($password, $user->user_pass)) {
            return false;
        }
        
        // Set current user
        $this->current_user = $user;
        
        return true;
    }
    
    public function get_current_user() {
        return $this->current_user;
    }
    
    // Private implementation methods
    private function validate_username($username) {
        return !empty($username) && preg_match('/^[a-zA-Z0-9_]{3,20}$/', $username);
    }
    
    private function validate_email($email) {
        return !empty($email) && is_email($email);
    }
    
    private function generate_password_hash($password) {
        return password_hash($password . $this->hash_salt, $this->password_hash_algo);
    }
    
    private function verify_password($password, $hash) {
        return password_verify($password . $this->hash_salt, $hash);
    }
    
    private function get_user_by_username($username) {
        return $this->db_connection->get_row(
            $this->db_connection->prepare(
                "SELECT * FROM {$this->user_table} WHERE user_login = %s",
                $username
            )
        );
    }
    
    private function insert_user($username, $password_hash, $email) {
        // Insert user into database
        $result = $this->db_connection->insert(
            $this->user_table,
            [
                'user_login' => $username,
                'user_pass' => $password_hash,
                'user_email' => $email,
                'user_registered' => current_time('mysql')
            ]
        );
        
        return $result ? $this->db_connection->insert_id : false;
    }
}

// Now outside code can only use the public API
$user_manager = new User_Manager();
$user_manager->add_user('john_doe', 'secure_password', 'john@example.com');
$user_manager->authenticate('john_doe', 'secure_password');
$current_user = $user_manager->get_current_user();

// These would all fail
// echo $user_manager->hash_salt; // Fatal error
// $user_manager->password_hash_algo = 'md5'; // Fatal error
// $user_manager->db_connection->exec("DROP TABLE wp_users"); // Fatal error
?&gt;</code></pre>

            <h3>Excessive Use of Private</h3>
            <pre><code>&lt;?php
// BAD PRACTICE: Everything is private, preventing extension
class Theme_Customizer {
    // All private, nothing can be extended
    private $settings = [];
    private $sections = [];
    private $controls = [];
    
    public function __construct() {
        add_action('customize_register', [$this, 'register_customizer']);
    }
    
    public function register_customizer($wp_customize) {
        $this->register_settings($wp_customize);
        $this->register_sections($wp_customize);
        $this->register_controls($wp_customize);
    }
    
    private function register_settings($wp_customize) {
        // Register settings logic
    }
    
    private function register_sections($wp_customize) {
        // Register sections logic
    }
    
    private function register_controls($wp_customize) {
        // Register controls logic
    }
    
    private function sanitize_hex_color($value) {
        // Sanitize color
    }
}

// Now if someone wants to extend this class, they're stuck:
class Extended_Theme_Customizer extends Theme_Customizer {
    // Can't override or reuse any of the parent methods!
    // register_settings, register_sections, register_controls are all private
}
?&gt;</code></pre>

            <h3>BETTER APPROACH</h3>
            <pre><code>&lt;?php
// GOOD PRACTICE: Using protected for extensibility
class Theme_Customizer {
    // Private for truly internal data
    private $instance_id;
    
    // Protected for extensible properties
    protected $settings = [];
    protected $sections = [];
    protected $controls = [];
    
    public function __construct() {
        $this->instance_id = uniqid('customizer_');
        add_action('customize_register', [$this, 'register_customizer']);
    }
    
    public function register_customizer($wp_customize) {
        $this->register_settings($wp_customize);
        $this->register_sections($wp_customize);
        $this->register_controls($wp_customize);
    }
    
    // Protected methods can be overridden by child classes
    protected function register_settings($wp_customize) {
        // Register settings logic
    }
    
    protected function register_sections($wp_customize) {
        // Register sections logic
    }
    
    protected function register_controls($wp_customize) {
        // Register controls logic
    }
    
    // Utility method that could be useful for child classes
    protected function sanitize_hex_color($value) {
        // Sanitize color
        return sanitize_hex_color($value);
    }
}

// Now extensions work properly!
class Extended_Theme_Customizer extends Theme_Customizer {
    // Can override protected methods
    protected function register_settings($wp_customize) {
        // Call parent first
        parent::register_settings($wp_customize);
        
        // Add our own settings
        $wp_customize->add_setting('custom_header_height', [
            'default' => '200',
            'sanitize_callback' => 'absint'
        ]);
    }
    
    // Can reuse protected utility methods
    protected function register_controls($wp_customize) {
        parent::register_controls($wp_customize);
        
        // Add a custom color control
        $wp_customize->add_control(
            new WP_Customize_Color_Control(
                $wp_customize,
                'custom_header_color',
                [
                    'label' => 'Header Color',
                    'section' => 'colors',
                    'settings' => 'custom_header_color'
                ]
            )
        );
        
        // We can reuse the parent's utility method
        $this->sanitize_hex_color('#ffffff');
    }
}
?&gt;</code></pre>

            <div class="best-practice">
                <h4>Best Practices Summary</h4>
                <ul>
                    <li><strong>Default to private</strong>: Start by making everything private, then expose only what's needed</li>
                    <li><strong>Use public carefully</strong>: Public members form your API, so choose them wisely</li>
                    <li><strong>Protected for inheritance</strong>: Use protected for members that child classes will need</li>
                    <li><strong>Encapsulate implementation details</strong>: Keep internal workings private</li>
                    <li><strong>Think about extensibility</strong>: Consider how your class might be extended</li>
                </ul>
            </div>
        </section>

        <section class="property-methods">
            <h2>Getter and Setter Methods: Controlled Access</h2>
            
            <p>A common pattern when using access modifiers is to make properties private or protected and provide public getter and setter methods:</p>
            
            <pre><code>&lt;?php
class Article {
    // Private properties
    private $id;
    private $title;
    private $content;
    private $author;
    private $published_date;
    private $status = 'draft';
    
    public function __construct($title, $content, $author) {
        $this->id = uniqid('article_');
        $this->title = $title;
        $this->content = $content;
        $this->author = $author;
        $this->published_date = null;
    }
    
    // GETTERS
    
    /**
     * Get the article ID
     * 
     * @return string Article ID
     */
    public function getId() {
        return $this->id;
    }
    
    /**
     * Get the article title
     * 
     * @return string Article title
     */
    public function getTitle() {
        return $this->title;
    }
    
    /**
     * Get the article content
     * 
     * @param bool $formatted Whether to return formatted content
     * @return string Article content
     */
    public function getContent($formatted = false) {
        if ($formatted) {
            return wpautop($this->content);
        }
        return $this->content;
    }
    
    /**
     * Get the article author
     * 
     * @return string Author name
     */
    public function getAuthor() {
        return $this->author;
    }
    
    /**
     * Get the published date
     * 
     * @param string $format Date format (default WordPress date format)
     * @return string|null Formatted date or null
     */
    public function getPublishedDate($format = '') {
        if (!$this->published_date) {
            return null;
        }
        
        $format = $format ?: get_option('date_format');
        return date($format, strtotime($this->published_date));
    }
    
    /**
     * Get the article status
     * 
     * @return string Status (draft, pending, published)
     */
    public function getStatus() {
        return $this->status;
    }
    
    /**
     * Check if article is published
     * 
     * @return bool Whether article is published
     */
    public function isPublished() {
        return $this->status === 'published';
    }
    
    // SETTERS
    
    /**
     * Set the article title
     * 
     * @param string $title New title
     * @return Article This object for method chaining
     */
    public function setTitle($title) {
        if (empty($title)) {
            throw new InvalidArgumentException('Title cannot be empty');
        }
        
        $this->title = sanitize_text_field($title);
        return $this;
    }
    
    /**
     * Set the article content
     * 
     * @param string $content New content
     * @return Article This object for method chaining
     */
    public function setContent($content) {
        if (empty($content)) {
            throw new InvalidArgumentException('Content cannot be empty');
        }
        
        $this->content = wp_kses_post($content);
        return $this;
    }
    
    /**
     * Set the article author
     * 
     * @param string $author New author
     * @return Article This object for method chaining
     */
    public function setAuthor($author) {
        if (empty($author)) {
            throw new InvalidArgumentException('Author cannot be empty');
        }
        
        $this->author = sanitize_text_field($author);
        return $this;
    }
    
    /**
     * Publish the article
     * 
     * @return Article This object for method chaining
     */
    public function publish() {
        if ($this->status === 'published') {
            return $this;
        }
        
        $this->status = 'published';
        $this->published_date = date('Y-m-d H:i:s');
        
        return $this;
    }
    
    /**
     * Set the article to draft status
     * 
     * @return Article This object for method chaining
     */
    public function unpublish() {
        $this->status = 'draft';
        return $this;
    }
}

// Usage
$article = new Article('Understanding PHP OOP', 'In this article...', 'Jane Developer');

// Can't access properties directly
// echo $article->title; // Fatal error

// Use getters instead
echo $article->getTitle(); // Works!
echo $article->getContent(true); // Get formatted content

// Use setters with validation and sanitization
$article->setTitle('Updated Title')
        ->setContent('New content...')
        ->publish();

// Check status
if ($article->isPublished()) {
    echo "Article was published on: " . $article->getPublishedDate();
}
?&gt;</code></pre>

            <p>Benefits of using getter and setter methods:</p>
            <ul>
                <li><strong>Validation</strong>: You can validate data before setting it</li>
                <li><strong>Sanitization</strong>: You can sanitize or transform data as needed</li>
                <li><strong>Format control</strong>: You can return data in different formats</li>
                <li><strong>Computed properties</strong>: You can calculate values on the fly</li>
                <li><strong>API stability</strong>: You can change internal implementation without breaking code</li>
                <li><strong>Method chaining</strong>: You can enable fluent interfaces (as shown above)</li>
            </ul>
        </section>

        <section class="wordpress-access-patterns">
            <h2>Common Access Patterns in WordPress</h2>
            
            <p>WordPress has evolved its coding patterns over time. Here are some common access patterns you'll see in the WordPress ecosystem:</p>
            
            <h3>1. Mixed Access in Core Classes</h3>
            <pre><code>&lt;?php
// WordPress core pattern (simplified)
class WP_Theme {
    // Public properties
    public $stylesheet;
    public $template;
    
    // Protected properties
    protected $cache_hash;
    protected $textdomain_loaded = false;
    
    // Private properties
    private $headers = [];
    private $headers_sanitized;
    
    // Public methods form the API
    public function get($header) {
        return $this->headers[$header] ?? false;
    }
    
    public function get_stylesheet() {
        return $this->stylesheet;
    }
    
    // Protected methods for inheritance
    protected function translate_header($header, $value) {
        return translate($value, $this->get('TextDomain'));
    }
    
    // Private methods for internal use
    private function cache_headers() {
        $this->headers_sanitized = true;
    }
}
?&gt;</code></pre>

            <h3>2. All Public in Legacy Code</h3>
            <pre><code>&lt;?php
// Old WordPress pattern (simplified)
class WP_Post_Type {
    // All public properties
    public $name;
    public $label;
    public $labels;
    public $description;
    public $hierarchical;
    public $public;
    public $show_ui;
    // ...more properties...
    
    // Even internal methods are public
    public function set_props($args) {
        // Set properties from args
    }
    
    public function add_supports() {
        // Add support features
    }
    
    public function add_rewrite_rules() {
        // Add rewrite rules
    }
}
?&gt;</code></pre>

            <h3>3. Modern Encapsulated Pattern</h3>
            <pre><code>&lt;?php
// Modern WordPress pattern (simplified)
class WP_Block_Type {
    // Private properties
    private $name;
    private $attributes = [];
    private $uses_context = [];
    private $api_version = 1;
    private $rendered_content = '';
    
    // Public getter methods
    public function get_name() {
        return $this->name;
    }
    
    public function get_attributes() {
        return $this->attributes;
    }
    
    public function get_api_version() {
        return $this->api_version;
    }
    
    // Public operational methods
    public function is_dynamic() {
        return is_callable($this->render_callback);
    }
    
    public function render($attributes = []) {
        // Rendering logic
    }
    
    // Protected methods for inheritance
    protected function filter_attributes($attributes) {
        // Filter and validate attributes
    }
    
    // Private internal methods
    private function prepare_attributes_for_render($attributes) {
        // Prepare attributes
    }
}
?&gt;</code></pre>

            <h3>4. Singleton with Private Constructor</h3>
            <pre><code>&lt;?php
// WordPress singleton pattern (simplified)
class WP_Screen {
    // Private static instance
    private static $instance;
    
    // Private properties
    private $action;
    private $base;
    private $id;
    private $is_network;
    private $is_user;
    
    // Private constructor prevents direct instantiation
    private function __construct($id) {
        $this->id = $id;
        // Initialize screen
    }
    
    // Public static factory method
    public static function get($id = '') {
        if (isset(self::$instance)) {
            return self::$instance;
        }
        
        self::$instance = new self($id);
        return self::$instance;
    }
    
    // Public getters
    public function get_id() {
        return $this->id;
    }
    
    public function get_option($option, $default = false) {
        // Get screen option
    }
    
    public function is_user() {
        return $this->is_user;
    }
    
    public function is_network() {
        return $this->is_network;
    }
}
?&gt;</code></pre>
        </section>

        <section class="inheritance-access">
            <h2>Access Modifiers in Inheritance</h2>
            
            <p>When extending classes, understanding access modifiers becomes even more important:</p>
            
            <div class="mermaid">
                classDiagram
                    class Base {
                        +public prop1
                        #protected prop2
                        -private prop3
                        +public method1()
                        #protected method2()
                        -private method3()
                    }
                    
                    class Child {
                        +public prop4
                        #protected prop5
                        -private prop6
                        +public method4()
                        #protected method5()
                        -private method6()
                    }
                    
                    Base <|-- Child
                    
                    note for Base "Parent class"
                    note for Child "Child class can access\npublic and protected members\nfrom parent, but NOT private"
            </div>
            
            <pre><code>&lt;?php
class Base_Widget {
    // Public member - accessible everywhere
    public $widget_id;
    
    // Protected member - accessible in this class and children
    protected $default_settings = [
        'title' => '',
        'show_title' => true
    ];
    
    // Private member - only accessible in this class
    private $callback_refs = [];
    
    public function __construct($id) {
        $this->widget_id = $id;
    }
    
    // Public method - can be called anywhere
    public function render($instance) {
        // Merge defaults
        $instance = wp_parse_args($instance, $this->default_settings);
        
        // Prepare content
        $content = $this->prepare_content($instance);
        
        // Add wrapper
        return $this->wrap_widget($content, $instance);
    }
    
    // Protected method - can be overridden by child classes
    protected function prepare_content($instance) {
        return 'Default widget content';
    }
    
    // Protected method - can be overridden by child classes
    protected function wrap_widget($content, $instance) {
        $output = '<div class="widget">';
        
        if ($instance['show_title'] && !empty($instance['title'])) {
            $output .= '<h3 class="widget-title">' . esc_html($instance['title']) . '</h3>';
        }
        
        $output .= '<div class="widget-content">' . $content . '</div>';
        $output .= '</div>';
        
        return $output;
    }
    
    // Private method - only available in this class
    private function register_callback($hook, $callback) {
        $this->callback_refs[$hook] = $callback;
    }
}

class Recent_Posts_Widget extends Base_Widget {
    // Child-specific protected property
    protected $default_settings = [
        'title' => 'Recent Posts',
        'show_title' => true,
        'number' => 5,
        'show_date' => false
    ];
    
    public function __construct() {
        // Call parent constructor
        parent::__construct('recent-posts');
    }
    
    // Override protected method
    protected function prepare_content($instance) {
        $posts = get_posts([
            'numberposts' => $instance['number'],
            'post_status' => 'publish'
        ]);
        
        if (empty($posts)) {
            return 'No posts found.';
        }
        
        $output = '<ul class="recent-posts">';
        
        foreach ($posts as $post) {
            $output .= '<li>';
            $output .= '<a href="' . get_permalink($post) . '">' . get_the_title($post) . '</a>';
            
            if ($instance['show_date']) {
                $output .= ' <span class="post-date">' . get_the_date('', $post) . '</span>';
            }
            
            $output .= '</li>';
        }
        
        $output .= '</ul>';
        
        return $output;
    }
    
    // WILL NOT WORK - Cannot access private members from parent
    /*
    public function broken_method() {
        // This will cause a fatal error - can't access private property
        $this->callback_refs = [];
        
        // This will also cause a fatal error - can't access private method
        $this->register_callback('init', [$this, 'init']);
    }
    */
}

// Usage
$posts_widget = new Recent_Posts_Widget();
echo $posts_widget->render([
    'title' => 'Latest News',
    'number' => 3,
    'show_date' => true
]);
?&gt;</code></pre>

            <p>Key points about inheritance and access modifiers:</p>
            <ul>
                <li><strong>Public members</strong> are inherited and accessible in child classes</li>
                <li><strong>Protected members</strong> are inherited and accessible in child classes</li>
                <li><strong>Private members</strong> are NOT accessible in child classes</li>
                <li>Child classes can override public and protected methods, but not private ones</li>
                <li>Child classes can declare properties with the same name as private parent properties (they'll be separate properties)</li>
            </ul>
        </section>

        <section class="practical-implementation">
            <h2>Putting It All Together: A WordPress Menu Walker</h2>
            
            <p>Let's apply our understanding of access modifiers to create a custom menu walker class (a common WordPress customization):</p>
            
            <pre><code>&lt;?php
/**
 * Custom Menu Walker with Social Icons
 * 
 * Demonstrates proper use of access modifiers in an extensible class.
 */
class Social_Icons_Walker extends Walker_Nav_Menu {
    // Protected property that child classes might want to modify
    protected $social_icons = [
        'facebook' => 'fab fa-facebook',
        'twitter' => 'fab fa-twitter',
        'instagram' => 'fab fa-instagram',
        'linkedin' => 'fab fa-linkedin',
        'youtube' => 'fab fa-youtube',
        'pinterest' => 'fab fa-pinterest',
        'github' => 'fab fa-github',
        'email' => 'fas fa-envelope'
    ];
    
    // Private property for internal tracking
    private $item_count = 0;
    
    /**
     * Start level output
     * 
     * Public because it's part of the Walker API that WordPress calls
     */
    public function start_lvl(&$output, $depth = 0, $args = []) {
        $indent = str_repeat("\t", $depth);
        $output .= "\n$indent<ul class=\"sub-menu social-submenu\">\n";
    }
    
    /**
     * End level output
     * 
     * Public because it's part of the Walker API
     */
    public function end_lvl(&$output, $depth = 0, $args = []) {
        $indent = str_repeat("\t", $depth);
        $output .= "$indent</ul>\n";
    }
    
    /**
     * Start element output
     * 
     * Public because it's part of the Walker API
     */
    public function start_el(&$output, $item, $depth = 0, $args = [], $id = 0) {
        $this->item_count++;
        
        $indent = ($depth) ? str_repeat("\t", $depth) : '';
        $classes = empty($item->classes) ? [] : (array) $item->classes;
        $classes[] = 'menu-item-' . $item->ID;
        
        // Add custom social icon class if applicable
        $icon_class = $this->get_social_icon_class($item->url);
        if ($icon_class) {
            $classes[] = 'menu-item-has-icon';
        }
        
        $class_names = join(' ', apply_filters('nav_menu_css_class', array_filter($classes), $item, $args, $depth));
        $class_names = $class_names ? ' class="' . esc_attr($class_names) . '"' : '';
        
        $id = apply_filters('nav_menu_item_id', 'menu-item-' . $item->ID, $item, $args, $depth);
        $id = $id ? ' id="' . esc_attr($id) . '"' : '';
        
        $output .= $indent . '<li' . $id . $class_names . '>';
        
        $atts = [];
        $atts['title']  = !empty($item->attr_title) ? $item->attr_title : '';
        $atts['target'] = !empty($item->target) ? $item->target : '';
        $atts['rel']    = !empty($item->xfn) ? $item->xfn : '';
        $atts['href']   = !empty($item->url) ? $item->url : '';
        $atts['class']  = 'menu-link';
        
        $atts = apply_filters('nav_menu_link_attributes', $atts, $item, $args, $depth);
        
        $attributes = '';
        foreach ($atts as $attr => $value) {
            if (!empty($value)) {
                $value = ('href' === $attr) ? esc_url($value) : esc_attr($value);
                $attributes .= ' ' . $attr . '="' . $value . '"';
            }
        }
        
        $title = apply_filters('the_title', $item->title, $item->ID);
        $title = apply_filters('nav_menu_item_title', $title, $item, $args, $depth);
        
        // Start the link
        $item_output = $args->before;
        $item_output .= '<a' . $attributes . '>';
        
        // Add icon if it's a social link
        if ($icon_class) {
            $item_output .= $this->render_social_icon($icon_class, $title);
        } else {
            $item_output .= $args->link_before . $title . $args->link_after;
        }
        
        $item_output .= '</a>';
        $item_output .= $args->after;
        
        $output .= apply_filters('walker_nav_menu_start_el', $item_output, $item, $depth, $args);
    }
    
    /**
     * End element output
     * 
     * Public because it's part of the Walker API
     */
    public function end_el(&$output, $item, $depth = 0, $args = [], $id = 0) {
        $output .= "</li>\n";
    }
    
    /**
     * Check if a URL is a social media link and get the icon class
     * 
     * Protected so child classes can override or use this method
     * 
     * @param string $url The URL to check
     * @return string|false Icon class or false if not a social URL
     */
    protected function get_social_icon_class($url) {
        if (!$url) {
            return false;
        }
        
        foreach ($this->social_icons as $social => $icon) {
            // Special case for email links
            if ($social === 'email' && strpos($url, 'mailto:') !== false) {
                return $icon;
            }
            
            // Check if URL contains the social network domain
            if (strpos($url, $social . '.com') !== false) {
                return $icon;
            }
        }
        
        return false;
    }
    
    /**
     * Render a social icon with accessible markup
     * 
     * Protected so child classes can override this rendering
     * 
     * @param string $icon_class The icon CSS class
     * @param string $title The link title text
     * @return string HTML markup for the icon
     */
    protected function render_social_icon($icon_class, $title) {
        return '<span class="social-icon"><i class="' . esc_attr($icon_class) . '" aria-hidden="true"></i></span>' .
               '<span class="screen-reader-text">' . esc_html($title) . '</span>';
    }
    
    /**
     * Get the total number of menu items processed
     * 
     * Public API method for outside code
     * 
     * @return int Count of processed items
     */
    public function get_item_count() {
        return $this->item_count;
    }
    
    /**
     * Reset internal counters
     * 
     * Public API method for outside code
     */
    public function reset() {
        $this->item_count = 0;
    }
    
    /**
     * Private method to generate debugging information
     * 
     * Only for internal use
     * 
     * @return string Debug information
     */
    private function get_debug_info() {
        return 'Items processed: ' . $this->item_count;
    }
}

// Extended class shows the benefit of protected members
class Branded_Social_Icons_Walker extends Social_Icons_Walker {
    // Override protected property with our own brand colors
    protected $social_icons = [
        'facebook' => 'brand-icon facebook-brand',
        'twitter' => 'brand-icon twitter-brand',
        'instagram' => 'brand-icon instagram-brand',
        'linkedin' => 'brand-icon linkedin-brand',
        // Additional custom social networks
        'custom-network' => 'brand-icon custom-brand'
    ];
    
    // Override protected method to add custom rendering
    protected function render_social_icon($icon_class, $title) {
        // Add brand-specific wrapper and animation
        return '<span class="brand-social-icon animated">' .
               '<span class="icon-inner"><i class="' . esc_attr($icon_class) . '" aria-hidden="true"></i></span>' .
               '<span class="brand-text">' . esc_html($title) . '</span>' .
               '</span>';
    }
}

// Usage
function my_custom_social_menu() {
    // Standard Walker
    wp_nav_menu([
        'theme_location' => 'social-menu',
        'menu_class' => 'social-links-menu',
        'depth' => 1,
        'walker' => new Social_Icons_Walker()
    ]);
    
    // Branded Walker
    wp_nav_menu([
        'theme_location' => 'social-menu',
        'menu_class' => 'branded-social-menu',
        'depth' => 1,
        'walker' => new Branded_Social_Icons_Walker()
    ]);
}
?&gt;</code></pre>

            <p>This example showcases:</p>
            <ul>
                <li><strong>Public methods</strong> that form the required Walker API</li>
                <li><strong>Protected properties and methods</strong> that child classes can override</li>
                <li><strong>Private methods</strong> for purely internal functionality</li>
                <li>A child class that extends and customizes behavior by overriding protected members</li>
            </ul>
        </section>

        <section class="homework">
            <h2>Homework: Create a Simple Class with Access Modifiers</h2>
            
            <p>Now it's your turn to practice with access modifiers:</p>
            
            <div class="assignment">
                <h3>Assignment</h3>
                <p>Create a <code>Post_Metadata_Manager</code> class that could be used to manage custom post meta in WordPress. Your class should:</p>
                
                <ol>
                    <li>Include at least one property of each access type (public, protected, private)</li>
                    <li>Include methods of each access type (public, protected, private)</li>
                    <li>Use proper encapsulation for sensitive or internal data</li>
                    <li>Include getter and setter methods for accessing private properties</li>
                    <li>Be designed so it could be extended by child classes</li>
                </ol>
                
                <p>Here's a starter template to help you:</p>
                
                <pre><code>&lt;?php
/**
 * Post Metadata Manager Class
 * 
 * A class to manage custom post meta data with proper encapsulation.
 */
class Post_Metadata_Manager {
    // Public property example
    public $post_id;
    
    // Protected property example
    protected $meta_prefix = 'custom_';
    
    // Private properties
    private $cached_meta = [];
    private $modified = false;
    
    /**
     * Constructor
     * 
     * @param int $post_id Post ID
     */
    public function __construct($post_id) {
        $this->post_id = $post_id;
    }
    
    /**
     * Get a meta value
     * 
     * @param string $key Meta key (without prefix)
     * @param bool $single Whether to return a single value
     * @return mixed Meta value
     */
    public function get_meta($key, $single = true) {
        // TODO: Implement this method
    }
    
    /**
     * Set a meta value
     * 
     * @param string $key Meta key (without prefix)
     * @param mixed $value Meta value
     * @return bool Success
     */
    public function set_meta($key, $value) {
        // TODO: Implement this method
    }
    
    /**
     * Delete a meta value
     * 
     * @param string $key Meta key (without prefix)
     * @return bool Success
     */
    public function delete_meta($key) {
        // TODO: Implement this method
    }
    
    /**
     * Save all pending changes
     * 
     * @return bool Success
     */
    public function save() {
        // TODO: Implement this method
    }
    
    /**
     * Protected method for key formatting
     * 
     * @param string $key Raw key
     * @return string Formatted key
     */
    protected function format_key($key) {
        // TODO: Implement this method
    }
    
    /**
     * Private method for caching
     * 
     * @param string $key Meta key
     * @param mixed $value Meta value
     */
    private function cache_meta($key, $value) {
        // TODO: Implement this method
    }
}

// Example extension class
class SEO_Metadata_Manager extends Post_Metadata_Manager {
    // Extend with SEO-specific functionality
    // Override protected methods as needed
}

// Usage example
function update_post_meta_example($post_id) {
    $meta_manager = new Post_Metadata_Manager($post_id);
    
    // Get meta
    $custom_field = $meta_manager->get_meta('custom_field');
    
    // Set meta
    $meta_manager->set_meta('author_bio', 'Author biography text...');
    
    // Save changes
    $meta_manager->save();
}
?&gt;</code></pre>
                
                <p>Complete this class with your own implementation. Consider how you would handle validation, caching, and error handling.</p>
            </div>
        </section>

        <section class="additional-resources">
            <h2>Additional Resources</h2>
            
            <h3>Further Reading</h3>
            <ul>
                <li><a href="https://www.php.net/manual/en/language.oop5.visibility.php" target="_blank">PHP Manual: Visibility</a></li>
                <li><a href="https://developer.wordpress.org/coding-standards/wordpress-coding-standards/php/" target="_blank">WordPress PHP Coding Standards</a></li>
                <li><a href="https://phptherightway.com/#object-oriented-programming" target="_blank">PHP The Right Way: OOP Chapter</a></li>
            </ul>
            
            <h3>Next Class Preview</h3>
            <p>In our next session, we'll explore static properties and methods in PHP, which provide a way to access class information without creating an instance. This is a powerful technique used extensively in WordPress development.</p>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 PHP WordPress Development Course</p>
        <p><a href="module2.html">Back to Module 2</a> | <a href="index.html">Back to Syllabus</a></p>
    </footer>
</body>
</html>
