<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Namespaces in PHP: Organizing Your Code</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="icon" href="/favicon.png">
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <header>
        <h1>Namespaces in PHP</h1>
        <p><a href="index.html">‚Üê Back to Syllabus</a></p>
    </header>
    
    <main>
        <section class="module-intro">
            <h2>Bringing Order to Your Code</h2>
            <p>Welcome to our exploration of namespaces in PHP! In our previous lessons, we've covered classes, inheritance, abstract classes, and interfaces. Today, we'll be diving into namespaces - a powerful organizational tool that helps you structure your code and avoid naming conflicts in larger projects.</p>
            
            <div class="note">
                <p><strong>Why Namespaces Matter:</strong> In WordPress development, especially when building larger plugins or themes, namespaces help you avoid conflicts with other plugins and WordPress core. They're essential for creating professional, maintainable code that plays well with the broader WordPress ecosystem.</p>
            </div>
        </section>

        <section id="namespace-basics">
            <h2>What Are Namespaces?</h2>
            
            <p>Think of namespaces as addresses or zip codes for your code. Just as two people can have the same name but live at different addresses, two classes can have the same name but exist in different namespaces.</p>
            
            <div class="diagram">
                <h3>Namespace Hierarchy</h3>
                <div class="mermaid">
                    graph TD
                        A[Global Namespace] --> B[MyPlugin Namespace]
                        B --> C[Admin Namespace]
                        B --> D[Frontend Namespace]
                        B --> E[API Namespace]
                        C --> F[Settings]
                        C --> G[Dashboard]
                        D --> H[Shortcodes]
                        D --> I[Widgets]
                        E --> J[Endpoints]
                        E --> K[Auth]
                </div>
            </div>
            
            <p>In this diagram, we have a hierarchical structure of namespaces for a WordPress plugin. Each namespace contains related classes and functions, organized by their purpose.</p>
            
            <div class="analogy">
                <h3>The Library Analogy</h3>
                <p>Think of namespaces as sections in a library. Without namespaces, all books (classes, functions) would be piled together in one big heap, making it hard to find what you need and causing confusion when two books have the same title.</p>
                <p>With namespaces, books are organized into different sections (Fiction, Non-Fiction, Reference, etc.), and then further organized into subsections. This structure makes it easier to find what you're looking for and prevents confusion between books with the same title but in different sections.</p>
                <p>Just as you would specify "Science Fiction: War of the Worlds" to distinguish from "History: War of the Worlds," you use namespaces like <code>\SciFi\WellsHG\WarOfTheWorlds</code> and <code>\History\WorldWars\WarOfTheWorlds</code> to distinguish between similarly named classes.</p>
            </div>
        </section>

        <section id="namespace-syntax">
            <h2>Namespace Syntax in PHP</h2>
            
            <p>In PHP, namespaces are declared using the <code>namespace</code> keyword at the beginning of a file, before any other code (except for the <code>declare</code> statement).</p>
            
            <div class="code-example">
                <h3>Basic Namespace Declaration</h3>
                <pre>###CODE_BLOCK_4###</pre>
            </div>
            
            <h3>Nested Namespaces</h3>
            
            <p>Namespaces can be nested to create a hierarchy, similar to directories in a file system. The backslash (\) is used as a separator.</p>
            
            <div class="code-example">
                <h3>Nested Namespace Example</h3>
                <pre>###CODE_BLOCK_5###</pre>
            </div>
            
            <div class="pro-tip">
                <h3>Namespace Standards</h3>
                <p>While PHP allows any valid identifier for namespace names, it's common practice to use StudlyCaps (PascalCase) for namespace names, mirroring the convention for class names. Namespaces are case-insensitive, but maintaining consistent capitalization makes your code more readable.</p>
                <pre>###CODE_BLOCK_6###</pre>
            </div>
        </section>

        <section id="namespace-referencing">
            <h2>Referencing Namespaced Code</h2>
            
            <p>There are three ways to reference namespaced code in PHP: fully qualified names, relative names, and imported names using the <code>use</code> statement.</p>
            
            <div class="code-example">
                <h3>Fully Qualified Names</h3>
                <pre>###CODE_BLOCK_8###</pre>
            </div>
            
            <div class="code-example">
                <h3>Relative Names</h3>
                <pre>###CODE_BLOCK_9###</pre>
            </div>
            
            <div class="code-example">
                <h3>Importing with the 'use' Statement</h3>
                <pre>###CODE_BLOCK_10###</pre>
            </div>
            
            <div class="pro-tip">
                <h3>Group Use Declarations (PHP 7.0+)</h3>
                <p>Since PHP 7.0, you can group multiple use declarations from the same namespace:</p>
                <pre>###CODE_BLOCK_11###</pre>
            </div>
        </section>

        <section id="namespace-global">
            <h2>The Global Namespace</h2>
            
            <p>Code that's not explicitly declared in a namespace belongs to the "global namespace". This includes all PHP built-in functions and classes, as well as code written without a namespace declaration.</p>
            
            <div class="code-example">
                <h3>Working with the Global Namespace</h3>
                <pre>###CODE_BLOCK_12###</pre>
            </div>
            
            <div class="note">
                <h3>Global Functions and Constants</h3>
                <p>When using functions and constants from the global namespace within a namespaced file, you need to prefix them with a backslash (\) to reference them explicitly, or import them with a use statement. Otherwise, PHP will look for them in the current namespace first.</p>
                <pre>###CODE_BLOCK_13###</pre>
            </div>
        </section>

        <section id="namespace-resolving">
            <h2>How PHP Resolves Names</h2>
            
            <p>Understanding how PHP resolves names in namespaced code is crucial for avoiding unexpected behavior.</p>
            
            <div class="code-example">
                <h3>Name Resolution Rules</h3>
                <pre>###CODE_BLOCK_14###</pre>
            </div>
            
            <h3>Special Name Resolution for PHP Internal Classes</h3>
            
            <p>For backward compatibility, PHP applies special rules when resolving names of internal (built-in) classes:</p>
            
            <div class="code-example">
                <h3>PHP Internal Class Resolution</h3>
                <pre>###CODE_BLOCK_15###</pre>
            </div>
        </section>

        <section id="namespace-benefits">
            <h2>Benefits of Using Namespaces</h2>
            
            <h3>Avoiding Name Collisions</h3>
            
            <p>The primary benefit of namespaces is avoiding naming conflicts, especially when integrating third-party code.</p>
            
            <div class="code-example">
                <h3>Name Collision Example</h3>
                <pre>###CODE_BLOCK_16###</pre>
            </div>
            
            <h3>Better Code Organization</h3>
            
            <p>Namespaces allow you to organize your code logically, grouping related functionality together.</p>
            
            <div class="diagram">
                <h3>Organized Code Structure</h3>
                <div class="mermaid">
                    graph TD
                    subgraph "Project Structure"
                        A[src/]
                        B[MyPlugin/]
                        C[Admin/]
                        D[Frontend/]
                        E[Admin/Settings.php]
                        F[Admin/Dashboard.php]
                        G[Frontend/Widgets.php]
                        H[Frontend/Shortcodes.php]
                    end
                    
                    subgraph "Namespace Structure"
                        I[\MyPlugin]
                        J[\MyPlugin\\Admin]
                        K[\MyPlugin\Frontend]
                        L[\MyPlugin\\Admin\\Settings]
                        M[\MyPlugin\\Admin\\Dashboard]
                        N[\MyPlugin\Frontend\\Widgets]
                        O[\MyPlugin\Frontend\\Shortcodes]
                    end
                    
                    A --> B
                    B --> C
                    B --> D
                    C --> E
                    C --> F
                    D --> G
                    D --> H
                    
                    I --> J
                    I --> K
                    J --> L
                    J --> M
                    K --> N
                    K --> O
                </div>
            </div>
            
            <p>This diagram shows how the file structure and namespace structure can mirror each other, creating a logical organization for your code.</p>
            
            <h3>Autoloading Compatibility</h3>
            
            <p>Namespaces work hand-in-hand with autoloading standards like PSR-4, which map namespace structures to file directories for automatic class loading.</p>
            
            <div class="code-example">
                <h3>PSR-4 Autoloading Example</h3>
                <pre>###CODE_BLOCK_17###</pre>
            </div>
        </section>

        <section id="namespace-wordpress">
            <h2>Namespaces in WordPress Development</h2>
            
            <p>WordPress core still largely operates without namespaces for backward compatibility reasons. However, modern WordPress development, especially for plugins and themes, increasingly uses namespaces.</p>
            
            <h3>Plugin Namespaces</h3>
            
            <p>When creating WordPress plugins, it's a good practice to namespace your code to avoid conflicts with other plugins or WordPress core.</p>
            
            <div class="code-example">
                <h3>WordPress Plugin with Namespaces</h3>
                <pre>###CODE_BLOCK_18###</pre>
            </div>
            
            <h3>Admin Class in a Namespace</h3>
            
            <div class="code-example">
                <h3>Admin Class (includes/class-admin.php)</h3>
                <pre>###CODE_BLOCK_19###</pre>
            </div>
            
            <h3>Frontend Class in a Namespace</h3>
            
            <div class="code-example">
                <h3>Frontend Class (includes/class-frontend.php)</h3>
                <pre>###CODE_BLOCK_20###</pre>
            </div>
        </section>

        <section id="namespace-autoloading">
            <h2>Autoloading with Namespaces</h2>
            
            <p>One of the most powerful benefits of using namespaces is the ability to set up automatic class loading based on the namespace structure. This eliminates the need for numerous <code>require</code> or <code>include</code> statements.</p>
            
            <h3>Simple Autoloader</h3>
            
            <div class="code-example">
                <h3>Basic PSR-4 Style Autoloader</h3>
                <pre>###CODE_BLOCK_23###</pre>
            </div>
            
            <h3>Using Composer Autoloading</h3>
            
            <p>For more robust autoloading, Composer provides a PSR-4 compatible autoloader that's widely used in modern PHP development.</p>
            
            <div class="code-example">
                <h3>Setting Up Composer Autoloading</h3>
                <pre>###CODE_BLOCK_24###</pre>
            </div>
            
            <div class="pro-tip">
                <h3>WordPress and Composer</h3>
                <p>While WordPress core doesn't use Composer, many modern WordPress plugins and themes do. When distributing your plugin, you have two main options:</p>
                <ol>
                    <li>Include Composer's autoloader and vendor directory in your distribution package</li>
                    <li>Use a custom autoloader specific to your plugin to avoid conflicts with other plugins using Composer</li>
                </ol>
                <p>For smaller plugins without many dependencies, the second approach is often simpler and more lightweight.</p>
            </div>
        </section>

        <section id="namespace-best-practices">
            <h2>Namespace Best Practices</h2>
            
            <div class="best-practices">
                <div class="practice">
                    <h3>Use Vendor Namespaces</h3>
                    <p>Start your namespace with a unique vendor name (usually your company or plugin name) to avoid conflicts with other plugins or libraries.</p>
                    <div class="code-example">
                        <h4>Good: Using a vendor namespace</h4>
                        <pre>###CODE_BLOCK_25###</pre>
                    </div>
                </div>
                
                <div class="practice">
                    <h3>Match Namespace to Directory Structure</h3>
                    <p>Following PSR-4 standards, your namespace structure should mirror your directory structure for easier navigation and autoloading.</p>
                    <div class="code-example">
                        <h4>Good: Directory structure matches namespace</h4>
                        <pre>###CODE_BLOCK_26###</pre>
                    </div>
                </div>
                
                <div class="practice">
                    <h3>Use a Single Namespace Per File</h3>
                    <p>For clarity and maintainability, stick to one namespace per file. This also simplifies autoloading.</p>
                    <div class="code-example">
                        <h4>Good: One namespace per file</h4>
                        <pre>###CODE_BLOCK_27###</pre>
                    </div>
                </div>
                
                <div class="practice">
                    <h3>Import Classes with Use Statements</h3>
                    <p>For readability, import the classes you use frequently with <code>use</code> statements at the top of your file rather than using fully qualified names throughout.</p>
                    <div class="code-example">
                        <h4>Good: Importing with use statements</h4>
                        <pre>###CODE_BLOCK_29###</pre>
                    </div>
                </div>
                
                <div class="practice">
                    <h3>Be Explicit with Global Functions and Classes</h3>
                    <p>When using PHP built-in functions or WordPress functions within a namespace, either prefix them with a backslash (\) or import them using <code>use function</code> to avoid ambiguity.</p>
                    <div class="code-example">
                        <h4>Good: Being explicit with global functions</h4>
                        <pre>###CODE_BLOCK_31###</pre>
                    </div>
                </div>
                
                <div class="practice">
                    <h3>Use __NAMESPACE__ for Callbacks</h3>
                    <p>When registering callbacks in WordPress hooks from within a namespace, use the <code>__NAMESPACE__</code> constant to build the fully qualified function name.</p>
                    <div class="code-example">
                        <h4>Good: Using __NAMESPACE__ for callbacks</h4>
                        <pre>###CODE_BLOCK_33###</pre>
                    </div>
                </div>
            </div>
        </section>

        <section id="common-namespace-challenges">
            <h2>Common Namespace Challenges</h2>
            
            <div class="challenges">
                <div class="challenge">
                    <h3>Working with Global WordPress Functions</h3>
                    <p>One of the biggest challenges when using namespaces in WordPress is interfacing with WordPress's global functions and classes.</p>
                    <div class="code-example">
                        <h4>Challenge: Accessing WordPress Functions</h4>
                        <pre>###CODE_BLOCK_34###</pre>
                    </div>
                </div>
                
                <div class="challenge">
                    <h3>Dynamic Namespace References</h3>
                    <p>Creating dynamic class names with namespaces requires special handling.</p>
                    <div class="code-example">
                        <h4>Challenge: Dynamic Class Names</h4>
                        <pre>###CODE_BLOCK_35###</pre>
                    </div>
                </div>
                
                <div class="challenge">
                    <h3>Backward Compatibility with Non-Namespaced Code</h3>
                    <p>Integrating namespaced code with older, non-namespaced code can be tricky.</p>
                    <div class="code-example">
                        <h4>Challenge: Integration with Legacy Code</h4>
                        <pre>###CODE_BLOCK_36###</pre>
                    </div>
                </div>
                
                <div class="challenge">
                    <h3>Namespace Autoloading in WordPress</h3>
                    <p>Setting up autoloading in the WordPress environment requires some special considerations.</p>
                    <div class="code-example">
                        <h4>Challenge: WordPress-Specific Autoloading</h4>
                        <pre>###CODE_BLOCK_37###</pre>
                    </div>
                </div>
            </div>
        </section>

        <section id="real-world-examples">
            <h2>Real-World Examples in WordPress Plugins</h2>
            
            <h3>WooCommerce</h3>
            
            <p>WooCommerce, one of the most popular WordPress plugins, makes extensive use of namespaces to organize its large codebase.</p>
            
            <div class="code-example">
                <h3>WooCommerce Namespace Structure Example</h3>
                <pre>###CODE_BLOCK_38###</pre>
            </div>
            
            <h3>Advanced Custom Fields</h3>
            
            <p>The Pro version of Advanced Custom Fields uses namespaces to organize its additional functionality.</p>
            
            <div class="code-example">
                <h3>ACF Pro Namespace Structure Example</h3>
                <pre>###CODE_BLOCK_39###</pre>
            </div>
            
            <h3>Creating a REST API Endpoint with Namespaces</h3>
            
            <p>Here's a practical example of using namespaces when creating a custom REST API endpoint for your WordPress plugin:</p>
            
            <div class="code-example">
                <h3>Custom REST API with Namespaces</h3>
                <pre>###CODE_BLOCK_40###</pre>
            </div>
        </section>

        <section id="homework">
            <h2>Homework: Refactoring a Plugin to Use Namespaces</h2>
            
            <div class="assignment">
                <h3>Assignment: Namespace Organization</h3>
                
                <p>For this assignment, you'll take a simple WordPress plugin without namespaces and refactor it to use a proper namespace structure and organization.</p>
                
                <h4>Requirements:</h4>
                <ol>
                    <li>Create a namespace structure for the plugin with at least three namespaces:
                        <ul>
                            <li>Main plugin namespace (e.g., <code>MyPlugin</code>)</li>
                            <li>Admin namespace for admin-related code (e.g., <code>MyPlugin\Admin</code>)</li>
                            <li>Frontend namespace for frontend-related code (e.g., <code>MyPlugin\Frontend</code>)</li>
                        </ul>
                    </li>
                    <li>Implement a simple autoloader for the namespaced classes</li>
                    <li>Update all class and function references to use the appropriate namespace</li>
                    <li>Properly handle WordPress function calls from within namespaces</li>
                    <li>Document your code with PHPDoc blocks that include namespace information</li>
                </ol>
                
                <h4>Starting Plugin Code:</h4>
                <pre>###CODE_BLOCK_44###</pre>
                
                <h4>Bonus Challenges:</h4>
                <ul>
                    <li>Implement PSR-4 compatible autoloading</li>
                    <li>Add a new namespace for API functionality with a simple REST endpoint</li>
                    <li>Implement dependency injection using interfaces and namespaced classes</li>
                    <li>Create a composer.json file for the plugin with appropriate autoloading configuration</li>
                </ul>
            </div>
        </section>

        <section class="summary">
            <h2>Key Takeaways</h2>
            
            <div class="takeaways">
                <div class="takeaway">
                    <h3>Code Organization</h3>
                    <p>Namespaces provide a logical way to organize code, grouping related classes, functions, and constants together.</p>
                </div>
                
                <div class="takeaway">
                    <h3>Avoiding Name Collisions</h3>
                    <p>Namespaces help prevent naming conflicts, allowing different plugins or libraries to use the same class names without conflicts.</p>
                </div>
                
                <div class="takeaway">
                    <h3>Autoloading Compatibility</h3>
                    <p>Proper namespace usage enables PSR-4 autoloading, reducing the need for manual file inclusion and making your code more maintainable.</p>
                </div>
                
                <div class="takeaway">
                    <h3>Modern WordPress Development</h3>
                    <p>While WordPress core doesn't extensively use namespaces, modern plugin and theme development increasingly adopts this approach for better organization and compatibility.</p>
                </div>
                
                <div class="takeaway">
                    <h3>Global Namespace Management</h3>
                    <p>Understanding how to reference global functions and classes from within namespaced code is crucial for effective WordPress development.</p>
                </div>
            </div>
            
            <div class="next-steps">
                <h3>Next Steps</h3>
                <p>Now that you understand namespaces, we'll explore traits in our next lesson. Traits provide a mechanism for code reuse in PHP's single inheritance model, complementing the organizational structure that namespaces provide.</p>
            </div>
        </section>

        <section class="resources">
            <h2>Additional Resources</h2>
            
            <ul>
                <li><a href="https://www.php.net/manual/en/language.namespaces.php" target="_blank">PHP Manual: Namespaces</a></li>
                <li><a href="https://phptherightway.com/#namespaces" target="_blank">PHP The Right Way: Namespaces</a></li>
                <li><a href="https://www.php-fig.org/psr/psr-4/" target="_blank">PSR-4: Autoloader</a></li>
                <li><a href="https://developer.wordpress.org/plugins/intro/" target="_blank">WordPress Plugin Developer Handbook</a></li>
                <li><a href="https://getcomposer.org/doc/01-basic-usage.md#autoloading" target="_blank">Composer Autoloading</a></li>
                <li><a href="https://carlalexander.ca/php-namespaces-wordpress/" target="_blank">PHP Namespaces in WordPress</a></li>
            </ul>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 PHP WordPress Development Course</p>
  
    </footer>
</body>
</html>
