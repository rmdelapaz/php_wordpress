<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comments in PHP</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="icon" href="/favicon.png">
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <header>
        <h1>Comments in PHP</h1>
        <p><a href="index.html">← Back to Syllabus</a></p>
    </header>
    
    <main>
        <section class="intro">
            <h2>Introduction to PHP Comments</h2>
            <p>Welcome to our session on PHP comments! While comments might seem like a simple or even trivial aspect of PHP, they are actually one of the most important tools in a professional developer's toolkit. Well-written comments can dramatically improve code quality, maintainability, and collaboration.</p>
            
            <p>Comments in PHP are lines of code that are not executed by the interpreter. Their purpose is to explain the code, make it more readable, and provide information to developers (including your future self). As the saying goes, "Code tells you how, comments tell you why."</p>
            
            <div class="mermaid-diagram">
                <div class="mermaid">
                flowchart LR
                    A[PHP File] --> B[PHP Interpreter]
                    A --> C[Developers]
                    B -->|Ignores| D[Comments]
                    B -->|Executes| E[PHP Code]
                    C -->|Reads| D
                    C -->|Reads & Writes| E
                    style A fill:#f96,stroke:#333,stroke-width:2px
                    style B fill:#6c9,stroke:#333,stroke-width:2px
                    style C fill:#69f,stroke:#333,stroke-width:2px
                    style D fill:#fc6,stroke:#333,stroke-width:2px
                    style E fill:#c9f,stroke:#333,stroke-width:2px
                </div>
            </div>
            
            <p class="analogy"><strong>Analogy:</strong> If PHP code is like a novel for computers to read, comments are like the author's notes in the margins. The computer skips over these notes entirely, but they're invaluable for human readers trying to understand the author's intentions, reasoning, and the overall structure of the story.</p>
        </section>

        <section class="types_of_comments">
            <h2>Types of PHP Comments</h2>
            <p>PHP supports three different comment styles, each with its own specific use cases and advantages.</p>
            
            <h3>Single-Line Comments</h3>
            <p>Single-line comments begin with <code>//</code> or <code>#</code> and continue until the end of the line:</p>
            
            <pre><code>&lt;?php
// This is a single-line comment using double slashes
echo "Hello, World!"; // This comment is after code

# This is also a single-line comment, using the hash/pound symbol
echo "Goodbye, World!"; # Another end-of-line comment
?&gt;</code></pre>
            
            <div class="important-note">
                <h4>Style Note</h4>
                <p>While both <code>//</code> and <code>#</code> work for single-line comments, the double-slash <code>//</code> is more commonly used in PHP and is considered the standard style in most coding standards and teams. The hash <code>#</code> style is a legacy from Perl and shell scripting.</p>
            </div>
            
            <h3>Multi-Line Comments</h3>
            <p>Multi-line comments start with <code>/*</code> and end with <code>*/</code>. Everything between these delimiters is treated as a comment, regardless of how many lines it spans:</p>
            
            <pre><code>&lt;?php
/* This is a multi-line comment.
   It can span multiple lines.
   The PHP interpreter will ignore everything
   until it sees the closing delimiter. */

echo "This code will be executed";

/* You can also use
   multi-line comment syntax
   for a single line */
?&gt;</code></pre>
            
            <h3>DocBlock Comments</h3>
            <p>DocBlock comments are a special type of multi-line comment that begin with <code>/**</code> (note the extra asterisk) and end with <code>*/</code>. They're used for API documentation and contain structured metadata:</p>
            
            <pre><code>&lt;?php
/**
 * Calculate the sum of two numbers.
 *
 * @param int $a The first number.
 * @param int $b The second number.
 * @return int The sum of the two numbers.
 */
function add($a, $b) {
    return $a + $b;
}

// Call the function
$result = add(5, 3);
echo $result; // Outputs: 8
?&gt;</code></pre>
            
            <p>DocBlock comments are particularly important when working with documentation generators like phpDocumentor, which can automatically create API documentation from your code based on these comments.</p>
            
            <div class="mermaid-diagram">
                <div class="mermaid">
                flowchart TD
                    A[PHP Comments] --> B["Single-Line Comments
                    // comment or # comment"]
                    A --> C["Multi-Line Comments
                    /* comment */"]
                    A --> D["DocBlock Comments
                    /** documentation */"]
                    
                    B --> B1["For brief explanations
                    or inline comments"]
                    C --> C1["For longer explanations
                    or disabling blocks of code"]
                    D --> D1["For API documentation
                    and metadata"]
                    
                    style A fill:#f96,stroke:#333,stroke-width:2px
                    style B fill:#6c9,stroke:#333,stroke-width:2px
                    style C fill:#69f,stroke:#333,stroke-width:2px
                    style D fill:#fc6,stroke:#333,stroke-width:2px
                </div>
            </div>
            
            <h3>Visual Representation of Comment Types</h3>
            <svg width="700" height="400" viewBox="0 0 700 400">
                <!-- Background -->
                <rect x="0" y="0" width="700" height="400" fill="#f8f9fa" rx="10" ry="10" />
                
                <!-- Title -->
                <text x="350" y="40" font-size="24" fill="#333" text-anchor="middle" font-weight="bold">PHP Comment Types</text>
                
                <!-- Single-Line Comments Box -->
                <rect x="40" y="70" width="190" height="280" fill="#e3f2fd" stroke="#2196f3" rx="10" ry="10" />
                <text x="135" y="100" font-size="18" fill="#0d47a1" text-anchor="middle" font-weight="bold">Single-Line Comments</text>
                
                <!-- Single-Line Comment Examples -->
                <rect x="60" y="120" width="150" height="35" fill="white" stroke="#2196f3" rx="5" ry="5" />
                <text x="135" y="142" font-size="14" fill="#333" text-anchor="middle">// Single comment</text>
                
                <rect x="60" y="170" width="150" height="35" fill="white" stroke="#2196f3" rx="5" ry="5" />
                <text x="135" y="192" font-size="14" fill="#333" text-anchor="middle"># Alternative style</text>
                
                <rect x="60" y="220" width="150" height="35" fill="white" stroke="#2196f3" rx="5" ry="5" />
                <text x="135" y="242" font-size="14" fill="#333" text-anchor="middle">code(); // After code</text>
                
                <!-- Properties -->
                <text x="135" y="290" font-size="14" fill="#333" text-anchor="middle" font-style="italic">• Quick & concise</text>
                <text x="135" y="315" font-size="14" fill="#333" text-anchor="middle" font-style="italic">• Ends at line break</text>
                <text x="135" y="340" font-size="14" fill="#333" text-anchor="middle" font-style="italic">• Best for brief notes</text>
                
                <!-- Multi-Line Comments Box -->
                <rect x="250" y="70" width="190" height="280" fill="#fff8e1" stroke="#ffc107" rx="10" ry="10" />
                <text x="345" y="100" font-size="18" fill="#e65100" text-anchor="middle" font-weight="bold">Multi-Line Comments</text>
                
                <!-- Multi-Line Comment Examples -->
                <rect x="270" y="120" width="150" height="85" fill="white" stroke="#ffc107" rx="5" ry="5" />
                <text x="345" y="142" font-size="14" fill="#333" text-anchor="middle">/* This comment</text>
                <text x="345" y="162" font-size="14" fill="#333" text-anchor="middle">   spans multiple</text>
                <text x="345" y="182" font-size="14" fill="#333" text-anchor="middle">   lines */</text>
                
                <rect x="270" y="220" width="150" height="35" fill="white" stroke="#ffc107" rx="5" ry="5" />
                <text x="345" y="242" font-size="14" fill="#333" text-anchor="middle">/* Single line too */</text>
                
                <!-- Properties -->
                <text x="345" y="290" font-size="14" fill="#333" text-anchor="middle" font-style="italic">• For longer comments</text>
                <text x="345" y="315" font-size="14" fill="#333" text-anchor="middle" font-style="italic">• Can span many lines</text>
                <text x="345" y="340" font-size="14" fill="#333" text-anchor="middle" font-style="italic">• Good for temp disable</text>
                
                <!-- DocBlock Comments Box -->
                <rect x="460" y="70" width="190" height="280" fill="#e8f5e9" stroke="#4caf50" rx="10" ry="10" />
                <text x="555" y="100" font-size="18" fill="#1b5e20" text-anchor="middle" font-weight="bold">DocBlock Comments</text>
                
                <!-- DocBlock Comment Examples -->
                <rect x="480" y="120" width="150" height="120" fill="white" stroke="#4caf50" rx="5" ry="5" />
                <text x="555" y="142" font-size="14" fill="#333" text-anchor="middle">/**</text>
                <text x="555" y="162" font-size="14" fill="#333" text-anchor="middle"> * Function description</text>
                <text x="555" y="182" font-size="14" fill="#333" text-anchor="middle"> * @param type $var</text>
                <text x="555" y="202" font-size="14" fill="#333" text-anchor="middle"> * @return type</text>
                <text x="555" y="222" font-size="14" fill="#333" text-anchor="middle"> */</text>
                
                <!-- Properties -->
                <text x="555" y="290" font-size="14" fill="#333" text-anchor="middle" font-style="italic">• For code documentation</text>
                <text x="555" y="315" font-size="14" fill="#333" text-anchor="middle" font-style="italic">• Contains metadata</text>
                <text x="555" y="340" font-size="14" fill="#333" text-anchor="middle" font-style="italic">• Used by doc generators</text>
            </svg>
        </section>

        <section class="comment_usage">
            <h2>When and How to Use Comments Effectively</h2>
            <p>Comments are powerful tools, but they need to be used thoughtfully. Here are guidelines for when and how to use comments effectively.</p>
            
            <h3>What to Comment</h3>
            <p>Good comments focus on the "why," not the "what." The code itself should clearly show what it's doing; the comments should explain why it's doing it, especially when the reason isn't obvious.</p>
            
            <pre><code>&lt;?php
// BAD: Tells what (which is already obvious from the code)
$total = $subtotal + ($subtotal * 0.08); // Add tax to subtotal

// GOOD: Explains why (the reasoning behind the code)
// Apply 8% sales tax rate for Arizona customers
$total = $subtotal + ($subtotal * 0.08);
?&gt;</code></pre>
            
            <p>Here are some specific things worth commenting:</p>
            <ul>
                <li><strong>Non-obvious implementations:</strong> If you're using a complex algorithm or unexpected approach</li>
                <li><strong>Business rules:</strong> Requirements, constraints, or edge cases that the code addresses</li>
                <li><strong>Workarounds:</strong> Why you had to implement something in a non-standard way</li>
                <li><strong>Assumptions:</strong> Any assumptions the code makes that might not be obvious</li>
                <li><strong>Performance considerations:</strong> Why you chose a particular approach for performance reasons</li>
                <li><strong>Future improvements:</strong> Ideas for enhancements that couldn't be implemented yet</li>
                <li><strong>API documentation:</strong> Function parameters, return values, exceptions, and usage examples</li>
            </ul>
            
            <h3>What Not to Comment</h3>
            <p>Some types of comments can actually reduce code quality by creating noise or becoming outdated. Avoid these anti-patterns:</p>
            
            <pre><code>&lt;?php
// BAD: Redundant comment that restates the obvious
// Get the user's name
$name = getUserName();

// BAD: Comment that could quickly become outdated
// There are 3 items in this array
$items = ['apple', 'banana', 'cherry'];

// BAD: Commented-out code with no explanation
// $oldMethod = calculateOldWay($data);
$newMethod = calculateNewWay($data);
?&gt;</code></pre>
            
            <p>In general, avoid these types of comments:</p>
            <ul>
                <li><strong>Obvious comments:</strong> Don't state what is already clear from the code</li>
                <li><strong>Redundant comments:</strong> Saying the same thing in comments and code wastes time</li>
                <li><strong>Misleading or outdated comments:</strong> Worse than no comments</li>
                <li><strong>Commented-out code:</strong> Use version control instead</li>
                <li><strong>Better handled by meaningful names:</strong> If a better variable or function name would remove the need for a comment, change the name instead</li>
            </ul>
            
            <p class="analogy"><strong>Analogy:</strong> Comments should be like salt in cooking — used judiciously to enhance, not to mask poor quality. Too little, and the code lacks context; too much, and the signal gets lost in the noise.</p>
        </section>
        
        <section class="docblocks">
            <h2>DocBlock Comments in Detail</h2>
            <p>DocBlock comments deserve special attention because they follow a specific structured format and are extremely valuable for code documentation.</p>
            
            <h3>DocBlock Structure</h3>
            <p>A typical DocBlock consists of:</p>
            <ol>
                <li>A summary (first line)</li>
                <li>An optional longer description</li>
                <li>Tags that provide metadata about the code element</li>
            </ol>
            
            <pre><code>&lt;?php
/**
 * Calculates the monthly payment for a loan.
 *
 * This function uses the standard amortization formula to calculate
 * the monthly payment required to pay off a loan with the given
 * principal, interest rate, and term.
 *
 * @param float $principal The loan amount.
 * @param float $rate The annual interest rate (as a decimal, e.g., 0.05 for 5%).
 * @param int $term The loan term in months.
 * @return float The monthly payment amount.
 * @throws InvalidArgumentException If any parameter is negative.
 * @see https://en.wikipedia.org/wiki/Amortization_calculator
 */
function calculateMonthlyPayment($principal, $rate, $term) {
    if ($principal < 0 || $rate < 0 || $term < 0) {
        throw new InvalidArgumentException('All parameters must be positive');
    }
    
    // Convert annual rate to monthly
    $monthlyRate = $rate / 12;
    
    // Calculate monthly payment using amortization formula
    if ($monthlyRate == 0) {
        return $principal / $term;
    } else {
        return $principal * $monthlyRate * pow(1 + $monthlyRate, $term) 
               / (pow(1 + $monthlyRate, $term) - 1);
    }
}
?&gt;</code></pre>
            
            <h3>Common DocBlock Tags</h3>
            <p>DocBlocks use a variety of tags to provide structured metadata. Here are some of the most common:</p>
            
            <table class="docblock-tags">
                <thead>
                    <tr>
                        <th>Tag</th>
                        <th>Purpose</th>
                        <th>Example</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><code>@param</code></td>
                        <td>Documents a function parameter</td>
                        <td><code>@param string $username The user's login name.</code></td>
                    </tr>
                    <tr>
                        <td><code>@return</code></td>
                        <td>Documents a function's return value</td>
                        <td><code>@return boolean True if successful, false otherwise.</code></td>
                    </tr>
                    <tr>
                        <td><code>@throws</code></td>
                        <td>Documents exceptions that might be thrown</td>
                        <td><code>@throws InvalidArgumentException If the input is invalid.</code></td>
                    </tr>
                    <tr>
                        <td><code>@var</code></td>
                        <td>Documents the type of a property or variable</td>
                        <td><code>@var array List of user IDs.</code></td>
                    </tr>
                    <tr>
                        <td><code>@deprecated</code></td>
                        <td>Marks a function as deprecated</td>
                        <td><code>@deprecated since 2.3.0, use newFunction() instead.</code></td>
                    </tr>
                    <tr>
                        <td><code>@since</code></td>
                        <td>Documents when a function was added</td>
                        <td><code>@since 2.5.0</code></td>
                    </tr>
                    <tr>
                        <td><code>@see</code></td>
                        <td>References related elements</td>
                        <td><code>@see anotherFunction()</code></td>
                    </tr>
                    <tr>
                        <td><code>@todo</code></td>
                        <td>Documents planned changes</td>
                        <td><code>@todo Add validation for email addresses.</code></td>
                    </tr>
                </tbody>
            </table>
            
            <h3>DocBlocks in WordPress</h3>
            <p>WordPress has its own specific DocBlock standards based on phpDoc. In WordPress development, you'll often see DocBlocks like this:</p>
            
            <pre><code>&lt;?php
/**
 * Retrieves post data given a post ID or post object.
 *
 * See sanitize_post() for optional $filter values. Also, the parameter
 * `$post`, must be given as a variable, since it is passed by reference.
 *
 * @since 1.5.1
 * @since 4.4.0 Added the ability to pass a post object.
 *
 * @global WP_Post[] $wp_post_cache Array of cached post objects.
 *
 * @param int|WP_Post|null $post   Optional. Post ID or post object. Defaults to global $post.
 * @param string           $output Optional. The required return type. One of OBJECT, ARRAY_A, or ARRAY_N.
 *                                 Default OBJECT.
 * @param string           $filter Optional. Type of filter to apply. Accepts 'raw', 'edit', 'db',
 *                                 or 'display'. Default 'raw'.
 * @return WP_Post|array|null Type corresponding to $output on success or null on failure.
 *                            When $output is OBJECT, a WP_Post instance is returned.
 */
function get_post( $post = null, $output = OBJECT, $filter = 'raw' ) {
    // Function implementation...
}
?&gt;</code></pre>
            
            <p>These detailed DocBlocks help WordPress developers understand how to use the API and track changes over time.</p>
        </section>

        <section class="practical_examples">
            <h2>Practical Examples of Effective Comments</h2>
            <p>Let's look at some real-world examples of effective commenting in different contexts.</p>
            
            <h3>Example: Controller Method in a MVC Framework</h3>
            <pre><code>&lt;?php
/**
 * Processes a user registration request.
 *
 * This method handles the form submission for new user registration.
 * It validates the input, creates a new user account, sends a
 * verification email, and redirects to the appropriate page.
 *
 * @param Request $request The HTTP request object.
 * @return Response A redirect response.
 */
public function register(Request $request)
{
    // Validate user input
    $validator = Validator::make($request->all(), [
        'name' => 'required|string|max:255',
        'email' => 'required|string|email|max:255|unique:users',
        'password' => 'required|string|min:8|confirmed',
    ]);

    if ($validator->fails()) {
        return redirect()->back()
            ->withErrors($validator)
            ->withInput();
    }

    // Create the user account
    $user = User::create([
        'name' => $request->name,
        'email' => $request->email,
        'password' => Hash::make($request->password),
        // Generate a verification token with 24 hour expiration
        'verification_token' => Str::random(60),
        'token_expires_at' => now()->addHours(24),
    ]);

    // Send verification email
    Mail::to($user->email)->send(new VerificationEmail($user));

    // Redirect with a success message
    return redirect()->route('login')
        ->with('status', 'Registration successful! Please check your email to verify your account.');
}
?&gt;</code></pre>
            
            <p>In this example, the DocBlock provides a clear explanation of what the method does, while the inline comments mark the major sections of the implementation. Note that the comments focus on "why" and section organization rather than explaining obvious code.</p>
            
            <h3>Example: Complex Algorithm</h3>
            <pre><code>&lt;?php
/**
 * Implements the Luhn algorithm for credit card validation.
 * 
 * @param string $cardNumber The credit card number to validate.
 * @return bool True if the card number is valid according to the Luhn algorithm.
 * @link https://en.wikipedia.org/wiki/Luhn_algorithm
 */
function validateCreditCard($cardNumber) {
    // Remove any non-digit characters
    $cardNumber = preg_replace('/\D/', '', $cardNumber);
    
    // Reverse the card number
    $reversedNumber = strrev($cardNumber);
    $sum = 0;
    
    // Luhn algorithm:
    // 1. Double every second digit
    // 2. Sum the digits of the doubled values and the undoubled digits
    // 3. If the sum is divisible by 10, the number is valid
    for ($i = 0; $i < strlen($reversedNumber); $i++) {
        $digit = (int) $reversedNumber[$i];
        
        // Double every second digit (odd indices in the reversed string)
        if ($i % 2 == 1) {
            $digit *= 2;
            
            // If doubling results in a two-digit number, add the digits together
            if ($digit > 9) {
                $digit = floor($digit / 10) + ($digit % 10);
            }
        }
        
        $sum += $digit;
    }
    
    // The card number is valid if the sum is divisible by 10
    return ($sum % 10 == 0);
}
?&gt;</code></pre>
            
            <p>For complex algorithms, comments play a crucial role in explaining the logic. This example includes:</p>
            <ul>
                <li>A DocBlock that explains what the function does and links to further information</li>
                <li>A step-by-step explanation of the algorithm</li>
                <li>Inline comments explaining the purpose of specific operations</li>
            </ul>
            
            <h3>Example: Configuration with Business Rules</h3>
            <pre><code>&lt;?php
// Tax rates by state as of January 2025
// These rates must be updated annually based on tax legislation
$taxRates = [
    'AL' => 0.04, // Alabama: 4% state rate (does not include local taxes)
    'AK' => 0.00, // Alaska: No state sales tax
    'AZ' => 0.056, // Arizona: 5.6% state transaction privilege tax
    // ... more states ...
    'WY' => 0.04, // Wyoming: 4% state sales tax
];

// Shipping rates are based on weight brackets
// For orders over $100, we offer free shipping (see marketing campaign #2025-01)
$shippingRates = [
    'weight_brackets' => [
        ['min' => 0, 'max' => 1, 'rate' => 5.99], // Up to 1 lb: $5.99
        ['min' => 1, 'max' => 5, 'rate' => 8.99], // 1-5 lbs: $8.99
        ['min' => 5, 'max' => 10, 'rate' => 12.99], // 5-10 lbs: $12.99
        ['min' => 10, 'max' => null, 'rate' => 19.99], // Over 10 lbs: $19.99
    ],
    'free_shipping_threshold' => 100.00,
];
?&gt;</code></pre>
            
            <p>For configuration files, comments should explain:</p>
            <ul>
                <li>Where the data comes from and when it should be updated</li>
                <li>Business rules or policies that are encoded in the values</li>
                <li>The meaning of specific values or ranges</li>
                <li>References to external documents or decisions</li>
            </ul>
        </section>

        <section class="commenting_patterns">
            <h2>Common Commenting Patterns and Techniques</h2>
            <p>Beyond the basic syntax, there are several common patterns and techniques that can make your comments more effective.</p>
            
            <h3>Comment Headers for Files</h3>
            <p>File-level comments provide context for an entire file:</p>
            
            <pre><code>&lt;?php
/**
 * User authentication functionality.
 *
 * This file contains functions for user login, logout, and session management.
 * It implements the authentication process according to our security policy.
 *
 * @package     MyApp
 * @subpackage  Auth
 * @author      Jane Developer <jane@example.com>
 * @copyright   2025 Example Company
 * @license     MIT
 */

// Rest of the file...
?&gt;</code></pre>
            
            <h3>Comment Sections</h3>
            <p>For longer files, section comments help organize the code and make it easier to navigate:</p>
            
            <pre><code>&lt;?php
//==============================================
// DATABASE CONFIGURATION
//==============================================

$dbHost = 'localhost';
$dbName = 'myapp';
$dbUser = 'user';
$dbPass = 'password';

//==============================================
// APPLICATION SETTINGS
//==============================================

$appDebug = true;
$appEnvironment = 'development';
$appTimezone = 'America/New_York';

// More sections...
?&gt;</code></pre>
            
            <h3>TODO Comments</h3>
            <p>TODO comments mark incomplete work or future enhancements:</p>
            
            <pre><code>&lt;?php
function validateUser($userData) {
    // Basic validation
    if (empty($userData['email'])) {
        return false;
    }
    
    // TODO: Add more robust email validation with regex
    
    if (empty($userData['password']) || strlen($userData['password']) < 8) {
        return false;
    }
    
    // TODO: Implement password strength checking (JIRA-1234)
    
    return true;
}
?&gt;</code></pre>
            
            <p>Many IDEs and editors recognize TODO comments and can provide a list of all TODOs in your project. Adding a ticket number or other reference makes it easier to track the work.</p>
            
            <h3>Debug Comments</h3>
            <p>Sometimes you need to leave comments specifically for debugging purposes:</p>
            
            <pre><code>&lt;?php
function processOrder($order) {
    // DEBUG: This function is called multiple times during checkout
    
    if ($order->status !== 'pending') {
        return;
    }
    
    // Process payment
    $result = $paymentGateway->charge($order->total, $order->paymentMethod);
    
    if (!$result->success) {
        // DEBUG: Common failure reason is expired credit card
        logError('Payment failed: ' . $result->message);
        return false;
    }
    
    // Update order status
    $order->status = 'paid';
    $order->save();
    
    return true;
}
?&gt;</code></pre>
            
            <p>Be careful with debug comments in production code. They should generally be removed or turned into more meaningful explanations before code is deployed.</p>
            
            <h3>Commented-Out Code</h3>
            <p>While generally discouraged, if you must comment out code temporarily, explain why:</p>
            
            <pre><code>&lt;?php
function getUserData($userId) {
    $user = User::find($userId);
    
    // Temporarily disabled user profile fetching until API rate limit issue
    // is resolved (see incident #5432)
    /* 
    $profile = UserProfile::fetch($user->profileId);
    $user->profile = $profile;
    */
    
    return $user;
}
?&gt;</code></pre>
            
            <p>Remember that version control systems like Git are a better solution for preserving old code than comments.</p>
        </section>

        <section class="wordpress_specifics">
            <h2>PHP Comments in WordPress Development</h2>
            <p>WordPress has its own specific commenting standards and practices as part of the WordPress Coding Standards. Let's explore how comments are used in WordPress development.</p>
            
            <h3>WordPress DocBlock Standards</h3>
            <p>WordPress follows a modified version of phpDoc standards for DocBlocks. Here's an example of a WordPress-style function DocBlock:</p>
            
            <pre><code>&lt;?php
/**
 * Retrieves a list of recent posts.
 *
 * This function gets the most recent posts based on the specified
 * criteria and formats them according to the display options.
 *
 * @since 2.5.0
 * @since 3.7.0 Added the `$include_sticky` parameter.
 *
 * @param array $args {
 *     Optional. Arguments to retrieve posts. Default empty array.
 *
 *     @type int    $numberposts Number of posts to retrieve. Default 10.
 *     @type int    $offset      Number of posts to skip. Default 0.
 *     @type string $category    Category ID or comma-separated list of IDs. Default empty.
 *     @type bool   $include_sticky Whether to include sticky posts. Default false.
 * }
 * @return WP_Post[]|int[] Array of post objects or post IDs.
 */
function get_recent_posts( $args = array() ) {
    // Function implementation...
}
?&gt;</code></pre>
            
            <p>Note the WordPress-specific features:</p>
            <ul>
                <li>Multiple <code>@since</code> tags documenting when the function was added and when parameters were added or modified</li>
                <li>Nested parameter documentation for array arguments</li>
                <li>Detailed return type information</li>
            </ul>
            
            <h3>WordPress Hook Documentation</h3>
            <p>WordPress uses comments to document hooks (actions and filters), which is crucial for plugin and theme developers:</p>
            
            <pre><code>&lt;?php
/**
 * Filters the login URL.
 *
 * @since 2.8.0
 * @since 4.2.0 The `$force_reauth` parameter was added.
 *
 * @param string $login_url    The login URL. Not HTML-encoded.
 * @param string $redirect     The path to redirect to on login, if supplied.
 * @param bool   $force_reauth Whether to force reauthorization, even if a cookie is present.
 */
$login_url = apply_filters( 'login_url', $login_url, $redirect, $force_reauth );
?&gt;</code></pre>
            
            <p>When adding your own hooks in plugins or themes, you should follow this documentation pattern:</p>
            
            <pre><code>&lt;?php
/**
 * Fires before a product is added to the cart.
 *
 * This action allows developers to run custom code just before
 * a product is added to the cart.
 *
 * @since 1.2.0
 *
 * @param int   $product_id   The ID of the product being added.
 * @param int   $quantity     The quantity of the product being added.
 * @param array $variation    Optional. Product variation attributes. Default empty array.
 */
do_action( 'my_plugin_before_add_to_cart', $product_id, $quantity, $variation );
?&gt;</code></pre>
            
            <h3>Inline Documentation in Templates</h3>
            <p>WordPress template files often use comments to guide theme developers:</p>
            
            <pre><code>&lt;?php
/**
 * Template part for displaying posts.
 *
 * @link https://developer.wordpress.org/themes/basics/template-hierarchy/
 *
 * @package MyTheme
 */

// Exit if accessed directly.
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}
?&gt;

&lt;article id="post-&lt;?php the_ID(); ?&gt;" &lt;?php post_class(); ?&gt;&gt;
    &lt;header class="entry-header"&gt;
        &lt;?php
        // Display the title for all formats except asides.
        if ( ! is_post_format( 'aside' ) ) :
            the_title( '&lt;h2 class="entry-title"&gt;&lt;a href="' . esc_url( get_permalink() ) . '"&gt;', '&lt;/a&gt;&lt;/h2&gt;' );
        endif;
        
        // Show author and date information for all post formats.
        if ( 'post' === get_post_type() ) :
        ?&gt;
        &lt;div class="entry-meta"&gt;
            &lt;?php
            my_theme_posted_on();
            my_theme_posted_by();
            ?&gt;
        &lt;/div&gt;&lt;!-- .entry-meta --&gt;
        &lt;?php endif; ?&gt;
    &lt;/header&gt;&lt;!-- .entry-header --&gt;
    
    &lt;?php 
    // Only show featured images for standard posts
    if ( has_post_thumbnail() && ! is_post_format( 'aside' ) ) : 
    ?&gt;
    &lt;div class="post-thumbnail"&gt;
        &lt;?php the_post_thumbnail(); ?&gt;
    &lt;/div&gt;
    &lt;?php endif; ?&gt;
    
    &lt;div class="entry-content"&gt;
        &lt;?php the_content(); ?&gt;
    &lt;/div&gt;&lt;!-- .entry-content --&gt;
&lt;/article&gt;&lt;!-- #post-## --&gt;</code></pre>
            
            <p>Notice how the comments serve multiple purposes:</p>
            <ul>
                <li>The DocBlock at the top provides context for the entire file</li>
                <li>Inline comments explain the conditional logic</li>
                <li>HTML comments mark the end of important sections, making it easier to navigate complex nested structures</li>
            </ul>
        </section>

        <section class="tools_tricks">
            <h2>Tools and Tricks for Working with Comments</h2>
            <p>Modern development environments offer many tools to make working with comments more efficient.</p>
            
            <h3>IDE Comment Features</h3>
            <p>Most modern IDEs and code editors offer features to help with comments:</p>
            <ul>
                <li><strong>Comment shortcuts:</strong> Keyboard shortcuts to comment/uncomment lines or blocks</li>
                <li><strong>DocBlock generation:</strong> Automatic generation of DocBlock templates</li>
                <li><strong>TODO tracking:</strong> Built-in lists of TODO comments across your project</li>
                <li><strong>Collapsible comment blocks:</strong> Ability to collapse multi-line comments</li>
                <li><strong>Syntax highlighting:</strong> Different colors for comments and code</li>
            </ul>
            
            <p>For example, in most IDEs, you can generate a DocBlock template by typing <code>/**</code> and pressing Enter above a function.</p>
            
            <h3>Comment Tags for IDEs</h3>
            <p>Several special comment tags are recognized by IDEs to provide additional functionality:</p>
            
            <pre><code>&lt;?php
// @todo: Mark a task to be done

// @deprecated: Mark code as deprecated

// @var: Provide type hints for variables
/** @var User $user */
$user = get_user();

// @noinspection: Suppress specific inspections in PHPStorm
/** @noinspection PhpUnusedLocalVariableInspection */
$debug = true;

// @phpstan-ignore-next-line: Ignore PHPStan warnings
// @phpstan-ignore-next-line
$result = unsafeFunction();

// @codingStandardsIgnoreStart and @codingStandardsIgnoreEnd: Suppress code sniffer warnings
// @codingStandardsIgnoreStart
$old_style_code = join(',', $array);
// @codingStandardsIgnoreEnd
?&gt;</code></pre>
            
            <h3>Documentation Generators</h3>
            <p>Documentation generators can parse your DocBlock comments and create API documentation websites. Popular options include:</p>
            <ul>
                <li><strong>phpDocumentor:</strong> The standard documentation generator for PHP</li>
                <li><strong>Sami:</strong> A more modern documentation generator by Fabien Potencier</li>
                <li><strong>ApiGen:</strong> Another PHP documentation generator</li>
                <li><strong>WordPress's WP Parser:</strong> Used to generate the WordPress developer reference</li>
            </ul>
            
            <p>These tools extract DocBlock comments and create searchable, browsable documentation websites.</p>
            
            <div class="mermaid-diagram">
                <div class="mermaid">
                flowchart LR
                    A[PHP Files with DocBlocks] --> B[Documentation Generator]
                    B --> C[API Documentation Website]
                    
                    D[Developers] --> A
                    D --> C
                    
                    style A fill:#f96,stroke:#333,stroke-width:2px
                    style B fill:#6c9,stroke:#333,stroke-width:2px
                    style C fill:#69f,stroke:#333,stroke-width:2px
                    style D fill:#fc6,stroke:#333,stroke-width:2px
                </div>
            </div>
            
            <h3>Code Sniffers for Comment Standards</h3>
            <p>Code sniffers can help enforce consistent commenting standards across your codebase:</p>
            <ul>
                <li><strong>PHP_CodeSniffer:</strong> Can validate that your DocBlocks follow standards</li>
                <li><strong>WordPress Coding Standards:</strong> Includes specific rules for WordPress-style comments</li>
                <li><strong>PHPStan:</strong> Can check that DocBlock types match actual types</li>
            </ul>
            
            <p>For example, you can integrate PHP_CodeSniffer into your CI/CD pipeline to ensure all new code has proper comments.</p>
        </section>

        <section class="best_practices">
            <h2>Best Practices for Comments</h2>
            <p>To wrap up, let's summarize some best practices for using comments effectively in your PHP code.</p>
            
            <h3>General Principles</h3>
            <ul>
                <li><strong>Comment on "why," not "what":</strong> The code shows what happens; comments should explain why</li>
                <li><strong>Keep comments updated:</strong> Outdated comments are worse than no comments</li>
                <li><strong>Follow team standards:</strong> Consistency across a codebase is valuable</li>
                <li><strong>Use meaningful variable and function names:</strong> Good naming reduces the need for comments</li>
                <li><strong>Think of the new developer:</strong> Write comments that would help someone with no context</li>
            </ul>
            
            <h3>DocBlock Best Practices</h3>
            <ul>
                <li><strong>Document all public APIs:</strong> Functions, classes, methods, and hooks that others will use</li>
                <li><strong>Include all required information:</strong> Parameters, return values, exceptions, etc.</li>
                <li><strong>Be precise about types:</strong> Use accurate PHP types in @param and @return tags</li>
                <li><strong>Document exceptions:</strong> Use @throws tags for all possible exceptions</li>
                <li><strong>Add examples for complex APIs:</strong> Include @example tags when usage isn't obvious</li>
            </ul>
            
            <h3>Inline Comment Best Practices</h3>
            <ul>
                <li><strong>Use inline comments sparingly:</strong> Only for non-obvious code</li>
                <li><strong>Place comments before the code they describe:</strong> Makes them easier to notice</li>
                <li><strong>Keep comments concise:</strong> Aim for clarity and brevity</li>
                <li><strong>Use consistent formatting:</strong> Same style for similar comments</li>
                <li><strong>Avoid obvious comments:</strong> Don't state what is already clear from the code</li>
            </ul>
            
            <h3>Project-Level Documentation</h3>
            <p>Beyond code comments, consider these documentation practices:</p>
            <ul>
                <li><strong>README files:</strong> Provide high-level project documentation</li>
                <li><strong>CONTRIBUTING.md:</strong> Document coding standards including comment standards</li>
                <li><strong>Separate documentation:</strong> For complex systems, consider dedicated documentation</li>
                <li><strong>Comment templates:</strong> Provide examples of good comments for your team</li>
            </ul>
        </section>

        <section class="practical_exercise">
            <h2>Practical Exercise: Improving Comments in Code</h2>
            <p>Let's practice evaluating and improving comments in a real-world code example.</p>
            
            <h3>Original Code with Poor Comments</h3>
            <p>Here's a function with suboptimal comments:</p>
            
            <pre><code>&lt;?php
// Function to process order
function process($ord, $opts = []) {
    // Check if order exists
    if (!$ord) {
        return false;
    }
    
    // Get options
    $def = [
        'tax' => true,
        'ship' => true,
        'disc' => true
    ];
    $opt = array_merge($def, $opts);
    
    // Calculate total
    $total = $ord['subtotal'];
    
    // Add tax
    if ($opt['tax']) {
        $total += $ord['subtotal'] * 0.08;
    }
    
    // Add shipping
    if ($opt['ship']) {
        // Check order weight
        if ($ord['weight'] < 5) {
            // Light order
            $total += 5;
        } else if ($ord['weight'] < 20) {
            // Medium order
            $total += 10;
        } else {
            // Heavy order
            $total += 15;
        }
    }
    
    // Apply discount
    if ($opt['disc'] && $ord['coupon']) {
        // Check if dollar or percentage
        if ($ord['coupon']['type'] == 'dollar') {
            // Dollar amount
            $total -= $ord['coupon']['value'];
        } else {
            // Percentage
            $total -= $total * ($ord['coupon']['value'] / 100);
        }
        
        // Make sure total isn't negative
        if ($total < 0) {
            $total = 0;
        }
    }
    
    // Return total
    return $total;
}
?&gt;</code></pre>
            
            <h3>Improved Code with Better Comments</h3>
            <p>Now let's rewrite this with better comments and code improvements:</p>
            
            <pre><code>&lt;?php
/**
 * Calculates the final order total with tax, shipping, and discounts.
 *
 * Takes an order array and calculates the final price based on the
 * provided options. Tax rate is fixed at 8% and shipping is weight-based.
 *
 * @param array $order The order data with the following keys:
 *     'subtotal' => (float) The order subtotal before tax and shipping
 *     'weight'   => (float) The order weight in pounds
 *     'coupon'   => (array|null) Optional coupon data with 'type' and 'value' keys,
 *                  where type is 'dollar' or 'percentage'
 *     
 * @param array $options Optional settings to control calculation:
 *     'tax'  => (bool) Whether to apply sales tax (default: true)
 *     'ship' => (bool) Whether to add shipping costs (default: true)
 *     'disc' => (bool) Whether to apply coupon discounts (default: true)
 *     
 * @return float The calculated order total.
 */
function calculateOrderTotal(array $order, array $options = []) {
    // Validate required order data
    if (empty($order) || !isset($order['subtotal'])) {
        return 0.0;
    }
    
    // Merge provided options with defaults
    $defaults = [
        'tax' => true,
        'ship' => true,
        'disc' => true
    ];
    $options = array_merge($defaults, $options);
    
    // Start with the base subtotal
    $total = $order['subtotal'];
    
    // Apply sales tax (fixed at 8% for all orders)
    if ($options['tax']) {
        // Tax rate is 8% based on our physical nexus in Arizona
        $taxRate = 0.08;
        $total += $order['subtotal'] * $taxRate;
    }
    
    // Calculate shipping costs based on weight tiers
    if ($options['ship'] && isset($order['weight'])) {
        // Shipping cost tiers based on weight
        if ($order['weight'] < 5) {
            // Standard shipping for lightweight orders (under 5 lbs)
            $shippingCost = 5.00;
        } elseif ($order['weight'] < 20) {
            // Enhanced shipping for medium orders (5-19 lbs)
            $shippingCost = 10.00;
        } else {
            // Premium shipping for heavy orders (20+ lbs)
            $shippingCost = 15.00;
        }
        
        $total += $shippingCost;
    }
    
    // Apply coupon discount if available
    if ($options['disc'] && !empty($order['coupon'])) {
        $coupon = $order['coupon'];
        
        // Apply discount based on coupon type
        if ($coupon['type'] === 'dollar') {
            // Fixed dollar amount discount
            $discountAmount = $coupon['value'];
            $total -= $discountAmount;
        } elseif ($coupon['type'] === 'percentage') {
            // Percentage-based discount
            $discountAmount = $total * ($coupon['value'] / 100);
            $total -= $discountAmount;
        }
        
        // Ensure total doesn't go below zero after discounts
        $total = max(0, $total);
    }
    
    return $total;
}
?&gt;</code></pre>
            
            <h3>Improvements Made</h3>
            <ul>
                <li><strong>Added a comprehensive DocBlock:</strong> Explains what the function does, documents parameters and return value</li>
                <li><strong>Improved function and variable names:</strong> More descriptive names reduce the need for comments</li>
                <li><strong>Added comments explaining "why":</strong> For example, explaining that the tax rate is based on Arizona nexus</li>
                <li><strong>Used more meaningful inline comments:</strong> Comments describe the business rules, not just the obvious code operations</li>
                <li><strong>Improved code organization:</strong> Better structure makes the code more readable without requiring as many comments</li>
                <li><strong>Added validation:</strong> Properly check for required data</li>
            </ul>
            
            <h3>Your Turn</h3>
            <p>Try this exercise with your own code:</p>
            <ol>
                <li>Find a function or class in your codebase with minimal or poor comments</li>
                <li>Evaluate what's missing from the documentation</li>
                <li>Rewrite the comments focusing on "why" not "what"</li>
                <li>Add appropriate DocBlocks for functions and methods</li>
                <li>Consider if better naming could reduce the need for some comments</li>
            </ol>
        </section>

        <section class="conclusion">
            <h2>Summary and Key Takeaways</h2>
            <p>We've covered a lot of ground regarding PHP comments. Here are the key takeaways:</p>
            
            <ul>
                <li><strong>Comments are for humans:</strong> They're ignored by the PHP interpreter but crucial for developers</li>
                <li><strong>Three comment styles:</strong> Single-line (<code>//</code> or <code>#</code>), multi-line (<code>/* */</code>), and DocBlock (<code>/** */</code>)</li>
                <li><strong>Focus on "why" not "what":</strong> Good comments explain the reasoning behind the code</li>
                <li><strong>DocBlocks for documentation:</strong> Use structured DocBlocks for functions, classes, and methods</li>
                <li><strong>WordPress has its own standards:</strong> Follow WordPress coding standards for WordPress development</li>
                <li><strong>Tools can help:</strong> IDEs, documentation generators, and code sniffers assist with comments</li>
                <li><strong>Comments need maintenance:</strong> Keep comments updated as code changes</li>
            </ul>
            
            <p class="analogy"><strong>Final Analogy:</strong> Comments in code are like road signs on a highway. Good signs don't describe what you can already see ("there's a road here"), but provide valuable context ("sharp curve ahead", "historic district", "exit for downtown"). Well-placed, informative signs make the journey smoother and safer. Too many signs create clutter and distraction, while too few leave travelers confused at critical junctions.</p>
            
            <p>As you continue your PHP development journey, develop the habit of writing thoughtful, meaningful comments. Your colleagues—and your future self—will thank you for it.</p>
        </section>

        <section class="resources">
            <h2>Additional Resources</h2>
            
            <h3>PHP Documentation Standards</h3>
            <ul>
                <li><a href="https://www.php-fig.org/psr/psr-5/" target="_blank">PSR-5: PHPDoc Standard (Draft)</a></li>
                <li><a href="https://docs.phpdoc.org/guide/guides/docblocks.html" target="_blank">phpDocumentor: Writing DocBlocks</a></li>
                <li><a href="https://developer.wordpress.org/coding-standards/inline-documentation-standards/php/" target="_blank">WordPress PHP Documentation Standards</a></li>
            </ul>
            
            <h3>Books and Articles</h3>
            <ul>
                <li>"Clean Code" by Robert C. Martin (Chapter on Comments)</li>
                <li>"Code Complete" by Steve McConnell (Section on Commenting Techniques)</li>
                <li><a href="https://blog.codinghorror.com/code-tells-you-how-comments-tell-you-why/" target="_blank">Code Tells You How, Comments Tell You Why</a> by Jeff Atwood</li>
            </ul>
            
            <h3>Tools</h3>
            <ul>
                <li><a href="https://www.phpdoc.org/" target="_blank">phpDocumentor</a> - Documentation generator</li>
                <li><a href="https://github.com/squizlabs/PHP_CodeSniffer" target="_blank">PHP_CodeSniffer</a> - Code style checker including comment styles</li>
                <li><a href="https://phpstan.org/" target="_blank">PHPStan</a> - Static analyzer that can check DocBlock types</li>
            </ul>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 PHP WordPress Development Course</p>

    </footer>
</body>
</html>
