<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>PHP While Loops - Control Structures</title>
    <link rel="stylesheet" href="/styles/main.css">
    <link rel="icon" href="/favicon.png">
    <script type="module">
      import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
      mermaid.initialize({ startOnLoad: true });
    </script>
</head>
<body>
    <header>
        <h1>PHP While Loops - Control Structures</h1>
        <p><a href="index.html">← Back to Syllabus</a> | <a href="module2.html">← Module 2: PHP Fundamentals</a></p>
    </header>
    
    <main>
        <section class="intro">
            <h2>Introduction to PHP While Loops</h2>
            <p>Welcome to our session on PHP While Loops, a fundamental control structure that every PHP developer should master. While loops provide a flexible way to execute a block of code repeatedly as long as a specified condition remains true.</p>
            
            <p>Think of a while loop as a security guard who keeps checking if a door is locked – as long as the door remains unlocked (the condition is true), the guard continues checking and performing their duties. Once the door becomes locked (the condition becomes false), the guard moves on to the next task.</p>
            
            <div class="mermaid-diagram">
                <div class="mermaid">
                graph TD
                    A[Start] --> B{Test Condition}
                    B -->|True| C[Execute Code Block]
                    C --> D[Update Condition State]
                    D --> B
                    B -->|False| E[Exit Loop]
                    E --> F[Continue Program]
                </div>
            </div>
            
            <p>Unlike for loops, which are typically used when you know exactly how many iterations you'll need, while loops shine when the number of iterations is undetermined or depends on conditions that may change during execution.</p>
        </section>

        <section class="syntax">
            <h2>Basic Syntax of PHP While Loops</h2>
            
            <p>The while loop in PHP follows a straightforward syntax:</p>
            
            <div class="code-block">
                <pre><code>while (condition) {
    // code to be executed
    // update condition state (important!)
}</code></pre>
            </div>
            
            <ul>
                <li><strong>Condition:</strong> An expression that evaluates to either true or false</li>
                <li><strong>Code Block:</strong> The statements to be executed as long as the condition is true</li>
                <li><strong>Update Condition State:</strong> Usually includes code that will eventually change the condition to false</li>
            </ul>
            
            <p>Think of the while loop as a ticket checker at an amusement park ride – as long as there are people in line (condition is true), the checker continues to verify tickets (execute code). When no one is left in line (condition becomes false), the checker stops and moves on.</p>
            
            <div class="example">
                <h3>Example: Basic While Loop</h3>
                <div class="code-block">
                    <pre><code>&lt;?php
// Print numbers from 1 to 5 using a while loop
$i = 1;
while ($i <= 5) {
    echo "Number: $i &lt;br&gt;";
    $i++; // Don't forget this, or the loop will run indefinitely!
}
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Output:</h4>
                    <pre>Number: 1
Number: 2
Number: 3
Number: 4
Number: 5</pre>
                </div>
            </div>
            
            <p>In this example, we initialize <code>$i = 1</code> before the loop begins. The condition <code>$i <= 5</code> keeps the loop running as long as $i is less than or equal to 5. Inside the loop, we increment $i with <code>$i++</code>, which is crucial to eventually make the condition false and prevent an infinite loop.</p>
        </section>

        <section class="loop-execution">
            <h2>How While Loops Execute</h2>
            
            <p>Let's dive deeper into how a while loop executes:</p>
            
            <ol>
                <li>First, the condition is evaluated.</li>
                <li>If the condition is true, the code inside the loop executes.</li>
                <li>After executing the code, control returns to step 1, and the condition is evaluated again.</li>
                <li>This process repeats until the condition evaluates to false.</li>
                <li>When the condition becomes false, the loop terminates, and program execution continues with the code after the loop.</li>
            </ol>
            
            <div class="svg-container">
                <svg viewBox="0 0 600 300" xmlns="http://www.w3.org/2000/svg">
                    <!-- Background -->
                    <rect x="50" y="30" width="500" height="240" rx="20" ry="20" fill="#f0f0f0" stroke="#333" stroke-width="2"/>
                    
                    <!-- Start -->
                    <rect x="250" y="50" width="100" height="40" rx="20" ry="20" fill="#a0d0e0" stroke="#333" stroke-width="2"/>
                    <text x="300" y="75" text-anchor="middle" font-size="14">Start</text>
                    
                    <!-- Condition -->
                    <rect x="175" y="120" width="250" height="50" rx="10" ry="10" fill="#a0e0a0" stroke="#333" stroke-width="2"/>
                    <text x="300" y="150" text-anchor="middle" font-size="14">Condition Check: Is condition true?</text>
                    
                    <!-- Execute Block -->
                    <rect x="400" y="200" width="120" height="50" rx="10" ry="10" fill="#e0a0a0" stroke="#333" stroke-width="2"/>
                    <text x="460" y="225" text-anchor="middle" font-size="14">Execute Code</text>
                    
                    <!-- Exit Block -->
                    <rect x="80" y="200" width="120" height="50" rx="10" ry="10" fill="#e0e0a0" stroke="#333" stroke-width="2"/>
                    <text x="140" y="225" text-anchor="middle" font-size="14">Exit Loop</text>
                    
                    <!-- Arrows -->
                    <path d="M300 90 L300 120" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                    <path d="M175 145 L140 145 L140 200" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="150" y="145" text-anchor="end" font-size="12">False</text>
                    
                    <path d="M425 145 L460 145 L460 200" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="450" y="145" text-anchor="start" font-size="12">True</text>
                    
                    <path d="M460 250 L460 270 L300 270 L300 170" stroke="#333" stroke-width="2" fill="none" marker-end="url(#arrowhead)"/>
                    <text x="375" y="265" text-anchor="middle" font-size="12">Return to condition check</text>
                    
                    <!-- Arrowhead marker -->
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="10" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7" fill="#333"/>
                        </marker>
                    </defs>
                </svg>
            </div>
            
            <p>A key point to remember is that in a while loop, the condition is checked <em>before</em> the code block executes. This means that if the condition is false to begin with, the code inside the loop will never execute – not even once.</p>
            
            <p>Think of a while loop as a bouncer at a club – they check IDs (the condition) before letting anyone in (executing the code). If someone doesn't meet the criteria, they don't get in at all.</p>
        </section>

        <section class="variations">
            <h2>Variations and Techniques</h2>
            
            <div class="subsection">
                <h3>Pre-test vs. Post-test Loops</h3>
                <p>The standard while loop is a "pre-test" loop, meaning it tests the condition before executing the loop body. PHP also offers a "post-test" loop called do-while, which we'll cover in our next session.</p>
                
                <div class="mermaid-diagram">
                    <div class="mermaid">
                    graph TD
                        subgraph "While Loop (Pre-test)"
                            A1[Start] --> B1{Test Condition}
                            B1 -->|True| C1[Execute Code]
                            C1 --> B1
                            B1 -->|False| D1[Exit]
                        end
                        
                        subgraph "Do-While Loop (Post-test)"
                            A2[Start] --> C2[Execute Code]
                            C2 --> B2{Test Condition}
                            B2 -->|True| C2
                            B2 -->|False| D2[Exit]
                        end
                    </div>
                </div>
                
                <p>The key difference: a while loop might execute zero times if the condition is initially false, whereas a do-while loop always executes at least once because the condition is checked after the first execution.</p>
            </div>
            
            <div class="subsection">
                <h3>Using Multiple Conditions</h3>
                <p>While loops can contain complex conditions using logical operators:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Loop until either $a reaches 10 or $b reaches 20
$a = 0;
$b = 0;

while ($a < 10 && $b < 20) {
    echo "a: $a, b: $b &lt;br&gt;";
    $a += rand(0, 2); // Increase by 0, 1, or 2
    $b += rand(0, 3); // Increase by 0, 1, 2, or 3
}

echo "Final values - a: $a, b: $b";
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Sample Output:</h4>
                    <pre>a: 0, b: 0
a: 2, b: 1
a: 3, b: 3
a: 5, b: 6
a: 6, b: 7
a: 8, b: 9
a: 10, b: 12
Final values - a: 10, b: 12</pre>
                </div>
                
                <p>This example continues looping until either $a reaches 10 or $b reaches 20, whichever happens first. It's like having two alarm clocks – the loop continues until either one goes off.</p>
            </div>
            
            <div class="subsection">
                <h3>Dynamic Condition Modification</h3>
                <p>One of the powerful aspects of while loops is that the condition can be dynamically modified by code inside or outside the loop:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// User input simulation
$userInputs = ["apple", "banana", "quit", "orange", "grape"];
$currentInput = 0;

// Process until user enters "quit"
while ($currentInput < count($userInputs) && $userInputs[$currentInput] != "quit") {
    echo "Processing: " . $userInputs[$currentInput] . "&lt;br&gt;";
    $currentInput++;
}

echo "Program terminated after processing " . $currentInput . " inputs.";
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Output:</h4>
                    <pre>Processing: apple
Processing: banana
Program terminated after processing 2 inputs.</pre>
                </div>
                
                <p>This simulates processing user inputs until a quit command is received. Think of it as a receptionist answering phone calls until it's time to go home – the stopping condition depends on external factors.</p>
            </div>
        </section>

        <section class="practical-applications">
            <h2>Practical Applications</h2>
            
            <div class="subsection">
                <h3>File Processing</h3>
                <p>While loops are excellent for processing files where you don't know how many lines you'll need to read:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Reading a file line by line
$file = fopen("data.txt", "r");

if ($file) {
    // Read until end of file
    while (!feof($file)) {
        $line = fgets($file);
        // Skip empty lines
        if (trim($line) !== '') {
            echo "Line: " . htmlspecialchars($line) . "&lt;br&gt;";
        }
    }
    fclose($file);
} else {
    echo "Unable to open file!";
}
?&gt;</code></pre>
                </div>
                
                <p>This code reads a file line by line until it reaches the end. It's like a scanner going through a document – it keeps processing until there's nothing left to scan.</p>
                
                <div class="tip">
                    <h4>When to Use:</h4>
                    <p>Use while loops when processing files, especially large ones, as you generally don't know how many lines you'll need to read in advance.</p>
                </div>
            </div>
            
            <div class="subsection">
                <h3>Database Query Results</h3>
                <p>While loops are commonly used to process database query results:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Example with mysqli
$mysqli = new mysqli("localhost", "username", "password", "database");

// Check connection
if ($mysqli->connect_error) {
    die("Connection failed: " . $mysqli->connect_error);
}

$query = "SELECT id, name, email FROM users";
$result = $mysqli->query($query);

if ($result) {
    echo "&lt;table border='1'&gt;";
    echo "&lt;tr&gt;&lt;th&gt;ID&lt;/th&gt;&lt;th&gt;Name&lt;/th&gt;&lt;th&gt;Email&lt;/th&gt;&lt;/tr&gt;";
    
    // Fetch rows until there are no more
    while ($row = $result->fetch_assoc()) {
        echo "&lt;tr&gt;";
        echo "&lt;td&gt;" . $row['id'] . "&lt;/td&gt;";
        echo "&lt;td&gt;" . $row['name'] . "&lt;/td&gt;";
        echo "&lt;td&gt;" . $row['email'] . "&lt;/td&gt;";
        echo "&lt;/tr&gt;";
    }
    
    echo "&lt;/table&gt;";
    $result->free();
} else {
    echo "Error: " . $mysqli->error;
}

$mysqli->close();
?&gt;</code></pre>
                </div>
                
                <p>This pattern is particularly useful because <code>fetch_assoc()</code> returns false when no more rows are available, elegantly terminating the loop. It's like an assembly line worker processing items as they come down the conveyor belt until the belt is empty.</p>
            </div>
            
            <div class="subsection">
                <h3>User Input Validation</h3>
                <p>While loops can be used to repeatedly prompt for input until valid data is received:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Simulating command-line input with a web example
$validInput = false;
$attempts = 0;
$maxAttempts = 3;
$inputs = ["", "abc", "42", "invalid"];  // Simulation of user inputs

while (!$validInput && $attempts < $maxAttempts) {
    // In a real CLI application, you'd use readline() or similar
    $input = $inputs[$attempts];
    $attempts++;
    
    echo "Attempt $attempts - Input: '$input'&lt;br&gt;";
    
    // Validate: must be a number between 1 and 100
    if (is_numeric($input) && $input >= 1 && $input <= 100) {
        $validInput = true;
        echo "Valid input received: $input&lt;br&gt;";
    } else {
        echo "Invalid input. Please enter a number between 1 and 100.&lt;br&gt;";
    }
}

if (!$validInput) {
    echo "Maximum attempts reached. Please try again later.";
}
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Output:</h4>
                    <pre>Attempt 1 - Input: ''
Invalid input. Please enter a number between 1 and 100.
Attempt 2 - Input: 'abc'
Invalid input. Please enter a number between 1 and 100.
Attempt 3 - Input: '42'
Valid input received: 42</pre>
                </div>
                
                <p>This approach is like a patient teacher who keeps asking a question until they get a correct answer, but only up to a certain point before moving on.</p>
            </div>
        </section>

        <section class="performance">
            <h2>Performance Considerations</h2>
            
            <div class="mermaid-diagram">
                <div class="mermaid">
                graph LR
                    A[While Loop Performance] --> B[Evaluate Condition Once]
                    A --> C[Move Constants Outside]
                    A --> D[Avoid Resource-Intensive Operations]
                    A --> E[Consider Alternative Structures]
                </div>
            </div>
            
            <p>While loops can be efficient, but improper implementation might lead to performance issues. Here are some key considerations:</p>
            
            <ul>
                <li><strong>Condition evaluation:</strong> The condition is evaluated on every iteration, so make it as simple and efficient as possible.</li>
                <li><strong>Resource handling:</strong> When working with resources (files, database connections), ensure they're properly opened before the loop and closed after the loop.</li>
                <li><strong>Loop termination:</strong> Always ensure there's a clear path for the loop to terminate, avoiding infinite loops.</li>
                <li><strong>Alternative structures:</strong> Sometimes, a for loop or foreach loop might be more appropriate and efficient.</li>
            </ul>
            
            <div class="example">
                <h3>Inefficient vs. Efficient While Loop</h3>
                
                <div class="code-comparison">
                    <div class="code-inefficient">
                        <h4>Inefficient:</h4>
                        <pre><code>&lt;?php
// Inefficient - complex condition evaluated each time
$i = 0;
while ($i < count($largeArray) && strtotime("now") < $endTime) {
    // Process $largeArray[$i]
    $i++;
}
?&gt;</code></pre>
                    </div>
                    
                    <div class="code-efficient">
                        <h4>Efficient:</h4>
                        <pre><code>&lt;?php
// Efficient - pre-calculate array size
$i = 0;
$size = count($largeArray);
$timeLimit = $endTime;
while ($i < $size && time() < $timeLimit) {
    // Process $largeArray[$i]
    $i++;
}
?&gt;</code></pre>
                    </div>
                </div>
                
                <p>The efficient version reduces repeated function calls in the condition, making each iteration faster. It's like planning your grocery shopping route before you start rather than deciding where to go at each aisle.</p>
            </div>
        </section>

        <section class="real-world">
            <h2>Real-World Examples</h2>
            
            <div class="subsection">
                <h3>Implementing a Rate Limiter</h3>
                <p>While loops can be used to implement simple rate limiters or throttling mechanisms:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Simple API rate limiter simulation
function callExternalApi($data) {
    // Simulate API call
    echo "API call with data: " . json_encode($data) . "&lt;br&gt;";
    return ["status" => "success", "message" => "Data processed"];
}

$apiRequests = [
    ["user" => "user1", "action" => "update"],
    ["user" => "user2", "action" => "create"],
    ["user" => "user3", "action" => "delete"],
    ["user" => "user4", "action" => "read"],
    ["user" => "user5", "action" => "update"],
];

$requestsPerSecond = 2; // Maximum 2 requests per second
$i = 0;

while ($i < count($apiRequests)) {
    $batchStart = microtime(true);
    $batchCount = 0;
    
    // Process up to $requestsPerSecond requests in this batch
    while ($i < count($apiRequests) && $batchCount < $requestsPerSecond) {
        $result = callExternalApi($apiRequests[$i]);
        $i++;
        $batchCount++;
    }
    
    // Calculate time spent on this batch
    $batchTime = microtime(true) - $batchStart;
    
    // If we processed quickly, wait until 1 second has passed
    if ($batchTime < 1 && $i < count($apiRequests)) {
        $waitTime = 1 - $batchTime;
        echo "Rate limiting: waiting " . number_format($waitTime, 2) . " seconds...&lt;br&gt;";
        // In a real application, you would use sleep() or usleep()
        // sleep($waitTime); // Uncomment in real usage
    }
}

echo "All API requests completed.";
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Output:</h4>
                    <pre>API call with data: {"user":"user1","action":"update"}
API call with data: {"user":"user2","action":"create"}
Rate limiting: waiting 0.98 seconds...
API call with data: {"user":"user3","action":"delete"}
API call with data: {"user":"user4","action":"read"}
Rate limiting: waiting 0.99 seconds...
API call with data: {"user":"user5","action":"update"}
All API requests completed.</pre>
                </div>
                
                <p>This rate limiter ensures we don't overwhelm an external API by limiting requests to a certain number per second. It's like pacing yourself during a long-distance run – going too fast at the beginning will deplete your energy too quickly.</p>
            </div>
            
            <div class="subsection">
                <h3>Web Crawler/Scraper</h3>
                <p>While loops are ideal for web crawlers that need to process an unknown number of pages:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Simple web crawler simulation
function getLinksFromPage($url) {
    // In a real crawler, this would parse HTML and extract links
    // Here we're just simulating with fixed data
    $pageData = [
        "https://example.com/" => [
            "https://example.com/about",
            "https://example.com/products"
        ],
        "https://example.com/about" => [
            "https://example.com/team",
            "https://example.com/history"
        ],
        "https://example.com/products" => [
            "https://example.com/products/1",
            "https://example.com/products/2"
        ],
        // Other pages have no outgoing links
        "https://example.com/team" => [],
        "https://example.com/history" => [],
        "https://example.com/products/1" => [],
        "https://example.com/products/2" => []
    ];
    
    echo "Crawling: $url&lt;br&gt;";
    return isset($pageData[$url]) ? $pageData[$url] : [];
}

// Initialize with starting URL
$startUrl = "https://example.com/";
$urlsToVisit = [$startUrl];
$visitedUrls = [];
$maxPages = 10; // Safety limit
$pagesVisited = 0;

// Continue until no more URLs or we hit the limit
while (!empty($urlsToVisit) && $pagesVisited < $maxPages) {
    // Get the next URL to process
    $currentUrl = array_shift($urlsToVisit);
    
    // Skip if already visited
    if (in_array($currentUrl, $visitedUrls)) {
        continue;
    }
    
    // Add to visited set
    $visitedUrls[] = $currentUrl;
    $pagesVisited++;
    
    // Get links from this page
    $links = getLinksFromPage($currentUrl);
    
    // Add new links to our queue
    foreach ($links as $link) {
        if (!in_array($link, $visitedUrls) && !in_array($link, $urlsToVisit)) {
            $urlsToVisit[] = $link;
        }
    }
}

echo "Crawler finished after visiting $pagesVisited pages.";
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Output:</h4>
                    <pre>Crawling: https://example.com/
Crawling: https://example.com/about
Crawling: https://example.com/products
Crawling: https://example.com/team
Crawling: https://example.com/history
Crawling: https://example.com/products/1
Crawling: https://example.com/products/2
Crawler finished after visiting 7 pages.</pre>
                </div>
                
                <p>This crawler keeps visiting new URLs as long as there are unvisited links and we haven't reached our limit. It's like exploring a maze where you discover new passages as you go, and you won't know how many turns you'll take until you've finished exploring.</p>
            </div>
        </section>

        <section class="common-patterns">
            <h2>Common Patterns and Use Cases</h2>
            
            <div class="subsection">
                <h3>Reading Until End of Input</h3>
                <p>A classic while loop pattern is reading data until there's no more input:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// CSV file processing example
function processCSV($filename) {
    $handle = fopen($filename, "r");
    $headerProcessed = false;
    $headers = [];
    $data = [];
    
    if ($handle) {
        while (($line = fgetcsv($handle)) !== FALSE) {
            if (!$headerProcessed) {
                // First line contains headers
                $headers = $line;
                $headerProcessed = true;
            } else {
                // Associate data with headers
                $rowData = [];
                foreach ($headers as $index => $header) {
                    if (isset($line[$index])) {
                        $rowData[$header] = $line[$index];
                    } else {
                        $rowData[$header] = null;
                    }
                }
                $data[] = $rowData;
            }
        }
        fclose($handle);
    }
    
    return $data;
}

// Simulated usage
$fileData = [
    ["Name", "Age", "Email"],
    ["John Doe", "30", "john@example.com"],
    ["Jane Smith", "25", "jane@example.com"],
    ["Bob Johnson", "45", "bob@example.com"]
];

// Simulate CSV file
$tempFile = tmpfile();
foreach ($fileData as $row) {
    fputcsv($tempFile, $row);
}
rewind($tempFile);

// Get the temporary filename
$metaData = stream_get_meta_data($tempFile);
$tempFilename = $metaData['uri'];

// Process the CSV
$result = processCSV($tempFilename);

// Display the processed data
echo "&lt;pre&gt;";
print_r($result);
echo "&lt;/pre&gt;";

// Close the temporary file
fclose($tempFile);
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Output:</h4>
                    <pre>Array
(
    [0] => Array
        (
            [Name] => John Doe
            [Age] => 30
            [Email] => john@example.com
        )
    [1] => Array
        (
            [Name] => Jane Smith
            [Age] => 25
            [Email] => jane@example.com
        )
    [2] => Array
        (
            [Name] => Bob Johnson
            [Age] => 45
            [Email] => bob@example.com
        )
)</pre>
                </div>
                
                <p>This pattern processes data from a source that signals the end of input (in this case, when <code>fgetcsv()</code> returns FALSE). It's like reading a book until you reach the last page – you don't know in advance how many pages you'll read.</p>
            </div>
            
            <div class="subsection">
                <h3>Retry Logic</h3>
                <p>While loops are perfect for implementing retry logic for operations that might temporarily fail:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Retry pattern for unreliable operation
function performUnreliableOperation() {
    // Simulate an operation that sometimes fails
    $success = (rand(0, 3) > 0); // 75% success rate
    
    if ($success) {
        echo "Operation succeeded!&lt;br&gt;";
        return true;
    } else {
        echo "Operation failed!&lt;br&gt;";
        return false;
    }
}

$maxRetries = 5;
$retryCount = 0;
$success = false;

// Try the operation until success or max retries
while (!$success && $retryCount < $maxRetries) {
    echo "Attempt " . ($retryCount + 1) . ": ";
    $success = performUnreliableOperation();
    
    if (!$success) {
        $retryCount++;
        
        if ($retryCount < $maxRetries) {
            $waitTime = pow(2, $retryCount); // Exponential backoff
            echo "Retrying in $waitTime seconds...&lt;br&gt;";
            // In a real application, you would use sleep($waitTime)
        }
    }
}

if ($success) {
    echo "Task completed successfully after " . ($retryCount + 1) . " attempt(s).";
} else {
    echo "Task failed after $maxRetries attempts. Giving up.";
}
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Sample Output:</h4>
                    <pre>Attempt 1: Operation failed!
Retrying in 2 seconds...
Attempt 2: Operation failed!
Retrying in 4 seconds...
Attempt 3: Operation succeeded!
Task completed successfully after 3 attempt(s).</pre>
                </div>
                
                <p>This retry pattern with exponential backoff is like a persistent salesperson who keeps trying to call a client, but waits longer between each attempt to avoid being annoying.</p>
            </div>
        </section>

        <section class="best-practices">
            <h2>Best Practices and Pitfalls</h2>
            
            <div class="mermaid-diagram">
                <div class="mermaid">
                graph TB
                    A[While Loop Best Practices] --> B[Ensure Loop Termination]
                    A --> C[Initialize Variables Before Loop]
                    A --> D[Update Condition Variables Inside Loop]
                    A --> E[Use Appropriate Loop Type]
                    
                    B --> B1[Always have a clear exit condition]
                    B --> B2[Consider adding safety limits]
                    
                    C --> C1[Set initial states outside loop]
                    
                    D --> D1[Modify condition variables reliably]
                    
                    E --> E1[While: Unknown number of iterations]
                    E --> E2[For: Known range]
                    E --> E3[Foreach: Collection traversal]
                </div>
            </div>
            
            <div class="subsection">
                <h3>Best Practices</h3>
                <ul>
                    <li><strong>Initialize variables before the loop:</strong> Always set up your variables before entering the while loop.</li>
                    <li><strong>Ensure loop termination:</strong> Make sure there's always a way for the condition to become false.</li>
                    <li><strong>Safety limits:</strong> Consider adding maximum iteration limits to prevent runaway loops, especially with user input or external data.</li>
                    <li><strong>Clear condition updates:</strong> Make sure the code that updates the condition variables is clearly visible and reliable.</li>
                    <li><strong>Use the right loop:</strong> Choose while loops when the number of iterations is unknown in advance.</li>
                </ul>
            </div>
            
            <div class="subsection">
                <h3>Common Pitfalls</h3>
                
                <div class="pitfall">
                    <h4>Infinite Loops</h4>
                    <p>The most common error with while loops is creating an infinite loop:</p>
                    
                    <div class="code-block">
                        <pre><code>&lt;?php
// INCORRECT: Infinite loop - condition never becomes false
$counter = 1;
while ($counter > 0) {
    echo "This is iteration $counter&lt;br&gt;";
    $counter++; // This will never make $counter <= 0
}
?&gt;</code></pre>
                    </div>
                    
                    <p>Since <code>$counter</code> starts positive and keeps increasing, it will never become zero or negative, resulting in an infinite loop.</p>
                    
                    <p>An infinite loop is like a hamster running on a wheel – it keeps going and going without ever reaching a destination.</p>
                </div>
                
                <div class="pitfall">
                    <h4>Missing Condition Updates</h4>
                    <p>Another common mistake is forgetting to update the condition variables:</p>
                    
                    <div class="code-block">
                        <pre><code>&lt;?php
// INCORRECT: Forgot to update the loop counter
$i = 0;
while ($i < 5) {
    echo "Iteration: $i&lt;br&gt;";
    // Oops, forgot $i++
}
?&gt;</code></pre>
                    </div>
                    
                    <p>This loop will execute the first iteration and then get stuck because $i is never incremented.</p>
                </div>
                
                <div class="pitfall">
                    <h4>Condition Logic Errors</h4>
                    <p>Using incorrect logical operators in conditions can cause unexpected behavior:</p>
                    
                    <div class="code-block">
                        <pre><code>&lt;?php
// INCORRECT: Logic error in condition
$a = 5;
$b = 10;

// Intended to run while either $a or $b is positive
while ($a > 0 || $b > 0) {
    echo "a: $a, b: $b&lt;br&gt;";
    $a--;
    
    // Oops, we forgot to decrement $b
    // Even after $a reaches 0, $b keeps the loop running
}
?&gt;</code></pre>
                    </div>
                    
                    <p>In this example, we intended to exit the loop when both variables reach zero, but since we're using OR (||) instead of AND (&&), the loop continues as long as either variable is positive, and we never decrement $b.</p>
                </div>
            </div>
        </section>

        <section class="advanced">
            <h2>Advanced Techniques</h2>
            
            <div class="subsection">
                <h3>Nested While Loops</h3>
                <p>Like for loops, while loops can be nested to handle multi-dimensional data or complex algorithms:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Generate a simple triangular pattern
$i = 1;
while ($i <= 5) {
    $j = 1;
    while ($j <= $i) {
        echo $j . " ";
        $j++;
    }
    echo "&lt;br&gt;";
    $i++;
}
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Output:</h4>
                    <pre>1 
1 2 
1 2 3 
1 2 3 4 
1 2 3 4 5</pre>
                </div>
                
                <p>Nested while loops function similarly to nested for loops. They're useful when dealing with hierarchical data or when the number of iterations for both the inner and outer loops is undetermined.</p>
            </div>
            
            <div class="subsection">
                <h3>Using Break and Continue</h3>
                <p>The <code>break</code> and <code>continue</code> statements can control the flow of while loops:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Process a list of numbers, skipping negatives and stopping at zero
$numbers = [7, 3, -2, 5, 0, 8, 4];
$i = 0;

while ($i < count($numbers)) {
    $num = $numbers[$i];
    $i++;
    
    // Skip negative numbers
    if ($num < 0) {
        echo "Skipping negative number: $num&lt;br&gt;";
        continue;
    }
    
    // Stop if we hit zero
    if ($num == 0) {
        echo "Found zero, stopping the loop&lt;br&gt;";
        break;
    }
    
    echo "Processing positive number: $num&lt;br&gt;";
}

echo "Loop completed.";
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Output:</h4>
                    <pre>Processing positive number: 7
Processing positive number: 3
Skipping negative number: -2
Processing positive number: 5
Found zero, stopping the loop
Loop completed.</pre>
                </div>
                
                <p>This example shows how <code>continue</code> skips the current iteration and how <code>break</code> exits the loop entirely. It's like sorting mail – you skip the junk mail, process the regular mail, and stop when you find an urgent letter that needs immediate attention.</p>
            </div>
            
            <div class="subsection">
                <h3>State Machines</h3>
                <p>While loops can implement simple state machines where each iteration represents a state transition:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Simple vending machine state machine
$state = 'WAITING_FOR_COIN';
$credit = 0;
$productPrice = 125; // 1.25 in cents
$events = [
    'INSERT_COIN_25', 'INSERT_COIN_50', 'INSERT_COIN_100',
    'SELECT_PRODUCT', 'CANCEL'
];

// Simulate a sequence of events
$eventSequence = [
    'INSERT_COIN_25', 'INSERT_COIN_100', 'SELECT_PRODUCT'
];
$eventIndex = 0;

echo "Starting vending machine simulation&lt;br&gt;";

while ($state != 'IDLE' && $eventIndex < count($eventSequence)) {
    $event = $eventSequence[$eventIndex];
    $eventIndex++;
    
    echo "Current state: $state, Credit: $credit¢, Event: $event&lt;br&gt;";
    
    // State transitions
    switch ($state) {
        case 'WAITING_FOR_COIN':
            if ($event == 'INSERT_COIN_25') {
                $credit += 25;
                $state = 'COIN_INSERTED';
            } else if ($event == 'INSERT_COIN_50') {
                $credit += 50;
                $state = 'COIN_INSERTED';
            } else if ($event == 'INSERT_COIN_100') {
                $credit += 100;
                $state = 'COIN_INSERTED';
            }
            break;
            
        case 'COIN_INSERTED':
            if ($event == 'INSERT_COIN_25') {
                $credit += 25;
            } else if ($event == 'INSERT_COIN_50') {
                $credit += 50;
            } else if ($event == 'INSERT_COIN_100') {
                $credit += 100;
            } else if ($event == 'SELECT_PRODUCT') {
                if ($credit >= $productPrice) {
                    $change = $credit - $productPrice;
                    echo "Product dispensed! Change: $change¢&lt;br&gt;";
                    $credit = 0;
                    $state = 'IDLE';
                } else {
                    echo "Insufficient credit. Need " . ($productPrice - $credit) . "¢ more.&lt;br&gt;";
                }
            } else if ($event == 'CANCEL') {
                echo "Transaction cancelled. Returned: $credit¢&lt;br&gt;";
                $credit = 0;
                $state = 'WAITING_FOR_COIN';
            }
            break;
    }
}

echo "Final state: $state, Credit: $credit¢";
?&gt;</code></pre>
                </div>
                
                <div class="output">
                    <h4>Output:</h4>
                    <pre>Starting vending machine simulation
Current state: WAITING_FOR_COIN, Credit: 0¢, Event: INSERT_COIN_25
Current state: COIN_INSERTED, Credit: 25¢, Event: INSERT_COIN_100
Current state: COIN_INSERTED, Credit: 125¢, Event: SELECT_PRODUCT
Product dispensed! Change: 0¢
Final state: IDLE, Credit: 0¢</pre>
                </div>
                
                <p>This state machine simulates a vending machine where each event triggers a state transition. It's like a board game where each turn changes the game state based on player actions and game rules.</p>
            </div>
        </section>

        <section class="related-topics">
            <h2>Related Topics</h2>
            
            <div class="related-topic">
                <h3>Do-While Loops</h3>
                <p>Do-while loops are similar to while loops but check the condition after the first iteration, ensuring the loop body executes at least once:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
$i = 1;
do {
    echo "Number: $i&lt;br&gt;";
    $i++;
} while ($i <= 5);
?&gt;</code></pre>
                </div>
                
                <p>We'll explore do-while loops in detail in our next session.</p>
            </div>
            
            <div class="related-topic">
                <h3>For Loops</h3>
                <p>For loops have a more structured format with initialization, condition, and increment expressions:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
for ($i = 1; $i <= 5; $i++) {
    echo "Number: $i&lt;br&gt;";
}
?&gt;</code></pre>
                </div>
                
                <p>We covered for loops in our previous session.</p>
            </div>
            
            <div class="related-topic">
                <h3>Foreach Loops</h3>
                <p>Foreach loops are designed specifically for iterating over arrays and objects:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
$colors = ['red', 'green', 'blue'];
foreach ($colors as $color) {
    echo "Color: $color&lt;br&gt;";
}
?&gt;</code></pre>
                </div>
                
                <p>We'll explore foreach loops in our upcoming sessions.</p>
            </div>
            
            <div class="related-topic">
                <h3>Recursion as an Alternative to Loops</h3>
                <p>For some algorithms, recursion can be an elegant alternative to while loops:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Calculating factorial with recursion instead of a while loop
function factorial($n) {
    // Base case
    if ($n <= 1) {
        return 1;
    }
    
    // Recursive case
    return $n * factorial($n - 1);
}

echo "Factorial of 5: " . factorial(5);  // Output: 120
?&gt;</code></pre>
                </div>
                
                <p>Recursion will be covered in a future session on advanced PHP concepts.</p>
            </div>
        </section>

        <section class="practice-exercises">
            <h2>Practice Exercises</h2>
            
            <div class="exercise">
                <h3>Exercise 1: Number Guessing Game</h3>
                <p>Create a simple number guessing game where the computer "thinks" of a number, and the program simulates guesses until it finds the correct number:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Start with this code template
$targetNumber = rand(1, 100);
$guess = 0;
$attempts = 0;

// Use a while loop to simulate guesses
// End solution should show the attempts and guesses made
?&gt;</code></pre>
                </div>
                
                <div class="solution-hint">
                    <h4>Hint:</h4>
                    <p>Use a while loop that continues until the guess matches the target number. Generate random guesses and keep track of how many attempts were made.</p>
                </div>
            </div>
            
            <div class="exercise">
                <h3>Exercise 2: String Palindrome Checker</h3>
                <p>Create a function that checks if a string is a palindrome (reads the same backward as forward) using a while loop:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Start with this code template
function isPalindrome($string) {
    // Remove spaces and convert to lowercase
    $string = strtolower(str_replace(' ', '', $string));
    
    // Use a while loop to check if the string is a palindrome
    // Return true if it's a palindrome, false otherwise
}

// Test cases
$testStrings = [
    "racecar",
    "A man a plan a canal Panama",
    "hello world",
    "Madam Im Adam"
];

foreach ($testStrings as $str) {
    echo "'$str' is " . (isPalindrome($str) ? "a palindrome" : "not a palindrome") . "&lt;br&gt;";
}
?&gt;</code></pre>
                </div>
                
                <div class="solution-hint">
                    <h4>Hint:</h4>
                    <p>Use two pointers: one starting from the beginning of the string and one from the end. Use a while loop to move these pointers toward each other, comparing characters as you go.</p>
                </div>
            </div>
            
            <div class="exercise">
                <h3>Exercise 3: Prime Number Generator</h3>
                <p>Write a function that uses a while loop to generate all prime numbers up to a given limit:</p>
                
                <div class="code-block">
                    <pre><code>&lt;?php
// Start with this code template
function generatePrimes($limit) {
    $primes = [];
    
    // Use a while loop to generate prime numbers up to $limit
    // Return an array of prime numbers
}

$limit = 50;
$primes = generatePrimes($limit);
echo "Prime numbers up to $limit: " . implode(", ", $primes);
?&gt;</code></pre>
                </div>
                
                <div class="solution-hint">
                    <h4>Hint:</h4>
                    <p>Use a while loop to iterate through numbers from 2 to the limit. For each number, check if it's divisible by any smaller number (except 1). If not, it's a prime number.</p>
                </div>
            </div>
        </section>

        <section class="homework">
            <h2>Homework Assignment</h2>
            
            <div class="assignment">
                <h3>Create a program that uses different types of loops</h3>
                <p>Develop a PHP application that demonstrates the use of while loops in at least three different scenarios:</p>
                
                <ol>
                    <li>Create a Fibonacci number generator that produces Fibonacci numbers up to a user-specified limit.</li>
                    <li>Implement a simple text parser that processes a string until it finds a specific delimiter character.</li>
                    <li>Develop a simulation of a dice game where a player rolls until they reach a certain score or bust.</li>
                </ol>
                
                <p><strong>Requirements:</strong></p>
                <ul>
                    <li>Include meaningful comments explaining your code.</li>
                    <li>Implement at least one performance optimization technique discussed in class.</li>
                    <li>Format your output with appropriate HTML and CSS.</li>
                    <li>Each example should clearly demonstrate why a while loop is appropriate for that particular task.</li>
                    <li>Submit your code via the class GitHub repository by the next session.</li>
                </ul>
            </div>
        </section>

        <section class="resources">
            <h2>Additional Resources</h2>
            
            <div class="resource-list">
                <ul>
                    <li><a href="https://www.php.net/manual/en/control-structures.while.php" target="_blank">PHP Manual: While Loops</a></li>
                    <li><a href="https://www.php.net/manual/en/control-structures.break.php" target="_blank">PHP Manual: Break Statement</a></li>
                    <li><a href="https://www.php.net/manual/en/control-structures.continue.php" target="_blank">PHP Manual: Continue Statement</a></li>
                    <li><a href="https://www.phptherightway.com/" target="_blank">PHP: The Right Way - Control Structures</a></li>
                </ul>
            </div>
        </section>

        <section class="next-session">
            <h2>Coming Up Next</h2>
            <p>In our next session, we'll explore do-while loops and foreach loops, completing our journey through PHP's looping constructs. We'll also compare all the loop types and discuss when to use each one for optimal code clarity and performance.</p>
            <p>Make sure to complete the homework assignment to reinforce your understanding of while loops before the next class!</p>
        </section>
    </main>
    
    <footer>
        <p>&copy; 2025 PHP WordPress Development Course</p>
  
    </footer>
</body>
</html>
