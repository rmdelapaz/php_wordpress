<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <!-- SEO Meta Tags -->
  <title>WordPress Media Library - Complete Guide | PHP WordPress Course</title>
  <meta content="Master the WordPress Media Library. Learn to upload, organize, and manage images, videos, documents, and other media files effectively in WordPress." name="description"/>
  <meta content="WordPress Media Library, Image Management, File Upload, Media Organization, WordPress Assets, Image Optimization" name="keywords"/>
  <meta content="PHP WordPress Course" name="author"/>
  <link href="/assets/css/main.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
  <!-- Favicon -->
  <link href="/favicon.png" rel="icon" type="image/png"/>
  <link href="/favicon.png" rel="apple-touch-icon"/>
  <!-- CSS -->
 </head>
 <body>
  <!-- Skip to main content -->
  <a class="sr-only" href="#main-content">Skip to main content</a>
  <div class="page-wrapper">
   <!-- Header -->
   <header class="site-header" role="banner">
    <div class="header-container">
     <div class="site-branding">
      <a class="site-logo" href="/">
       <h1 class="site-title">PHP WordPress Development</h1>
      </a>
     </div>
     <nav aria-label="Main navigation" class="main-navigation" role="navigation">
      <div class="nav-menu">
       <ul class="nav-list">
        <li class="nav-item">
         <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item dropdown">
         <button class="nav-link dropdown-toggle active">Modules</button>
         <div class="dropdown-menu">
          <a class="dropdown-item active" href="/module4.html">Module 4: WordPress &amp; Docker</a>
         </div>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/resources.html">Resources</a>
        </li>
       </ul>
      </div>
     </nav>
    </div>
   </header>
   <!-- Breadcrumb -->
   <nav aria-label="Breadcrumb" class="breadcrumb container">
    <ol class="breadcrumb-list">
     <li class="breadcrumb-item">
      <a href="/">Home</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <a href="/module4.html">Module 4</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <span aria-current="page">Media Library</span>
     </li>
    </ol>
   </nav>
   <!-- Main Content -->
   <main class="main-content" id="main-content" role="main">
    <div class="container">
     <div class="content-with-sidebar">
      <!-- Sidebar -->
      <aside class="sidebar">
       <div class="sidebar-nav">
        <h3 class="sidebar-title">Module 4: WordPress &amp; Docker</h3>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 1: Introduction to WordPress</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/04module/history_evolution.html">History and evolution of WordPress</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/wordpress_org_vs_com.html">WordPress.org vs WordPress.com</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/core_features.html">WordPress core features and capabilities</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/wordpress_ecosystem.html">The WordPress ecosystem (themes, plugins, community)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/use_cases.html">WordPress use cases and examples</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/local_development.html">Setting up local development environments for WordPress</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/homework_wordpress_install.html">Homework: Install WordPress locally and explore the admin interface</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 2: WordPress Core Architecture</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/04module/file_structure_overview.html">WordPress file structure</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/wp_config.html">Understanding wp-config.php</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/wordpress_database_structure_lesson.html">WordPress database structure</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/wordpress_loop.html">The WordPress Loop</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/wordpress_template_hierarchy.html">Template hierarchy</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/wordpress_hooks_system.html">WordPress hooks system (actions and filters)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/homework_file_structure_template_hierarchy.html">Homework: Create a diagram of WordPress file structure and template hierarchy</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 3: WordPress Admin Dashboard</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/04module/wordpress_dashboard_overview.html">Dashboard overview and navigation</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/posts_vs_pages.html">Posts vs. Pages</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/wordpress_categories_tags.html">Categories and Tags</a>
          </li>
          <li class="active">
           <a class="sidebar-link active" href="/04module/media_library.html">Media library</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/comments_moderation.html">Comments management</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/users_roles.html">User roles and permissions</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/homework_create_sample_content.html">Homework: Create sample content including posts, pages, and media</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 4: Working with WordPress Themes</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/04module/understanding_wordpress_themes.html">Understanding WordPress themes</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/default_themes_overview.html">Default themes overview</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/installing_activating_themes.html">Installing and activating themes</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/theme_customizer.html">Theme customization through the Customizer</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/theme_settings_options.html">Theme settings and options</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/child_themes.html">Child themes: concept and implementation</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/responsive_mobile_themes.html">Responsive themes and mobile optimization</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/homework_install_theme_create_child.html">Homework: Install a theme and create a child theme</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 5: Docker for WordPress Development</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/04module/docker_fundamentals_review.html">Docker fundamentals review</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/wordpress_docker_setup.html">Setting up WordPress with Docker</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/docker_development_workflow.html">Docker-based development workflow</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/docker_commands_wordpress.html">Docker commands for WordPress developers</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/debugging_wordpress_docker.html">Debugging WordPress in Docker</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/homework_migrate_to_docker.html">Homework: Migrate your WordPress installation to Docker</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 6: Working with WordPress Plugins</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/04module/understanding_wordpress_plugins.html">Understanding WordPress plugins</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/essential_plugins_overview.html">Essential plugins overview</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/installing_activating_plugins.html">Installing and activating plugins</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/plugin_settings_configuration.html">Plugin settings and configuration</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/plugin_quality_security.html">Evaluating plugin quality and security</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/plugin_compatibility.html">Plugin compatibility issues</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/plugins_for_website_types.html">Must-have plugins for different website types</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/homework_essential_plugins.html">Homework: Install and configure essential plugins for your site</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 7: Content Creation in WordPress</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/04module/wordpress_editor_overview.html">WordPress editor overview (Classic vs. Gutenberg)</a>
          </li>
          <li>
           <a class="sidebar-link" href="/04module/mastering_gutenberg_blocks.html">Working with blocks in Gutenberg</a>
          </li>
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 8: Menus, Widgets, and Site Structure</h4>
         <ul class="sidebar-menu">
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 9: WordPress Forms and User Interactions</h4>
         <ul class="sidebar-menu">
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Session 10: WordPress Security, Performance, and Mini-Project</h4>
         <ul class="sidebar-menu">
         </ul>
        </div>
        <div class="sidebar-section">
         <h4 class="sidebar-section-title">Quick Links</h4>
         <ul class="sidebar-menu">
          <li>
           <a class="sidebar-link" href="/module4.html">Module Overview</a>
          </li>
          <li>
           <a class="sidebar-link prev-session" href="/module3.html">← Prev: Module 3</a>
          </li>
          <li>
           <a class="sidebar-link next-session" href="/module5.html">Next: Module 5 →</a>
          </li>
          <li>
           <a class="sidebar-link" href="/resources.html">Resources</a>
          </li>
         </ul>
        </div>
       </div>
      </aside>
      <!-- Main Lesson Content -->
      <article class="lesson-content">
       <header class="lesson-header">
        <h1>WordPress Media Library</h1>
        <div class="lesson-meta">
         <span>Duration: 40 minutes</span>|<span>Module 4: Session 3.4</span>
        </div>
       </header>
       <!-- Learning Objectives -->
       <div class="lesson-objectives">
        <h2>Learning Objectives</h2>
        <ul>
         <li>Navigate and use the WordPress Media Library interface</li>
         <li>Upload and organize various media file types</li>
         <li>Edit and optimize images directly in WordPress</li>
         <li>Understand image sizes and responsive images</li>
         <li>Manage media programmatically with PHP</li>
         <li>Implement media security and permissions</li>
         <li>Optimize media for performance</li>
         <li>Work with audio, video, and document files</li>
        </ul>
       </div>
       <!-- Lesson Body -->
       <div class="lesson-body">
        <!-- Introduction -->
        <section>
         <h2>Introduction to the Media Library</h2>
         <p>The WordPress Media Library is your central repository for all uploaded files including images, videos, audio files, and documents. It provides tools for organizing, editing, and optimizing media assets for your website.</p>
        </section>
        <!-- Media Library Interface -->
        <section>
         <h2>Media Library Interface</h2>
         <p>The Media Library provides two views: Grid View for visual browsing and List View for detailed information.</p>
        </section>
        <!-- Uploading Media -->
        <section>
         <h2>Uploading Media</h2>
         <h3>Programmatic Media Upload</h3>
         <pre><code class="language-php">&lt;?php
// Handle file upload
if (!function_exists('wp_handle_upload')) {
    require_once(ABSPATH . 'wp-admin/includes/file.php');
}

$uploadedfile = $_FILES['file'];
$upload_overrides = array(
    'test_form' =&gt; false,
    'mimes' =&gt; array(
        'jpg|jpeg|jpe' =&gt; 'image/jpeg',
        'gif' =&gt; 'image/gif',
        'png' =&gt; 'image/png',
        'pdf' =&gt; 'application/pdf',
        'mp4|m4v' =&gt; 'video/mp4',
        'mp3' =&gt; 'audio/mpeg'
    )
);

$movefile = wp_handle_upload($uploadedfile, $upload_overrides);

if ($movefile &amp;&amp; !isset($movefile['error'])) {
    // File uploaded successfully
    $filename = $movefile['file'];
    $filetype = wp_check_filetype(basename($filename), null);
    $wp_upload_dir = wp_upload_dir();
    
    // Prepare attachment data
    $attachment = array(
        'guid'           =&gt; $wp_upload_dir['url'] . '/' . basename($filename),
        'post_mime_type' =&gt; $filetype['type'],
        'post_title'     =&gt; preg_replace('/\.[^.]+$/', '', basename($filename)),
        'post_content'   =&gt; '',
        'post_status'    =&gt; 'inherit'
    );
    
    // Insert attachment
    $attach_id = wp_insert_attachment($attachment, $filename);
    
    // Generate metadata
    require_once(ABSPATH . 'wp-admin/includes/image.php');
    $attach_data = wp_generate_attachment_metadata($attach_id, $filename);
    wp_update_attachment_metadata($attach_id, $attach_data);
    
    // Set as featured image if needed
    if ($post_id) {
        set_post_thumbnail($post_id, $attach_id);
    }
}

// Upload from URL
function upload_image_from_url($url, $post_id = 0) {
    $tmp = download_url($url);
    
    if (is_wp_error($tmp)) {
        return $tmp;
    }
    
    $file_array = array(
        'name' =&gt; basename($url),
        'tmp_name' =&gt; $tmp
    );
    
    $id = media_handle_sideload($file_array, $post_id);
    
    if (is_wp_error($id)) {
        @unlink($file_array['tmp_name']);
        return $id;
    }
    
    return $id;
}
?&gt;</code></pre>
        </section>
        <!-- Attachment Details -->
        <section>
         <h2>Attachment Details &amp; Metadata</h2>
         <h3>Working with Attachment Metadata</h3>
         <pre><code class="language-php">&lt;?php
// Get attachment metadata
$attachment_id = 123;
$metadata = wp_get_attachment_metadata($attachment_id);

echo 'Width: ' . $metadata['width'] . 'px';
echo 'Height: ' . $metadata['height'] . 'px';
echo 'File: ' . $metadata['file'];

// Available image sizes
foreach ($metadata['sizes'] as $size =&gt; $data) {
    echo $size . ': ' . $data['width'] . 'x' . $data['height'];
}

// Update attachment metadata
update_post_meta($attachment_id, '_wp_attachment_image_alt', 'Alt text here');

// Get attachment information
$attachment_url = wp_get_attachment_url($attachment_id);
$attachment_path = get_attached_file($attachment_id);
$attachment_title = get_the_title($attachment_id);
$attachment_caption = wp_get_attachment_caption($attachment_id);
$attachment_description = get_post_field('post_content', $attachment_id);

// Get image at specific size
$image = wp_get_attachment_image_src($attachment_id, 'large');
$image_url = $image[0];
$image_width = $image[1];
$image_height = $image[2];

// Check if attachment is image
if (wp_attachment_is_image($attachment_id)) {
    // Process image
}

// Get attached post
$parent_post_id = wp_get_post_parent_id($attachment_id);
?&gt;</code></pre>
        </section>
        <!-- Image Sizes -->
        <section>
         <h2>Image Sizes in WordPress</h2>
         <p>WordPress automatically creates multiple sizes of each uploaded image:</p>
         <ul>
          <li>
           <strong>Thumbnail:</strong>150 × 150 (hard crop)</li>
          <li>
           <strong>Medium:</strong>300 × 300 (proportional)</li>
          <li>
           <strong>Medium Large:</strong>768 × 0 (proportional)</li>
          <li>
           <strong>Large:</strong>1024 × 1024 (proportional)</li>
          <li>
           <strong>Full:</strong>Original size</li>
         </ul>
         <h3>Custom Image Sizes</h3>
         <pre><code class="language-php">&lt;?php
// Register custom image sizes
add_action('after_setup_theme', function() {
    // Hard crop to exact dimensions
    add_image_size('hero-banner', 1920, 600, true);
    
    // Proportional resize (max width 800)
    add_image_size('blog-featured', 800, 0, false);
    
    // Crop from specific position
    add_image_size('square-thumb', 300, 300, array('center', 'top'));
    
    // Make custom sizes available in media library
    add_filter('image_size_names_choose', function($sizes) {
        return array_merge($sizes, array(
            'hero-banner' =&gt; 'Hero Banner',
            'blog-featured' =&gt; 'Blog Featured',
            'square-thumb' =&gt; 'Square Thumbnail'
        ));
    });
});

// Regenerate thumbnails for existing images
function regenerate_all_thumbnails() {
    $attachments = get_posts(array(
        'post_type' =&gt; 'attachment',
        'post_mime_type' =&gt; 'image',
        'posts_per_page' =&gt; -1
    ));
    
    foreach ($attachments as $attachment) {
        $file = get_attached_file($attachment-&gt;ID);
        $metadata = wp_generate_attachment_metadata($attachment-&gt;ID, $file);
        wp_update_attachment_metadata($attachment-&gt;ID, $metadata);
    }
}

// Get srcset for responsive images
$attachment_id = 123;
$img_srcset = wp_get_attachment_image_srcset($attachment_id, 'large');
$img_sizes = wp_get_attachment_image_sizes($attachment_id, 'large');

echo '&lt;img src="' . wp_get_attachment_image_url($attachment_id, 'large') . '" 
      srcset="' . $img_srcset . '" 
      sizes="' . $img_sizes . '"&gt;';
?&gt;</code></pre>
        </section>
        <!-- Image Editor -->
        <section>
         <h2>WordPress Image Editor</h2>
         <h3>Programmatic Image Editing</h3>
         <pre><code class="language-php">&lt;?php
// Load image editor
$image_path = get_attached_file($attachment_id);
$image_editor = wp_get_image_editor($image_path);

if (!is_wp_error($image_editor)) {
    // Resize image
    $image_editor-&gt;resize(800, 600, true);
    
    // Rotate image
    $image_editor-&gt;rotate(90);
    
    // Flip image
    $image_editor-&gt;flip(true, false); // horizontal, vertical
    
    // Crop image
    $image_editor-&gt;crop(0, 0, 500, 500);
    
    // Save edited image
    $saved = $image_editor-&gt;save();
    
    if (!is_wp_error($saved)) {
        // Update attachment metadata
        $new_file = $saved['file'];
        update_attached_file($attachment_id, $new_file);
        
        // Generate new metadata
        $metadata = wp_generate_attachment_metadata($attachment_id, $new_file);
        wp_update_attachment_metadata($attachment_id, $metadata);
    }
}

// Create image from scratch
$image = imagecreatetruecolor(400, 300);
$bg_color = imagecolorallocate($image, 255, 255, 255);
$text_color = imagecolorallocate($image, 0, 0, 0);
imagefill($image, 0, 0, $bg_color);
imagestring($image, 5, 150, 140, 'Custom Image', $text_color);

// Save to uploads directory
$upload_dir = wp_upload_dir();
$filename = $upload_dir['path'] . '/custom-image.png';
imagepng($image, $filename);
imagedestroy($image);

// Create attachment for the image
$attachment = array(
    'post_mime_type' =&gt; 'image/png',
    'post_title' =&gt; 'Custom Generated Image',
    'post_content' =&gt; '',
    'post_status' =&gt; 'inherit'
);

$attach_id = wp_insert_attachment($attachment, $filename);
$attach_data = wp_generate_attachment_metadata($attach_id, $filename);
wp_update_attachment_metadata($attach_id, $attach_data);
?&gt;</code></pre>
        </section>
        <!-- Media Organization -->
        <section>
         <h2>Organizing Media</h2>
         <h3>Media Categories and Tags</h3>
         <pre><code class="language-php">&lt;?php
// Enable categories and tags for attachments
function add_media_taxonomies() {
    register_taxonomy_for_object_type('category', 'attachment');
    register_taxonomy_for_object_type('post_tag', 'attachment');
    
    // Create custom taxonomy for media
    register_taxonomy('media_category', 'attachment', array(
        'labels' =&gt; array(
            'name' =&gt; 'Media Categories',
            'singular_name' =&gt; 'Media Category'
        ),
        'hierarchical' =&gt; true,
        'show_admin_column' =&gt; true,
        'show_in_rest' =&gt; true
    ));
}
add_action('init', 'add_media_taxonomies');

// Organize uploads by category
add_filter('upload_dir', function($uploads) {
    // Organize by year/month/category
    if (isset($_POST['media_category'])) {
        $category = sanitize_title($_POST['media_category']);
        $uploads['path'] .= '/' . $category;
        $uploads['url'] .= '/' . $category;
    }
    return $uploads;
});

// Bulk organize existing media
function organize_media_library() {
    $attachments = get_posts(array(
        'post_type' =&gt; 'attachment',
        'posts_per_page' =&gt; -1,
        'post_status' =&gt; 'inherit'
    ));
    
    foreach ($attachments as $attachment) {
        $file_type = wp_check_filetype($attachment-&gt;guid);
        $type = explode('/', $file_type['type'])[0];
        
        // Assign category based on file type
        switch ($type) {
            case 'image':
                wp_set_object_terms($attachment-&gt;ID, 'images', 'media_category');
                break;
            case 'video':
                wp_set_object_terms($attachment-&gt;ID, 'videos', 'media_category');
                break;
            case 'audio':
                wp_set_object_terms($attachment-&gt;ID, 'audio', 'media_category');
                break;
            default:
                wp_set_object_terms($attachment-&gt;ID, 'documents', 'media_category');
        }
    }
}
?&gt;</code></pre>
         <h3>Media Search and Filtering</h3>
         <pre><code class="language-php">&lt;?php
// Search media by various criteria
$args = array(
    'post_type' =&gt; 'attachment',
    'post_status' =&gt; 'inherit',
    'posts_per_page' =&gt; 20,
    'post_mime_type' =&gt; 'image',
    's' =&gt; 'banner', // Search term
    'meta_query' =&gt; array(
        array(
            'key' =&gt; '_wp_attachment_image_alt',
            'value' =&gt; 'hero',
            'compare' =&gt; 'LIKE'
        )
    ),
    'tax_query' =&gt; array(
        array(
            'taxonomy' =&gt; 'media_category',
            'field' =&gt; 'slug',
            'terms' =&gt; 'headers'
        )
    )
);

$media_query = new WP_Query($args);

// Get unattached media
$unattached = get_posts(array(
    'post_type' =&gt; 'attachment',
    'post_parent' =&gt; 0,
    'posts_per_page' =&gt; -1
));

// Get media by date range
$recent_media = get_posts(array(
    'post_type' =&gt; 'attachment',
    'date_query' =&gt; array(
        array(
            'after' =&gt; '1 week ago'
        )
    )
));
?&gt;</code></pre>
        </section>
        <!-- File Types and MIME Types -->
        <section>
         <h2>Supported File Types</h2>
         <p>WordPress supports various file types by default:</p>
         <ul>
          <li>
           <strong>Images:</strong>jpg, jpeg, png, gif, webp, ico, svg</li>
          <li>
           <strong>Video:</strong>mp4, m4v, mov, wmv, avi, mpg, ogv, webm</li>
          <li>
           <strong>Audio:</strong>mp3, m4a, ogg, wav, wma</li>
          <li>
           <strong>Documents:</strong>pdf, doc, docx, ppt, pptx, xls, xlsx, odt</li>
          <li>
           <strong>Archives:</strong>zip, rar, 7z, tar, gz</li>
         </ul>
         <h3>Custom MIME Types</h3>
         <pre><code class="language-php">&lt;?php
// Allow additional file types
add_filter('upload_mimes', function($mimes) {
    // Add new MIME types
    $mimes['svg'] = 'image/svg+xml';
    $mimes['webp'] = 'image/webp';
    $mimes['json'] = 'application/json';
    $mimes['xml'] = 'text/xml';
    
    // Remove unwanted types
    unset($mimes['exe']);
    
    return $mimes;
});

// Custom upload validation
add_filter('wp_check_filetype_and_ext', function($data, $file, $filename, $mimes) {
    $filetype = wp_check_filetype($filename, $mimes);
    
    // Additional security check for SVG files
    if ($filetype['ext'] === 'svg') {
        $svg_content = file_get_contents($file);
        
        // Check for malicious content
        if (strpos($svg_content, '&lt;script') !== false) {
            $data['ext'] = false;
            $data['type'] = false;
        }
    }
    
    return $data;
}, 10, 4);

// Set upload size limits by file type
add_filter('upload_size_limit', function($size) {
    if (isset($_FILES['async-upload'])) {
        $type = $_FILES['async-upload']['type'];
        
        if (strpos($type, 'video') !== false) {
            return 100 * 1024 * 1024; // 100MB for videos
        } elseif (strpos($type, 'image') !== false) {
            return 5 * 1024 * 1024; // 5MB for images
        }
    }
    
    return $size;
});
?&gt;</code></pre>
        </section>
        <!-- Media Security -->
        <section>
         <h2>Media Security and Permissions</h2>
         <pre><code class="language-php">&lt;?php
// Restrict media access based on user role
add_filter('ajax_query_attachments_args', function($query) {
    $user = wp_get_current_user();
    
    // Authors can only see their own uploads
    if (in_array('author', $user-&gt;roles)) {
        $query['author'] = $user-&gt;ID;
    }
    
    return $query;
});

// Protect uploads directory
function protect_uploads_directory() {
    $upload_dir = wp_upload_dir();
    $htaccess = $upload_dir['basedir'] . '/.htaccess';
    
    $rules = "# Protect uploads
&lt;FilesMatch '\.(php|php\d|phtml)$'&gt;
    Order Allow,Deny
    Deny from all
&lt;/FilesMatch&gt;

# Prevent script execution
Options -ExecCGI
AddHandler cgi-script .php .pl .py .jsp .asp .sh .cgi";
    
    file_put_contents($htaccess, $rules);
}

// Sanitize file names
add_filter('sanitize_file_name', function($filename) {
    // Remove special characters
    $filename = preg_replace('/[^a-zA-Z0-9-_\.]/', '', $filename);
    
    // Add timestamp to prevent duplicates
    $info = pathinfo($filename);
    $name = $info['filename'];
    $ext = $info['extension'];
    
    return $name . '_' . time() . '.' . $ext;
}, 10, 1);

// Scan uploads for malware
add_filter('wp_handle_upload_prefilter', function($file) {
    // Check for PHP code in images
    $content = file_get_contents($file['tmp_name']);
    
    if (preg_match('/&lt;\?php/i', $content)) {
        $file['error'] = 'Security threat detected in file.';
    }
    
    return $file;
});
?&gt;</code></pre>
        </section>
        <!-- Performance Optimization -->
        <section>
         <h2>Media Performance Optimization</h2>
         <pre><code class="language-php">&lt;?php
// Auto-optimize images on upload
add_filter('wp_handle_upload', function($upload) {
    if ($upload['type'] === 'image/jpeg' || $upload['type'] === 'image/jpg') {
        $image = imagecreatefromjpeg($upload['file']);
        imagejpeg($image, $upload['file'], 85); // 85% quality
        imagedestroy($image);
    } elseif ($upload['type'] === 'image/png') {
        $image = imagecreatefrompng($upload['file']);
        imagepng($image, $upload['file'], 7); // Compression level 7
        imagedestroy($image);
    }
    
    return $upload;
});

// Implement lazy loading
add_filter('wp_get_attachment_image_attributes', function($attr, $attachment, $size) {
    $attr['loading'] = 'lazy';
    $attr['decoding'] = 'async';
    return $attr;
}, 10, 3);

// Convert images to WebP
function convert_to_webp($attachment_id) {
    $file = get_attached_file($attachment_id);
    $image = wp_get_image_editor($file);
    
    if (!is_wp_error($image)) {
        $webp_file = str_replace(
            array('.jpg', '.jpeg', '.png'),
            '.webp',
            $file
        );
        
        $image-&gt;save($webp_file, 'image/webp');
        
        // Store WebP version reference
        update_post_meta($attachment_id, '_webp_file', $webp_file);
    }
}

// Serve WebP images when supported
add_filter('wp_get_attachment_url', function($url, $attachment_id) {
    // Check if browser supports WebP
    if (isset($_SERVER['HTTP_ACCEPT']) &amp;&amp; 
        strpos($_SERVER['HTTP_ACCEPT'], 'image/webp') !== false) {
        
        $webp_file = get_post_meta($attachment_id, '_webp_file', true);
        
        if ($webp_file &amp;&amp; file_exists($webp_file)) {
            $upload_dir = wp_upload_dir();
            $webp_url = str_replace(
                $upload_dir['basedir'],
                $upload_dir['baseurl'],
                $webp_file
            );
            return $webp_url;
        }
    }
    
    return $url;
}, 10, 2);
?&gt;</code></pre>
        </section>
        <!-- Working with Galleries -->
        <section>
         <h2>Creating and Managing Galleries</h2>
         <pre><code class="language-php">&lt;?php
// Create gallery shortcode
$gallery = '[gallery ids="1,2,3,4,5" columns="3" size="medium" link="file"]';

// Create gallery programmatically
function create_gallery($image_ids, $columns = 3) {
    $gallery_html = '&lt;div class="gallery gallery-columns-' . $columns . '"&gt;';
    
    foreach ($image_ids as $id) {
        $image = wp_get_attachment_image($id, 'medium');
        $link = wp_get_attachment_url($id);
        
        $gallery_html .= '&lt;figure class="gallery-item"&gt;';
        $gallery_html .= '&lt;a href="' . $link . '" data-lightbox="gallery"&gt;';
        $gallery_html .= $image;
        $gallery_html .= '&lt;/a&gt;';
        $gallery_html .= '&lt;/figure&gt;';
    }
    
    $gallery_html .= '&lt;/div&gt;';
    
    return $gallery_html;
}

// Custom gallery output
add_filter('post_gallery', function($output, $attr) {
    // Custom gallery markup
    $ids = explode(',', $attr['ids']);
    $columns = isset($attr['columns']) ? $attr['columns'] : 3;
    $size = isset($attr['size']) ? $attr['size'] : 'thumbnail';
    
    $output = '&lt;div class="custom-gallery" data-columns="' . $columns . '"&gt;';
    
    foreach ($ids as $id) {
        $image = wp_get_attachment_image_src($id, $size);
        $full = wp_get_attachment_image_src($id, 'full');
        
        $output .= '&lt;div class="gallery-item"&gt;';
        $output .= '&lt;img src="' . $image[0] . '" data-full="' . $full[0] . '"&gt;';
        $output .= '&lt;/div&gt;';
    }
    
    $output .= '&lt;/div&gt;';
    
    return $output;
}, 10, 2);
?&gt;</code></pre>
        </section>
        <!-- Practice Exercise -->
        <section>
         <h2>Practice Exercise</h2>
         <div class="alert alert-success">
          <h3>Hands-On Practice</h3>
          <ol>
           <li>Upload 10 different media files (images, PDF, video)</li>
           <li>Edit image metadata (alt text, caption, description)</li>
           <li>Create custom image sizes for your theme</li>
           <li>Organize media with categories</li>
           <li>Implement image optimization on upload</li>
           <li>Create a gallery with multiple images</li>
           <li>Set up lazy loading for images</li>
           <li>Build a media management plugin</li>
          </ol>
         </div>
        </section>
        <!-- Resources -->
        <section class="resources">
         <h2>Additional Resources</h2>
         <ul>
          <li>
           <a href="https://wordpress.org/support/article/media-library-screen/" target="_blank">WordPress Media Library Documentation</a>
          </li>
          <li>
           <a href="https://developer.wordpress.org/reference/functions/wp_handle_upload/" target="_blank">wp_handle_upload() Reference</a>
          </li>
          <li>
           <a href="https://wordpress.org/plugins/regenerate-thumbnails/" target="_blank">Regenerate Thumbnails Plugin</a>
          </li>
          <li>
           <a href="https://wordpress.org/plugins/ewww-image-optimizer/" target="_blank">EWWW Image Optimizer</a>
          </li>
          <li>
           <a href="https://wordpress.org/plugins/enable-media-replace/" target="_blank">Enable Media Replace Plugin</a>
          </li>
          <li>
           <a href="https://developer.wordpress.org/reference/functions/wp_get_image_editor/" target="_blank">Image Editor API</a>
          </li>
         </ul>
        </section>
       </div>
      </article>
     </div>
    </div>
   </main>
  </div>
  <script src="/assets/js/navigation.js">
  </script>
  <script src="/assets/js/site-config.js">
  </script>
  <script src="/assets/js/sidebar-toggle.js">
  </script>
 </body>
</html>
