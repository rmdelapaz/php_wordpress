<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SEO Meta Tags -->
    <title>Theme Options & Settings - WordPress Theme Development - PHP WordPress Course</title>
    <meta name="description" content="Learn how to create theme options pages and settings using the WordPress Settings API. Master add_menu_page, register_setting, and options management.">
    <meta name="keywords" content="PHP, WordPress, theme options, settings API, admin pages, options page, register_setting">
    <meta name="author" content="PHP WordPress Course">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/sidebar-enhanced.css">
    <link rel="stylesheet" href="/assets/css/sidebar-toggle.css">
    
    <!-- Custom styles for theme options lesson -->
    <style>
        .options-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .options-demo {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .options-demo h3 {
            color: #667eea;
            margin-top: 0;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 1rem;
        }

        .code-example {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }

        .code-example h4 {
            color: #a5b4fc;
            margin-top: 0;
            border-bottom: 1px solid #475569;
            padding-bottom: 0.5rem;
        }

        .settings-structure {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .settings-structure h3 {
            color: #0369a1;
            margin-top: 0;
        }

        .api-flow {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .flow-step {
            display: flex;
            align-items: center;
            margin: 1rem 0;
        }

        .step-number {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            font-weight: bold;
            margin-right: 1rem;
            flex-shrink: 0;
        }

        .step-content {
            flex: 1;
        }

        .function-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 1.5rem;
            margin: 2rem 0;
        }

        .function-card {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1.5rem;
            transition: all 0.3s ease;
        }

        .function-card:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
            border-color: #667eea;
        }

        .function-card h4 {
            color: #667eea;
            margin-top: 0;
        }

        .function-card code {
            background: #f3f4f6;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.875rem;
            color: #667eea;
        }

        .admin-page-preview {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 2rem 0;
        }

        .admin-form-preview {
            background: #f8f9fa;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
            padding: 1.5rem;
            margin: 1rem 0;
        }

        .form-table {
            width: 100%;
            margin: 1rem 0;
        }

        .form-table th {
            text-align: left;
            padding: 1rem;
            width: 200px;
            vertical-align: top;
        }

        .form-table td {
            padding: 1rem;
        }

        .form-table input[type="text"],
        .form-table input[type="email"],
        .form-table input[type="url"],
        .form-table textarea,
        .form-table select {
            width: 100%;
            max-width: 400px;
            padding: 0.5rem;
            border: 1px solid #e5e7eb;
            border-radius: 4px;
        }

        .best-practice {
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
        }

        .best-practice h4 {
            color: #0369a1;
            margin-top: 0;
        }

        .warning-box {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
        }

        .warning-box::before {
            content: "‚ö†Ô∏è Warning: ";
            font-weight: bold;
            color: #92400e;
        }

        .options-tabs {
            background: #f8f9fa;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            margin: 2rem 0;
        }

        .tab-buttons {
            display: flex;
            background: #e5e7eb;
            border-bottom: 2px solid #cbd5e1;
        }

        .tab-button {
            padding: 1rem 1.5rem;
            background: none;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s ease;
            flex: 1;
        }

        .tab-button.active {
            background: white;
            color: #667eea;
            border-bottom: 2px solid #667eea;
        }

        .tab-content {
            padding: 1.5rem;
            display: none;
        }

        .tab-content.active {
            display: block;
        }

        .field-types-table {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            margin: 2rem 0;
        }

        .field-types-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .field-types-table th {
            background: #f3f4f6;
            padding: 1rem;
            text-align: left;
            font-weight: bold;
            border-bottom: 2px solid #e5e7eb;
        }

        .field-types-table td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .validation-example {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .validation-example h3 {
            color: #667eea;
            margin-top: 0;
        }

        @media (max-width: 768px) {
            .function-grid {
                grid-template-columns: 1fr;
            }
            
            .form-table th,
            .form-table td {
                display: block;
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <!-- Skip to main content -->
    <a href="#main-content" class="sr-only">Skip to main content</a>
    
    <div class="page-wrapper">
        <!-- Header -->
        <header class="site-header" role="banner">
            <div class="header-container">
                <div class="site-branding">
                    <a href="/" class="site-logo">
                        <h1 class="site-title">PHP WordPress Development</h1>
                    </a>
                </div>
                
                <nav class="main-navigation" role="navigation" aria-label="Main navigation">
                    <button class="mobile-menu-btn" aria-label="Toggle navigation" aria-expanded="false">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    
                    <div class="nav-menu">
                        <ul class="nav-list">
                            <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
                            <li class="nav-item dropdown">
                                <button class="nav-link dropdown-toggle active" aria-haspopup="true">Modules</button>
                                <div class="dropdown-menu">
                                    <a href="/module1.html" class="dropdown-item">Module 1: Web Fundamentals</a>
                                    <a href="/module2.html" class="dropdown-item">Module 2: PHP Fundamentals</a>
                                    <a href="/module3.html" class="dropdown-item">Module 3: MySQL Database</a>
                                    <a href="/module4.html" class="dropdown-item">Module 4: WordPress & Docker</a>
                                    <a href="/module5.html" class="dropdown-item active">Module 5: Theme Development</a>
                                    <a href="/module6.html" class="dropdown-item">Module 6: Plugin Development</a>
                                    <a href="/module7.html" class="dropdown-item">Module 7: Advanced WordPress</a>
                                    <a href="/module8.html" class="dropdown-item">Module 8: Deployment</a>
                                    <a href="/module9.html" class="dropdown-item">Module 9: Final Project</a>
                                </div>
                            </li>
                            <li class="nav-item"><a href="/resources.html" class="nav-link">Resources</a></li>
                            <li class="nav-item"><a href="/about.html" class="nav-link">About</a></li>
                        </ul>
                    </div>
                </nav>
                
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                        <input type="search" class="search-input" placeholder="Search lessons..." aria-label="Search">
                    </div>
                    <div class="search-results"></div>
                </div>
            </div>
        </header>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-header">
                <h2 class="progress-title">Course Progress</h2>
                <span class="progress-text">Loading...</span>
            </div>
            <div class="progress-bar">
                <div class="progress-bar-fill">
                    <span class="progress-bar-text"></span>
                </div>
            </div>
        </div>
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb container" aria-label="Breadcrumb">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <a href="/module5.html">Module 5</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <span aria-current="page">Theme Options & Settings</span>
                </li>
            </ol>
        </nav>
        
        <!-- Main Content -->
        <main id="main-content" class="main-content" role="main">
            <div class="container">
                <div class="content-with-sidebar">
                    <!-- Sidebar -->
                    <aside class="sidebar">
                        <div class="sidebar-nav">
                            <h3 class="sidebar-title">Module 5: Theme Development</h3>
                            <div class="sidebar-section">
                                <h4 class="sidebar-section-title">Session 5: Advanced Features</h4>
                                <ul class="sidebar-menu">
                                    <li><a class="sidebar-link" href="/05module/theme_customizer_api.html">Theme Customizer API</a></li>
                                    <li><a class="sidebar-link" href="/05module/custom_post_types_taxonomies.html">Custom Post Types & Taxonomies</a></li>
                                    <li class="active"><a class="sidebar-link active" href="/05module/theme_options_settings.html">Theme Options & Settings</a></li>
                                    <li><a class="sidebar-link" href="/05module/ajax_dynamic_content.html">AJAX & Dynamic Content</a></li>
                                    <li><a class="sidebar-link" href="/05module/theme_performance_optimization.html">Performance Optimization</a></li>
                                    <li><a class="sidebar-link" href="/05module/accessibility_best_practices.html">Accessibility Best Practices</a></li>
                                    <li><a class="sidebar-link" href="/05module/homework_advanced_features.html">Homework: Advanced Features</a></li>
                                </ul>
                            </div>
                            <div class="sidebar-section">
                                <h4 class="sidebar-section-title">Quick Links</h4>
                                <ul class="sidebar-menu">
                                    <li><a class="sidebar-link" href="/module5.html">Module Overview</a></li>
                                    <li><a class="sidebar-link" href="/05module/custom_post_types_taxonomies.html">‚Üê Previous Lesson</a></li>
                                    <li><a class="sidebar-link next-session" href="/05module/ajax_dynamic_content.html">Next Lesson ‚Üí</a></li>
                                    <li><a class="sidebar-link" href="/">‚Üê Course Home</a></li>
                                    <li><a class="sidebar-link" href="/resources.html">Resources</a></li>
                                </ul>
                            </div>
                        </div>
                    </aside>
                    
                    <!-- Main Lesson Content -->
                    <article class="lesson-content">
                        <div class="options-header">
                            <h1>‚öôÔ∏è Theme Options & Settings</h1>
                            <p class="lead">Create powerful admin interfaces for theme configuration</p>
                            <p>Master the WordPress Settings API and options management</p>
                        </div>

                        <!-- Learning Objectives -->
                        <div class="lesson-objectives">
                            <h2>Learning Objectives</h2>
                            <ul>
                                <li>Understand the WordPress Settings API</li>
                                <li>Create admin menu pages and subpages</li>
                                <li>Register settings with proper validation</li>
                                <li>Build custom settings sections and fields</li>
                                <li>Save and retrieve theme options</li>
                                <li>Create tabbed settings pages</li>
                                <li>Implement field validation and sanitization</li>
                                <li>Use WordPress nonces for security</li>
                            </ul>
                        </div>
                        
                        <!-- Lesson Body -->
                        <div class="lesson-body">
                            <!-- Introduction -->
                            <section>
                                <h2>Understanding Theme Options</h2>
                                <p class="lead">Theme options allow users to configure various aspects of their theme through an admin interface. While the Customizer is preferred for visual settings, admin pages are better for complex configurations.</p>
                                
                                <div class="alert alert-info">
                                    <div class="alert-icon">üí°</div>
                                    <div class="alert-content">
                                        <div class="alert-title">When to Use What</div>
                                        <div class="alert-message">
                                            <strong>Customizer:</strong> Visual settings, colors, fonts, layouts<br>
                                            <strong>Settings API:</strong> Complex data, API keys, advanced configurations, import/export
                                        </div>
                                    </div>
                                </div>

                                <div class="settings-structure">
                                    <h3>Settings API Structure</h3>
                                    <div class="api-flow">
                                        <div class="flow-step">
                                            <span class="step-number">1</span>
                                            <div class="step-content">
                                                <strong>Create Admin Page</strong>
                                                <p>add_menu_page() or add_submenu_page()</p>
                                            </div>
                                        </div>
                                        <div class="flow-step">
                                            <span class="step-number">2</span>
                                            <div class="step-content">
                                                <strong>Register Settings</strong>
                                                <p>register_setting() with validation callback</p>
                                            </div>
                                        </div>
                                        <div class="flow-step">
                                            <span class="step-number">3</span>
                                            <div class="step-content">
                                                <strong>Add Sections</strong>
                                                <p>add_settings_section() for grouping fields</p>
                                            </div>
                                        </div>
                                        <div class="flow-step">
                                            <span class="step-number">4</span>
                                            <div class="step-content">
                                                <strong>Add Fields</strong>
                                                <p>add_settings_field() for individual options</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Creating Admin Pages -->
                            <section>
                                <h2>Creating Admin Pages</h2>
                                
                                <div class="code-example">
                                    <h4>Add Theme Options Page</h4>
                                    <pre><code class="language-php">&lt;?php
/**
 * Add Theme Options Menu
 */
function mytheme_add_admin_menu() {
    add_menu_page(
        __( 'Theme Options', 'mytheme' ),    // Page title
        __( 'Theme Options', 'mytheme' ),    // Menu title
        'manage_options',                     // Capability
        'mytheme-options',                    // Menu slug
        'mytheme_options_page',               // Callback function
        'dashicons-admin-generic',            // Icon
        61                                    // Position
    );
    
    // Add submenu pages
    add_submenu_page(
        'mytheme-options',                    // Parent slug
        __( 'General Settings', 'mytheme' ),  // Page title
        __( 'General', 'mytheme' ),          // Menu title
        'manage_options',                     // Capability
        'mytheme-options',                    // Menu slug (same as parent for first submenu)
        'mytheme_options_page'                // Callback
    );
    
    add_submenu_page(
        'mytheme-options',
        __( 'Advanced Settings', 'mytheme' ),
        __( 'Advanced', 'mytheme' ),
        'manage_options',
        'mytheme-advanced',
        'mytheme_advanced_page'
    );
}
add_action( 'admin_menu', 'mytheme_add_admin_menu' );

/**
 * Options Page Callback
 */
function mytheme_options_page() {
    ?&gt;
    &lt;div class="wrap"&gt;
        &lt;h1&gt;&lt;?php echo esc_html( get_admin_page_title() ); ?&gt;&lt;/h1&gt;
        &lt;form action="options.php" method="post"&gt;
            &lt;?php
            // Output security fields
            settings_fields( 'mytheme_options_group' );
            
            // Output setting sections and fields
            do_settings_sections( 'mytheme-options' );
            
            // Output save button
            submit_button( __( 'Save Settings', 'mytheme' ) );
            ?&gt;
        &lt;/form&gt;
    &lt;/div&gt;
    &lt;?php
}</code></pre>
                                </div>

                                <div class="function-grid">
                                    <div class="function-card">
                                        <h4>add_menu_page()</h4>
                                        <p>Creates top-level menu item</p>
                                        <code>add_menu_page($page_title, $menu_title, $capability, $menu_slug, $callback, $icon, $position)</code>
                                    </div>
                                    <div class="function-card">
                                        <h4>add_submenu_page()</h4>
                                        <p>Creates submenu item</p>
                                        <code>add_submenu_page($parent_slug, $page_title, $menu_title, $capability, $menu_slug, $callback)</code>
                                    </div>
                                    <div class="function-card">
                                        <h4>add_theme_page()</h4>
                                        <p>Adds to Appearance menu</p>
                                        <code>add_theme_page($page_title, $menu_title, $capability, $menu_slug, $callback)</code>
                                    </div>
                                </div>
                            </section>

                            <!-- Settings API Implementation -->
                            <section>
                                <h2>Implementing Settings API</h2>
                                
                                <div class="code-example">
                                    <h4>Register Settings, Sections, and Fields</h4>
                                    <pre><code class="language-php">&lt;?php
/**
 * Register Theme Settings
 */
function mytheme_settings_init() {
    
    // Register settings
    register_setting(
        'mytheme_options_group',              // Option group
        'mytheme_options',                    // Option name
        'mytheme_sanitize_options'            // Sanitize callback
    );
    
    // Add settings section
    add_settings_section(
        'mytheme_general_section',            // Section ID
        __( 'General Settings', 'mytheme' ),  // Section title
        'mytheme_general_section_callback',   // Section callback
        'mytheme-options'                     // Page slug
    );
    
    // Add settings fields
    add_settings_field(
        'mytheme_logo_text',                  // Field ID
        __( 'Logo Text', 'mytheme' ),         // Field title
        'mytheme_logo_text_callback',         // Field callback
        'mytheme-options',                    // Page slug
        'mytheme_general_section'             // Section ID
    );
    
    add_settings_field(
        'mytheme_footer_text',
        __( 'Footer Text', 'mytheme' ),
        'mytheme_footer_text_callback',
        'mytheme-options',
        'mytheme_general_section'
    );
    
    add_settings_field(
        'mytheme_enable_feature',
        __( 'Enable Special Feature', 'mytheme' ),
        'mytheme_enable_feature_callback',
        'mytheme-options',
        'mytheme_general_section'
    );
    
    // Add another section
    add_settings_section(
        'mytheme_social_section',
        __( 'Social Media Settings', 'mytheme' ),
        'mytheme_social_section_callback',
        'mytheme-options'
    );
    
    add_settings_field(
        'mytheme_facebook_url',
        __( 'Facebook URL', 'mytheme' ),
        'mytheme_facebook_url_callback',
        'mytheme-options',
        'mytheme_social_section'
    );
    
    add_settings_field(
        'mytheme_twitter_url',
        __( 'Twitter URL', 'mytheme' ),
        'mytheme_twitter_url_callback',
        'mytheme-options',
        'mytheme_social_section'
    );
}
add_action( 'admin_init', 'mytheme_settings_init' );

/**
 * Section Callbacks
 */
function mytheme_general_section_callback() {
    echo '&lt;p&gt;' . __( 'Configure general theme settings.', 'mytheme' ) . '&lt;/p&gt;';
}

function mytheme_social_section_callback() {
    echo '&lt;p&gt;' . __( 'Enter your social media URLs.', 'mytheme' ) . '&lt;/p&gt;';
}

/**
 * Field Callbacks
 */
function mytheme_logo_text_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['logo_text'] ) ? $options['logo_text'] : '';
    ?&gt;
    &lt;input type="text" 
           id="mytheme_logo_text" 
           name="mytheme_options[logo_text]" 
           value="&lt;?php echo esc_attr( $value ); ?&gt;" 
           class="regular-text" /&gt;
    &lt;p class="description"&gt;
        &lt;?php _e( 'Text to display in the logo area.', 'mytheme' ); ?&gt;
    &lt;/p&gt;
    &lt;?php
}

function mytheme_footer_text_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['footer_text'] ) ? $options['footer_text'] : '';
    ?&gt;
    &lt;textarea id="mytheme_footer_text" 
              name="mytheme_options[footer_text]" 
              rows="5" 
              cols="50"&gt;&lt;?php echo esc_textarea( $value ); ?&gt;&lt;/textarea&gt;
    &lt;p class="description"&gt;
        &lt;?php _e( 'Text to display in the footer.', 'mytheme' ); ?&gt;
    &lt;/p&gt;
    &lt;?php
}

function mytheme_enable_feature_callback() {
    $options = get_option( 'mytheme_options' );
    $checked = isset( $options['enable_feature'] ) ? $options['enable_feature'] : 0;
    ?&gt;
    &lt;label&gt;
        &lt;input type="checkbox" 
               id="mytheme_enable_feature" 
               name="mytheme_options[enable_feature]" 
               value="1" 
               &lt;?php checked( 1, $checked ); ?&gt; /&gt;
        &lt;?php _e( 'Enable this special feature', 'mytheme' ); ?&gt;
    &lt;/label&gt;
    &lt;?php
}

function mytheme_facebook_url_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['facebook_url'] ) ? $options['facebook_url'] : '';
    ?&gt;
    &lt;input type="url" 
           id="mytheme_facebook_url" 
           name="mytheme_options[facebook_url]" 
           value="&lt;?php echo esc_url( $value ); ?&gt;" 
           class="regular-text" /&gt;
    &lt;?php
}

function mytheme_twitter_url_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['twitter_url'] ) ? $options['twitter_url'] : '';
    ?&gt;
    &lt;input type="url" 
           id="mytheme_twitter_url" 
           name="mytheme_options[twitter_url]" 
           value="&lt;?php echo esc_url( $value ); ?&gt;" 
           class="regular-text" /&gt;
    &lt;?php
}</code></pre>
                                </div>
                            </section>

                            <!-- Validation and Sanitization -->
                            <section>
                                <div class="validation-example">
                                    <h3>Validation and Sanitization</h3>
                                    <p>Always validate and sanitize user input to ensure data integrity and security.</p>
                                    
                                    <div class="code-example">
                                        <h4>Sanitization Callback</h4>
                                        <pre><code class="language-php">&lt;?php
/**
 * Sanitize Options
 */
function mytheme_sanitize_options( $input ) {
    $sanitized = array();
    
    // Sanitize text field
    if ( isset( $input['logo_text'] ) ) {
        $sanitized['logo_text'] = sanitize_text_field( $input['logo_text'] );
    }
    
    // Sanitize textarea
    if ( isset( $input['footer_text'] ) ) {
        $sanitized['footer_text'] = wp_kses_post( $input['footer_text'] );
    }
    
    // Sanitize checkbox
    if ( isset( $input['enable_feature'] ) ) {
        $sanitized['enable_feature'] = ( $input['enable_feature'] == 1 ) ? 1 : 0;
    }
    
    // Sanitize URLs
    if ( isset( $input['facebook_url'] ) ) {
        $sanitized['facebook_url'] = esc_url_raw( $input['facebook_url'] );
    }
    
    if ( isset( $input['twitter_url'] ) ) {
        $sanitized['twitter_url'] = esc_url_raw( $input['twitter_url'] );
    }
    
    // Validate email
    if ( isset( $input['contact_email'] ) ) {
        if ( is_email( $input['contact_email'] ) ) {
            $sanitized['contact_email'] = sanitize_email( $input['contact_email'] );
        } else {
            add_settings_error(
                'mytheme_options',
                'invalid-email',
                __( 'Please enter a valid email address.', 'mytheme' ),
                'error'
            );
        }
    }
    
    // Validate number range
    if ( isset( $input['posts_per_page'] ) ) {
        $number = absint( $input['posts_per_page'] );
        if ( $number >= 1 && $number <= 20 ) {
            $sanitized['posts_per_page'] = $number;
        } else {
            add_settings_error(
                'mytheme_options',
                'invalid-number',
                __( 'Posts per page must be between 1 and 20.', 'mytheme' ),
                'error'
            );
            $sanitized['posts_per_page'] = 10; // Default value
        }
    }
    
    return $sanitized;
}</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- Field Types -->
                            <section>
                                <h2>Common Field Types</h2>
                                
                                <div class="options-tabs">
                                    <div class="tab-buttons">
                                        <button class="tab-button active" onclick="showTab(event, 'text-fields')">Text Fields</button>
                                        <button class="tab-button" onclick="showTab(event, 'select-fields')">Select & Radio</button>
                                        <button class="tab-button" onclick="showTab(event, 'media-fields')">Media Fields</button>
                                    </div>
                                    
                                    <div id="text-fields" class="tab-content active">
                                        <h4>Text-Based Fields</h4>
                                        <pre><code class="language-php">&lt;?php
// Text Input
function mytheme_text_field_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['text_field'] ) ? $options['text_field'] : '';
    ?&gt;
    &lt;input type="text" 
           name="mytheme_options[text_field]" 
           value="&lt;?php echo esc_attr( $value ); ?&gt;" 
           class="regular-text" /&gt;
    &lt;?php
}

// Email Input
function mytheme_email_field_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['email_field'] ) ? $options['email_field'] : '';
    ?&gt;
    &lt;input type="email" 
           name="mytheme_options[email_field]" 
           value="&lt;?php echo esc_attr( $value ); ?&gt;" 
           class="regular-text" /&gt;
    &lt;?php
}

// Number Input
function mytheme_number_field_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['number_field'] ) ? $options['number_field'] : 10;
    ?&gt;
    &lt;input type="number" 
           name="mytheme_options[number_field]" 
           value="&lt;?php echo esc_attr( $value ); ?&gt;" 
           min="1" 
           max="100" 
           step="1" /&gt;
    &lt;?php
}

// Textarea
function mytheme_textarea_field_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['textarea_field'] ) ? $options['textarea_field'] : '';
    ?&gt;
    &lt;textarea name="mytheme_options[textarea_field]" 
              rows="5" 
              cols="50"&gt;&lt;?php echo esc_textarea( $value ); ?&gt;&lt;/textarea&gt;
    &lt;?php
}

// Color Picker
function mytheme_color_field_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['color_field'] ) ? $options['color_field'] : '#ffffff';
    ?&gt;
    &lt;input type="text" 
           name="mytheme_options[color_field]" 
           value="&lt;?php echo esc_attr( $value ); ?&gt;" 
           class="mytheme-color-picker" /&gt;
    &lt;?php
}</code></pre>
                                    </div>
                                    
                                    <div id="select-fields" class="tab-content">
                                        <h4>Selection Fields</h4>
                                        <pre><code class="language-php">&lt;?php
// Select Dropdown
function mytheme_select_field_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['select_field'] ) ? $options['select_field'] : 'option1';
    ?&gt;
    &lt;select name="mytheme_options[select_field]"&gt;
        &lt;option value="option1" &lt;?php selected( $value, 'option1' ); ?&gt;&gt;
            &lt;?php _e( 'Option 1', 'mytheme' ); ?&gt;
        &lt;/option&gt;
        &lt;option value="option2" &lt;?php selected( $value, 'option2' ); ?&gt;&gt;
            &lt;?php _e( 'Option 2', 'mytheme' ); ?&gt;
        &lt;/option&gt;
        &lt;option value="option3" &lt;?php selected( $value, 'option3' ); ?&gt;&gt;
            &lt;?php _e( 'Option 3', 'mytheme' ); ?&gt;
        &lt;/option&gt;
    &lt;/select&gt;
    &lt;?php
}

// Radio Buttons
function mytheme_radio_field_callback() {
    $options = get_option( 'mytheme_options' );
    $value = isset( $options['radio_field'] ) ? $options['radio_field'] : 'yes';
    ?&gt;
    &lt;fieldset&gt;
        &lt;label&gt;
            &lt;input type="radio" 
                   name="mytheme_options[radio_field]" 
                   value="yes" 
                   &lt;?php checked( $value, 'yes' ); ?&gt; /&gt;
            &lt;?php _e( 'Yes', 'mytheme' ); ?&gt;
        &lt;/label&gt;&lt;br&gt;
        &lt;label&gt;
            &lt;input type="radio" 
                   name="mytheme_options[radio_field]" 
                   value="no" 
                   &lt;?php checked( $value, 'no' ); ?&gt; /&gt;
            &lt;?php _e( 'No', 'mytheme' ); ?&gt;
        &lt;/label&gt;&lt;br&gt;
        &lt;label&gt;
            &lt;input type="radio" 
                   name="mytheme_options[radio_field]" 
                   value="maybe" 
                   &lt;?php checked( $value, 'maybe' ); ?&gt; /&gt;
            &lt;?php _e( 'Maybe', 'mytheme' ); ?&gt;
        &lt;/label&gt;
    &lt;/fieldset&gt;
    &lt;?php
}

// Multiple Checkboxes
function mytheme_checkboxes_field_callback() {
    $options = get_option( 'mytheme_options' );
    $values = isset( $options['checkboxes_field'] ) ? $options['checkboxes_field'] : array();
    ?&gt;
    &lt;fieldset&gt;
        &lt;label&gt;
            &lt;input type="checkbox" 
                   name="mytheme_options[checkboxes_field][]" 
                   value="option1" 
                   &lt;?php checked( in_array( 'option1', $values ) ); ?&gt; /&gt;
            &lt;?php _e( 'Option 1', 'mytheme' ); ?&gt;
        &lt;/label&gt;&lt;br&gt;
        &lt;label&gt;
            &lt;input type="checkbox" 
                   name="mytheme_options[checkboxes_field][]" 
                   value="option2" 
                   &lt;?php checked( in_array( 'option2', $values ) ); ?&gt; /&gt;
            &lt;?php _e( 'Option 2', 'mytheme' ); ?&gt;
        &lt;/label&gt;&lt;br&gt;
        &lt;label&gt;
            &lt;input type="checkbox" 
                   name="mytheme_options[checkboxes_field][]" 
                   value="option3" 
                   &lt;?php checked( in_array( 'option3', $values ) ); ?&gt; /&gt;
            &lt;?php _e( 'Option 3', 'mytheme' ); ?&gt;
        &lt;/label&gt;
    &lt;/fieldset&gt;
    &lt;?php
}</code></pre>
                                    </div>
                                    
                                    <div id="media-fields" class="tab-content">
                                        <h4>Media Upload Fields</h4>
                                        <pre><code class="language-php">&lt;?php
// Media Upload Field
function mytheme_image_field_callback() {
    $options = get_option( 'mytheme_options' );
    $image_id = isset( $options['image_field'] ) ? $options['image_field'] : '';
    ?&gt;
    &lt;div class="mytheme-media-upload"&gt;
        &lt;input type="hidden" 
               id="mytheme_image_field" 
               name="mytheme_options[image_field]" 
               value="&lt;?php echo esc_attr( $image_id ); ?&gt;" /&gt;
        
        &lt;div id="mytheme_image_preview"&gt;
            &lt;?php if ( $image_id ) : ?&gt;
                &lt;?php echo wp_get_attachment_image( $image_id, 'thumbnail' ); ?&gt;
            &lt;?php endif; ?&gt;
        &lt;/div&gt;
        
        &lt;button type="button" 
                class="button mytheme-upload-button" 
                data-field="mytheme_image_field" 
                data-preview="mytheme_image_preview"&gt;
            &lt;?php _e( 'Choose Image', 'mytheme' ); ?&gt;
        &lt;/button&gt;
        
        &lt;button type="button" 
                class="button mytheme-remove-button" 
                data-field="mytheme_image_field" 
                data-preview="mytheme_image_preview"&gt;
            &lt;?php _e( 'Remove Image', 'mytheme' ); ?&gt;
        &lt;/button&gt;
    &lt;/div&gt;
    &lt;?php
}

// Enqueue media scripts
function mytheme_admin_scripts( $hook ) {
    if ( 'toplevel_page_mytheme-options' !== $hook ) {
        return;
    }
    
    wp_enqueue_media();
    wp_enqueue_script(
        'mytheme-admin',
        get_template_directory_uri() . '/js/admin.js',
        array( 'jquery' ),
        '1.0.0',
        true
    );
}
add_action( 'admin_enqueue_scripts', 'mytheme_admin_scripts' );</code></pre>
                                    </div>
                                </div>
                                
                                <script>
                                    function showTab(evt, tabName) {
                                        const tabContents = document.querySelectorAll('.tab-content');
                                        tabContents.forEach(content => {
                                            content.classList.remove('active');
                                        });
                                        
                                        const tabButtons = document.querySelectorAll('.tab-button');
                                        tabButtons.forEach(button => {
                                            button.classList.remove('active');
                                        });
                                        
                                        document.getElementById(tabName).classList.add('active');
                                        evt.currentTarget.classList.add('active');
                                    }
                                </script>
                            </section>

                            <!-- Tabbed Settings Page -->
                            <section>
                                <h2>Creating Tabbed Settings</h2>
                                
                                <div class="code-example">
                                    <h4>Tabbed Options Page</h4>
                                    <pre><code class="language-php">&lt;?php
/**
 * Tabbed Options Page
 */
function mytheme_tabbed_options_page() {
    $active_tab = isset( $_GET['tab'] ) ? $_GET['tab'] : 'general';
    ?&gt;
    &lt;div class="wrap"&gt;
        &lt;h1&gt;&lt;?php echo esc_html( get_admin_page_title() ); ?&gt;&lt;/h1&gt;
        
        &lt;h2 class="nav-tab-wrapper"&gt;
            &lt;a href="?page=mytheme-options&tab=general" 
               class="nav-tab &lt;?php echo $active_tab == 'general' ? 'nav-tab-active' : ''; ?&gt;"&gt;
                &lt;?php _e( 'General', 'mytheme' ); ?&gt;
            &lt;/a&gt;
            &lt;a href="?page=mytheme-options&tab=social" 
               class="nav-tab &lt;?php echo $active_tab == 'social' ? 'nav-tab-active' : ''; ?&gt;"&gt;
                &lt;?php _e( 'Social Media', 'mytheme' ); ?&gt;
            &lt;/a&gt;
            &lt;a href="?page=mytheme-options&tab=advanced" 
               class="nav-tab &lt;?php echo $active_tab == 'advanced' ? 'nav-tab-active' : ''; ?&gt;"&gt;
                &lt;?php _e( 'Advanced', 'mytheme' ); ?&gt;
            &lt;/a&gt;
        &lt;/h2&gt;
        
        &lt;form method="post" action="options.php"&gt;
            &lt;?php
            if ( $active_tab == 'general' ) {
                settings_fields( 'mytheme_general_group' );
                do_settings_sections( 'mytheme-general' );
            } elseif ( $active_tab == 'social' ) {
                settings_fields( 'mytheme_social_group' );
                do_settings_sections( 'mytheme-social' );
            } elseif ( $active_tab == 'advanced' ) {
                settings_fields( 'mytheme_advanced_group' );
                do_settings_sections( 'mytheme-advanced' );
            }
            
            submit_button();
            ?&gt;
        &lt;/form&gt;
    &lt;/div&gt;
    &lt;?php
}</code></pre>
                                </div>
                            </section>

                            <!-- Using Options in Theme -->
                            <section>
                                <h2>Using Options in Your Theme</h2>
                                
                                <div class="code-example">
                                    <h4>Retrieving and Using Options</h4>
                                    <pre><code class="language-php">&lt;?php
// Get all options
$options = get_option( 'mytheme_options', array() );

// Get specific option with default
$logo_text = isset( $options['logo_text'] ) ? $options['logo_text'] : 'Default Logo';
$footer_text = isset( $options['footer_text'] ) ? $options['footer_text'] : 'Copyright ¬© 2024';

// Helper function for getting options
function mytheme_get_option( $key, $default = '' ) {
    $options = get_option( 'mytheme_options', array() );
    return isset( $options[$key] ) ? $options[$key] : $default;
}

// Usage in templates
?&gt;
&lt;header class="site-header"&gt;
    &lt;div class="logo"&gt;
        &lt;?php echo esc_html( mytheme_get_option( 'logo_text', get_bloginfo( 'name' ) ) ); ?&gt;
    &lt;/div&gt;
&lt;/header&gt;

&lt;footer class="site-footer"&gt;
    &lt;div class="footer-text"&gt;
        &lt;?php echo wp_kses_post( mytheme_get_option( 'footer_text' ) ); ?&gt;
    &lt;/div&gt;
    
    &lt;?php if ( mytheme_get_option( 'enable_social', false ) ) : ?&gt;
        &lt;div class="social-links"&gt;
            &lt;?php if ( $facebook = mytheme_get_option( 'facebook_url' ) ) : ?&gt;
                &lt;a href="&lt;?php echo esc_url( $facebook ); ?&gt;" target="_blank"&gt;Facebook&lt;/a&gt;
            &lt;?php endif; ?&gt;
            
            &lt;?php if ( $twitter = mytheme_get_option( 'twitter_url' ) ) : ?&gt;
                &lt;a href="&lt;?php echo esc_url( $twitter ); ?&gt;" target="_blank"&gt;Twitter&lt;/a&gt;
            &lt;?php endif; ?&gt;
        &lt;/div&gt;
    &lt;?php endif; ?&gt;
&lt;/footer&gt;</code></pre>
                                </div>
                            </section>

                            <!-- Best Practices -->
                            <section>
                                <h2>Best Practices</h2>
                                
                                <div class="best-practice">
                                    <h4>Development Best Practices</h4>
                                    <ul>
                                        <li><strong>Use the Customizer when possible:</strong> For visual settings that benefit from live preview</li>
                                        <li><strong>Group related settings:</strong> Use sections to organize options logically</li>
                                        <li><strong>Always sanitize input:</strong> Never trust user input</li>
                                        <li><strong>Provide defaults:</strong> Always have fallback values</li>
                                        <li><strong>Use nonces:</strong> Protect against CSRF attacks</li>
                                        <li><strong>Check capabilities:</strong> Ensure users have permission</li>
                                        <li><strong>Escape output:</strong> Always escape when displaying options</li>
                                        <li><strong>Cache options:</strong> Store frequently used options in variables</li>
                                    </ul>
                                </div>

                                <div class="warning-box">
                                    Never use update_option() directly in theme files for user-facing settings. Always use the Settings API for proper validation and security.
                                </div>
                            </section>

                            <!-- Practice Exercise -->
                            <section>
                                <h2>Practice Exercise</h2>
                                <div class="alert alert-success">
                                    <div class="alert-icon">üíª</div>
                                    <div class="alert-content">
                                        <div class="alert-title">Build Complete Settings System</div>
                                        <div class="alert-message">
                                            <p>Create a comprehensive theme options system that includes:</p>
                                            <ol>
                                                <li>Create main options page with icon</li>
                                                <li>Add three submenu pages (General, Design, Advanced)</li>
                                                <li>Implement tabbed navigation</li>
                                                <li>Add text, textarea, and checkbox fields</li>
                                                <li>Create color picker field</li>
                                                <li>Add media upload functionality</li>
                                                <li>Implement proper validation for all fields</li>
                                                <li>Add contextual help tabs</li>
                                                <li>Create export/import functionality</li>
                                                <li>Use options throughout the theme</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Resources -->
                            <section class="resources">
                                <h2>Additional Resources</h2>
                                <ul>
                                    <li><a href="https://developer.wordpress.org/plugins/settings/" target="_blank">Settings API Documentation</a></li>
                                    <li><a href="https://developer.wordpress.org/reference/functions/add_menu_page/" target="_blank">add_menu_page() Reference</a></li>
                                    <li><a href="https://developer.wordpress.org/reference/functions/register_setting/" target="_blank">register_setting() Reference</a></li>
                                    <li><a href="https://developer.wordpress.org/reference/functions/add_settings_section/" target="_blank">add_settings_section() Reference</a></li>
                                    <li><a href="https://developer.wordpress.org/reference/functions/add_settings_field/" target="_blank">add_settings_field() Reference</a></li>
                                    <li><a href="https://codex.wordpress.org/Creating_Options_Pages" target="_blank">Creating Options Pages</a></li>
                                </ul>
                            </section>
                        </div>

                        <!-- Lesson Navigation -->
                        <div class="lesson-navigation">
                            <a href="/05module/custom_post_types_taxonomies.html" class="lesson-nav-button prev">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
                                </svg>
                                <span>
                                    <small>Previous</small><br>
                                    Custom Post Types & Taxonomies
                                </span>
                            </a>
                            
                            <button class="complete-lesson-btn">
                                Mark as Complete
                            </button>
                            
                            <a href="/05module/ajax_dynamic_content.html" class="lesson-nav-button next">
                                <span>
                                    <small>Next</small><br>
                                    AJAX & Dynamic Content
                                </span>
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/>
                                </svg>
                            </a>
                        </div>
                    </article>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="site-footer" role="contentinfo">
            <div class="footer-container">
                <div class="footer-content">
                    <div class="footer-section footer-about">
                        <h3>PHP WordPress Development</h3>
                        <p>Complete Web Development Course</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <ul class="footer-links">
                            <li><a href="/">Home</a></li>
                            <li><a href="/module5.html">Module 5</a></li>
                            <li><a href="/resources.html">Resources</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Support</h4>
                        <ul class="footer-links">
                            <li><a href="/about.html">About</a></li>
                            <li><a href="/contact.html">Contact</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2024 PHP WordPress Course. All rights reserved.</p>
                    <p>This course material is for educational purposes only.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- JavaScript -->
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/sidebar-toggle.js"></script>
    <script src="/assets/js/progress-tracker.js"></script>
    <script src="/assets/js/search.js"></script>
    <script src="/assets/js/theme-toggle.js"></script>
</body>
</html>