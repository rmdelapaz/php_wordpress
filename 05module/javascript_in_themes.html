<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SEO Meta Tags -->
    <title>JavaScript in WordPress Themes - WordPress Theme Development - PHP WordPress Course</title>
    <meta name="description" content="Learn how to properly implement JavaScript in WordPress themes. Master script enqueuing, localization, AJAX, and modern JavaScript development.">
    <meta name="keywords" content="PHP, WordPress, JavaScript, wp_enqueue_script, AJAX, REST API, theme development, ES6">
    <meta name="author" content="PHP WordPress Course">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    <link rel="stylesheet" href="/assets/css/sidebar-enhanced.css">
    <link rel="stylesheet" href="/assets/css/sidebar-toggle.css">
    
    <!-- Custom styles for JavaScript lesson -->
    <style>
        .javascript-header {
            background: linear-gradient(135deg, #f7df1e 0%, #323330 100%);
            color: white;
            padding: 3rem 2rem;
            border-radius: 12px;
            margin-bottom: 2rem;
            text-align: center;
        }

        .js-concept {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .js-concept h3 {
            color: #f7df1e;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
            margin-top: 0;
            border-bottom: 2px solid #e5e7eb;
            padding-bottom: 1rem;
        }

        .code-example {
            background: #1e293b;
            color: #e2e8f0;
            padding: 1.5rem;
            border-radius: 8px;
            margin: 1.5rem 0;
            overflow-x: auto;
            font-family: 'Courier New', monospace;
        }

        .code-example h4 {
            color: #a5b4fc;
            margin-top: 0;
            border-bottom: 1px solid #475569;
            padding-bottom: 0.5rem;
        }

        .enqueue-table {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            overflow: hidden;
            margin: 2rem 0;
        }

        .enqueue-table table {
            width: 100%;
            border-collapse: collapse;
        }

        .enqueue-table th {
            background: #f3f4f6;
            padding: 1rem;
            text-align: left;
            font-weight: bold;
            border-bottom: 2px solid #e5e7eb;
        }

        .enqueue-table td {
            padding: 1rem;
            border-bottom: 1px solid #e5e7eb;
        }

        .enqueue-table code {
            background: #f3f4f6;
            padding: 0.2rem 0.4rem;
            border-radius: 3px;
            font-size: 0.875rem;
            color: #667eea;
        }

        .ajax-section {
            background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
            border: 2px solid #0ea5e9;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .ajax-section h3 {
            color: #0369a1;
            margin-top: 0;
        }

        .rest-api-section {
            background: linear-gradient(135deg, #fef3c7 0%, #fed7aa 100%);
            border: 2px solid #f59e0b;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .rest-api-section h3 {
            color: #92400e;
            margin-top: 0;
        }

        .module-pattern {
            background: white;
            border: 2px solid #667eea;
            border-radius: 12px;
            padding: 2rem;
            margin: 2rem 0;
        }

        .module-pattern h3 {
            color: #667eea;
            margin-top: 0;
        }

        .best-practice {
            background: #f0f9ff;
            border-left: 4px solid #0ea5e9;
            padding: 1rem 1.5rem;
            margin: 1.5rem 0;
        }

        .best-practice h4 {
            color: #0369a1;
            margin-top: 0;
        }

        .warning-box {
            background: #fef3c7;
            border: 2px solid #fbbf24;
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
        }

        .warning-box::before {
            content: "‚ö†Ô∏è Warning: ";
            font-weight: bold;
            color: #92400e;
        }

        .tip-box {
            background: #f0fdf4;
            border: 2px solid #86efac;
            border-radius: 8px;
            padding: 1rem;
            margin: 1.5rem 0;
        }

        .tip-box::before {
            content: "üí° Tip: ";
            font-weight: bold;
            color: #166534;
        }

        .hook-list {
            background: white;
            border: 2px solid #e5e7eb;
            border-radius: 8px;
            padding: 1.5rem;
            margin: 1.5rem 0;
        }

        .hook-list h4 {
            color: #667eea;
            margin-top: 0;
        }

        @media (max-width: 768px) {
            .javascript-header h1 {
                font-size: 1.75rem;
            }
        }
    </style>
</head>
<body>
    <!-- Skip to main content -->
    <a href="#main-content" class="sr-only">Skip to main content</a>
    
    <div class="page-wrapper">
        <!-- Header -->
        <header class="site-header" role="banner">
            <div class="header-container">
                <div class="site-branding">
                    <a href="/" class="site-logo">
                        <h1 class="site-title">PHP WordPress Development</h1>
                    </a>
                </div>
                
                <nav class="main-navigation" role="navigation" aria-label="Main navigation">
                    <button class="mobile-menu-btn" aria-label="Toggle navigation" aria-expanded="false">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    
                    <div class="nav-menu">
                        <ul class="nav-list">
                            <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
                            <li class="nav-item dropdown">
                                <button class="nav-link dropdown-toggle active" aria-haspopup="true">Modules</button>
                                <div class="dropdown-menu">
                                    <a href="/module1.html" class="dropdown-item">Module 1: Web Fundamentals</a>
                                    <a href="/module2.html" class="dropdown-item">Module 2: PHP Fundamentals</a>
                                    <a href="/module3.html" class="dropdown-item">Module 3: MySQL Database</a>
                                    <a href="/module4.html" class="dropdown-item">Module 4: WordPress & Docker</a>
                                    <a href="/module5.html" class="dropdown-item active">Module 5: Theme Development</a>
                                    <a href="/module6.html" class="dropdown-item">Module 6: Plugin Development</a>
                                    <a href="/module7.html" class="dropdown-item">Module 7: Advanced WordPress</a>
                                    <a href="/module8.html" class="dropdown-item">Module 8: Deployment</a>
                                    <a href="/module9.html" class="dropdown-item">Module 9: Final Project</a>
                                </div>
                            </li>
                            <li class="nav-item"><a href="/resources.html" class="nav-link">Resources</a></li>
                            <li class="nav-item"><a href="/about.html" class="nav-link">About</a></li>
                        </ul>
                    </div>
                </nav>
                
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                        <input type="search" class="search-input" placeholder="Search lessons..." aria-label="Search">
                    </div>
                    <div class="search-results"></div>
                </div>
            </div>
        </header>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-header">
                <h2 class="progress-title">Course Progress</h2>
                <span class="progress-text">Loading...</span>
            </div>
            <div class="progress-bar">
                <div class="progress-bar-fill">
                    <span class="progress-bar-text"></span>
                </div>
            </div>
        </div>
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb container" aria-label="Breadcrumb">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <a href="/module5.html">Module 5</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <span aria-current="page">JavaScript in WordPress Themes</span>
                </li>
            </ol>
        </nav>
        
        <!-- Main Content -->
        <main id="main-content" class="main-content" role="main">
            <div class="container">
                <div class="content-with-sidebar">
                    <!-- Sidebar -->
                    <aside class="sidebar">
                        <div class="sidebar-nav">
                            <h3 class="sidebar-title">Module 5: Theme Development</h3>
                            <div class="sidebar-section">
                                <h4 class="sidebar-section-title">Session 8: Theme Assets and Frontend</h4>
                                <ul class="sidebar-menu">
                                    <li><a class="sidebar-link" href="/05module/asset_organization.html">Asset Organization in Themes</a></li>
                                    <li><a class="sidebar-link" href="/05module/responsive_design.html">Responsive Design Implementation</a></li>
                                    <li><a class="sidebar-link" href="/05module/sass_in_themes.html">Using Sass in Theme Development</a></li>
                                    <li class="active"><a class="sidebar-link active" href="/05module/javascript_in_themes.html">JavaScript in WordPress Themes</a></li>
                                    <li><a class="sidebar-link" href="/05module/jquery_wordpress.html">Working with jQuery in WordPress</a></li>
                                    <li><a class="sidebar-link" href="/05module/third_party_libraries.html">Using Third-party Libraries</a></li>
                                    <li><a class="sidebar-link" href="/05module/asset_optimization.html">Asset Optimization and Best Practices</a></li>
                                    <li><a class="sidebar-link" href="/05module/homework_assets_frontend.html">Homework: Assets & Frontend</a></li>
                                </ul>
                            </div>
                            <div class="sidebar-section">
                                <h4 class="sidebar-section-title">Quick Links</h4>
                                <ul class="sidebar-menu">
                                    <li><a class="sidebar-link" href="/module5.html">Module Overview</a></li>
                                    <li><a class="sidebar-link" href="/05module/sass_in_themes.html">‚Üê Previous Lesson</a></li>
                                    <li><a class="sidebar-link next-session" href="/05module/jquery_wordpress.html">Next Lesson ‚Üí</a></li>
                                    <li><a class="sidebar-link" href="/">‚Üê Course Home</a></li>
                                    <li><a class="sidebar-link" href="/resources.html">Resources</a></li>
                                </ul>
                            </div>
                        </div>
                    </aside>
                    
                    <!-- Main Lesson Content -->
                    <article class="lesson-content">
                        <div class="javascript-header">
                            <h1>‚ö° JavaScript in WordPress Themes</h1>
                            <p class="lead">Master JavaScript implementation in WordPress themes</p>
                            <p>Learn proper enqueuing, AJAX, REST API, and modern JavaScript patterns</p>
                        </div>

                        <!-- Learning Objectives -->
                        <div class="lesson-objectives">
                            <h2>Learning Objectives</h2>
                            <ul>
                                <li>Properly enqueue JavaScript in WordPress</li>
                                <li>Understand script dependencies and loading order</li>
                                <li>Implement AJAX in WordPress themes</li>
                                <li>Work with the WordPress REST API</li>
                                <li>Use wp_localize_script for data passing</li>
                                <li>Create modular JavaScript architecture</li>
                                <li>Handle WordPress JavaScript hooks</li>
                                <li>Debug JavaScript in WordPress</li>
                            </ul>
                        </div>
                        
                        <!-- Lesson Body -->
                        <div class="lesson-body">
                            <!-- Introduction -->
                            <section>
                                <h2>JavaScript in WordPress Context</h2>
                                <p class="lead">WordPress has specific methods for including and managing JavaScript to ensure proper loading order, prevent conflicts, and maintain compatibility with plugins and themes.</p>
                                
                                <div class="alert alert-info">
                                    <div class="alert-icon">üí°</div>
                                    <div class="alert-content">
                                        <div class="alert-title">Key Principle</div>
                                        <div class="alert-message">Never hardcode script tags in WordPress themes. Always use wp_enqueue_script() to manage JavaScript files properly.</div>
                                    </div>
                                </div>
                            </section>

                            <!-- Enqueuing Scripts -->
                            <section>
                                <h2>Enqueuing Scripts Properly</h2>
                                
                                <div class="code-example">
                                    <h4>Basic Script Enqueuing</h4>
                                    <pre><code class="language-php">&lt;?php
// functions.php

function mytheme_enqueue_scripts() {
    // Get theme version for cache busting
    $theme_version = wp_get_theme()->get( 'Version' );
    
    // Enqueue main theme script
    wp_enqueue_script(
        'mytheme-script',                                    // Handle
        get_template_directory_uri() . '/assets/js/main.js', // Source
        array(),                                              // Dependencies
        $theme_version,                                       // Version
        true                                                  // In footer
    );
    
    // Enqueue navigation script with dependencies
    wp_enqueue_script(
        'mytheme-navigation',
        get_template_directory_uri() . '/assets/js/navigation.js',
        array( 'mytheme-script' ),  // Depends on main script
        $theme_version,
        true
    );
    
    // Conditional script loading
    if ( is_singular() && comments_open() && get_option( 'thread_comments' ) ) {
        wp_enqueue_script( 'comment-reply' );
    }
    
    // Load script only on specific pages
    if ( is_page_template( 'template-contact.php' ) ) {
        wp_enqueue_script(
            'mytheme-contact',
            get_template_directory_uri() . '/assets/js/contact.js',
            array( 'jquery' ),
            $theme_version,
            true
        );
    }
}
add_action( 'wp_enqueue_scripts', 'mytheme_enqueue_scripts' );

// Dequeue scripts (removing unwanted scripts)
function mytheme_dequeue_scripts() {
    // Remove unnecessary plugin script on non-required pages
    if ( ! is_page( 'contact' ) ) {
        wp_dequeue_script( 'contact-form-7' );
        wp_deregister_script( 'contact-form-7' );
    }
}
add_action( 'wp_print_scripts', 'mytheme_dequeue_scripts', 100 );</code></pre>
                                </div>

                                <div class="enqueue-table">
                                    <table>
                                        <thead>
                                            <tr>
                                                <th>Parameter</th>
                                                <th>Description</th>
                                                <th>Example</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr>
                                                <td><code>$handle</code></td>
                                                <td>Unique name for the script</td>
                                                <td>'mytheme-main'</td>
                                            </tr>
                                            <tr>
                                                <td><code>$src</code></td>
                                                <td>URL to the script file</td>
                                                <td>get_template_directory_uri() . '/js/main.js'</td>
                                            </tr>
                                            <tr>
                                                <td><code>$deps</code></td>
                                                <td>Array of script dependencies</td>
                                                <td>array('jquery', 'underscore')</td>
                                            </tr>
                                            <tr>
                                                <td><code>$ver</code></td>
                                                <td>Script version for cache busting</td>
                                                <td>'1.0.0' or filemtime()</td>
                                            </tr>
                                            <tr>
                                                <td><code>$in_footer</code></td>
                                                <td>Load in footer (true) or header (false)</td>
                                                <td>true (recommended)</td>
                                            </tr>
                                        </tbody>
                                    </table>
                                </div>
                            </section>

                            <!-- Localizing Scripts -->
                            <section>
                                <h2>Localizing Scripts (Passing Data to JavaScript)</h2>
                                
                                <div class="code-example">
                                    <h4>wp_localize_script() Usage</h4>
                                    <pre><code class="language-php">&lt;?php
function mytheme_enqueue_scripts() {
    // Enqueue the script first
    wp_enqueue_script(
        'mytheme-ajax',
        get_template_directory_uri() . '/assets/js/ajax.js',
        array( 'jquery' ),
        '1.0.0',
        true
    );
    
    // Localize the script with data
    wp_localize_script( 'mytheme-ajax', 'mytheme_ajax_object', array(
        'ajax_url' => admin_url( 'admin-ajax.php' ),
        'nonce'    => wp_create_nonce( 'mytheme-ajax-nonce' ),
        'site_url' => home_url(),
        'theme_url' => get_template_directory_uri(),
        'is_user_logged_in' => is_user_logged_in(),
        'current_user_id' => get_current_user_id(),
        'post_id' => get_the_ID(),
        'strings' => array(
            'loading' => __( 'Loading...', 'mytheme' ),
            'error'   => __( 'An error occurred', 'mytheme' ),
            'success' => __( 'Success!', 'mytheme' ),
            'confirm' => __( 'Are you sure?', 'mytheme' ),
        ),
        'settings' => array(
            'animation_speed' => 300,
            'autoplay' => true,
            'items_per_page' => get_option( 'posts_per_page' ),
        )
    ) );
}
add_action( 'wp_enqueue_scripts', 'mytheme_enqueue_scripts' );</code></pre>
                                </div>

                                <div class="code-example">
                                    <h4>Accessing Localized Data in JavaScript</h4>
                                    <pre><code class="language-javascript">// ajax.js
(function($) {
    'use strict';
    
    // Access localized data
    console.log(mytheme_ajax_object.ajax_url);
    console.log(mytheme_ajax_object.strings.loading);
    
    // Use in AJAX request
    $.ajax({
        url: mytheme_ajax_object.ajax_url,
        type: 'POST',
        data: {
            action: 'mytheme_load_more',
            nonce: mytheme_ajax_object.nonce,
            post_id: mytheme_ajax_object.post_id
        },
        beforeSend: function() {
            $('#loading').text(mytheme_ajax_object.strings.loading);
        },
        success: function(response) {
            if (response.success) {
                $('#content').html(response.data);
            } else {
                alert(mytheme_ajax_object.strings.error);
            }
        }
    });
    
})(jQuery);</code></pre>
                                </div>
                            </section>

                            <!-- AJAX Implementation -->
                            <section>
                                <div class="ajax-section">
                                    <h3>Implementing AJAX in WordPress</h3>
                                    
                                    <div class="code-example">
                                        <h4>Complete AJAX Example - Load More Posts</h4>
                                        <pre><code class="language-php">&lt;?php
// PHP: AJAX Handler (functions.php)

// For logged-in users
add_action( 'wp_ajax_load_more_posts', 'mytheme_load_more_posts' );
// For non-logged-in users
add_action( 'wp_ajax_nopriv_load_more_posts', 'mytheme_load_more_posts' );

function mytheme_load_more_posts() {
    // Verify nonce
    if ( ! isset( $_POST['nonce'] ) || ! wp_verify_nonce( $_POST['nonce'], 'load-more-nonce' ) ) {
        wp_die( 'Permission denied' );
    }
    
    // Get data from AJAX request
    $page = isset( $_POST['page'] ) ? intval( $_POST['page'] ) : 1;
    $posts_per_page = isset( $_POST['posts_per_page'] ) ? intval( $_POST['posts_per_page'] ) : 10;
    $category = isset( $_POST['category'] ) ? sanitize_text_field( $_POST['category'] ) : '';
    
    // Query arguments
    $args = array(
        'post_type'      => 'post',
        'posts_per_page' => $posts_per_page,
        'paged'          => $page,
        'post_status'    => 'publish',
    );
    
    if ( ! empty( $category ) ) {
        $args['category_name'] = $category;
    }
    
    $query = new WP_Query( $args );
    
    $response = array();
    
    if ( $query->have_posts() ) {
        ob_start();
        
        while ( $query->have_posts() ) {
            $query->the_post();
            // Use your template part
            get_template_part( 'template-parts/content', get_post_format() );
        }
        
        $response['html'] = ob_get_clean();
        $response['max_pages'] = $query->max_num_pages;
        $response['found_posts'] = $query->found_posts;
        
        wp_send_json_success( $response );
    } else {
        wp_send_json_error( 'No more posts found' );
    }
    
    wp_die();
}</code></pre>
                                    </div>

                                    <div class="code-example">
                                        <h4>JavaScript: AJAX Request</h4>
                                        <pre><code class="language-javascript">// load-more.js
(function($) {
    'use strict';
    
    const LoadMore = {
        currentPage: 1,
        isLoading: false,
        
        init: function() {
            this.bindEvents();
        },
        
        bindEvents: function() {
            $('#load-more-btn').on('click', this.loadPosts.bind(this));
            
            // Infinite scroll
            $(window).on('scroll', this.infiniteScroll.bind(this));
        },
        
        loadPosts: function(e) {
            e.preventDefault();
            
            if (this.isLoading) return;
            
            const button = $(e.currentTarget);
            const container = $('#posts-container');
            
            this.isLoading = true;
            this.currentPage++;
            
            // Update button state
            button.addClass('loading').text('Loading...');
            
            $.ajax({
                url: mytheme_ajax.ajax_url,
                type: 'POST',
                dataType: 'json',
                data: {
                    action: 'load_more_posts',
                    nonce: mytheme_ajax.nonce,
                    page: this.currentPage,
                    posts_per_page: 10,
                    category: button.data('category')
                },
                success: (response) => {
                    if (response.success) {
                        // Append new posts with animation
                        const newPosts = $(response.data.html).hide();
                        container.append(newPosts);
                        newPosts.fadeIn();
                        
                        // Check if more posts available
                        if (this.currentPage >= response.data.max_pages) {
                            button.hide();
                            container.after('&lt;p class="no-more-posts"&gt;No more posts to load&lt;/p&gt;');
                        } else {
                            button.removeClass('loading').text('Load More');
                        }
                    } else {
                        console.error('Error:', response.data);
                    }
                    
                    this.isLoading = false;
                },
                error: (xhr, status, error) => {
                    console.error('AJAX Error:', error);
                    button.removeClass('loading').text('Error - Try Again');
                    this.isLoading = false;
                }
            });
        },
        
        infiniteScroll: function() {
            if (this.isLoading) return;
            
            const scrollPosition = $(window).scrollTop() + $(window).height();
            const contentHeight = $(document).height();
            
            if (scrollPosition > contentHeight - 200) {
                $('#load-more-btn').trigger('click');
            }
        }
    };
    
    $(document).ready(function() {
        LoadMore.init();
    });
    
})(jQuery);</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- REST API -->
                            <section>
                                <div class="rest-api-section">
                                    <h3>Using WordPress REST API</h3>
                                    
                                    <div class="code-example">
                                        <h4>Fetch API with WordPress REST API</h4>
                                        <pre><code class="language-javascript">// Modern JavaScript with Fetch API
class WordPressAPI {
    constructor() {
        this.apiUrl = `${window.location.origin}/wp-json/wp/v2`;
        this.nonce = mytheme_ajax.nonce;
    }
    
    // Get posts
    async getPosts(page = 1, perPage = 10, categories = []) {
        let url = `${this.apiUrl}/posts?page=${page}&per_page=${perPage}`;
        
        if (categories.length > 0) {
            url += `&categories=${categories.join(',')}`;
        }
        
        try {
            const response = await fetch(url, {
                headers: {
                    'Content-Type': 'application/json',
                    'X-WP-Nonce': this.nonce
                }
            });
            
            if (!response.ok) {
                throw new Error(`HTTP error! status: ${response.status}`);
            }
            
            const posts = await response.json();
            const totalPages = response.headers.get('X-WP-TotalPages');
            const total = response.headers.get('X-WP-Total');
            
            return {
                posts,
                totalPages: parseInt(totalPages),
                total: parseInt(total)
            };
        } catch (error) {
            console.error('Error fetching posts:', error);
            throw error;
        }
    }
    
    // Get single post
    async getPost(id) {
        try {
            const response = await fetch(`${this.apiUrl}/posts/${id}?_embed`, {
                headers: {
                    'X-WP-Nonce': this.nonce
                }
            });
            
            return await response.json();
        } catch (error) {
            console.error('Error fetching post:', error);
            throw error;
        }
    }
    
    // Create post (requires authentication)
    async createPost(data) {
        try {
            const response = await fetch(`${this.apiUrl}/posts`, {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                    'X-WP-Nonce': this.nonce
                },
                body: JSON.stringify({
                    title: data.title,
                    content: data.content,
                    status: 'draft',
                    categories: data.categories || [],
                    tags: data.tags || []
                })
            });
            
            return await response.json();
        } catch (error) {
            console.error('Error creating post:', error);
            throw error;
        }
    }
    
    // Search posts
    async searchPosts(searchTerm) {
        try {
            const response = await fetch(
                `${this.apiUrl}/search?search=${encodeURIComponent(searchTerm)}&type=post`,
                {
                    headers: {
                        'X-WP-Nonce': this.nonce
                    }
                }
            );
            
            return await response.json();
        } catch (error) {
            console.error('Error searching posts:', error);
            throw error;
        }
    }
}

// Usage
const api = new WordPressAPI();

// Get posts
api.getPosts(1, 10, [5, 8]).then(result => {
    console.log('Posts:', result.posts);
    console.log('Total pages:', result.totalPages);
    renderPosts(result.posts);
});

// Search posts
api.searchPosts('wordpress').then(results => {
    console.log('Search results:', results);
});</code></pre>
                                    </div>

                                    <div class="code-example">
                                        <h4>Custom REST API Endpoint</h4>
                                        <pre><code class="language-php">&lt;?php
// Register custom REST API endpoint
add_action( 'rest_api_init', function () {
    register_rest_route( 'mytheme/v1', '/featured-posts', array(
        'methods'  => 'GET',
        'callback' => 'mytheme_get_featured_posts',
        'permission_callback' => '__return_true', // Public endpoint
    ) );
    
    register_rest_route( 'mytheme/v1', '/like-post/(?P&lt;id&gt;\d+)', array(
        'methods'  => 'POST',
        'callback' => 'mytheme_like_post',
        'permission_callback' => function() {
            return is_user_logged_in();
        },
        'args' => array(
            'id' => array(
                'validate_callback' => function($param, $request, $key) {
                    return is_numeric($param);
                }
            ),
        ),
    ) );
} );

function mytheme_get_featured_posts( $request ) {
    $args = array(
        'post_type' => 'post',
        'posts_per_page' => 5,
        'meta_key' => 'featured',
        'meta_value' => 'yes',
    );
    
    $posts = get_posts( $args );
    
    $data = array();
    
    foreach ( $posts as $post ) {
        $data[] = array(
            'id' => $post->ID,
            'title' => $post->post_title,
            'excerpt' => $post->post_excerpt,
            'link' => get_permalink( $post->ID ),
            'thumbnail' => get_the_post_thumbnail_url( $post->ID, 'medium' ),
        );
    }
    
    return new WP_REST_Response( $data, 200 );
}

function mytheme_like_post( $request ) {
    $post_id = $request['id'];
    $user_id = get_current_user_id();
    
    // Get current likes
    $likes = get_post_meta( $post_id, 'likes_count', true );
    $likes = $likes ? intval( $likes ) : 0;
    
    // Check if user already liked
    $liked_users = get_post_meta( $post_id, 'liked_users', true );
    $liked_users = $liked_users ? $liked_users : array();
    
    if ( in_array( $user_id, $liked_users ) ) {
        return new WP_REST_Response( array(
            'message' => 'Already liked',
            'likes' => $likes
        ), 400 );
    }
    
    // Add like
    $likes++;
    $liked_users[] = $user_id;
    
    update_post_meta( $post_id, 'likes_count', $likes );
    update_post_meta( $post_id, 'liked_users', $liked_users );
    
    return new WP_REST_Response( array(
        'message' => 'Post liked',
        'likes' => $likes
    ), 200 );
}</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- Module Pattern -->
                            <section>
                                <div class="module-pattern">
                                    <h3>Modern JavaScript Module Pattern</h3>
                                    
                                    <div class="code-example">
                                        <h4>ES6 Modules Structure</h4>
                                        <pre><code class="language-javascript">// modules/navigation.js
export class Navigation {
    constructor() {
        this.menu = document.querySelector('.site-navigation');
        this.toggleButton = document.querySelector('.menu-toggle');
        this.isOpen = false;
        
        this.init();
    }
    
    init() {
        if (!this.menu || !this.toggleButton) return;
        
        this.bindEvents();
        this.setupAccessibility();
    }
    
    bindEvents() {
        this.toggleButton.addEventListener('click', () => this.toggle());
        
        // Close on escape key
        document.addEventListener('keydown', (e) => {
            if (e.key === 'Escape' && this.isOpen) {
                this.close();
            }
        });
        
        // Close on click outside
        document.addEventListener('click', (e) => {
            if (this.isOpen && !this.menu.contains(e.target)) {
                this.close();
            }
        });
    }
    
    toggle() {
        this.isOpen ? this.close() : this.open();
    }
    
    open() {
        this.isOpen = true;
        this.menu.classList.add('is-open');
        this.toggleButton.setAttribute('aria-expanded', 'true');
        
        // Trap focus
        this.trapFocus();
    }
    
    close() {
        this.isOpen = false;
        this.menu.classList.remove('is-open');
        this.toggleButton.setAttribute('aria-expanded', 'false');
        
        // Release focus
        this.releaseFocus();
    }
    
    trapFocus() {
        const focusableElements = this.menu.querySelectorAll(
            'a[href], button, input, select, textarea, [tabindex]:not([tabindex="-1"])'
        );
        
        const firstElement = focusableElements[0];
        const lastElement = focusableElements[focusableElements.length - 1];
        
        this.menu.addEventListener('keydown', (e) => {
            if (e.key !== 'Tab') return;
            
            if (e.shiftKey && document.activeElement === firstElement) {
                e.preventDefault();
                lastElement.focus();
            } else if (!e.shiftKey && document.activeElement === lastElement) {
                e.preventDefault();
                firstElement.focus();
            }
        });
    }
    
    releaseFocus() {
        // Implementation for releasing focus trap
    }
    
    setupAccessibility() {
        // Add ARIA labels
        this.menu.setAttribute('aria-label', 'Main navigation');
        
        // Setup keyboard navigation
        const menuItems = this.menu.querySelectorAll('.menu-item-has-children > a');
        
        menuItems.forEach(item => {
            item.addEventListener('keydown', (e) => {
                if (e.key === 'Enter' || e.key === ' ') {
                    e.preventDefault();
                    this.toggleSubmenu(item.parentElement);
                }
            });
        });
    }
    
    toggleSubmenu(menuItem) {
        const submenu = menuItem.querySelector('.sub-menu');
        if (!submenu) return;
        
        const isOpen = menuItem.classList.contains('is-open');
        
        if (isOpen) {
            menuItem.classList.remove('is-open');
            submenu.setAttribute('aria-hidden', 'true');
        } else {
            menuItem.classList.add('is-open');
            submenu.setAttribute('aria-hidden', 'false');
        }
    }
}

// modules/search.js
export class Search {
    constructor() {
        this.searchForm = document.querySelector('.search-form');
        this.searchInput = document.querySelector('.search-input');
        this.searchResults = document.querySelector('.search-results');
        this.debounceTimer = null;
        
        this.init();
    }
    
    init() {
        if (!this.searchInput) return;
        
        this.searchInput.addEventListener('input', (e) => {
            this.handleSearch(e.target.value);
        });
    }
    
    handleSearch(query) {
        clearTimeout(this.debounceTimer);
        
        if (query.length < 3) {
            this.hideResults();
            return;
        }
        
        this.debounceTimer = setTimeout(() => {
            this.performSearch(query);
        }, 300);
    }
    
    async performSearch(query) {
        try {
            const response = await fetch(
                `/wp-json/wp/v2/search?search=${encodeURIComponent(query)}&type=post&per_page=5`
            );
            
            const results = await response.json();
            this.displayResults(results);
        } catch (error) {
            console.error('Search error:', error);
        }
    }
    
    displayResults(results) {
        if (results.length === 0) {
            this.searchResults.innerHTML = '&lt;p&gt;No results found&lt;/p&gt;';
            return;
        }
        
        const html = results.map(result => `
            &lt;a href="${result.url}" class="search-result"&gt;
                &lt;h4&gt;${result.title}&lt;/h4&gt;
                ${result.excerpt ? `&lt;p&gt;${result.excerpt}&lt;/p&gt;` : ''}
            &lt;/a&gt;
        `).join('');
        
        this.searchResults.innerHTML = html;
        this.showResults();
    }
    
    showResults() {
        this.searchResults.classList.add('is-visible');
    }
    
    hideResults() {
        this.searchResults.classList.remove('is-visible');
    }
}

// main.js
import { Navigation } from './modules/navigation.js';
import { Search } from './modules/search.js';

class Theme {
    constructor() {
        this.modules = {};
        this.init();
    }
    
    init() {
        // Wait for DOM ready
        if (document.readyState === 'loading') {
            document.addEventListener('DOMContentLoaded', () => this.initModules());
        } else {
            this.initModules();
        }
    }
    
    initModules() {
        // Initialize modules
        this.modules.navigation = new Navigation();
        this.modules.search = new Search();
        
        // Initialize other features
        this.initSmoothScroll();
        this.initLazyLoading();
    }
    
    initSmoothScroll() {
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', (e) => {
                e.preventDefault();
                const target = document.querySelector(anchor.getAttribute('href'));
                
                if (target) {
                    target.scrollIntoView({
                        behavior: 'smooth',
                        block: 'start'
                    });
                }
            });
        });
    }
    
    initLazyLoading() {
        if ('IntersectionObserver' in window) {
            const images = document.querySelectorAll('img[data-src]');
            const imageObserver = new IntersectionObserver((entries, observer) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const img = entry.target;
                        img.src = img.dataset.src;
                        img.removeAttribute('data-src');
                        imageObserver.unobserve(img);
                    }
                });
            });
            
            images.forEach(img => imageObserver.observe(img));
        }
    }
}

// Initialize theme
new Theme();</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- WordPress JavaScript Hooks -->
                            <section>
                                <h2>WordPress JavaScript Hooks</h2>
                                
                                <div class="hook-list">
                                    <h4>Common WordPress JavaScript Events</h4>
                                    
                                    <div class="code-example">
                                        <pre><code class="language-javascript">// WordPress admin events
(function($) {
    'use strict';
    
    // Customizer preview
    if (typeof wp !== 'undefined' && wp.customize) {
        wp.customize('blogname', function(value) {
            value.bind(function(newval) {
                $('.site-title').text(newval);
            });
        });
        
        wp.customize('header_textcolor', function(value) {
            value.bind(function(newval) {
                $('.site-title, .site-description').css({
                    'color': newval
                });
            });
        });
    }
    
    // Media uploader
    $(document).on('click', '.upload-button', function(e) {
        e.preventDefault();
        
        const button = $(this);
        const customUploader = wp.media({
            title: 'Select Image',
            button: {
                text: 'Use this image'
            },
            multiple: false
        });
        
        customUploader.on('select', function() {
            const attachment = customUploader.state().get('selection').first().toJSON();
            button.prev('.image-url').val(attachment.url);
            button.next('.image-preview').html('&lt;img src="' + attachment.url + '"&gt;');
        });
        
        customUploader.open();
    });
    
    // Gutenberg block events
    if (window.wp && window.wp.data && window.wp.data.subscribe) {
        let previousPost = {};
        
        wp.data.subscribe(function() {
            const post = wp.data.select('core/editor').getCurrentPost();
            
            if (post.status !== previousPost.status) {
                console.log('Post status changed:', post.status);
            }
            
            if (post.title !== previousPost.title) {
                console.log('Post title changed:', post.title);
            }
            
            previousPost = post;
        });
    }
    
})(jQuery);</code></pre>
                                    </div>
                                </div>
                            </section>

                            <!-- Debugging JavaScript -->
                            <section>
                                <h2>Debugging JavaScript in WordPress</h2>
                                
                                <div class="code-example">
                                    <h4>Debug Techniques</h4>
                                    <pre><code class="language-javascript">// Debug helper object
const Debug = {
    enabled: true, // Set to false in production
    
    log: function(...args) {
        if (this.enabled && window.console && console.log) {
            console.log('[Theme Debug]:', ...args);
        }
    },
    
    error: function(...args) {
        if (this.enabled && window.console && console.error) {
            console.error('[Theme Error]:', ...args);
        }
    },
    
    table: function(data) {
        if (this.enabled && window.console && console.table) {
            console.table(data);
        }
    },
    
    time: function(label) {
        if (this.enabled && window.console && console.time) {
            console.time(label);
        }
    },
    
    timeEnd: function(label) {
        if (this.enabled && window.console && console.timeEnd) {
            console.timeEnd(label);
        }
    }
};

// Usage
Debug.log('Initializing theme');
Debug.time('Ajax Request');

// Check if script is loaded
if (typeof jQuery === 'undefined') {
    Debug.error('jQuery is not loaded');
}

// Check WordPress globals
Debug.log('Ajax URL:', mytheme_ajax.ajax_url);
Debug.log('Current User:', mytheme_ajax.current_user_id);

// Monitor AJAX requests
$(document).ajaxSend(function(event, xhr, settings) {
    Debug.log('AJAX Request:', settings.url, settings.data);
});

$(document).ajaxComplete(function(event, xhr, settings) {
    Debug.log('AJAX Response:', xhr.responseJSON);
});

// Performance monitoring
window.addEventListener('load', function() {
    if (window.performance && performance.timing) {
        const timing = performance.timing;
        const loadTime = timing.loadEventEnd - timing.navigationStart;
        Debug.log('Page load time:', loadTime + 'ms');
    }
});</code></pre>
                                </div>

                                <div class="tip-box">
                                    Enable SCRIPT_DEBUG in wp-config.php during development to load non-minified versions of WordPress scripts for easier debugging.
                                </div>
                            </section>

                            <!-- Best Practices -->
                            <section>
                                <h2>Best Practices</h2>
                                
                                <div class="best-practice">
                                    <h4>JavaScript Best Practices in WordPress</h4>
                                    <ul>
                                        <li><strong>Always enqueue scripts:</strong> Never hardcode script tags</li>
                                        <li><strong>Load in footer:</strong> Set $in_footer to true for better performance</li>
                                        <li><strong>Use dependencies:</strong> Properly declare script dependencies</li>
                                        <li><strong>Localize data:</strong> Use wp_localize_script for passing PHP data</li>
                                        <li><strong>Namespace your code:</strong> Avoid global scope pollution</li>
                                        <li><strong>Handle no-conflict mode:</strong> Wrap jQuery code properly</li>
                                        <li><strong>Check for existence:</strong> Verify elements exist before using them</li>
                                        <li><strong>Use modern JavaScript:</strong> Consider transpiling for older browsers</li>
                                        <li><strong>Optimize for performance:</strong> Minify and combine scripts for production</li>
                                        <li><strong>Progressive enhancement:</strong> Ensure functionality works without JavaScript</li>
                                    </ul>
                                </div>

                                <div class="warning-box">
                                    Always verify nonces in AJAX handlers to prevent CSRF attacks. Never trust data from the client side.
                                </div>
                            </section>

                            <!-- Practice Exercise -->
                            <section>
                                <h2>Practice Exercise</h2>
                                <div class="alert alert-success">
                                    <div class="alert-icon">üíª</div>
                                    <div class="alert-content">
                                        <div class="alert-title">Build Interactive Theme Features</div>
                                        <div class="alert-message">
                                            <p>Implement JavaScript functionality in your theme:</p>
                                            <ol>
                                                <li>Set up proper script enqueuing system</li>
                                                <li>Create AJAX load more posts functionality</li>
                                                <li>Implement live search with REST API</li>
                                                <li>Build interactive navigation menu</li>
                                                <li>Add smooth scrolling to anchors</li>
                                                <li>Create image lazy loading system</li>
                                                <li>Implement like/favorite system with AJAX</li>
                                                <li>Build comment form with AJAX submission</li>
                                                <li>Add dark mode toggle with localStorage</li>
                                                <li>Create modular JavaScript architecture</li>
                                            </ol>
                                        </div>
                                    </div>
                                </div>
                            </section>

                            <!-- Resources -->
                            <section class="resources">
                                <h2>Additional Resources</h2>
                                <ul>
                                    <li><a href="https://developer.wordpress.org/themes/basics/including-css-javascript/" target="_blank">WordPress: Including CSS & JavaScript</a></li>
                                    <li><a href="https://developer.wordpress.org/plugins/javascript/ajax/" target="_blank">AJAX in WordPress</a></li>
                                    <li><a href="https://developer.wordpress.org/rest-api/" target="_blank">WordPress REST API Handbook</a></li>
                                    <li><a href="https://codex.wordpress.org/AJAX_in_Plugins" target="_blank">AJAX in Plugins (applies to themes too)</a></li>
                                    <li><a href="https://make.wordpress.org/core/handbook/best-practices/javascript/" target="_blank">JavaScript Coding Standards</a></li>
                                    <li><a href="https://webpack.js.org/" target="_blank">Webpack for Modern JavaScript</a></li>
                                </ul>
                            </section>
                        </div>

                        <!-- Lesson Navigation -->
                        <div class="lesson-navigation">
                            <a href="/05module/sass_in_themes.html" class="lesson-nav-button prev">
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
                                </svg>
                                <span>
                                    <small>Previous</small><br>
                                    Using Sass in Theme Development
                                </span>
                            </a>
                            
                            <button class="complete-lesson-btn">
                                Mark as Complete
                            </button>
                            
                            <a href="/05module/jquery_wordpress.html" class="lesson-nav-button next">
                                <span>
                                    <small>Next</small><br>
                                    Working with jQuery in WordPress
                                </span>
                                <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                                    <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/>
                                </svg>
                            </a>
                        </div>
                    </article>
                </div>
            </div>
        </main>

        <!-- Footer -->
        <footer class="site-footer" role="contentinfo">
            <div class="footer-container">
                <div class="footer-content">
                    <div class="footer-section footer-about">
                        <h3>PHP WordPress Development</h3>
                        <p>Complete Web Development Course</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <ul class="footer-links">
                            <li><a href="/">Home</a></li>
                            <li><a href="/module5.html">Module 5</a></li>
                            <li><a href="/resources.html">Resources</a></li>
                        </ul>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Support</h4>
                        <ul class="footer-links">
                            <li><a href="/about.html">About</a></li>
                            <li><a href="/contact.html">Contact</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2024 PHP WordPress Course. All rights reserved.</p>
                    <p>This course material is for educational purposes only.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- JavaScript -->
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/sidebar-toggle.js"></script>
    <script src="/assets/js/progress-tracker.js"></script>
    <script src="/assets/js/search.js"></script>
    <script src="/assets/js/theme-toggle.js"></script>
</body>
</html>