<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <!-- SEO Meta Tags -->
  <title>WordPress Comments Management &amp; Moderation | PHP WordPress Course</title>
  <meta content="Master WordPress comment management and moderation. Learn to handle user comments, prevent spam, implement moderation workflows, and engage with your audience effectively." name="description"/>
  <meta content="WordPress Comments, Comment Moderation, Spam Prevention, Akismet, User Engagement, Discussion Settings, Comment Management" name="keywords"/>
  <meta content="PHP WordPress Course" name="author"/>
  <link href="/assets/css/main.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
  <!-- Favicon -->
  <link href="/favicon.png" rel="icon" type="image/png"/>
  <link href="/favicon.png" rel="apple-touch-icon"/>
  <!-- CSS -->
  <style>.comments-interface {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .comments-toolbar {
            background: #f9f9f9;
            padding: 15px;
            border-bottom: 1px solid #ddd;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        .comment-filters {
            display: flex;
            gap: 15px;
        }
        
        .filter-link {
            text-decoration: none;
            color: #555;
            padding: 5px 10px;
            border-radius: 4px;
            transition: all 0.3s;
        }
        
        .filter-link.active {
            background: #0073aa;
            color: white;
        }
        
        .filter-link:hover {
            background: #e0e0e0;
        }
        
        .comment-count {
            display: inline-block;
            background: #ddd;
            color: #333;
            padding: 2px 6px;
            border-radius: 10px;
            font-size: 12px;
            margin-left: 5px;
        }
        
        .comments-list {
            padding: 0;
            margin: 0;
        }
        
        .comment-item {
            border-bottom: 1px solid #eee;
            padding: 20px;
            transition: background 0.3s;
        }
        
        .comment-item:hover {
            background: #f9f9f9;
        }
        
        .comment-item.unapproved {
            background: #fff8e5;
        }
        
        .comment-item.spam {
            background: #ffe5e5;
        }
        
        .comment-header {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }
        
        .comment-author {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .author-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: #ddd;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .author-info {
            display: flex;
            flex-direction: column;
        }
        
        .author-name {
            font-weight: 600;
            color: #333;
        }
        
        .author-email {
            font-size: 12px;
            color: #666;
        }
        
        .comment-meta {
            font-size: 12px;
            color: #666;
        }
        
        .comment-content {
            margin: 15px 0;
            line-height: 1.6;
        }
        
        .comment-actions {
            display: flex;
            gap: 15px;
            font-size: 14px;
        }
        
        .comment-action {
            color: #0073aa;
            text-decoration: none;
            cursor: pointer;
        }
        
        .comment-action:hover {
            text-decoration: underline;
        }
        
        .comment-action.approve { color: #46b450; }
        .comment-action.spam { color: #ff9800; }
        .comment-action.trash { color: #dc3232; }
        
        .comment-status {
            display: inline-block;
            padding: 3px 8px;
            border-radius: 3px;
            font-size: 11px;
            font-weight: 600;
            text-transform: uppercase;
        }
        
        .status-approved { background: #d4edda; color: #155724; }
        .status-pending { background: #fff3cd; color: #856404; }
        .status-spam { background: #f8d7da; color: #721c24; }
        
        .moderation-queue {
            background: #fff8e5;
            border: 1px solid #ffeb3b;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .moderation-header {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 15px;
        }
        
        .moderation-icon {
            font-size: 24px;
        }
        
        .reply-form {
            background: #f9f9f9;
            border: 1px solid #ddd;
            border-radius: 4px;
            padding: 15px;
            margin-top: 15px;
        }
        
        .reply-textarea {
            width: 100%;
            min-height: 100px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-family: inherit;
            resize: vertical;
        }
        
        .reply-actions {
            margin-top: 10px;
            display: flex;
            gap: 10px;
        }
        
        .btn {
            padding: 8px 16px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            transition: background 0.3s;
        }
        
        .btn-primary {
            background: #0073aa;
            color: white;
        }
        
        .btn-primary:hover {
            background: #005a87;
        }
        
        .btn-secondary {
            background: #e0e0e0;
            color: #333;
        }
        
        .btn-secondary:hover {
            background: #d0d0d0;
        }
        
        .settings-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .settings-card {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
        }
        
        .settings-card h3 {
            margin-top: 0;
            color: #23282d;
            border-bottom: 1px solid #eee;
            padding-bottom: 10px;
        }
        
        .setting-item {
            margin: 15px 0;
        }
        
        .setting-label {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-bottom: 5px;
        }
        
        .setting-description {
            font-size: 13px;
            color: #666;
            margin-left: 25px;
        }
        
        .blacklist-box {
            background: #2c3e50;
            color: #ecf0f1;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
        }
        
        .blacklist-textarea {
            width: 100%;
            min-height: 150px;
            background: #34495e;
            color: #ecf0f1;
            border: 1px solid #556983;
            border-radius: 4px;
            padding: 10px;
            font-family: 'Courier New', monospace;
        }
        
        .spam-stats {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }
        
        .stat-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            border-radius: 8px;
            text-align: center;
        }
        
        .stat-value {
            font-size: 32px;
            font-weight: bold;
        }
        
        .stat-label {
            font-size: 14px;
            margin-top: 5px;
            opacity: 0.9;
        }
        
        .akismet-status {
            background: #e8f5e9;
            border: 1px solid #4CAF50;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }
        
        .akismet-status.inactive {
            background: #ffe5e5;
            border-color: #f44336;
        }
        
        .comment-form-preview {
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
        }
        
        .form-field {
            margin-bottom: 20px;
        }
        
        .form-field label {
            display: block;
            margin-bottom: 5px;
            font-weight: 600;
        }
        
        .form-field input,
        .form-field textarea {
            width: 100%;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 4px;
        }
        
        .required {
            color: #dc3232;
        }
        
        .pingback-item {
            background: #f0f8ff;
            border-left: 4px solid #2196F3;
            padding: 15px;
            margin: 10px 0;
        }
        
        .trackback-item {
            background: #fff3e0;
            border-left: 4px solid #FF9800;
            padding: 15px;
            margin: 10px 0;
        }
        
        .moderation-workflow {
            display: flex;
            align-items: center;
            justify-content: space-around;
            background: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 30px;
            margin: 20px 0;
        }
        
        .workflow-step {
            text-align: center;
            position: relative;
        }
        
        .workflow-step::after {
            content: '‚Üí';
            position: absolute;
            right: -30px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 24px;
            color: #999;
        }
        
        .workflow-step:last-child::after {
            display: none;
        }
        
        .workflow-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }
        
        .workflow-label {
            font-weight: 600;
        }
        
        .notification-settings {
            background: #f0f8ff;
            border: 1px solid #2196F3;
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }</style>
 </head>
 <body>
  <!-- Skip to main content -->
  <a class="sr-only" href="#main-content">Skip to main content</a>
  <div class="page-wrapper">
   <!-- Header -->
   <header class="site-header" role="banner">
    <div class="header-container">
     <div class="site-branding">
      <a class="site-logo" href="/">
       <h1 class="site-title">PHP WordPress Development</h1>
      </a>
     </div>
     <nav aria-label="Main navigation" class="main-navigation" role="navigation">
      <button aria-expanded="false" aria-label="Toggle navigation" class="mobile-menu-btn">
       <span>
       </span>
       <span>
       </span>
       <span>
       </span>
      </button>
      <div class="nav-menu">
       <ul class="nav-list">
        <li class="nav-item">
         <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item dropdown">
         <button aria-haspopup="true" class="nav-link dropdown-toggle active">Modules</button>
         <div class="dropdown-menu">
          <a class="dropdown-item" href="/module1.html">Module 1: Web Fundamentals</a>
          <a class="dropdown-item" href="/module2.html">Module 2: PHP Fundamentals</a>
          <a class="dropdown-item" href="/module3.html">Module 3: MySQL Database</a>
          <a class="dropdown-item active" href="/module4.html">Module 4: WordPress &amp; Docker</a>
          <a class="dropdown-item" href="/module5.html">Module 5: Theme Development</a>
          <a class="dropdown-item" href="/module6.html">Module 6: Plugin Development</a>
          <a class="dropdown-item" href="/module7.html">Module 7: Advanced WordPress</a>
          <a class="dropdown-item" href="/module8.html">Module 8: Deployment</a>
          <a class="dropdown-item" href="/module9.html">Module 9: Final Project</a>
         </div>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/resources.html">Resources</a>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/about.html">About</a>
        </li>
       </ul>
      </div>
     </nav>
     <div class="search-container">
      <div class="search-input-wrapper">
       <svg class="search-icon" fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
        <path clip-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" fill-rule="evenodd">
        </path>
       </svg>
       <input aria-label="Search" class="search-input" placeholder="Search lessons..." type="search"/>
      </div>
      <div class="search-results">
      </div>
     </div>
    </div>
   </header>
   <!-- Progress Bar -->
   <div class="progress-container">
    <div class="progress-header">
     <h2 class="progress-title">Course Progress</h2>
     <span class="progress-text">Loading...</span>
    </div>
    <div class="progress-bar">
     <div class="progress-bar-fill">
      <span class="progress-bar-text">
      </span>
     </div>
    </div>
   </div>
   <!-- Breadcrumb -->
   <nav aria-label="Breadcrumb" class="breadcrumb container">
    <ol class="breadcrumb-list">
     <li class="breadcrumb-item">
      <a href="/">Home</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <a href="/module4.html">Module 4</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <span aria-current="page">Comments Management</span>
     </li>
    </ol>
   </nav>
   <!-- Main Content -->
   <main class="main-content" id="main-content" role="main">
    <div class="container">
     <div class="content-with-sidebar">
      <!-- Sidebar -->
      <aside class="sidebar">
    <div class="sidebar-nav">
        <h3 class="sidebar-title">Module 4: WordPress & Docker</h3>
        <div class="sidebar-section">
            <h4 class="sidebar-section-title">Session 3: WordPress Admin Dashboard</h4>
            <ul class="sidebar-menu">
                <li><a class="sidebar-link" href="/04module/wordpress_dashboard_overview.html">Dashboard overview and navigation</a></li>
                <li><a class="sidebar-link" href="/04module/posts_vs_pages.html">Posts vs. Pages</a></li>
                <li><a class="sidebar-link" href="/04module/wordpress_categories_tags.html">Categories and Tags</a></li>
                <li><a class="sidebar-link" href="/04module/media_library.html">Media library</a></li>
                <li class="active"><a class="sidebar-link active" href="/04module/comments_moderation.html">Comments management</a></li>
                <li><a class="sidebar-link" href="/04module/users_roles.html">User roles and permissions</a></li>
                <li><a class="sidebar-link" href="/04module/homework_create_sample_content.html">Homework: Create sample content including posts, pages, and media</a></li>
            </ul>
        </div>
        <div class="sidebar-section">
            <h4 class="sidebar-section-title">Quick Links</h4>
            <ul class="sidebar-menu">
                <li><a class="sidebar-link" href="/module4.html">Module Overview</a></li>
                <li><a class="sidebar-link prev-session" href="/04module/file_structure_overview.html">‚Üê Prev: Session 2</a></li>
                <li><a class="sidebar-link next-session" href="/04module/understanding_wordpress_themes.html">Next: Session 4 ‚Üí</a></li>
                <li><a class="sidebar-link" href="/">‚Üê Course Home</a></li>
                <li><a class="sidebar-link" href="/module5.html">Next Module ‚Üí</a></li>
                <li><a class="sidebar-link" href="/resources.html">Resources</a></li>
            </ul>
        </div>
    </div>
</aside>
      <!-- Main Lesson Content -->
      <article class="lesson-content">
       <header class="lesson-header">
        <h1>WordPress Comments Management &amp; Moderation</h1>
        <div class="lesson-meta">
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">
           </path>
          </svg>
          <span>Duration: 45 minutes</span>
         </div>
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 14l9-5-9-5-9 5 9 5z">
           </path>
          </svg>
          <span>Module 4: Session 3.5</span>
         </div>
        </div>
       </header>
       <!-- Learning Objectives -->
       <div class="lesson-objectives">
        <h2>Learning Objectives</h2>
        <ul>
         <li>Navigate the WordPress Comments interface</li>
         <li>Configure discussion settings for optimal engagement</li>
         <li>Implement effective comment moderation workflows</li>
         <li>Combat spam with Akismet and other tools</li>
         <li>Manage pingbacks and trackbacks</li>
         <li>Customize comment forms and display</li>
         <li>Handle comments programmatically with PHP</li>
         <li>Set up comment notifications and email alerts</li>
        </ul>
       </div>
       <!-- Lesson Body -->
       <div class="lesson-body">
        <!-- Introduction -->
        <section>
         <h2>Introduction to Comments Management</h2>
         <p class="lead">Comments are a powerful feature for building community and engagement on your WordPress site. Effective comment management involves balancing open discussion with spam prevention and maintaining a positive environment for your audience.</p>
         <div class="alert alert-info">
          <div class="alert-icon">üí¨</div>
          <div class="alert-content">
           <div class="alert-title">Did You Know?</div>
           <div class="alert-message">WordPress sites receive over 500 million comments per month globally. Approximately 85% of all comments submitted are spam, making moderation tools essential for maintaining quality discussions.</div>
          </div>
         </div>
        </section>
        <!-- Comments Interface -->
        <section>
         <h2>The Comments Interface</h2>
         <div class="comments-interface">
          <div class="comments-toolbar">
           <div class="comment-filters">
            <a class="filter-link active" href="#">All<span class="comment-count">24</span>
            </a>
            <a class="filter-link" href="#">Pending<span class="comment-count">3</span>
            </a>
            <a class="filter-link" href="#">Approved<span class="comment-count">18</span>
            </a>
            <a class="filter-link" href="#">Spam<span class="comment-count">2</span>
            </a>
            <a class="filter-link" href="#">Trash<span class="comment-count">1</span>
            </a>
           </div>
           <div>
            <button class="btn btn-secondary">Empty Spam</button>
            <button class="btn btn-secondary">Empty Trash</button>
           </div>
          </div>
          <div class="comments-list">
           <div class="comment-item unapproved">
            <div class="comment-header">
             <div class="comment-author">
              <div class="author-avatar">JD</div>
              <div class="author-info">
               <span class="author-name">John Doe</span>
               <span class="author-email">john@example.com</span>
              </div>
             </div>
             <div class="comment-meta">
              <span class="comment-status status-pending">Pending</span>
              <span>2 hours ago</span>
             </div>
            </div>
            <div class="comment-content">Great article! I found the section about WordPress hooks particularly helpful. 
                                                Could you provide more examples of action hooks in real-world scenarios?</div>
            <div class="comment-actions">
             <a class="comment-action approve" href="#">Approve</a>
             <a class="comment-action" href="#">Reply</a>
             <a class="comment-action" href="#">Quick Edit</a>
             <a class="comment-action" href="#">Edit</a>
             <a class="comment-action spam" href="#">Spam</a>
             <a class="comment-action trash" href="#">Trash</a>
            </div>
           </div>
           <div class="comment-item">
            <div class="comment-header">
             <div class="comment-author">
              <div class="author-avatar">SM</div>
              <div class="author-info">
               <span class="author-name">Sarah Miller</span>
               <span class="author-email">sarah.m@gmail.com</span>
              </div>
             </div>
             <div class="comment-meta">
              <span class="comment-status status-approved">Approved</span>
              <span>Yesterday</span>
             </div>
            </div>
            <div class="comment-content">Thank you for this comprehensive guide! The code examples are very clear.</div>
            <div class="comment-actions">
             <a class="comment-action" href="#">Reply</a>
             <a class="comment-action" href="#">Quick Edit</a>
             <a class="comment-action" href="#">Edit</a>
             <a class="comment-action" href="#">Unapprove</a>
             <a class="comment-action spam" href="#">Spam</a>
             <a class="comment-action trash" href="#">Trash</a>
            </div>
           </div>
           <div class="comment-item spam">
            <div class="comment-header">
             <div class="comment-author">
              <div class="author-avatar">SP</div>
              <div class="author-info">
               <span class="author-name">SpamBot</span>
               <span class="author-email">spam@spamsite.com</span>
              </div>
             </div>
             <div class="comment-meta">
              <span class="comment-status status-spam">Spam</span>
              <span>3 days ago</span>
             </div>
            </div>
            <div class="comment-content">Buy cheap products now! Click here for amazing deals...</div>
            <div class="comment-actions">
             <a class="comment-action" href="#">Not Spam</a>
             <a class="comment-action trash" href="#">Delete Permanently</a>
            </div>
           </div>
          </div>
         </div>
        </section>
        <!-- Discussion Settings -->
        <section>
         <h2>Discussion Settings Configuration</h2>
         <div class="settings-grid">
          <div class="settings-card">
           <h3>Default Article Settings</h3>
           <div class="setting-item">
            <label class="setting-label">
             <input checked="" type="checkbox"/>Allow link notifications</label>
            <p class="setting-description">Attempt to notify blogs linked to from the article</p>
           </div>
           <div class="setting-item">
            <label class="setting-label">
             <input checked="" type="checkbox"/>Allow pingbacks &amp; trackbacks</label>
            <p class="setting-description">Allow link notifications from other blogs</p>
           </div>
           <div class="setting-item">
            <label class="setting-label">
             <input checked="" type="checkbox"/>Allow comments on new articles</label>
            <p class="setting-description">Enable comments by default</p>
           </div>
          </div>
          <div class="settings-card">
           <h3>Other Comment Settings</h3>
           <div class="setting-item">
            <label class="setting-label">
             <input checked="" type="checkbox"/>Comment author must fill name and email</label>
           </div>
           <div class="setting-item">
            <label class="setting-label">
             <input type="checkbox"/>Users must be registered to comment</label>
           </div>
           <div class="setting-item">
            <label class="setting-label">
             <input checked="" type="checkbox"/>Close comments after<input style="width: 60px;" type="number" value="14"/>days</label>
           </div>
           <div class="setting-item">
            <label class="setting-label">
             <input checked="" type="checkbox"/>Enable threaded comments<select style="margin-left: 10px;">
              <option>2 levels</option>
              <option>3 levels</option>
              <option selected="">5 levels</option>
              <option>10 levels</option>
             </select>
            </label>
           </div>
          </div>
          <div class="settings-card">
           <h3>Comment Moderation</h3>
           <div class="setting-item">
            <label>Hold for moderation if contains:</label>
            <input style="width: 60px;" type="number" value="2"/>or more links</div>
           <div class="setting-item">
            <label class="setting-label">
             <input checked="" type="checkbox"/>Comment must be manually approved</label>
            <p class="setting-description">For first-time commenters</p>
           </div>
           <div class="setting-item">
            <label class="setting-label">
             <input type="checkbox"/>Comment author must have previously approved comment</label>
           </div>
          </div>
         </div>
         <h3>Programmatic Settings Management</h3>
         <pre><code class="language-php">&lt;?php
// Update discussion settings programmatically
update_option('default_comment_status', 'open');
update_option('default_ping_status', 'open');
update_option('require_name_email', 1);
update_option('comment_registration', 0);
update_option('close_comments_for_old_posts', 1);
update_option('close_comments_days_old', 14);
update_option('thread_comments', 1);
update_option('thread_comments_depth', 5);
update_option('page_comments', 1);
update_option('comments_per_page', 50);
update_option('comment_order', 'asc');
update_option('comment_moderation', 1);
update_option('moderation_notify', 1);
update_option('comments_notify', 1);

// Check if comments are open for a post
if (comments_open($post_id)) {
    // Comments are open
}

// Enable/disable comments for specific post
wp_update_post(array(
    'ID' =&gt; $post_id,
    'comment_status' =&gt; 'open', // or 'closed'
    'ping_status' =&gt; 'open' // or 'closed'
));

// Bulk enable/disable comments
$posts = get_posts(array(
    'posts_per_page' =&gt; -1,
    'post_type' =&gt; 'post'
));

foreach ($posts as $post) {
    wp_update_post(array(
        'ID' =&gt; $post-&gt;ID,
        'comment_status' =&gt; 'closed'
    ));
}
?&gt;</code></pre>
        </section>
        <!-- Comment Moderation -->
        <section>
         <h2>Comment Moderation Workflow</h2>
         <div class="moderation-workflow">
          <div class="workflow-step">
           <div class="workflow-icon">‚úçÔ∏è</div>
           <div class="workflow-label">Comment Submitted</div>
          </div>
          <div class="workflow-step">
           <div class="workflow-icon">üîç</div>
           <div class="workflow-label">Spam Check</div>
          </div>
          <div class="workflow-step">
           <div class="workflow-icon">‚è≥</div>
           <div class="workflow-label">Moderation Queue</div>
          </div>
          <div class="workflow-step">
           <div class="workflow-icon">‚úÖ</div>
           <div class="workflow-label">Approved/Rejected</div>
          </div>
          <div class="workflow-step">
           <div class="workflow-icon">üì¢</div>
           <div class="workflow-label">Published</div>
          </div>
         </div>
         <div class="moderation-queue">
          <div class="moderation-header">
           <span class="moderation-icon">‚ö†Ô∏è</span>
           <h3>Comments Awaiting Moderation</h3>
          </div>
          <p>You have<strong>3 comments</strong>awaiting moderation. Review them to maintain discussion quality.</p>
         </div>
         <h3>Moderation Functions</h3>
         <pre><code class="language-php">&lt;?php
// Get comments awaiting moderation
$pending_comments = get_comments(array(
    'status' =&gt; 'hold',
    'number' =&gt; 20
));

// Approve a comment
wp_set_comment_status($comment_id, 'approve');

// Mark as spam
wp_spam_comment($comment_id);

// Trash a comment
wp_trash_comment($comment_id);

// Untrash a comment
wp_untrash_comment($comment_id);

// Delete permanently
wp_delete_comment($comment_id, true);

// Bulk moderation
$comment_ids = array(123, 124, 125);
foreach ($comment_ids as $id) {
    wp_set_comment_status($id, 'approve');
}

// Custom moderation rules
add_filter('pre_comment_approved', function($approved, $commentdata) {
    // Check for specific keywords
    $blocked_words = array('casino', 'viagra', 'lottery');
    $comment_content = strtolower($commentdata['comment_content']);
    
    foreach ($blocked_words as $word) {
        if (strpos($comment_content, $word) !== false) {
            return 'spam'; // Mark as spam
        }
    }
    
    // Check comment length
    if (strlen($commentdata['comment_content']) &lt; 10) {
        return 0; // Hold for moderation
    }
    
    // Check for excessive links
    $link_count = substr_count($comment_content, 'http');
    if ($link_count &gt; 3) {
        return 0; // Hold for moderation
    }
    
    return $approved;
}, 10, 2);

// Add moderation notification
add_action('comment_post', function($comment_id, $comment_approved) {
    if ($comment_approved === 0) {
        $comment = get_comment($comment_id);
        
        // Send notification to admin
        wp_mail(
            get_option('admin_email'),
            'Comment Awaiting Moderation',
            sprintf(
                'A new comment by %s requires moderation: %s',
                $comment-&gt;comment_author,
                admin_url('comment.php?action=editcomment&amp;c=' . $comment_id)
            )
        );
    }
}, 10, 2);
?&gt;</code></pre>
        </section>
        <!-- Spam Prevention -->
        <section>
         <h2>Spam Prevention</h2>
         <div class="akismet-status">
          <h3>‚úÖ Akismet Active</h3>
          <p>Your site is protected from spam. Akismet has blocked<strong>1,234 spam comments</strong>this month.</p>
          <button class="btn btn-primary">Check Akismet Settings</button>
         </div>
         <div class="spam-stats">
          <div class="stat-card">
           <div class="stat-value">1,234</div>
           <div class="stat-label">Spam Blocked</div>
          </div>
          <div class="stat-card">
           <div class="stat-value">98.5%</div>
           <div class="stat-label">Accuracy Rate</div>
          </div>
          <div class="stat-card">
           <div class="stat-value">12</div>
           <div class="stat-label">False Positives</div>
          </div>
          <div class="stat-card">
           <div class="stat-value">3</div>
           <div class="stat-label">Missed Spam</div>
          </div>
         </div>
         <h3>Comment Blacklist</h3>
         <div class="blacklist-box">
          <p>When a comment contains any of these words, it will be marked as spam:</p>
          <textarea class="blacklist-textarea">viagra
casino
lottery
buy-now
click-here
free-money
work-from-home
xxx
adult
poker</textarea>
         </div>
         <h3>Anti-Spam Implementation</h3>
         <pre><code class="language-php">&lt;?php
// Add honeypot field to comment form
add_action('comment_form', function() {
    echo '&lt;p class="comment-form-url" style="display: none;"&gt;';
    echo '&lt;label for="url"&gt;URL&lt;/label&gt;';
    echo '&lt;input id="url" name="url" type="text" value="" /&gt;';
    echo '&lt;/p&gt;';
});

// Check honeypot on submission
add_filter('preprocess_comment', function($commentdata) {
    if (!empty($_POST['url'])) {
        wp_die('Spam detected!');
    }
    return $commentdata;
});

// Implement reCAPTCHA
function add_recaptcha_to_comment_form() {
    ?&gt;
    &lt;div class="g-recaptcha" data-sitekey="your-site-key"&gt;&lt;/div&gt;
    &lt;script src="https://www.google.com/recaptcha/api.js"&gt;&lt;/script&gt;
    &lt;?php
}
add_action('comment_form_after_fields', 'add_recaptcha_to_comment_form');

// Verify reCAPTCHA
add_filter('preprocess_comment', function($commentdata) {
    if (isset($_POST['g-recaptcha-response'])) {
        $response = wp_remote_get(
            'https://www.google.com/recaptcha/api/siteverify?secret=' . 
            'your-secret-key&amp;response=' . $_POST['g-recaptcha-response']
        );
        
        $response_body = wp_remote_retrieve_body($response);
        $result = json_decode($response_body);
        
        if (!$result-&gt;success) {
            wp_die('reCAPTCHA verification failed. Please try again.');
        }
    }
    
    return $commentdata;
});

// Custom spam detection
function is_comment_spam($comment_data) {
    $spam_indicators = 0;
    
    // Check for excessive links
    if (substr_count($comment_data['comment_content'], 'http') &gt; 3) {
        $spam_indicators++;
    }
    
    // Check for all caps
    if (strtoupper($comment_data['comment_content']) === $comment_data['comment_content']) {
        $spam_indicators++;
    }
    
    // Check for repeated characters
    if (preg_match('/(.)\1{5,}/', $comment_data['comment_content'])) {
        $spam_indicators++;
    }
    
    // Check comment velocity (too many comments too quickly)
    $recent_comments = get_comments(array(
        'author_email' =&gt; $comment_data['comment_author_email'],
        'date_query' =&gt; array(
            array('after' =&gt; '5 minutes ago')
        )
    ));
    
    if (count($recent_comments) &gt; 3) {
        $spam_indicators++;
    }
    
    return $spam_indicators &gt;= 2;
}
?&gt;</code></pre>
        </section>
        <!-- Comment Display and Forms -->
        <section>
         <h2>Comment Forms and Display</h2>
         <div class="comment-form-preview">
          <h3>Leave a Comment</h3>
          <form>
           <div class="form-field">
            <label for="author">Name<span class="required">*</span>
            </label>
            <input id="author" name="author" required="" type="text"/>
           </div>
           <div class="form-field">
            <label for="email">Email<span class="required">*</span>
            </label>
            <input id="email" name="email" required="" type="email"/>
           </div>
           <div class="form-field">
            <label for="website">Website</label>
            <input id="website" name="url" type="url"/>
           </div>
           <div class="form-field">
            <label for="comment">Comment<span class="required">*</span>
            </label>
            <textarea id="comment" name="comment" required="" rows="8"></textarea>
           </div>
           <div class="form-field">
            <input id="save-info" type="checkbox"/>
            <label for="save-info">Save my name, email, and website for next time</label>
           </div>
           <button class="btn btn-primary" type="submit">Post Comment</button>
          </form>
         </div>
         <h3>Customizing Comment Display</h3>
         <pre><code class="language-php">&lt;?php
// Custom comment template
function custom_comment_template($comment, $args, $depth) {
    ?&gt;
    &lt;li id="comment-&lt;?php comment_ID(); ?&gt;" &lt;?php comment_class(); ?&gt;&gt;
        &lt;article class="comment-body"&gt;
            &lt;header class="comment-header"&gt;
                &lt;?php echo get_avatar($comment, 60); ?&gt;
                &lt;div class="comment-meta"&gt;
                    &lt;cite class="comment-author"&gt;
                        &lt;?php comment_author_link(); ?&gt;
                    &lt;/cite&gt;
                    &lt;time datetime="&lt;?php comment_time('c'); ?&gt;"&gt;
                        &lt;?php comment_date(); ?&gt; at &lt;?php comment_time(); ?&gt;
                    &lt;/time&gt;
                    &lt;?php if ($comment-&gt;comment_approved == '0') : ?&gt;
                        &lt;p class="comment-awaiting-moderation"&gt;
                            Your comment is awaiting moderation.
                        &lt;/p&gt;
                    &lt;?php endif; ?&gt;
                &lt;/div&gt;
            &lt;/header&gt;
            
            &lt;div class="comment-content"&gt;
                &lt;?php comment_text(); ?&gt;
            &lt;/div&gt;
            
            &lt;footer class="comment-footer"&gt;
                &lt;?php 
                comment_reply_link(array_merge($args, array(
                    'depth' =&gt; $depth,
                    'max_depth' =&gt; $args['max_depth'],
                    'reply_text' =&gt; 'Reply',
                    'reply_to_text' =&gt; 'Reply to %s'
                ))); 
                ?&gt;
                &lt;?php edit_comment_link('Edit', ' | '); ?&gt;
            &lt;/footer&gt;
        &lt;/article&gt;
    &lt;?php
}

// Display comments
if (comments_open() || get_comments_number()) {
    comments_template();
}

// Custom comment form
$comment_args = array(
    'title_reply' =&gt; 'Join the Discussion',
    'title_reply_to' =&gt; 'Reply to %s',
    'cancel_reply_link' =&gt; 'Cancel Reply',
    'label_submit' =&gt; 'Post Comment',
    'comment_field' =&gt; '&lt;p class="comment-form-comment"&gt;
        &lt;label for="comment"&gt;Your Message&lt;/label&gt;
        &lt;textarea id="comment" name="comment" rows="8" required&gt;&lt;/textarea&gt;
    &lt;/p&gt;',
    'fields' =&gt; array(
        'author' =&gt; '&lt;p class="comment-form-author"&gt;
            &lt;label for="author"&gt;Name &lt;span class="required"&gt;*&lt;/span&gt;&lt;/label&gt;
            &lt;input id="author" name="author" type="text" required /&gt;
        &lt;/p&gt;',
        'email' =&gt; '&lt;p class="comment-form-email"&gt;
            &lt;label for="email"&gt;Email &lt;span class="required"&gt;*&lt;/span&gt;&lt;/label&gt;
            &lt;input id="email" name="email" type="email" required /&gt;
        &lt;/p&gt;',
        'url' =&gt; '&lt;p class="comment-form-url"&gt;
            &lt;label for="url"&gt;Website&lt;/label&gt;
            &lt;input id="url" name="url" type="url" /&gt;
        &lt;/p&gt;'
    ),
    'comment_notes_before' =&gt; '&lt;p class="comment-notes"&gt;
        Your email address will not be published. Required fields are marked *
    &lt;/p&gt;',
    'comment_notes_after' =&gt; '',
    'submit_button' =&gt; '&lt;button type="submit" class="submit-comment"&gt;%4$s&lt;/button&gt;',
    'submit_field' =&gt; '&lt;p class="form-submit"&gt;%1$s %2$s&lt;/p&gt;',
    'format' =&gt; 'html5'
);

comment_form($comment_args);
?&gt;</code></pre>
        </section>
        <!-- Pingbacks and Trackbacks -->
        <section>
         <h2>Pingbacks and Trackbacks</h2>
         <div class="pingback-item">
          <strong>Pingback:</strong>WordPress Blog mentioned this post in<a href="#">"Best WordPress Tutorials of 2024"</a>
         </div>
         <div class="trackback-item">
          <strong>Trackback:</strong>Tech News Site linked to this article from<a href="#">"WordPress Updates You Need to Know"</a>
         </div>
         <h3>Managing Pingbacks/Trackbacks</h3>
         <pre><code class="language-php">&lt;?php
// Disable pingbacks globally
add_filter('xmlrpc_methods', function($methods) {
    unset($methods['pingback.ping']);
    unset($methods['pingback.extensions.getPingbacks']);
    return $methods;
});

// Remove pingback header
add_filter('wp_headers', function($headers) {
    unset($headers['X-Pingback']);
    return $headers;
});

// Disable self-pingbacks
add_action('pre_ping', function(&amp;$links) {
    $home = get_option('home');
    foreach ($links as $l =&gt; $link) {
        if (strpos($link, $home) === 0) {
            unset($links[$l]);
        }
    }
});

// Display pingbacks separately
function list_pingbacks() {
    $pingbacks = get_comments(array(
        'type' =&gt; 'pingback',
        'status' =&gt; 'approve'
    ));
    
    if ($pingbacks) {
        echo '&lt;h3&gt;Pingbacks &amp; Trackbacks&lt;/h3&gt;';
        echo '&lt;ul class="pingback-list"&gt;';
        
        foreach ($pingbacks as $pingback) {
            echo '&lt;li&gt;';
            echo get_comment_author_link($pingback);
            echo ' on ';
            echo get_comment_date('', $pingback);
            echo '&lt;/li&gt;';
        }
        
        echo '&lt;/ul&gt;';
    }
}
?&gt;</code></pre>
        </section>
        <!-- Comment Notifications -->
        <section>
         <h2>Comment Notifications</h2>
         <div class="notification-settings">
          <h3>üìß Email Notification Settings</h3>
          <div class="setting-item">
           <label>
            <input checked="" type="checkbox"/>Email me when anyone posts a comment</label>
          </div>
          <div class="setting-item">
           <label>
            <input checked="" type="checkbox"/>Email me when a comment is held for moderation</label>
          </div>
         </div>
         <h3>Custom Notification System</h3>
         <pre><code class="language-php">&lt;?php
// Custom comment notification email
add_filter('comment_notification_text', function($notify_message, $comment_id) {
    $comment = get_comment($comment_id);
    $post = get_post($comment-&gt;comment_post_ID);
    
    $notify_message = sprintf(
        'New comment on your post "%s"\n\n',
        $post-&gt;post_title
    );
    
    $notify_message .= sprintf(
        'Author: %s\n',
        $comment-&gt;comment_author
    );
    
    $notify_message .= sprintf(
        'Email: %s\n',
        $comment-&gt;comment_author_email
    );
    
    $notify_message .= sprintf(
        'Comment:\n%s\n\n',
        $comment-&gt;comment_content
    );
    
    $notify_message .= sprintf(
        'View comment: %s\n',
        get_comment_link($comment)
    );
    
    $notify_message .= sprintf(
        'Moderate comment: %s',
        admin_url('comment.php?action=editcomment&amp;c=' . $comment_id)
    );
    
    return $notify_message;
}, 10, 2);

// Send notification to post author
add_action('comment_post', function($comment_id, $comment_approved) {
    if ($comment_approved === 1) {
        $comment = get_comment($comment_id);
        $post = get_post($comment-&gt;comment_post_ID);
        $author = get_userdata($post-&gt;post_author);
        
        // Don't notify if author commenting on own post
        if ($comment-&gt;user_id != $post-&gt;post_author) {
            wp_mail(
                $author-&gt;user_email,
                'New Comment on: ' . $post-&gt;post_title,
                'You have a new comment on your post. View it here: ' . 
                get_comment_link($comment)
            );
        }
    }
}, 10, 2);

// Subscribe to comment threads
function subscribe_to_comments($comment_id) {
    $comment = get_comment($comment_id);
    
    // Store subscriber email
    add_comment_meta($comment_id, '_subscribed_to_thread', true);
    
    // Send notifications to other subscribers
    $parent_id = $comment-&gt;comment_parent;
    if ($parent_id) {
        $subscribers = get_comments(array(
            'post_id' =&gt; $comment-&gt;comment_post_ID,
            'meta_key' =&gt; '_subscribed_to_thread',
            'meta_value' =&gt; true
        ));
        
        foreach ($subscribers as $subscriber) {
            if ($subscriber-&gt;comment_author_email !== $comment-&gt;comment_author_email) {
                wp_mail(
                    $subscriber-&gt;comment_author_email,
                    'New Reply in Thread',
                    'Someone replied to a thread you\'re following: ' . 
                    get_comment_link($comment)
                );
            }
        }
    }
}
add_action('comment_post', 'subscribe_to_comments');
?&gt;</code></pre>
        </section>
        <!-- Advanced Comment Management -->
        <section>
         <h2>Advanced Comment Management</h2>
         <pre><code class="language-php">&lt;?php
// Comment statistics
function get_comment_stats($post_id = null) {
    $args = array('count' =&gt; true);
    
    if ($post_id) {
        $args['post_id'] = $post_id;
    }
    
    $stats = array(
        'total' =&gt; get_comments($args),
        'approved' =&gt; get_comments(array_merge($args, array('status' =&gt; 'approve'))),
        'pending' =&gt; get_comments(array_merge($args, array('status' =&gt; 'hold'))),
        'spam' =&gt; get_comments(array_merge($args, array('status' =&gt; 'spam'))),
        'trash' =&gt; get_comments(array_merge($args, array('status' =&gt; 'trash')))
    );
    
    return $stats;
}

// Most commented posts
function get_most_commented_posts($num = 5) {
    return get_posts(array(
        'posts_per_page' =&gt; $num,
        'orderby' =&gt; 'comment_count',
        'order' =&gt; 'DESC'
    ));
}

// Recent commenters
function get_recent_commenters($num = 10) {
    global $wpdb;
    
    $commenters = $wpdb-&gt;get_results($wpdb-&gt;prepare("
        SELECT 
            comment_author,
            comment_author_email,
            comment_author_url,
            COUNT(*) as comment_count
        FROM {$wpdb-&gt;comments}
        WHERE comment_approved = '1'
            AND comment_type = 'comment'
            AND comment_author_email != ''
        GROUP BY comment_author_email
        ORDER BY MAX(comment_date_gmt) DESC
        LIMIT %d
    ", $num));
    
    return $commenters;
}

// Comment rating system
add_action('comment_form', function() {
    ?&gt;
    &lt;div class="comment-rating"&gt;
        &lt;label&gt;Rate this post:&lt;/label&gt;
        &lt;select name="rating"&gt;
            &lt;option value=""&gt;Select...&lt;/option&gt;
            &lt;option value="5"&gt;5 Stars&lt;/option&gt;
            &lt;option value="4"&gt;4 Stars&lt;/option&gt;
            &lt;option value="3"&gt;3 Stars&lt;/option&gt;
            &lt;option value="2"&gt;2 Stars&lt;/option&gt;
            &lt;option value="1"&gt;1 Star&lt;/option&gt;
        &lt;/select&gt;
    &lt;/div&gt;
    &lt;?php
});

add_action('comment_post', function($comment_id) {
    if (isset($_POST['rating']) &amp;&amp; $_POST['rating'] != '') {
        add_comment_meta($comment_id, 'rating', $_POST['rating']);
    }
});

// Display average rating
function get_post_average_rating($post_id) {
    $comments = get_comments(array(
        'post_id' =&gt; $post_id,
        'status' =&gt; 'approve',
        'meta_key' =&gt; 'rating'
    ));
    
    if (empty($comments)) {
        return 0;
    }
    
    $total = 0;
    $count = 0;
    
    foreach ($comments as $comment) {
        $rating = get_comment_meta($comment-&gt;comment_ID, 'rating', true);
        if ($rating) {
            $total += intval($rating);
            $count++;
        }
    }
    
    return $count &gt; 0 ? round($total / $count, 1) : 0;
}
?&gt;</code></pre>
        </section>
        <!-- Practice Exercise -->
        <section>
         <h2>Practice Exercise</h2>
         <div class="alert alert-success">
          <div class="alert-icon">üíª</div>
          <div class="alert-content">
           <div class="alert-title">Hands-On Practice</div>
           <div class="alert-message">
            <ol>
             <li>Configure discussion settings for your site</li>
             <li>Set up comment moderation rules</li>
             <li>Install and configure Akismet</li>
             <li>Create a custom comment form</li>
             <li>Implement a honeypot anti-spam field</li>
             <li>Build a comment notification system</li>
             <li>Create custom comment display template</li>
             <li>Add a rating system to comments</li>
             <li>Implement comment threading</li>
             <li>Build a comment management dashboard widget</li>
            </ol>
           </div>
          </div>
         </div>
        </section>
        <!-- Resources -->
        <section class="resources">
         <h2>Additional Resources</h2>
         <ul>
          <li>
           <a href="https://wordpress.org/support/article/comments-in-wordpress/" target="_blank">WordPress Comments Documentation</a>
          </li>
          <li>
           <a href="https://akismet.com/" target="_blank">Akismet Anti-Spam</a>
          </li>
          <li>
           <a href="https://developer.wordpress.org/reference/functions/wp_list_comments/" target="_blank">wp_list_comments() Reference</a>
          </li>
          <li>
           <a href="https://wordpress.org/plugins/disable-comments/" target="_blank">Disable Comments Plugin</a>
          </li>
          <li>
           <a href="https://wordpress.org/plugins/subscribe-to-comments-reloaded/" target="_blank">Subscribe to Comments Plugin</a>
          </li>
          <li>
           <a href="https://developer.wordpress.org/reference/hooks/comment_post/" target="_blank">Comment Hooks Reference</a>
          </li>
         </ul>
        </section>
       </div>
      </article>
     </div>
    </div>
   </main>
  </div>
  <script src="/assets/js/navigation.js">
  </script>
  <script src="/assets/js/site-config.js">
  </script>
  <script src="/assets/js/sidebar-toggle.js">
  </script>
 </body>
</html>
