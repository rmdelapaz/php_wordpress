<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <meta content="ie=edge" http-equiv="X-UA-Compatible"/>
  <!-- SEO Meta Tags -->
  <title>WordPress Hooks System: Actions and Filters - PHP WordPress Course</title>
  <meta content="Master the WordPress hooks system including actions and filters. Learn how to extend WordPress functionality through the powerful hooks API." name="description"/>
  <meta content="PHP, WordPress, hooks, actions, filters, do_action, apply_filters, add_action, add_filter, WordPress API" name="keywords"/>
  <meta content="PHP WordPress Course" name="author"/>
  <link href="/assets/css/main.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-enhanced.css" rel="stylesheet"/>
  <link href="/assets/css/sidebar-toggle.css" rel="stylesheet"/>
  <!-- Favicon -->
  <link href="/favicon.png" rel="icon" type="image/png"/>
  <link href="/favicon.png" rel="apple-touch-icon"/>
  <!-- CSS -->
  <!-- Optional: Mermaid for diagrams -->
 </head>
 <body>
  <!-- Skip to main content -->
  <a class="sr-only" href="#main-content">Skip to main content</a>
  <div class="page-wrapper">
   <!-- Header -->
   <header class="site-header" role="banner">
    <div class="header-container">
     <div class="site-branding">
      <a class="site-logo" href="/">
       <h1 class="site-title">PHP WordPress Development</h1>
      </a>
     </div>
     <nav aria-label="Main navigation" class="main-navigation" role="navigation">
      <button aria-expanded="false" aria-label="Toggle navigation" class="mobile-menu-btn">
       <span>
       </span>
       <span>
       </span>
       <span>
       </span>
      </button>
      <div class="nav-menu">
       <ul class="nav-list">
        <li class="nav-item">
         <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item dropdown">
         <button aria-haspopup="true" class="nav-link dropdown-toggle active">Modules</button>
         <div class="dropdown-menu">
          <a class="dropdown-item" href="/module1.html">Module 1: Web Fundamentals</a>
          <a class="dropdown-item" href="/module2.html">Module 2: PHP Fundamentals</a>
          <a class="dropdown-item" href="/module3.html">Module 3: MySQL Database</a>
          <a class="dropdown-item active" href="/module4.html">Module 4: WordPress &amp; Docker</a>
          <a class="dropdown-item" href="/module5.html">Module 5: Theme Development</a>
          <a class="dropdown-item" href="/module6.html">Module 6: Plugin Development</a>
          <a class="dropdown-item" href="/module7.html">Module 7: Advanced WordPress</a>
          <a class="dropdown-item" href="/module8.html">Module 8: Deployment</a>
          <a class="dropdown-item" href="/module9.html">Module 9: Final Project</a>
         </div>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/resources.html">Resources</a>
        </li>
        <li class="nav-item">
         <a class="nav-link" href="/about.html">About</a>
        </li>
       </ul>
      </div>
     </nav>
     <div class="search-container">
      <div class="search-input-wrapper">
       <svg class="search-icon" fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
        <path clip-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" fill-rule="evenodd">
        </path>
       </svg>
       <input aria-label="Search" class="search-input" placeholder="Search lessons..." type="search"/>
      </div>
      <div class="search-results">
      </div>
     </div>
    </div>
   </header>
   <!-- Progress Bar -->
   <div class="progress-container">
    <div class="progress-header">
     <h2 class="progress-title">Course Progress</h2>
     <span class="progress-text">Loading...</span>
    </div>
    <div class="progress-bar">
     <div class="progress-bar-fill">
      <span class="progress-bar-text">
      </span>
     </div>
    </div>
   </div>
   <!-- Breadcrumb -->
   <nav aria-label="Breadcrumb" class="breadcrumb container">
    <ol class="breadcrumb-list">
     <li class="breadcrumb-item">
      <a href="/">Home</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <a href="/module4.html">Module 4</a>
      <span class="breadcrumb-separator">/</span>
     </li>
     <li class="breadcrumb-item">
      <span aria-current="page">WordPress Hooks System</span>
     </li>
    </ol>
   </nav>
   <!-- Main Content -->
   <main class="main-content" id="main-content" role="main">
    <div class="container">
     <div class="content-with-sidebar">
      <!-- Sidebar -->
      <aside class="sidebar">
    <div class="sidebar-nav">
        <h3 class="sidebar-title">Module 4: WordPress & Docker</h3>
        <div class="sidebar-section">
            <h4 class="sidebar-section-title">Session 2: WordPress Core Architecture</h4>
            <ul class="sidebar-menu">
                <li><a class="sidebar-link" href="/04module/file_structure_overview.html">WordPress file structure</a></li>
                <li><a class="sidebar-link" href="/04module/wp_config.html">Understanding wp-config.php</a></li>
                <li><a class="sidebar-link" href="/04module/wordpress_database_structure_lesson.html">WordPress database structure</a></li>
                <li><a class="sidebar-link" href="/04module/wordpress_loop.html">The WordPress Loop</a></li>
                <li><a class="sidebar-link" href="/04module/wordpress_template_hierarchy.html">Template hierarchy</a></li>
                <li class="active"><a class="sidebar-link active" href="/04module/wordpress_hooks_system.html">WordPress hooks system (actions and filters)</a></li>
                <li><a class="sidebar-link" href="/04module/homework_file_structure_template_hierarchy.html">Homework: Create a diagram of WordPress file structure and template hierarchy</a></li>
            </ul>
        </div>
        <div class="sidebar-section">
            <h4 class="sidebar-section-title">Quick Links</h4>
            <ul class="sidebar-menu">
                <li><a class="sidebar-link" href="/module4.html">Module Overview</a></li>
                <li><a class="sidebar-link prev-session" href="/04module/history_evolution.html">‚Üê Prev: Session 1</a></li>
                <li><a class="sidebar-link next-session" href="/04module/wordpress_dashboard_overview.html">Next: Session 3 ‚Üí</a></li>
                <li><a class="sidebar-link" href="/">‚Üê Course Home</a></li>
                <li><a class="sidebar-link" href="/module5.html">Next Module ‚Üí</a></li>
                <li><a class="sidebar-link" href="/resources.html">Resources</a></li>
            </ul>
        </div>
    </div>
</aside>
      <!-- Main Lesson Content -->
      <article class="lesson-content">
       <header class="lesson-header">
        <h1>WordPress Hooks System: Actions and Filters</h1>
        <div class="lesson-meta">
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z">
           </path>
          </svg>
          <span>Duration: 45 minutes</span>
         </div>
         <div class="lesson-meta-item">
          <svg fill="currentColor" height="20" width="20">
           <path d="M12 14l9-5-9-5-9 5 9 5z">
           </path>
          </svg>
          <span>Module 4: Session 2</span>
         </div>
        </div>
       </header>
       <!-- Learning Objectives -->
       <div class="lesson-objectives">
        <h2>Learning Objectives</h2>
        <ul>
         <li>Understand the WordPress hooks system and how it enables extensibility</li>
         <li>Master the difference between actions and filters</li>
         <li>Learn how to use common WordPress hooks effectively</li>
         <li>Create custom hooks in your themes and plugins</li>
         <li>Understand hook priority and parameter passing</li>
         <li>Debug and troubleshoot hook-related issues</li>
        </ul>
       </div>
       <!-- Lesson Body -->
       <div class="lesson-body">
        <section>
         <h2>Introduction to WordPress Hooks</h2>
         <p class="lead">The WordPress hooks system is the foundation of WordPress extensibility. It allows developers to "hook into" WordPress core, themes, and plugins to modify or extend functionality without editing core files.</p>
         <div class="alert alert-info">
          <div class="alert-icon">üí°</div>
          <div class="alert-content">
           <div class="alert-title">Key Concept</div>
           <div class="alert-message">Hooks are the backbone of WordPress customization. They enable a modular architecture where functionality can be added, removed, or modified without changing the original code.</div>
          </div>
         </div>
         <p>WordPress hooks come in two flavors:</p>
         <ul>
          <li>
           <strong>Actions:</strong>Allow you to execute custom code at specific points</li>
          <li>
           <strong>Filters:</strong>Allow you to modify data before it's used or displayed</li>
         </ul>
        </section>
        <section>
         <h2>Understanding Actions</h2>
         <p>Actions are hooks that allow you to add or execute custom code at specific points during WordPress execution. They don't return any value - they simply perform tasks.</p>
         <h3>Basic Action Syntax</h3>
         <pre><code class="language-php">&lt;?php
// Adding an action hook
add_action( 'hook_name', 'your_function_name', $priority, $accepted_args );

// Creating an action hook
do_action( 'hook_name', $arg1, $arg2, ... );

// Basic example
function my_custom_footer_message() {
    echo '&lt;p&gt;Thank you for visiting our site!&lt;/p&gt;';
}
add_action( 'wp_footer', 'my_custom_footer_message' );
?&gt;</code></pre>
         <h3>Common WordPress Actions</h3>
         <pre><code class="language-php">&lt;?php
// 1. init - Fires after WordPress has finished loading
add_action( 'init', 'my_init_function' );
function my_init_function() {
    // Register custom post types, taxonomies, etc.
    register_post_type( 'product', array(
        'public' =&gt; true,
        'label'  =&gt; 'Products'
    ));
}

// 2. wp_enqueue_scripts - Proper way to add scripts and styles
add_action( 'wp_enqueue_scripts', 'my_theme_scripts' );
function my_theme_scripts() {
    wp_enqueue_style( 'theme-style', get_stylesheet_uri() );
    wp_enqueue_script( 'theme-script', get_template_directory_uri() . '/js/script.js', array('jquery'), '1.0.0', true );
}

// 3. save_post - Fires after a post is saved
add_action( 'save_post', 'my_save_post_function', 10, 3 );
function my_save_post_function( $post_id, $post, $update ) {
    // Perform actions when a post is saved
    if ( $update ) {
        // This is an update to an existing post
        update_post_meta( $post_id, '_last_modified_by', get_current_user_id() );
    }
}

// 4. wp_head - Add content to the &lt;head&gt; section
add_action( 'wp_head', 'my_custom_head_content' );
function my_custom_head_content() {
    echo '&lt;meta name="custom-meta" content="value"&gt;';
}

// 5. admin_menu - Add admin menu items
add_action( 'admin_menu', 'my_admin_menu' );
function my_admin_menu() {
    add_menu_page(
        'Custom Settings',     // Page title
        'Custom Settings',     // Menu title
        'manage_options',      // Capability
        'custom-settings',     // Menu slug
        'my_settings_page'     // Callback function
    );
}
?&gt;</code></pre>
        </section>
        <section>
         <h2>Understanding Filters</h2>
         <p>Filters allow you to modify data before it's used. Unlike actions, filters must return a value - typically a modified version of the input.</p>
         <h3>Basic Filter Syntax</h3>
         <pre><code class="language-php">&lt;?php
// Adding a filter hook
add_filter( 'hook_name', 'your_function_name', $priority, $accepted_args );

// Applying filters
$value = apply_filters( 'hook_name', $value, $arg2, $arg3, ... );

// Basic example
function modify_excerpt_length( $length ) {
    return 20; // Return 20 words instead of default 55
}
add_filter( 'excerpt_length', 'modify_excerpt_length' );
?&gt;</code></pre>
         <h3>Common WordPress Filters</h3>
         <pre><code class="language-php">&lt;?php
// 1. the_content - Modify post content before display
add_filter( 'the_content', 'my_content_filter' );
function my_content_filter( $content ) {
    if ( is_single() ) {
        $content .= '&lt;p&gt;Thanks for reading!&lt;/p&gt;';
    }
    return $content;
}

// 2. the_title - Modify post titles
add_filter( 'the_title', 'my_title_filter', 10, 2 );
function my_title_filter( $title, $post_id ) {
    if ( get_post_type( $post_id ) === 'product' ) {
        $title = 'üõçÔ∏è ' . $title;
    }
    return $title;
}

// 3. body_class - Add custom CSS classes to body tag
add_filter( 'body_class', 'my_body_classes' );
function my_body_classes( $classes ) {
    if ( is_user_logged_in() ) {
        $classes[] = 'logged-in-user';
    }
    return $classes;
}

// 4. upload_mimes - Allow additional file types for upload
add_filter( 'upload_mimes', 'my_mime_types' );
function my_mime_types( $mimes ) {
    $mimes['svg'] = 'image/svg+xml';
    $mimes['webp'] = 'image/webp';
    return $mimes;
}

// 5. login_redirect - Change where users go after login
add_filter( 'login_redirect', 'my_login_redirect', 10, 3 );
function my_login_redirect( $redirect_to, $request, $user ) {
    if ( isset( $user-&gt;roles ) &amp;&amp; is_array( $user-&gt;roles ) ) {
        if ( in_array( 'administrator', $user-&gt;roles ) ) {
            return admin_url();
        } else {
            return home_url( '/dashboard' );
        }
    }
    return $redirect_to;
}
?&gt;</code></pre>
        </section>
        <!-- Mermaid Diagram -->
        <section>
         <h2>How Hooks Work: Execution Flow</h2>
         <div class="mermaid">graph TD
                                        A[WordPress Core Execution] --&gt; B{Hook Point Reached}
                                        B --&gt;|Action Hook| C[do_action called]
                                        B --&gt;|Filter Hook| D[apply_filters called]
                                        C --&gt; E[All hooked functions execute]
                                        D --&gt; F[All hooked functions modify data]
                                        E --&gt; G[Continue execution]
                                        F --&gt; H[Return modified data]
                                        H --&gt; G
                                        G --&gt; I[Next hook point or end]</div>
        </section>
        <section>
         <h2>Hook Priority and Arguments</h2>
         <p>Understanding priority and arguments is crucial for effective hook usage.</p>
         <h3>Priority</h3>
         <p>Priority determines the order in which functions are executed. Lower numbers run first (default is 10).</p>
         <pre><code class="language-php">&lt;?php
// These will execute in order: first_function, second_function, third_function
add_action( 'init', 'first_function', 5 );   // Priority 5 - runs first
add_action( 'init', 'second_function', 10 ); // Priority 10 - runs second (default)
add_action( 'init', 'third_function', 15 );  // Priority 15 - runs last

// Real-world example: Ensuring your styles load after theme styles
add_action( 'wp_enqueue_scripts', 'parent_theme_styles', 10 );
add_action( 'wp_enqueue_scripts', 'child_theme_styles', 20 ); // Higher priority = loads later
?&gt;</code></pre>
         <h3>Accepted Arguments</h3>
         <p>The fourth parameter specifies how many arguments your function accepts from the hook.</p>
         <pre><code class="language-php">&lt;?php
// Hook that passes 3 arguments
do_action( 'save_post', $post_ID, $post, $update );

// Function accepting all 3 arguments
add_action( 'save_post', 'my_save_function', 10, 3 );
function my_save_function( $post_id, $post, $update ) {
    // Can use all three arguments
    error_log( "Post $post_id saved. Is update: " . ( $update ? 'yes' : 'no' ) );
}

// Function accepting only 1 argument (default)
add_action( 'save_post', 'my_simple_save_function' );
function my_simple_save_function( $post_id ) {
    // Can only use $post_id
    error_log( "Post $post_id was saved" );
}
?&gt;</code></pre>
        </section>
        <section>
         <h2>Creating Custom Hooks</h2>
         <p>You can create your own hooks in themes and plugins to make your code extensible.</p>
         <h3>Creating Custom Actions</h3>
         <pre><code class="language-php">&lt;?php
// In your theme or plugin
function my_custom_header() {
    // Allow other developers to add content before header
    do_action( 'before_custom_header' );
    
    echo '&lt;header class="custom-header"&gt;';
    echo '&lt;h1&gt;' . get_bloginfo( 'name' ) . '&lt;/h1&gt;';
    
    // Allow content inside header
    do_action( 'inside_custom_header', get_bloginfo( 'name' ) );
    
    echo '&lt;/header&gt;';
    
    // Allow content after header
    do_action( 'after_custom_header' );
}

// Other developers can now hook into your code
add_action( 'before_custom_header', 'add_announcement_bar' );
function add_announcement_bar() {
    echo '&lt;div class="announcement"&gt;Free shipping this week!&lt;/div&gt;';
}
?&gt;</code></pre>
         <h3>Creating Custom Filters</h3>
         <pre><code class="language-php">&lt;?php
// In your theme or plugin
function get_product_price( $product_id ) {
    $base_price = get_post_meta( $product_id, '_price', true );
    
    // Allow price modification through filter
    $final_price = apply_filters( 'custom_product_price', $base_price, $product_id );
    
    return $final_price;
}

// Other developers can modify the price
add_filter( 'custom_product_price', 'apply_member_discount', 10, 2 );
function apply_member_discount( $price, $product_id ) {
    if ( is_user_logged_in() &amp;&amp; current_user_can( 'member' ) ) {
        $price = $price * 0.9; // 10% discount for members
    }
    return $price;
}

// Multiple filters can be chained
add_filter( 'custom_product_price', 'apply_bulk_discount', 20, 2 );
function apply_bulk_discount( $price, $product_id ) {
    $quantity = get_cart_quantity( $product_id );
    if ( $quantity &gt;= 10 ) {
        $price = $price * 0.85; // Additional 15% for bulk orders
    }
    return $price;
}
?&gt;</code></pre>
        </section>
        <section>
         <h2>Removing Hooks</h2>
         <p>Sometimes you need to remove hooks added by themes or plugins.</p>
         <pre><code class="language-php">&lt;?php
// Remove an action
remove_action( 'wp_head', 'wp_generator' );

// Remove a filter
remove_filter( 'the_content', 'wpautop' );

// Remove with specific priority (must match exactly)
remove_action( 'wp_head', 'some_function', 15 );

// Remove from within a class
// Original: add_action( 'init', array( $my_class, 'method_name' ) );
global $my_class;
remove_action( 'init', array( $my_class, 'method_name' ) );

// Remove all hooks from a tag
remove_all_actions( 'wp_footer' );
remove_all_filters( 'the_content' );

// Check if hook has functions attached
if ( has_action( 'wp_footer' ) ) {
    // There are actions hooked to wp_footer
}

if ( has_filter( 'the_content' ) ) {
    // There are filters hooked to the_content
}
?&gt;</code></pre>
        </section>
        <!-- Canvas Animation -->
        <section>
         <h2>Visual Hook Execution</h2>
         <p>Click the button to see how hooks execute in order based on priority:</p>
         <canvas height="400" id="hookAnimation" style="border: 1px solid #ddd; display: block; margin: 20px auto;" width="600">
         </canvas>
         <button onclick="startHookAnimation()" style="display: block; margin: 20px auto; padding: 10px 20px; background: #0073aa; color: white; border: none; border-radius: 4px; cursor: pointer;">Start Animation</button>
         <script>function startHookAnimation() {
                                        const canvas = document.getElementById('hookAnimation');
                                        const ctx = canvas.getContext('2d');
                                        
                                        // Clear canvas
                                        ctx.clearRect(0, 0, canvas.width, canvas.height);
                                        
                                        // Define hooks with priorities
                                        const hooks = [
                                            { name: 'Function A', priority: 5, color: '#4CAF50' },
                                            { name: 'Function B', priority: 10, color: '#2196F3' },
                                            { name: 'Function C', priority: 10, color: '#FF9800' },
                                            { name: 'Function D', priority: 20, color: '#9C27B0' }
                                        ];
                                        
                                        let currentHook = 0;
                                        const boxHeight = 50;
                                        const boxWidth = 120;
                                        const startY = 50;
                                        
                                        function drawHook(index, opacity = 1) {
                                            const hook = hooks[index];
                                            const y = startY + (index * 80);
                                            
                                            ctx.globalAlpha = opacity;
                                            ctx.fillStyle = hook.color;
                                            ctx.fillRect(50, y, boxWidth, boxHeight);
                                            
                                            ctx.fillStyle = 'white';
                                            ctx.font = '14px Arial';
                                            ctx.textAlign = 'center';
                                            ctx.fillText(hook.name, 50 + boxWidth/2, y + boxHeight/2);
                                            
                                            ctx.fillStyle = '#333';
                                            ctx.font = '12px Arial';
                                            ctx.textAlign = 'left';
                                            ctx.fillText(`Priority: ${hook.priority}`, 200, y + boxHeight/2);
                                            
                                            ctx.globalAlpha = 1;
                                        }
                                        
                                        // Initial state
                                        ctx.fillStyle = '#333';
                                        ctx.font = '16px Arial';
                                        ctx.fillText('Hook Execution Order:', 50, 30);
                                        
                                        hooks.forEach((hook, index) =>{
                                            drawHook(index, 0.3);
                                        });
                                        
                                        // Animate execution
                                        const interval = setInterval(() =>{
                                            if (currentHook< hooks.length) {
                                                drawHook(currentHook, 1);
                                                
                                                // Draw arrow
                                                if (currentHook >0) {
                                                    const prevY = startY + ((currentHook - 1) * 80) + boxHeight;
                                                    const currY = startY + (currentHook * 80);
                                                    
                                                    ctx.strokeStyle = '#666';
                                                    ctx.beginPath();
                                                    ctx.moveTo(110, prevY);
                                                    ctx.lineTo(110, currY);
                                                    ctx.stroke();
                                                    
                                                    // Arrowhead
                                                    ctx.beginPath();
                                                    ctx.moveTo(105, currY - 5);
                                                    ctx.lineTo(110, currY);
                                                    ctx.lineTo(115, currY - 5);
                                                    ctx.stroke();
                                                }
                                                
                                                currentHook++;
                                            } else {
                                                clearInterval(interval);
                                                
                                                // Show completion message
                                                ctx.fillStyle = '#4CAF50';
                                                ctx.font = 'bold 16px Arial';
                                                ctx.fillText('All hooks executed!', 350, 200);
                                            }
                                        }, 1000);
                                    }</script>
        </section>
        <!-- Best Practice Box -->
        <div class="best_practice">
         <h3>Best Practices for Using Hooks</h3>
         <ul>
          <li>
           <strong>Use descriptive function names:</strong>Prefix with your theme/plugin slug to avoid conflicts (e.g.,<code>mytheme_custom_header</code>)</li>
          <li>
           <strong>Always return in filters:</strong>Filters must return a value, even if unchanged</li>
          <li>
           <strong>Check for function existence:</strong>Use<code>if ( ! function_exists() )</code>for pluggable functions</li>
          <li>
           <strong>Use appropriate priority:</strong>Default is 10, use lower for early execution, higher for late</li>
          <li>
           <strong>Document your hooks:</strong>If creating custom hooks, document them clearly for other developers</li>
          <li>
           <strong>Don't execute heavy operations directly:</strong>Schedule them with wp_cron if needed</li>
          <li>
           <strong>Remove your hooks when deactivating:</strong>Clean up in plugin deactivation hooks</li>
         </ul>
        </div>
        <!-- Real World Example -->
        <div class="real_world_example">
         <h3>Real World Example: WooCommerce-style Extensibility</h3>
         <p>Here's how to create a extensible plugin architecture similar to WooCommerce:</p>
         <pre><code class="language-php">&lt;?php
/**
 * Extensible Product Display Class
 */
class Product_Display {
    
    public function __construct() {
        add_action( 'init', array( $this, 'init' ) );
    }
    
    public function init() {
        add_shortcode( 'product', array( $this, 'render_product' ) );
    }
    
    public function render_product( $atts ) {
        $atts = shortcode_atts( array(
            'id' =&gt; 0,
        ), $atts );
        
        $product_id = intval( $atts['id'] );
        
        if ( ! $product_id ) {
            return '';
        }
        
        // Start output buffering
        ob_start();
        
        // Before product hook
        do_action( 'before_product_display', $product_id );
        
        // Get product data
        $product = get_post( $product_id );
        $price = get_post_meta( $product_id, '_price', true );
        
        // Apply price filters
        $price = apply_filters( 'product_display_price', $price, $product_id );
        
        // Product wrapper
        echo '&lt;div class="product-display"&gt;';
        
        // Product image - filterable
        $image_html = get_the_post_thumbnail( $product_id, 'medium' );
        $image_html = apply_filters( 'product_display_image', $image_html, $product_id );
        echo $image_html;
        
        // Product title - filterable
        $title = apply_filters( 'product_display_title', $product-&gt;post_title, $product_id );
        echo '&lt;h2&gt;' . esc_html( $title ) . '&lt;/h2&gt;';
        
        // Product price
        do_action( 'before_product_price', $product_id );
        echo '&lt;p class="price"&gt;$' . esc_html( $price ) . '&lt;/p&gt;';
        do_action( 'after_product_price', $product_id );
        
        // Product description
        $description = apply_filters( 'product_display_description', $product-&gt;post_content, $product_id );
        echo '&lt;div class="description"&gt;' . wp_kses_post( $description ) . '&lt;/div&gt;';
        
        // Add to cart button
        do_action( 'before_add_to_cart_button', $product_id );
        
        $button_text = apply_filters( 'add_to_cart_text', 'Add to Cart', $product_id );
        echo '&lt;button class="add-to-cart" data-product-id="' . esc_attr( $product_id ) . '"&gt;';
        echo esc_html( $button_text );
        echo '&lt;/button&gt;';
        
        do_action( 'after_add_to_cart_button', $product_id );
        
        echo '&lt;/div&gt;';
        
        // After product hook
        do_action( 'after_product_display', $product_id );
        
        return ob_get_clean();
    }
}

// Initialize the class
new Product_Display();

// Now other developers can extend this functionality:

// Add a sale badge
add_action( 'before_product_display', 'add_sale_badge' );
function add_sale_badge( $product_id ) {
    $sale_price = get_post_meta( $product_id, '_sale_price', true );
    if ( $sale_price ) {
        echo '&lt;span class="sale-badge"&gt;SALE!&lt;/span&gt;';
    }
}

// Add stock status
add_action( 'after_product_price', 'show_stock_status' );
function show_stock_status( $product_id ) {
    $stock = get_post_meta( $product_id, '_stock', true );
    if ( $stock &lt; 5 ) {
        echo '&lt;p class="low-stock"&gt;Only ' . $stock . ' left in stock!&lt;/p&gt;';
    }
}

// Modify price for logged-in users
add_filter( 'product_display_price', 'member_pricing', 10, 2 );
function member_pricing( $price, $product_id ) {
    if ( is_user_logged_in() ) {
        $discount = 0.9; // 10% discount
        $price = $price * $discount;
    }
    return $price;
}

// Add related products
add_action( 'after_product_display', 'show_related_products' );
function show_related_products( $product_id ) {
    // Get product category
    $categories = wp_get_post_terms( $product_id, 'product_category', array( 'fields' =&gt; 'ids' ) );
    
    if ( $categories ) {
        $args = array(
            'post_type' =&gt; 'product',
            'posts_per_page' =&gt; 3,
            'post__not_in' =&gt; array( $product_id ),
            'tax_query' =&gt; array(
                array(
                    'taxonomy' =&gt; 'product_category',
                    'terms' =&gt; $categories
                )
            )
        );
        
        $related = new WP_Query( $args );
        
        if ( $related-&gt;have_posts() ) {
            echo '&lt;div class="related-products"&gt;';
            echo '&lt;h3&gt;Related Products&lt;/h3&gt;';
            while ( $related-&gt;have_posts() ) {
                $related-&gt;the_post();
                echo '&lt;a href="' . get_permalink() . '"&gt;' . get_the_title() . '&lt;/a&gt;';
            }
            echo '&lt;/div&gt;';
            wp_reset_postdata();
        }
    }
}
?&gt;</code></pre>
        </div>
        <section>
         <h2>Debugging Hooks</h2>
         <p>Understanding what hooks are firing and in what order is crucial for debugging.</p>
         <pre><code class="language-php">&lt;?php
// 1. List all functions hooked to a specific action/filter
function list_hooked_functions( $tag = false ) {
    global $wp_filter;
    
    if ( $tag ) {
        $hook = $wp_filter[$tag];
        ksort( $hook );
    } else {
        $hook = $wp_filter;
        ksort( $hook );
    }
    
    echo '&lt;pre&gt;';
    foreach( $hook as $tag =&gt; $priority ) {
        echo "&lt;br /&gt;&lt;strong&gt;$tag&lt;/strong&gt;&lt;br /&gt;";
        ksort( $priority );
        foreach( $priority as $priority_level =&gt; $function ) {
            echo $priority_level;
            foreach( $function as $name =&gt; $properties ) {
                echo "\t$name&lt;br /&gt;";
            }
        }
    }
    echo '&lt;/pre&gt;';
}

// 2. Check current action/filter
function check_current_hook() {
    $current_filter = current_filter();
    if ( $current_filter ) {
        error_log( 'Currently executing: ' . $current_filter );
    }
}
add_action( 'all', 'check_current_hook' );

// 3. Log all hooks execution (careful - this is verbose!)
function log_all_hooks() {
    static $hooks_logged = array();
    $current = current_filter();
    
    if ( ! in_array( $current, $hooks_logged ) ) {
        error_log( 'Hook fired: ' . $current );
        $hooks_logged[] = $current;
    }
}
// add_action( 'all', 'log_all_hooks' ); // Uncomment with caution

// 4. Debug specific hook
function debug_save_post( $post_id, $post, $update ) {
    error_log( '=== save_post Debug ===' );
    error_log( 'Post ID: ' . $post_id );
    error_log( 'Post Type: ' . $post-&gt;post_type );
    error_log( 'Is Update: ' . ( $update ? 'Yes' : 'No' ) );
    error_log( 'Post Status: ' . $post-&gt;post_status );
    error_log( '=====================' );
}
// add_action( 'save_post', 'debug_save_post', 10, 3 );

// 5. Query Monitor integration (if plugin is installed)
if ( function_exists( 'do_action_qm' ) ) {
    do_action_qm( 'my_custom_action', 'Custom action for debugging' );
}
?&gt;</code></pre>
        </section>
        <!-- Common Pitfalls -->
        <section>
         <h2>Common Pitfalls and Solutions</h2>
         <div class="alert alert-warning">
          <div class="alert-icon">‚ö†Ô∏è</div>
          <div class="alert-content">
           <div class="alert-title">Common Mistakes</div>
           <div class="alert-message">
            <ul>
             <li>
              <strong>Forgetting to return in filters:</strong>Always return a value, even if unchanged</li>
             <li>
              <strong>Wrong priority when removing:</strong>Must match exactly when using remove_action/filter</li>
             <li>
              <strong>Infinite loops:</strong>Be careful when hooking into save_post and updating post meta</li>
             <li>
              <strong>Direct output in filters:</strong>Filters should return, not echo</li>
             <li>
              <strong>Hook timing issues:</strong>Some hooks fire before others are available</li>
            </ul>
           </div>
          </div>
         </div>
         <h3>Solutions to Common Issues</h3>
         <pre><code class="language-php">&lt;?php
// 1. Preventing infinite loops in save_post
add_action( 'save_post', 'my_save_post_meta', 10, 3 );
function my_save_post_meta( $post_id, $post, $update ) {
    // Check if this is an autosave
    if ( defined( 'DOING_AUTOSAVE' ) &amp;&amp; DOING_AUTOSAVE ) {
        return;
    }
    
    // Check user permissions
    if ( ! current_user_can( 'edit_post', $post_id ) ) {
        return;
    }
    
    // Prevent infinite loop
    remove_action( 'save_post', 'my_save_post_meta', 10 );
    
    // Update the post
    wp_update_post( array(
        'ID' =&gt; $post_id,
        'post_title' =&gt; $post-&gt;post_title . ' - Updated'
    ));
    
    // Re-hook the action
    add_action( 'save_post', 'my_save_post_meta', 10, 3 );
}

// 2. Proper filter usage (return, don't echo)
// WRONG
add_filter( 'the_title', 'bad_title_filter' );
function bad_title_filter( $title ) {
    echo '‚≠ê ' . $title; // WRONG - Don't echo in filters
}

// CORRECT
add_filter( 'the_title', 'good_title_filter' );
function good_title_filter( $title ) {
    return '‚≠ê ' . $title; // CORRECT - Return the modified value
}

// 3. Checking if it's the right context
add_filter( 'the_content', 'add_custom_content' );
function add_custom_content( $content ) {
    // Only modify on single posts, not in admin or feeds
    if ( is_single() &amp;&amp; ! is_admin() &amp;&amp; ! is_feed() ) {
        $content .= '&lt;p&gt;Custom content here&lt;/p&gt;';
    }
    return $content;
}

// 4. Safe hook removal from classes
// For static methods
remove_action( 'init', array( 'ClassName', 'method_name' ) );

// For instance methods (need the instance)
global $my_plugin_instance;
if ( isset( $my_plugin_instance ) ) {
    remove_action( 'init', array( $my_plugin_instance, 'method_name' ) );
}
?&gt;</code></pre>
        </section>
        <!-- Practice Exercise -->
        <section>
         <h2>Practice Exercise</h2>
         <p>Create a simple plugin that demonstrates both actions and filters:</p>
         <div class="alert alert-success">
          <div class="alert-icon">üíª</div>
          <div class="alert-content">
           <div class="alert-title">Try It Now</div>
           <div class="alert-message">
            <p>Create a plugin that:</p>
            <ol>
             <li>Adds a custom message after post content (using filter)</li>
             <li>Logs when posts are viewed (using action)</li>
             <li>Creates a custom hook that others can use</li>
             <li>Modifies the excerpt length</li>
             <li>Adds a custom admin notice</li>
            </ol>
           </div>
          </div>
         </div>
         <h3>Solution Template</h3>
         <pre><code class="language-php">&lt;?php
/**
 * Plugin Name: Hook Practice Plugin
 * Description: Practice using WordPress hooks
 * Version: 1.0
 * Author: Your Name
 */

// Prevent direct access
if ( ! defined( 'ABSPATH' ) ) {
    exit;
}

class Hook_Practice_Plugin {
    
    public function __construct() {
        // Initialize hooks
        $this-&gt;init_hooks();
    }
    
    private function init_hooks() {
        // 1. Add message after content (filter)
        add_filter( 'the_content', array( $this, 'add_content_message' ), 20 );
        
        // 2. Log post views (action)
        add_action( 'wp_head', array( $this, 'log_post_view' ) );
        
        // 3. Modify excerpt length (filter)
        add_filter( 'excerpt_length', array( $this, 'custom_excerpt_length' ) );
        
        // 4. Add admin notice (action)
        add_action( 'admin_notices', array( $this, 'show_admin_notice' ) );
        
        // 5. Create custom hook in footer
        add_action( 'wp_footer', array( $this, 'custom_footer_hook' ) );
    }
    
    public function add_content_message( $content ) {
        if ( is_single() &amp;&amp; in_the_loop() &amp;&amp; is_main_query() ) {
            $message = '&lt;div class="content-footer"&gt;';
            $message .= '&lt;p&gt;Thanks for reading! Share if you enjoyed.&lt;/p&gt;';
            $message .= '&lt;/div&gt;';
            
            // Allow others to modify this message
            $message = apply_filters( 'hook_practice_content_message', $message );
            
            $content .= $message;
        }
        return $content;
    }
    
    public function log_post_view() {
        if ( is_single() ) {
            $post_id = get_the_ID();
            $views = get_post_meta( $post_id, '_post_views', true );
            $views = $views ? $views + 1 : 1;
            update_post_meta( $post_id, '_post_views', $views );
            
            // Trigger custom action
            do_action( 'hook_practice_post_viewed', $post_id, $views );
        }
    }
    
    public function custom_excerpt_length( $length ) {
        // Shorter excerpts on archive pages
        if ( is_archive() ) {
            return 20;
        }
        return $length;
    }
    
    public function show_admin_notice() {
        if ( current_user_can( 'manage_options' ) ) {
            echo '&lt;div class="notice notice-info is-dismissible"&gt;';
            echo '&lt;p&gt;Hook Practice Plugin is active!&lt;/p&gt;';
            echo '&lt;/div&gt;';
        }
    }
    
    public function custom_footer_hook() {
        // Create extensible footer area
        do_action( 'hook_practice_before_footer' );
        
        echo '&lt;div class="custom-footer-area"&gt;';
        
        // Allow dynamic footer content
        $footer_content = apply_filters( 'hook_practice_footer_content', 
            '&lt;p&gt;Default footer content&lt;/p&gt;' 
        );
        echo $footer_content;
        
        echo '&lt;/div&gt;';
        
        do_action( 'hook_practice_after_footer' );
    }
}

// Initialize the plugin
new Hook_Practice_Plugin();

// Example of extending the plugin from another file/plugin
add_filter( 'hook_practice_content_message', 'customize_content_message' );
function customize_content_message( $message ) {
    return $message . '&lt;p&gt;Follow us on social media!&lt;/p&gt;';
}

add_action( 'hook_practice_post_viewed', 'track_popular_posts', 10, 2 );
function track_popular_posts( $post_id, $views ) {
    if ( $views &gt; 100 ) {
        update_post_meta( $post_id, '_is_popular', true );
    }
}
?&gt;</code></pre>
        </section>
        <!-- Homework -->
        <div class="homework">
         <h2>Practice Assignment</h2>
         <p>Build a "Content Enhancement" plugin that uses WordPress hooks extensively:</p>
         <ul>
          <li>
           <strong>Reading Time Calculator:</strong>Add estimated reading time to posts using the_content filter</li>
          <li>
           <strong>Social Share Buttons:</strong>Create custom hooks for before/after content that add social sharing buttons</li>
          <li>
           <strong>View Counter:</strong>Track and display post view counts using appropriate actions</li>
          <li>
           <strong>Author Bio Box:</strong>Automatically add author bio after posts using filters</li>
          <li>
           <strong>Custom Login Redirect:</strong>Redirect users based on their role after login</li>
          <li>
           <strong>Admin Dashboard Widget:</strong>Add a custom widget showing site statistics</li>
          <li>
           <strong>Comment Moderation:</strong>Filter comments for specific keywords before saving</li>
          <li>
           <strong>Make it Extensible:</strong>Add at least 5 custom hooks that other developers could use</li>
         </ul>
         <h3>Bonus Challenges:</h3>
         <ul>
          <li>Create a settings page to enable/disable each feature</li>
          <li>Add priority controls for your hooks via settings</li>
          <li>Implement hook debugging mode that logs all hook executions</li>
          <li>Create documentation for your custom hooks</li>
         </ul>
        </div>
        <!-- Resources -->
        <section class="resources">
         <h2>Additional Resources</h2>
         <ul>
          <li>
           <a href="https://developer.wordpress.org/plugins/hooks/" target="_blank">WordPress Plugin Handbook: Hooks</a>
          </li>
          <li>
           <a href="https://codex.wordpress.org/Plugin_API/Action_Reference" target="_blank">Action Reference</a>
          </li>
          <li>
           <a href="https://codex.wordpress.org/Plugin_API/Filter_Reference" target="_blank">Filter Reference</a>
          </li>
          <li>
           <a href="https://adambrown.info/p/wp_hooks" target="_blank">WordPress Hooks Database</a>
          </li>
          <li>
           <a href="https://developer.wordpress.org/reference/hooks/" target="_blank">WordPress Hook Reference</a>
          </li>
          <li>
           <a href="https://www.youtube.com/watch?v=Sz0z-Gyp3nA" target="_blank">WordPress Hooks Explained (Video)</a>
          </li>
          <li>
           <a href="https://wordpress.org/plugins/query-monitor/" target="_blank">Query Monitor Plugin (Hook Debugging)</a>
          </li>
         </ul>
        </section>
       </div>
       <!-- Lesson Navigation -->
       <div class="lesson-navigation">
        <a class="lesson-nav-button prev" href="/04module/wordpress_database_structure_lesson.html">
         <svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
          <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z">
          </path>
         </svg>
         <span>
          <small>Previous</small>
          <br/>WordPress Database Structure</span>
        </a>
        <button class="complete-lesson-btn">Mark as Complete</button>
        <a class="lesson-nav-button next" href="/04module/wordpress_loop.html">
         <span>
          <small>Next</small>
          <br/>The WordPress Loop</span>
         <svg fill="currentColor" height="20" viewbox="0 0 20 20" width="20">
          <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z">
          </path>
         </svg>
        </a>
       </div>
      </article>
     </div>
    </div>
   </main>
   <!-- Footer -->
   <footer class="site-footer" role="contentinfo">
    <div class="footer-container">
     <div class="footer-content">
      <div class="footer-section footer-about">
       <h3>PHP WordPress Development</h3>
       <p>Complete Web Development Course</p>
      </div>
      <div class="footer-section">
       <h4>Quick Links</h4>
       <ul class="footer-links">
        <li>
         <a href="/">Home</a>
        </li>
        <li>
         <a class="active" href="/module4.html">Module 4</a>
        </li>
        <li>
         <a href="/resources.html">Resources</a>
        </li>
       </ul>
      </div>
      <div class="footer-section">
       <h4>Support</h4>
       <ul class="footer-links">
        <li>
         <a href="/help.html">Help Center</a>
        </li>
        <li>
         <a href="/faq.html">FAQ</a>
        </li>
        <li>
         <a href="/contact.html">Contact</a>
        </li>
       </ul>
      </div>
     </div>
     <div class="footer-bottom">
      <div class="footer-bottom-content">
       <p class="copyright">¬© 2025 PHP WordPress Development Course</p>
       <nav class="footer-bottom-links">
        <a href="/privacy.html">Privacy</a>
        <span class="separator">|</span>
        <a href="/terms.html">Terms</a>
       </nav>
      </div>
     </div>
    </div>
   </footer>
  </div>
  <!-- Back to Top -->
  <button aria-label="Back to top" class="back-to-top" id="back-to-top">
   <svg fill="none" height="24" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24" width="24">
    <path d="M12 19V5M12 5l-7 7M12 5l7 7">
    </path>
   </svg>
  </button>
  <!-- JavaScript -->
  <script src="/assets/js/navigation.js">
  </script>
  <script src="/assets/js/site-config.js">
  </script>
  <script src="/assets/js/sidebar-toggle.js">
  </script>
  <!-- Universal Mermaid Fix (Enhanced) -->
  <!-- Universal Mermaid Fix -->
  <script src="/assets/js/mermaid-universal-fix.js">
  </script>
 </body>
</html>
