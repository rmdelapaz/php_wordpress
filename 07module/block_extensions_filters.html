<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SEO Meta Tags -->
    <title>Block Extensions and Filters - PHP WordPress Course</title>
    <meta name="description" content="Learn to extend existing blocks and use filters to modify block behavior in WordPress Gutenberg.">
    <meta name="keywords" content="WordPress, Gutenberg, block extensions, filters, block modifications">
    <meta name="author" content="PHP WordPress Course">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Block Extensions and Filters">
    <meta property="og:description" content="Extend and modify blocks with filters and higher-order components">
    <meta property="og:type" content="article">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    
    <!-- Prism.js for syntax highlighting -->
    <link href="/assets/css/prism.css" rel="stylesheet">
</head>
<body>
    <!-- Skip to main content -->
    <a href="#main-content" class="sr-only">Skip to main content</a>
    
    <div class="page-wrapper">
        <!-- Header -->
        <header class="site-header" role="banner">
            <div class="header-container">
                <div class="site-branding">
                    <a href="/" class="site-logo">
                        <h1 class="site-title">PHP WordPress Development</h1>
                    </a>
                </div>
                
                <nav class="main-navigation" role="navigation" aria-label="Main navigation">
                    <button class="mobile-menu-btn" aria-label="Toggle navigation" aria-expanded="false">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    
                    <div class="nav-menu">
                        <ul class="nav-list">
                            <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
                            <li class="nav-item dropdown">
                                <button class="nav-link dropdown-toggle active" aria-haspopup="true">Modules</button>
                                <div class="dropdown-menu">
                                    <a href="/module1.html" class="dropdown-item">Module 1: Web Fundamentals</a>
                                    <a href="/module2.html" class="dropdown-item">Module 2: PHP Fundamentals</a>
                                    <a href="/module3.html" class="dropdown-item">Module 3: MySQL Database</a>
                                    <a href="/module4.html" class="dropdown-item">Module 4: WordPress & Docker</a>
                                    <a href="/module5.html" class="dropdown-item">Module 5: Theme Development</a>
                                    <a href="/module6.html" class="dropdown-item">Module 6: Plugin Development</a>
                                    <a href="/module7.html" class="dropdown-item active">Module 7: Advanced WordPress</a>
                                    <a href="/module8.html" class="dropdown-item">Module 8: Deployment</a>
                                    <a href="/module9.html" class="dropdown-item">Module 9: Final Project</a>
                                </div>
                            </li>
                            <li class="nav-item"><a href="/resources.html" class="nav-link">Resources</a></li>
                            <li class="nav-item"><a href="/about.html" class="nav-link">About</a></li>
                        </ul>
                    </div>
                </nav>
                
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                        <input type="search" class="search-input" placeholder="Search lessons..." aria-label="Search">
                    </div>
                    <div class="search-results"></div>
                </div>
            </div>
        </header>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-header">
                <h2 class="progress-title">Course Progress</h2>
                <span class="progress-text">Loading...</span>
            </div>
            <div class="progress-bar">
                <div class="progress-bar-fill">
                    <span class="progress-bar-text"></span>
                </div>
            </div>
        </div>
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb container" aria-label="Breadcrumb">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <a href="/module7.html">Module 7</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <span aria-current="page">Block Extensions</span>
                </li>
            </ol>
        </nav>
        
        <!-- Main Content -->
        <main id="main-content" class="main-content" role="main">
            <div class="container">
                <!-- Lesson Header -->
                <div class="lesson-header">
                    <h1 class="lesson-title">Block Extensions and Filters</h1>
                    <p class="lesson-subtitle">Extend core blocks and create powerful modifications using filters</p>
                </div>
                
                <!-- Learning Objectives -->
                <div class="lesson-objectives">
                    <h2>Learning Objectives</h2>
                    <p>By the end of this lesson, you will be able to:</p>
                    <ul>
                        <li>Extend existing blocks with filters</li>
                        <li>Create higher-order components</li>
                        <li>Add custom attributes to core blocks</li>
                        <li>Modify block behavior with hooks</li>
                        <li>Create block style variations</li>
                        <li>Build format types for RichText</li>
                    </ul>
                </div>
                
                <!-- Lesson Body -->
                <div class="lesson-body">
                    <!-- Block Filters Overview -->
                    <section>
                        <h2>Block Filters System</h2>
                        
                        <h3>Core Block Filters</h3>
                        <pre><code class="language-javascript">
/**
 * Complete guide to block filters
 */
import { addFilter } from '@wordpress/hooks';
import { __ } from '@wordpress/i18n';
import { createHigherOrderComponent } from '@wordpress/compose';
import { Fragment } from '@wordpress/element';
import { InspectorControls } from '@wordpress/block-editor';
import { PanelBody, TextControl, ToggleControl } from '@wordpress/components';

/**
 * Filter: blocks.registerBlockType
 * Modify block registration settings
 */
addFilter(
    'blocks.registerBlockType',
    'myplugin/modify-block-settings',
    (settings, name) => {
        // Add custom attributes to paragraph block
        if (name === 'core/paragraph') {
            settings.attributes = {
                ...settings.attributes,
                customAnimation: {
                    type: 'string',
                    default: ''
                },
                dataAttribute: {
                    type: 'string',
                    default: ''
                }
            };
            
            // Add supports
            settings.supports = {
                ...settings.supports,
                customClassName: true,
                defaultStylePicker: true
            };
        }
        
        // Modify all blocks
        if (!settings.attributes) {
            settings.attributes = {};
        }
        
        settings.attributes.blockId = {
            type: 'string',
            default: ''
        };
        
        return settings;
    }
);

/**
 * Filter: editor.BlockEdit
 * Wrap the block edit component
 */
const withCustomControls = createHigherOrderComponent((BlockEdit) => {
    return (props) => {
        const { attributes, setAttributes, name } = props;
        
        // Only add to specific blocks
        if (name !== 'core/paragraph' && name !== 'core/heading') {
            return <BlockEdit {...props} />;
        }
        
        return (
            <Fragment>
                <BlockEdit {...props} />
                <InspectorControls>
                    <PanelBody 
                        title={__('Custom Settings', 'myplugin')}
                        initialOpen={false}
                    >
                        <TextControl
                            label={__('Animation Class', 'myplugin')}
                            value={attributes.customAnimation || ''}
                            onChange={(customAnimation) => setAttributes({ customAnimation })}
                            help={__('Add animation class name', 'myplugin')}
                        />
                        
                        <TextControl
                            label={__('Data Attribute', 'myplugin')}
                            value={attributes.dataAttribute || ''}
                            onChange={(dataAttribute) => setAttributes({ dataAttribute })}
                            help={__('Custom data attribute value', 'myplugin')}
                        />
                        
                        <TextControl
                            label={__('Block ID', 'myplugin')}
                            value={attributes.blockId || ''}
                            onChange={(blockId) => setAttributes({ blockId })}
                            help={__('Unique identifier for this block', 'myplugin')}
                        />
                    </PanelBody>
                </InspectorControls>
            </Fragment>
        );
    };
}, 'withCustomControls');

addFilter(
    'editor.BlockEdit',
    'myplugin/with-custom-controls',
    withCustomControls
);

/**
 * Filter: blocks.getSaveContent.extraProps
 * Add props to the save element
 */
addFilter(
    'blocks.getSaveContent.extraProps',
    'myplugin/add-save-props',
    (props, blockType, attributes) => {
        // Add animation class
        if (attributes.customAnimation) {
            props.className = `${props.className || ''} animate-${attributes.customAnimation}`.trim();
        }
        
        // Add data attribute
        if (attributes.dataAttribute) {
            props['data-custom'] = attributes.dataAttribute;
        }
        
        // Add block ID
        if (attributes.blockId) {
            props.id = attributes.blockId;
        }
        
        return props;
    }
);

/**
 * Filter: blocks.getSaveElement
 * Modify the save element
 */
addFilter(
    'blocks.getSaveElement',
    'myplugin/modify-save-element',
    (element, blockType, attributes) => {
        // Wrap specific blocks
        if (blockType.name === 'core/paragraph' && attributes.customAnimation) {
            return (
                <div className="animation-wrapper">
                    {element}
                </div>
            );
        }
        
        return element;
    }
);

/**
 * Filter: blocks.getBlockDefaultClassName
 * Modify default class name
 */
addFilter(
    'blocks.getBlockDefaultClassName',
    'myplugin/modify-default-class',
    (className, blockName) => {
        if (blockName === 'core/paragraph') {
            return `${className} custom-paragraph`;
        }
        return className;
    }
);

/**
 * Filter: blocks.switchToBlockType.transformedBlock
 * Modify block transformations
 */
addFilter(
    'blocks.switchToBlockType.transformedBlock',
    'myplugin/modify-transformed-block',
    (transformedBlock, blocks) => {
        // Preserve custom attributes during transformation
        if (blocks[0]?.attributes?.customAnimation) {
            transformedBlock.attributes.customAnimation = blocks[0].attributes.customAnimation;
        }
        
        return transformedBlock;
    }
);

/**
 * Filter: blocks.getBlockAttributes
 * Parse additional attributes from saved content
 */
addFilter(
    'blocks.getBlockAttributes',
    'myplugin/get-block-attributes',
    (attributes, blockType, innerHTML, innerBlocks) => {
        // Parse custom attributes from HTML
        const match = innerHTML.match(/data-custom="([^"]*)"/);
        if (match) {
            attributes.dataAttribute = match[1];
        }
        
        return attributes;
    }
);
                        </code></pre>
                    </section>
                    
                    <!-- Higher Order Components -->
                    <section>
                        <h2>Higher Order Components (HOCs)</h2>
                        
                        <h3>Creating Custom HOCs</h3>
                        <pre><code class="language-javascript">
/**
 * Higher Order Components for block extensions
 */
import { createHigherOrderComponent } from '@wordpress/compose';
import { useSelect, useDispatch } from '@wordpress/data';
import { useState, useEffect } from '@wordpress/element';
import { addFilter } from '@wordpress/hooks';

/**
 * HOC: Add responsive controls
 */
const withResponsiveControls = createHigherOrderComponent((BlockEdit) => {
    return (props) => {
        const { attributes, setAttributes, clientId } = props;
        const [deviceType, setDeviceType] = useState('desktop');
        
        // Get editor device type
        const editorDeviceType = useSelect((select) => {
            return select('core/edit-post').__experimentalGetPreviewDeviceType?.() || 'Desktop';
        }, []);
        
        // Responsive attributes structure
        const responsiveAttributes = {
            desktop: attributes.desktop || {},
            tablet: attributes.tablet || {},
            mobile: attributes.mobile || {}
        };
        
        // Update responsive attribute
        const updateResponsiveAttribute = (device, key, value) => {
            setAttributes({
                [device]: {
                    ...responsiveAttributes[device],
                    [key]: value
                }
            });
        };
        
        // Enhanced props
        const enhancedProps = {
            ...props,
            deviceType: editorDeviceType.toLowerCase(),
            responsiveAttributes,
            updateResponsiveAttribute
        };
        
        return (
            <>
                <BlockEdit {...enhancedProps} />
                <InspectorControls>
                    <PanelBody title={__('Responsive Settings', 'myplugin')}>
                        <TabPanel
                            className="responsive-tabs"
                            activeClass="is-active"
                            tabs={[
                                { name: 'desktop', title: __('Desktop', 'myplugin') },
                                { name: 'tablet', title: __('Tablet', 'myplugin') },
                                { name: 'mobile', title: __('Mobile', 'myplugin') }
                            ]}
                        >
                            {(tab) => (
                                <div className={`responsive-controls-${tab.name}`}>
                                    <RangeControl
                                        label={__('Font Size', 'myplugin')}
                                        value={responsiveAttributes[tab.name].fontSize || 16}
                                        onChange={(value) => 
                                            updateResponsiveAttribute(tab.name, 'fontSize', value)
                                        }
                                        min={10}
                                        max={100}
                                    />
                                    
                                    <RangeControl
                                        label={__('Padding', 'myplugin')}
                                        value={responsiveAttributes[tab.name].padding || 0}
                                        onChange={(value) => 
                                            updateResponsiveAttribute(tab.name, 'padding', value)
                                        }
                                        min={0}
                                        max={100}
                                    />
                                    
                                    <ToggleControl
                                        label={__('Hide on ' + tab.title, 'myplugin')}
                                        checked={responsiveAttributes[tab.name].hide || false}
                                        onChange={(value) => 
                                            updateResponsiveAttribute(tab.name, 'hide', value)
                                        }
                                    />
                                </div>
                            )}
                        </TabPanel>
                    </PanelBody>
                </InspectorControls>
            </>
        );
    };
}, 'withResponsiveControls');

/**
 * HOC: Add animation controls
 */
const withAnimationControls = createHigherOrderComponent((BlockEdit) => {
    return (props) => {
        const { attributes, setAttributes } = props;
        const [isAnimating, setIsAnimating] = useState(false);
        
        const animationOptions = [
            { label: __('None', 'myplugin'), value: '' },
            { label: __('Fade In', 'myplugin'), value: 'fadeIn' },
            { label: __('Slide Up', 'myplugin'), value: 'slideUp' },
            { label: __('Slide Down', 'myplugin'), value: 'slideDown' },
            { label: __('Zoom In', 'myplugin'), value: 'zoomIn' },
            { label: __('Bounce', 'myplugin'), value: 'bounce' },
            { label: __('Rotate', 'myplugin'), value: 'rotate' }
        ];
        
        const playAnimation = () => {
            setIsAnimating(true);
            setTimeout(() => setIsAnimating(false), 1000);
        };
        
        return (
            <>
                <div className={isAnimating ? `animate-${attributes.animation}` : ''}>
                    <BlockEdit {...props} />
                </div>
                
                <InspectorControls>
                    <PanelBody title={__('Animation', 'myplugin')}>
                        <SelectControl
                            label={__('Animation Type', 'myplugin')}
                            value={attributes.animation || ''}
                            options={animationOptions}
                            onChange={(animation) => setAttributes({ animation })}
                        />
                        
                        {attributes.animation && (
                            <>
                                <RangeControl
                                    label={__('Duration (ms)', 'myplugin')}
                                    value={attributes.animationDuration || 1000}
                                    onChange={(animationDuration) => 
                                        setAttributes({ animationDuration })
                                    }
                                    min={100}
                                    max={5000}
                                    step={100}
                                />
                                
                                <RangeControl
                                    label={__('Delay (ms)', 'myplugin')}
                                    value={attributes.animationDelay || 0}
                                    onChange={(animationDelay) => 
                                        setAttributes({ animationDelay })
                                    }
                                    min={0}
                                    max={5000}
                                    step={100}
                                />
                                
                                <SelectControl
                                    label={__('Trigger', 'myplugin')}
                                    value={attributes.animationTrigger || 'onLoad'}
                                    options={[
                                        { label: __('On Load', 'myplugin'), value: 'onLoad' },
                                        { label: __('On Scroll', 'myplugin'), value: 'onScroll' },
                                        { label: __('On Hover', 'myplugin'), value: 'onHover' },
                                        { label: __('On Click', 'myplugin'), value: 'onClick' }
                                    ]}
                                    onChange={(animationTrigger) => 
                                        setAttributes({ animationTrigger })
                                    }
                                />
                                
                                <Button onClick={playAnimation} variant="secondary">
                                    {__('Preview Animation', 'myplugin')}
                                </Button>
                            </>
                        )}
                    </PanelBody>
                </InspectorControls>
            </>
        );
    };
}, 'withAnimationControls');

/**
 * HOC: Add conditional visibility
 */
const withConditionalVisibility = createHigherOrderComponent((BlockEdit) => {
    return (props) => {
        const { attributes, setAttributes } = props;
        const { visibilityRules = [] } = attributes;
        
        const currentUser = useSelect((select) => {
            return select('core').getCurrentUser();
        }, []);
        
        const addVisibilityRule = () => {
            setAttributes({
                visibilityRules: [
                    ...visibilityRules,
                    { type: 'userRole', value: '', operator: 'is' }
                ]
            });
        };
        
        const updateVisibilityRule = (index, updates) => {
            const newRules = [...visibilityRules];
            newRules[index] = { ...newRules[index], ...updates };
            setAttributes({ visibilityRules: newRules });
        };
        
        const removeVisibilityRule = (index) => {
            setAttributes({
                visibilityRules: visibilityRules.filter((_, i) => i !== index)
            });
        };
        
        return (
            <>
                <BlockEdit {...props} />
                
                <InspectorControls>
                    <PanelBody 
                        title={__('Visibility Conditions', 'myplugin')}
                        initialOpen={false}
                    >
                        {visibilityRules.map((rule, index) => (
                            <div key={index} className="visibility-rule">
                                <SelectControl
                                    label={__('Condition Type', 'myplugin')}
                                    value={rule.type}
                                    options={[
                                        { label: __('User Role', 'myplugin'), value: 'userRole' },
                                        { label: __('Login Status', 'myplugin'), value: 'loginStatus' },
                                        { label: __('Date Range', 'myplugin'), value: 'dateRange' },
                                        { label: __('Device Type', 'myplugin'), value: 'deviceType' },
                                        { label: __('URL Parameter', 'myplugin'), value: 'urlParam' }
                                    ]}
                                    onChange={(type) => updateVisibilityRule(index, { type })}
                                />
                                
                                {rule.type === 'userRole' && (
                                    <SelectControl
                                        label={__('Role', 'myplugin')}
                                        value={rule.value}
                                        options={[
                                            { label: __('Administrator', 'myplugin'), value: 'administrator' },
                                            { label: __('Editor', 'myplugin'), value: 'editor' },
                                            { label: __('Author', 'myplugin'), value: 'author' },
                                            { label: __('Subscriber', 'myplugin'), value: 'subscriber' }
                                        ]}
                                        onChange={(value) => updateVisibilityRule(index, { value })}
                                    />
                                )}
                                
                                <Button
                                    onClick={() => removeVisibilityRule(index)}
                                    variant="link"
                                    isDestructive
                                >
                                    {__('Remove Rule', 'myplugin')}
                                </Button>
                            </div>
                        ))}
                        
                        <Button onClick={addVisibilityRule} variant="secondary">
                            {__('Add Visibility Rule', 'myplugin')}
                        </Button>
                    </PanelBody>
                </InspectorControls>
            </>
        );
    };
}, 'withConditionalVisibility');

// Apply HOCs to specific blocks
addFilter(
    'editor.BlockEdit',
    'myplugin/with-responsive-controls',
    withResponsiveControls,
    9
);

addFilter(
    'editor.BlockEdit',
    'myplugin/with-animation-controls',
    withAnimationControls,
    10
);

addFilter(
    'editor.BlockEdit',
    'myplugin/with-conditional-visibility',
    withConditionalVisibility,
    11
);
                        </code></pre>
                    </section>
                    
                    <!-- Format Types -->
                    <section>
                        <h2>Custom Format Types</h2>
                        
                        <h3>Adding RichText Formats</h3>
                        <pre><code class="language-javascript">
/**
 * Register custom format types for RichText
 */
import { registerFormatType, toggleFormat, applyFormat } from '@wordpress/rich-text';
import { RichTextToolbarButton, RichTextShortcut } from '@wordpress/block-editor';
import { __ } from '@wordpress/i18n';
import { useState } from '@wordpress/element';
import { Popover, TextControl, Button } from '@wordpress/components';

/**
 * Highlight format type
 */
const HighlightFormat = {
    name: 'myplugin/highlight',
    title: __('Highlight', 'myplugin'),
    tagName: 'mark',
    className: 'highlight',
    attributes: {
        style: 'style',
        'data-color': 'data-color'
    },
    edit({ isActive, value, onChange }) {
        const [showColorPicker, setShowColorPicker] = useState(false);
        const [highlightColor, setHighlightColor] = useState('#ffff00');
        
        const onToggle = () => {
            if (isActive) {
                onChange(toggleFormat(value, { type: 'myplugin/highlight' }));
            } else {
                setShowColorPicker(true);
            }
        };
        
        const applyHighlight = () => {
            onChange(
                applyFormat(value, {
                    type: 'myplugin/highlight',
                    attributes: {
                        style: `background-color: ${highlightColor}`,
                        'data-color': highlightColor
                    }
                })
            );
            setShowColorPicker(false);
        };
        
        return (
            <>
                <RichTextShortcut
                    type="primary"
                    character="h"
                    onUse={onToggle}
                />
                <RichTextToolbarButton
                    icon="admin-customizer"
                    title={__('Highlight', 'myplugin')}
                    onClick={onToggle}
                    isActive={isActive}
                    shortcutType="primary"
                    shortcutCharacter="h"
                />
                {showColorPicker && (
                    <Popover
                        position="bottom center"
                        onClose={() => setShowColorPicker(false)}
                    >
                        <div style={{ padding: '10px' }}>
                            <TextControl
                                label={__('Highlight Color', 'myplugin')}
                                value={highlightColor}
                                onChange={setHighlightColor}
                                type="color"
                            />
                            <Button onClick={applyHighlight} variant="primary">
                                {__('Apply', 'myplugin')}
                            </Button>
                        </div>
                    </Popover>
                )}
            </>
        );
    }
};

registerFormatType('myplugin/highlight', HighlightFormat);

/**
 * Tooltip format type
 */
const TooltipFormat = {
    name: 'myplugin/tooltip',
    title: __('Tooltip', 'myplugin'),
    tagName: 'span',
    className: 'has-tooltip',
    attributes: {
        'data-tooltip': 'data-tooltip'
    },
    edit({ isActive, value, onChange }) {
        const [showTooltipInput, setShowTooltipInput] = useState(false);
        const [tooltipText, setTooltipText] = useState('');
        
        const onToggle = () => {
            if (isActive) {
                onChange(toggleFormat(value, { type: 'myplugin/tooltip' }));
            } else {
                setShowTooltipInput(true);
            }
        };
        
        const applyTooltip = () => {
            onChange(
                applyFormat(value, {
                    type: 'myplugin/tooltip',
                    attributes: {
                        'data-tooltip': tooltipText
                    }
                })
            );
            setShowTooltipInput(false);
            setTooltipText('');
        };
        
        return (
            <>
                <RichTextToolbarButton
                    icon="info"
                    title={__('Tooltip', 'myplugin')}
                    onClick={onToggle}
                    isActive={isActive}
                />
                {showTooltipInput && (
                    <Popover
                        position="bottom center"
                        onClose={() => setShowTooltipInput(false)}
                    >
                        <div style={{ padding: '10px', width: '250px' }}>
                            <TextControl
                                label={__('Tooltip Text', 'myplugin')}
                                value={tooltipText}
                                onChange={setTooltipText}
                                help={__('Enter the tooltip text', 'myplugin')}
                            />
                            <Button 
                                onClick={applyTooltip} 
                                variant="primary"
                                disabled={!tooltipText}
                            >
                                {__('Apply Tooltip', 'myplugin')}
                            </Button>
                        </div>
                    </Popover>
                )}
            </>
        );
    }
};

registerFormatType('myplugin/tooltip', TooltipFormat);

/**
 * Dropdown format type
 */
const DropdownFormat = {
    name: 'myplugin/dropdown',
    title: __('Text Style', 'myplugin'),
    tagName: 'span',
    className: null,
    edit({ isActive, value, onChange }) {
        const [selectedStyle, setSelectedStyle] = useState('');
        
        const styles = [
            { label: __('Small Caps', 'myplugin'), value: 'small-caps', className: 'text-small-caps' },
            { label: __('Uppercase', 'myplugin'), value: 'uppercase', className: 'text-uppercase' },
            { label: __('Underline', 'myplugin'), value: 'underline', className: 'text-underline' },
            { label: __('Strike', 'myplugin'), value: 'strike', className: 'text-strike' }
        ];
        
        const applyStyle = (style) => {
            onChange(
                applyFormat(value, {
                    type: 'myplugin/dropdown',
                    attributes: {
                        class: style.className
                    }
                })
            );
        };
        
        return (
            <RichTextToolbarButton
                icon="editor-textcolor"
                title={__('Text Style', 'myplugin')}
                onClick={() => {}}
            >
                {({ onClose }) => (
                    <MenuGroup>
                        {styles.map(style => (
                            <MenuItem
                                key={style.value}
                                onClick={() => {
                                    applyStyle(style);
                                    onClose();
                                }}
                            >
                                {style.label}
                            </MenuItem>
                        ))}
                    </MenuGroup>
                )}
            </RichTextToolbarButton>
        );
    }
};

registerFormatType('myplugin/dropdown', DropdownFormat);
                        </code></pre>
                    </section>
                    
                    <!-- Block Styles -->
                    <section>
                        <h2>Block Style Variations</h2>
                        
                        <h3>Creating Custom Block Styles</h3>
                        <pre><code class="language-javascript">
/**
 * Register block style variations
 */
import { registerBlockStyle, unregisterBlockStyle } from '@wordpress/blocks';
import { __ } from '@wordpress/i18n';
import domReady from '@wordpress/dom-ready';

domReady(() => {
    // Remove default styles
    unregisterBlockStyle('core/button', 'default');
    unregisterBlockStyle('core/button', 'outline');
    unregisterBlockStyle('core/button', 'squared');
    
    // Register custom button styles
    registerBlockStyle('core/button', [
        {
            name: 'default',
            label: __('Default', 'myplugin'),
            isDefault: true
        },
        {
            name: 'gradient',
            label: __('Gradient', 'myplugin')
        },
        {
            name: 'shadow',
            label: __('Shadow', 'myplugin')
        },
        {
            name: 'glow',
            label: __('Glow', 'myplugin')
        },
        {
            name: '3d',
            label: __('3D', 'myplugin')
        }
    ]);
    
    // Quote styles
    registerBlockStyle('core/quote', [
        {
            name: 'modern',
            label: __('Modern', 'myplugin')
        },
        {
            name: 'minimal',
            label: __('Minimal', 'myplugin')
        },
        {
            name: 'boxed',
            label: __('Boxed', 'myplugin')
        }
    ]);
    
    // Image styles
    registerBlockStyle('core/image', [
        {
            name: 'polaroid',
            label: __('Polaroid', 'myplugin')
        },
        {
            name: 'tilt',
            label: __('Tilted', 'myplugin')
        },
        {
            name: 'fade-hover',
            label: __('Fade Hover', 'myplugin')
        }
    ]);
    
    // Group/Container styles
    registerBlockStyle('core/group', [
        {
            name: 'card',
            label: __('Card', 'myplugin')
        },
        {
            name: 'bordered',
            label: __('Bordered', 'myplugin')
        },
        {
            name: 'shadowed',
            label: __('Shadowed', 'myplugin')
        },
        {
            name: 'glass',
            label: __('Glass Effect', 'myplugin')
        }
    ]);
});

// CSS for custom styles (in separate file)
const customStylesCSS = `
/* Button Styles */
.wp-block-button.is-style-gradient .wp-block-button__link {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    border: none;
    transition: transform 0.3s ease;
}

.wp-block-button.is-style-gradient .wp-block-button__link:hover {
    transform: translateY(-2px);
}

.wp-block-button.is-style-shadow .wp-block-button__link {
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transition: box-shadow 0.3s ease;
}

.wp-block-button.is-style-shadow .wp-block-button__link:hover {
    box-shadow: 0 8px 12px rgba(0, 0, 0, 0.15);
}

.wp-block-button.is-style-glow .wp-block-button__link {
    animation: glow 2s ease-in-out infinite;
}

@keyframes glow {
    0%, 100% { box-shadow: 0 0 5px rgba(102, 126, 234, 0.5); }
    50% { box-shadow: 0 0 20px rgba(102, 126, 234, 0.8); }
}

.wp-block-button.is-style-3d .wp-block-button__link {
    position: relative;
    transform-style: preserve-3d;
    transition: transform 0.3s;
}

.wp-block-button.is-style-3d .wp-block-button__link:hover {
    transform: rotateX(-10deg) rotateY(10deg);
}

/* Quote Styles */
.wp-block-quote.is-style-modern {
    border-left: 5px solid #667eea;
    background: linear-gradient(90deg, rgba(102, 126, 234, 0.1) 0%, transparent 100%);
    padding: 20px 30px;
    position: relative;
}

.wp-block-quote.is-style-modern::before {
    content: '"';
    font-size: 60px;
    position: absolute;
    top: -10px;
    left: 10px;
    color: #667eea;
    opacity: 0.3;
}

.wp-block-quote.is-style-minimal {
    border: none;
    text-align: center;
    font-style: italic;
    position: relative;
    padding: 40px 20px;
}

.wp-block-quote.is-style-boxed {
    border: 2px solid #e0e0e0;
    border-radius: 8px;
    padding: 20px;
    background: #f9f9f9;
}

/* Image Styles */
.wp-block-image.is-style-polaroid img {
    border: 10px solid white;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    transform: rotate(-2deg);
    transition: transform 0.3s ease;
}

.wp-block-image.is-style-polaroid img:hover {
    transform: rotate(0deg);
}

.wp-block-image.is-style-tilt img {
    transform: perspective(1000px) rotateY(10deg);
    transition: transform 0.3s ease;
}

.wp-block-image.is-style-tilt img:hover {
    transform: perspective(1000px) rotateY(0deg);
}

/* Group Styles */
.wp-block-group.is-style-card {
    border-radius: 8px;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    padding: 30px;
    background: white;
}

.wp-block-group.is-style-glass {
    background: rgba(255, 255, 255, 0.1);
    backdrop-filter: blur(10px);
    border: 1px solid rgba(255, 255, 255, 0.2);
    border-radius: 12px;
    padding: 30px;
}
`;
                        </code></pre>
                    </section>
                    
                    <!-- Block Supports Extensions -->
                    <section>
                        <h2>Extending Block Supports</h2>
                        
                        <h3>Adding Custom Block Supports</h3>
                        <pre><code class="language-php">
&lt;?php
/**
 * Extend block supports with PHP
 */
class Block_Supports_Extension {
    
    public function __construct() {
        add_filter('register_block_type_args', [$this, 'add_custom_supports'], 10, 2);
        add_filter('render_block', [$this, 'render_custom_supports'], 10, 2);
        add_action('init', [$this, 'register_custom_attributes']);
        add_action('enqueue_block_editor_assets', [$this, 'enqueue_editor_assets']);
    }
    
    /**
     * Add custom supports to blocks
     */
    public function add_custom_supports($args, $block_type) {
        // Add to all blocks
        if (!isset($args['supports'])) {
            $args['supports'] = [];
        }
        
        // Custom spacing support
        $args['supports']['customSpacing'] = true;
        
        // Custom effects support
        $args['supports']['effects'] = [
            'shadow' => true,
            'blur' => true,
            'transform' => true
        ];
        
        // Custom responsive support
        $args['supports']['responsive'] = [
            'hideOnMobile' => true,
            'hideOnTablet' => true,
            'hideOnDesktop' => true
        ];
        
        // Add attributes for custom supports
        if (!isset($args['attributes'])) {
            $args['attributes'] = [];
        }
        
        $args['attributes']['customSpacing'] = [
            'type' => 'object',
            'default' => [
                'margin' => ['top' => 0, 'right' => 0, 'bottom' => 0, 'left' => 0],
                'padding' => ['top' => 0, 'right' => 0, 'bottom' => 0, 'left' => 0]
            ]
        ];
        
        $args['attributes']['effects'] = [
            'type' => 'object',
            'default' => [
                'shadow' => '',
                'blur' => 0,
                'transform' => ''
            ]
        ];
        
        $args['attributes']['responsive'] = [
            'type' => 'object',
            'default' => [
                'hideOnMobile' => false,
                'hideOnTablet' => false,
                'hideOnDesktop' => false
            ]
        ];
        
        return $args;
    }
    
    /**
     * Render custom supports
     */
    public function render_custom_supports($block_content, $block) {
        $attributes = $block['attrs'] ?? [];
        
        // Apply custom spacing
        if (isset($attributes['customSpacing'])) {
            $spacing_styles = $this->generate_spacing_styles($attributes['customSpacing']);
            $block_content = $this->add_inline_styles($block_content, $spacing_styles);
        }
        
        // Apply effects
        if (isset($attributes['effects'])) {
            $effect_styles = $this->generate_effect_styles($attributes['effects']);
            $effect_classes = $this->generate_effect_classes($attributes['effects']);
            
            $block_content = $this->add_inline_styles($block_content, $effect_styles);
            $block_content = $this->add_classes($block_content, $effect_classes);
        }
        
        // Apply responsive visibility
        if (isset($attributes['responsive'])) {
            $responsive_classes = $this->generate_responsive_classes($attributes['responsive']);
            $block_content = $this->add_classes($block_content, $responsive_classes);
        }
        
        return $block_content;
    }
    
    /**
     * Generate spacing styles
     */
    private function generate_spacing_styles($spacing) {
        $styles = [];
        
        if (isset($spacing['margin'])) {
            $m = $spacing['margin'];
            $styles[] = sprintf(
                'margin: %spx %spx %spx %spx',
                $m['top'] ?? 0,
                $m['right'] ?? 0,
                $m['bottom'] ?? 0,
                $m['left'] ?? 0
            );
        }
        
        if (isset($spacing['padding'])) {
            $p = $spacing['padding'];
            $styles[] = sprintf(
                'padding: %spx %spx %spx %spx',
                $p['top'] ?? 0,
                $p['right'] ?? 0,
                $p['bottom'] ?? 0,
                $p['left'] ?? 0
            );
        }
        
        return implode('; ', $styles);
    }
    
    /**
     * Generate effect styles
     */
    private function generate_effect_styles($effects) {
        $styles = [];
        
        if (!empty($effects['shadow'])) {
            $styles[] = 'box-shadow: ' . $effects['shadow'];
        }
        
        if (!empty($effects['blur']) && $effects['blur'] > 0) {
            $styles[] = 'filter: blur(' . $effects['blur'] . 'px)';
        }
        
        if (!empty($effects['transform'])) {
            $styles[] = 'transform: ' . $effects['transform'];
        }
        
        return implode('; ', $styles);
    }
    
    /**
     * Generate responsive classes
     */
    private function generate_responsive_classes($responsive) {
        $classes = [];
        
        if (!empty($responsive['hideOnMobile'])) {
            $classes[] = 'hide-on-mobile';
        }
        
        if (!empty($responsive['hideOnTablet'])) {
            $classes[] = 'hide-on-tablet';
        }
        
        if (!empty($responsive['hideOnDesktop'])) {
            $classes[] = 'hide-on-desktop';
        }
        
        return implode(' ', $classes);
    }
    
    /**
     * Add inline styles to block
     */
    private function add_inline_styles($content, $styles) {
        if (empty($styles)) {
            return $content;
        }
        
        // Find first tag and add style attribute
        return preg_replace(
            '/^(<[^>]+)/',
            '$1 style="' . esc_attr($styles) . '"',
            $content
        );
    }
    
    /**
     * Add classes to block
     */
    private function add_classes($content, $classes) {
        if (empty($classes)) {
            return $content;
        }
        
        // Check if class attribute exists
        if (strpos($content, 'class="') !== false) {
            return preg_replace(
                '/class="([^"]*)"/',
                'class="$1 ' . esc_attr($classes) . '"',
                $content
            );
        } else {
            return preg_replace(
                '/^(<[^>]+)/',
                '$1 class="' . esc_attr($classes) . '"',
                $content
            );
        }
    }
}

new Block_Supports_Extension();
                        </code></pre>
                    </section>
                    
                    <!-- Summary -->
                    <section>
                        <h2>Summary</h2>
                        
                        <div class="summary-box">
                            <h3>Key Takeaways</h3>
                            <ul>
                                <li>Filters allow powerful block modifications</li>
                                <li>HOCs wrap blocks with additional functionality</li>
                                <li>Format types extend RichText capabilities</li>
                                <li>Block styles provide visual variations</li>
                                <li>Custom supports add new block features</li>
                                <li>Extensions maintain upgrade compatibility</li>
                            </ul>
                        </div>
                        
                        <div class="best-practices">
                            <h3>Extension Best Practices</h3>
                            <ul>
                                <li>Use filters instead of forking blocks</li>
                                <li>Check block names before applying changes</li>
                                <li>Maintain backwards compatibility</li>
                                <li>Document your extensions thoroughly</li>
                                <li>Test with theme changes</li>
                                <li>Consider performance impact</li>
                                <li>Provide UI for custom features</li>
                            </ul>
                        </div>
                    </section>
                    
                    <!-- Additional Resources -->
                    <section class="resources">
                        <h2>Additional Resources</h2>
                        <ul>
                            <li><a href="https://developer.wordpress.org/block-editor/reference-guides/filters/" target="_blank">Block Editor Filters</a></li>
                            <li><a href="https://developer.wordpress.org/block-editor/reference-guides/packages/packages-compose/" target="_blank">@wordpress/compose Package</a></li>
                            <li><a href="https://developer.wordpress.org/block-editor/how-to-guides/format-api/" target="_blank">Format API</a></li>
                            <li><a href="https://developer.wordpress.org/block-editor/reference-guides/block-api/block-styles/" target="_blank">Block Styles API</a></li>
                        </ul>
                    </section>
                </div>
                
                <!-- Lesson Navigation -->
                <div class="lesson-navigation">
                    <a href="/07module/dynamic_blocks_patterns.html" class="lesson-nav-button prev">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
                        </svg>
                        <span>
                            <small>Previous</small><br>
                            Dynamic Blocks
                        </span>
                    </a>
                    
                    <button class="complete-lesson-btn">
                        Mark as Complete
                    </button>
                    
                    <a href="/07module/homework_gutenberg.html" class="lesson-nav-button next">
                        <span>
                            <small>Next</small><br>
                            Homework Project
                        </span>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="site-footer" role="contentinfo">
            <div class="footer-container">
                <div class="footer-content">
                    <div class="footer-section footer-about">
                        <h3>PHP WordPress Development</h3>
                        <p>Complete Web Development Course - From HTML to WordPress</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <ul class="footer-links">
                            <li><a href="/">Home</a></li>
                            <li><a href="/module7.html">Module 7</a></li>
                            <li><a href="/resources.html">Resources</a></li>
                            <li><a href="/about.html">About</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2025 PHP WordPress Development Course. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- JavaScript -->
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/lesson.js"></script>
</body>
</html>