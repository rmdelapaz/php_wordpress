<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SEO Meta Tags -->
    <title>Gutenberg Architecture Overview - PHP WordPress Course</title>
    <meta name="description" content="Understand the Gutenberg block editor architecture. Learn about blocks, the data layer, and React components in WordPress.">
    <meta name="keywords" content="WordPress, Gutenberg, block editor, React, architecture">
    <meta name="author" content="PHP WordPress Course">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Gutenberg Architecture Overview">
    <meta property="og:description" content="Master the Gutenberg block editor architecture">
    <meta property="og:type" content="article">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    
    <!-- Prism.js for syntax highlighting -->
    <link href="/assets/css/prism.css" rel="stylesheet">
</head>
<body>
    <!-- Skip to main content -->
    <a href="#main-content" class="sr-only">Skip to main content</a>
    
    <div class="page-wrapper">
        <!-- Header -->
        <header class="site-header" role="banner">
            <div class="header-container">
                <div class="site-branding">
                    <a href="/" class="site-logo">
                        <h1 class="site-title">PHP WordPress Development</h1>
                    </a>
                </div>
                
                <nav class="main-navigation" role="navigation" aria-label="Main navigation">
                    <button class="mobile-menu-btn" aria-label="Toggle navigation" aria-expanded="false">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    
                    <div class="nav-menu">
                        <ul class="nav-list">
                            <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
                            <li class="nav-item dropdown">
                                <button class="nav-link dropdown-toggle active" aria-haspopup="true">Modules</button>
                                <div class="dropdown-menu">
                                    <a href="/module1.html" class="dropdown-item">Module 1: Web Fundamentals</a>
                                    <a href="/module2.html" class="dropdown-item">Module 2: PHP Fundamentals</a>
                                    <a href="/module3.html" class="dropdown-item">Module 3: MySQL Database</a>
                                    <a href="/module4.html" class="dropdown-item">Module 4: WordPress & Docker</a>
                                    <a href="/module5.html" class="dropdown-item">Module 5: Theme Development</a>
                                    <a href="/module6.html" class="dropdown-item">Module 6: Plugin Development</a>
                                    <a href="/module7.html" class="dropdown-item active">Module 7: Advanced WordPress</a>
                                    <a href="/module8.html" class="dropdown-item">Module 8: Deployment</a>
                                    <a href="/module9.html" class="dropdown-item">Module 9: Final Project</a>
                                </div>
                            </li>
                            <li class="nav-item"><a href="/resources.html" class="nav-link">Resources</a></li>
                            <li class="nav-item"><a href="/about.html" class="nav-link">About</a></li>
                        </ul>
                    </div>
                </nav>
                
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                        <input type="search" class="search-input" placeholder="Search lessons..." aria-label="Search">
                    </div>
                    <div class="search-results"></div>
                </div>
            </div>
        </header>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-header">
                <h2 class="progress-title">Course Progress</h2>
                <span class="progress-text">Loading...</span>
            </div>
            <div class="progress-bar">
                <div class="progress-bar-fill">
                    <span class="progress-bar-text"></span>
                </div>
            </div>
        </div>
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb container" aria-label="Breadcrumb">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <a href="/module7.html">Module 7</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <span aria-current="page">Gutenberg Architecture</span>
                </li>
            </ol>
        </nav>
        
        <!-- Main Content -->
        <main id="main-content" class="main-content" role="main">
            <div class="container">
                <!-- Lesson Header -->
                <div class="lesson-header">
                    <h1 class="lesson-title">Gutenberg Architecture Overview</h1>
                    <p class="lesson-subtitle">Understanding the modern WordPress block editor system</p>
                </div>
                
                <!-- Learning Objectives -->
                <div class="lesson-objectives">
                    <h2>Learning Objectives</h2>
                    <p>By the end of this lesson, you will be able to:</p>
                    <ul>
                        <li>Understand Gutenberg's architecture and components</li>
                        <li>Navigate the block editor data flow</li>
                        <li>Understand React and Redux in WordPress</li>
                        <li>Work with WordPress packages</li>
                        <li>Understand block categories and types</li>
                        <li>Set up a development environment</li>
                    </ul>
                </div>
                
                <!-- Lesson Body -->
                <div class="lesson-body">
                    <!-- Gutenberg Overview -->
                    <section>
                        <h2>What is Gutenberg?</h2>
                        
                        <p>Gutenberg is WordPress's modern block-based editor, built with React. It transforms content creation from a single rich text field to a collection of discrete blocks.</p>
                        
                        <h3>Core Concepts</h3>
                        <pre><code class="language-javascript">
/**
 * Gutenberg Core Concepts
 * 
 * 1. Blocks - The fundamental unit of content
 * 2. Block Editor - The React application
 * 3. Data Layer - Redux-based state management
 * 4. REST API - Server communication
 * 5. Block Grammar - HTML comment delimiters
 */

// A block in the editor
const blockExample = {
    name: 'core/paragraph',
    attributes: {
        content: 'This is a paragraph block',
        align: 'left',
        dropCap: false
    },
    innerBlocks: []
};

// How it's saved in the database
const savedHTML = `
<!-- wp:paragraph {"align":"left"} -->
<p class="has-text-align-left">This is a paragraph block</p>
<!-- /wp:paragraph -->
`;

// The block type definition
const blockType = {
    title: 'Paragraph',
    icon: 'editor-paragraph',
    category: 'text',
    attributes: {
        content: {
            type: 'string',
            source: 'html',
            selector: 'p'
        }
    },
    edit: EditComponent,
    save: SaveComponent
};
                        </code></pre>
                    </section>
                    
                    <!-- Architecture Components -->
                    <section>
                        <h2>Architecture Components</h2>
                        
                        <h3>The WordPress Packages</h3>
                        <pre><code class="language-javascript">
/**
 * Key WordPress Packages for Gutenberg Development
 */

// @wordpress/blocks - Block registration and manipulation
import { registerBlockType, createBlock } from '@wordpress/blocks';

// @wordpress/block-editor - Editor components and hooks
import { 
    RichText, 
    BlockControls, 
    InspectorControls,
    useBlockProps 
} from '@wordpress/block-editor';

// @wordpress/components - Reusable UI components
import { 
    Button, 
    Panel, 
    PanelBody,
    TextControl,
    ToggleControl,
    RangeControl 
} from '@wordpress/components';

// @wordpress/data - Data management
import { useSelect, useDispatch, select, dispatch } from '@wordpress/data';

// @wordpress/element - React abstraction
import { useState, useEffect, createElement } from '@wordpress/element';

// @wordpress/i18n - Internationalization
import { __, _x, sprintf } from '@wordpress/i18n';

// @wordpress/hooks - WordPress hooks system
import { addFilter, applyFilters, addAction, doAction } from '@wordpress/hooks';

// @wordpress/compose - Higher-order components and hooks
import { 
    withInstanceId, 
    compose, 
    useDebounce,
    usePrevious 
} from '@wordpress/compose';
                        </code></pre>
                        
                        <h3>Data Layer Architecture</h3>
                        <pre><code class="language-javascript">
/**
 * Gutenberg Data Layer (Redux-based)
 */

// Store structure
const gutenbergStores = {
    'core': {               // WordPress core data
        entities: {},       // Posts, pages, users, etc.
        currentUser: {}
    },
    'core/editor': {        // Editor state
        blocks: [],         // Current blocks
        selection: {},      // Selected blocks
        edits: {}          // Unsaved changes
    },
    'core/block-editor': { // Block editor UI state
        settings: {},      // Editor settings
        insertionPoint: {},
        blockListSettings: {}
    },
    'core/notices': {      // Notifications
        notices: []
    }
};

// Accessing data with selectors
const ExampleComponent = () => {
    // Get current post
    const post = useSelect((select) => {
        return select('core/editor').getCurrentPost();
    }, []);
    
    // Get all blocks
    const blocks = useSelect((select) => {
        return select('core/block-editor').getBlocks();
    }, []);
    
    // Get specific block
    const block = useSelect((select) => {
        return select('core/block-editor').getBlock(clientId);
    }, [clientId]);
    
    // Get editor settings
    const settings = useSelect((select) => {
        return select('core/block-editor').getSettings();
    }, []);
    
    return <div>Component content</div>;
};

// Dispatching actions
const ActionsExample = () => {
    const { updateBlockAttributes, insertBlock } = useDispatch('core/block-editor');
    const { editPost, savePost } = useDispatch('core/editor');
    const { createNotice } = useDispatch('core/notices');
    
    const handleUpdate = () => {
        // Update block attributes
        updateBlockAttributes(clientId, {
            content: 'New content'
        });
        
        // Update post meta
        editPost({
            meta: {
                custom_field: 'value'
            }
        });
        
        // Save the post
        savePost().then(() => {
            createNotice(
                'success',
                'Post saved successfully!',
                {
                    type: 'snackbar',
                    isDismissible: true
                }
            );
        });
    };
    
    return <Button onClick={handleUpdate}>Update</Button>;
};
                        </code></pre>
                    </section>
                    
                    <!-- Block Structure -->
                    <section>
                        <h2>Block Structure and Lifecycle</h2>
                        
                        <h3>Block Registration Process</h3>
                        <pre><code class="language-javascript">
/**
 * Complete block registration with all options
 */
import { registerBlockType } from '@wordpress/blocks';
import { __ } from '@wordpress/i18n';

// Block metadata (can also be in block.json)
const metadata = {
    apiVersion: 2,
    name: 'myplugin/custom-block',
    title: 'Custom Block',
    category: 'widgets',
    icon: 'smiley',
    description: 'A custom Gutenberg block',
    keywords: ['custom', 'block', 'example'],
    attributes: {
        content: {
            type: 'string',
            source: 'html',
            selector: 'p',
            default: ''
        },
        alignment: {
            type: 'string',
            default: 'left'
        },
        backgroundColor: {
            type: 'string'
        },
        textColor: {
            type: 'string'
        }
    },
    example: {
        attributes: {
            content: 'This is an example',
            alignment: 'center'
        }
    },
    supports: {
        html: false,
        anchor: true,
        customClassName: true,
        className: false,
        align: ['left', 'center', 'right', 'wide', 'full'],
        color: {
            background: true,
            text: true,
            gradients: true
        },
        spacing: {
            margin: true,
            padding: true
        },
        typography: {
            fontSize: true,
            lineHeight: true
        }
    },
    parent: ['core/column'],
    textdomain: 'myplugin'
};

// Edit component (Editor interface)
const Edit = (props) => {
    const {
        attributes,
        setAttributes,
        className,
        clientId,
        isSelected
    } = props;
    
    const blockProps = useBlockProps({
        className: `align${attributes.alignment}`
    });
    
    return (
        <div {...blockProps}>
            <BlockControls>
                <AlignmentToolbar
                    value={attributes.alignment}
                    onChange={(alignment) => setAttributes({ alignment })}
                />
            </BlockControls>
            
            <InspectorControls>
                <PanelBody title={__('Settings', 'myplugin')}>
                    <SelectControl
                        label={__('Alignment', 'myplugin')}
                        value={attributes.alignment}
                        options={[
                            { label: 'Left', value: 'left' },
                            { label: 'Center', value: 'center' },
                            { label: 'Right', value: 'right' }
                        ]}
                        onChange={(alignment) => setAttributes({ alignment })}
                    />
                </PanelBody>
            </InspectorControls>
            
            <RichText
                tagName="p"
                value={attributes.content}
                onChange={(content) => setAttributes({ content })}
                placeholder={__('Enter content...', 'myplugin')}
            />
        </div>
    );
};

// Save component (Frontend output)
const Save = (props) => {
    const { attributes } = props;
    const blockProps = useBlockProps.save({
        className: `align${attributes.alignment}`
    });
    
    return (
        <div {...blockProps}>
            <RichText.Content
                tagName="p"
                value={attributes.content}
            />
        </div>
    );
};

// Register the block
registerBlockType(metadata.name, {
    ...metadata,
    edit: Edit,
    save: Save
});
                        </code></pre>
                        
                        <h3>Block Lifecycle Hooks</h3>
                        <pre><code class="language-javascript">
/**
 * Block lifecycle and hooks
 */
import { useEffect, useState, useRef } from '@wordpress/element';
import { useSelect, useDispatch } from '@wordpress/data';

const BlockWithLifecycle = ({ clientId, attributes, setAttributes }) => {
    const [isInitialized, setIsInitialized] = useState(false);
    const prevAttributes = useRef(attributes);
    
    // Component mount (similar to componentDidMount)
    useEffect(() => {
        console.log('Block mounted');
        setIsInitialized(true);
        
        // Cleanup on unmount
        return () => {
            console.log('Block unmounted');
        };
    }, []); // Empty dependency array = run once
    
    // Attribute changes (similar to componentDidUpdate)
    useEffect(() => {
        if (isInitialized) {
            console.log('Attributes changed:', {
                prev: prevAttributes.current,
                current: attributes
            });
            
            // Perform side effects
            if (attributes.someValue !== prevAttributes.current.someValue) {
                // Handle specific attribute change
                performSideEffect();
            }
            
            prevAttributes.current = attributes;
        }
    }, [attributes, isInitialized]);
    
    // Selection state
    const isSelected = useSelect((select) => {
        return select('core/block-editor').isBlockSelected(clientId);
    }, [clientId]);
    
    useEffect(() => {
        if (isSelected) {
            console.log('Block selected');
        } else {
            console.log('Block deselected');
        }
    }, [isSelected]);
    
    // Parent/child relationships
    const { parentBlock, childBlocks } = useSelect((select) => {
        const { getBlockParents, getBlock, getBlocks } = select('core/block-editor');
        const parents = getBlockParents(clientId);
        
        return {
            parentBlock: parents.length ? getBlock(parents[0]) : null,
            childBlocks: getBlocks(clientId)
        };
    }, [clientId]);
    
    return <div>Block content</div>;
};
                        </code></pre>
                    </section>
                    
                    <!-- Development Environment -->
                    <section>
                        <h2>Setting Up Development Environment</h2>
                        
                        <h3>Using @wordpress/scripts</h3>
                        <pre><code class="language-bash">
# Create plugin structure
mkdir my-gutenberg-blocks
cd my-gutenberg-blocks

# Initialize npm
npm init -y

# Install WordPress scripts
npm install --save-dev @wordpress/scripts

# Install WordPress dependencies
npm install @wordpress/blocks @wordpress/i18n @wordpress/element @wordpress/block-editor @wordpress/components
                        </code></pre>
                        
                        <h3>Package.json Configuration</h3>
                        <pre><code class="language-json">
{
  "name": "my-gutenberg-blocks",
  "version": "1.0.0",
  "description": "Custom Gutenberg blocks",
  "main": "build/index.js",
  "scripts": {
    "build": "wp-scripts build",
    "start": "wp-scripts start",
    "lint:js": "wp-scripts lint-js",
    "lint:css": "wp-scripts lint-style",
    "packages-update": "wp-scripts packages-update",
    "format": "wp-scripts format"
  },
  "devDependencies": {
    "@wordpress/scripts": "^24.0.0"
  },
  "dependencies": {
    "@wordpress/block-editor": "^10.0.0",
    "@wordpress/blocks": "^11.0.0",
    "@wordpress/components": "^19.0.0",
    "@wordpress/element": "^4.0.0",
    "@wordpress/i18n": "^4.0.0"
  }
}
                        </code></pre>
                        
                        <h3>Plugin Structure</h3>
                        <pre><code class="language-php">
&lt;?php
/**
 * Plugin Name: My Gutenberg Blocks
 * Description: Custom Gutenberg blocks plugin
 * Version: 1.0.0
 * Author: Your Name
 */

// Exit if accessed directly
if (!defined('ABSPATH')) {
    exit;
}

class My_Gutenberg_Blocks {
    
    public function __construct() {
        add_action('init', [$this, 'register_blocks']);
        add_action('enqueue_block_editor_assets', [$this, 'enqueue_block_editor_assets']);
        add_action('enqueue_block_assets', [$this, 'enqueue_block_assets']);
    }
    
    /**
     * Register blocks
     */
    public function register_blocks() {
        // Register block with block.json
        register_block_type(__DIR__ . '/build/blocks/custom-block');
        
        // Or register with PHP
        register_block_type('myplugin/dynamic-block', [
            'api_version' => 2,
            'editor_script' => 'my-blocks-editor',
            'editor_style' => 'my-blocks-editor',
            'style' => 'my-blocks',
            'render_callback' => [$this, 'render_dynamic_block'],
            'attributes' => [
                'content' => [
                    'type' => 'string',
                    'default' => ''
                ]
            ]
        ]);
    }
    
    /**
     * Enqueue block editor only assets
     */
    public function enqueue_block_editor_assets() {
        wp_enqueue_script(
            'my-blocks-editor',
            plugins_url('build/index.js', __FILE__),
            ['wp-blocks', 'wp-element', 'wp-editor', 'wp-components', 'wp-i18n'],
            filemtime(plugin_dir_path(__FILE__) . 'build/index.js')
        );
        
        wp_enqueue_style(
            'my-blocks-editor',
            plugins_url('build/editor.css', __FILE__),
            ['wp-edit-blocks'],
            filemtime(plugin_dir_path(__FILE__) . 'build/editor.css')
        );
        
        // Localize script
        wp_localize_script('my-blocks-editor', 'myBlocksData', [
            'apiUrl' => home_url('/wp-json'),
            'nonce' => wp_create_nonce('wp_rest'),
            'postTypes' => $this->get_post_types(),
            'categories' => $this->get_categories()
        ]);
    }
    
    /**
     * Enqueue frontend and editor assets
     */
    public function enqueue_block_assets() {
        // Only on frontend
        if (!is_admin()) {
            wp_enqueue_style(
                'my-blocks',
                plugins_url('build/style.css', __FILE__),
                [],
                filemtime(plugin_dir_path(__FILE__) . 'build/style.css')
            );
            
            wp_enqueue_script(
                'my-blocks-frontend',
                plugins_url('build/frontend.js', __FILE__),
                [],
                filemtime(plugin_dir_path(__FILE__) . 'build/frontend.js'),
                true
            );
        }
    }
    
    /**
     * Render callback for dynamic blocks
     */
    public function render_dynamic_block($attributes, $content) {
        $recent_posts = wp_get_recent_posts([
            'numberposts' => 5,
            'post_status' => 'publish'
        ]);
        
        if (empty($recent_posts)) {
            return '<p>No posts found</p>';
        }
        
        $output = '<ul class="wp-block-myplugin-dynamic-block">';
        foreach ($recent_posts as $post) {
            $output .= sprintf(
                '<li><a href="%s">%s</a></li>',
                esc_url(get_permalink($post['ID'])),
                esc_html($post['post_title'])
            );
        }
        $output .= '</ul>';
        
        return $output;
    }
    
    /**
     * Get post types for block
     */
    private function get_post_types() {
        $post_types = get_post_types(['public' => true], 'objects');
        $result = [];
        
        foreach ($post_types as $post_type) {
            $result[] = [
                'value' => $post_type->name,
                'label' => $post_type->label
            ];
        }
        
        return $result;
    }
    
    /**
     * Get categories for block
     */
    private function get_categories() {
        $categories = get_categories(['hide_empty' => false]);
        $result = [];
        
        foreach ($categories as $category) {
            $result[] = [
                'value' => $category->term_id,
                'label' => $category->name
            ];
        }
        
        return $result;
    }
}

new My_Gutenberg_Blocks();
                        </code></pre>
                    </section>
                    
                    <!-- Block Categories -->
                    <section>
                        <h2>Block Categories and Registration</h2>
                        
                        <h3>Custom Block Categories</h3>
                        <pre><code class="language-javascript">
/**
 * Register custom block categories
 */
import { addFilter } from '@wordpress/hooks';
import { __ } from '@wordpress/i18n';

// Add custom category
function addCustomCategory(categories) {
    return [
        {
            slug: 'my-custom-category',
            title: __('My Custom Blocks', 'myplugin'),
            icon: 'wordpress', // Dashicon or custom SVG
        },
        ...categories
    ];
}

addFilter(
    'blocks.registerBlockType',
    'myplugin/add-custom-category',
    addCustomCategory
);

// Modify existing block registration
function modifyBlockRegistration(settings, name) {
    // Change category for specific blocks
    if (name === 'core/paragraph') {
        return {
            ...settings,
            category: 'my-custom-category'
        };
    }
    
    // Add custom attributes to existing blocks
    if (name === 'core/image') {
        return {
            ...settings,
            attributes: {
                ...settings.attributes,
                customAttribute: {
                    type: 'string',
                    default: ''
                }
            }
        };
    }
    
    return settings;
}

addFilter(
    'blocks.registerBlockType',
    'myplugin/modify-block-registration',
    modifyBlockRegistration
);

// Filter block supports
function filterBlockSupports(settings, name) {
    // Disable certain features for specific blocks
    if (name === 'core/paragraph') {
        return {
            ...settings,
            supports: {
                ...settings.supports,
                color: false,
                fontSize: false
            }
        };
    }
    
    return settings;
}

addFilter(
    'blocks.registerBlockType',
    'myplugin/filter-block-supports',
    filterBlockSupports
);
                        </code></pre>
                    </section>
                    
                    <!-- Block Variations -->
                    <section>
                        <h2>Block Variations and Styles</h2>
                        
                        <h3>Creating Block Variations</h3>
                        <pre><code class="language-javascript">
/**
 * Block variations - different configurations of the same block
 */
import { registerBlockVariation } from '@wordpress/blocks';
import { __ } from '@wordpress/i18n';

// Register variations for existing blocks
registerBlockVariation('core/button', {
    name: 'primary-button',
    title: __('Primary Button', 'myplugin'),
    description: __('A primary call-to-action button', 'myplugin'),
    icon: 'button',
    attributes: {
        className: 'is-style-primary',
        backgroundColor: 'primary',
        textColor: 'white'
    },
    scope: ['inserter', 'transform'],
    isDefault: false,
    example: {
        attributes: {
            text: 'Click Me!'
        }
    }
});

// Multiple variations for custom block
const blockVariations = [
    {
        name: 'card-with-image',
        title: __('Card with Image', 'myplugin'),
        icon: 'format-image',
        attributes: {
            hasImage: true,
            imagePosition: 'top'
        },
        innerBlocks: [
            ['core/image'],
            ['core/heading', { level: 3 }],
            ['core/paragraph']
        ]
    },
    {
        name: 'card-no-image',
        title: __('Card without Image', 'myplugin'),
        icon: 'text',
        attributes: {
            hasImage: false
        },
        innerBlocks: [
            ['core/heading', { level: 3 }],
            ['core/paragraph'],
            ['core/button']
        ]
    }
];

// Register with block
registerBlockType('myplugin/card', {
    title: __('Card', 'myplugin'),
    icon: 'index-card',
    category: 'design',
    variations: blockVariations,
    edit: Edit,
    save: Save
});

// Block styles (visual variations)
import { registerBlockStyle, unregisterBlockStyle } from '@wordpress/blocks';

// Add custom styles to existing blocks
registerBlockStyle('core/quote', {
    name: 'fancy-quote',
    label: __('Fancy Quote', 'myplugin'),
    isDefault: false
});

registerBlockStyle('core/button', [
    {
        name: 'gradient',
        label: __('Gradient', 'myplugin')
    },
    {
        name: 'outline',
        label: __('Outline', 'myplugin')
    }
]);

// Remove default styles
unregisterBlockStyle('core/quote', 'large');
                        </code></pre>
                    </section>
                    
                    <!-- Block Transforms -->
                    <section>
                        <h2>Block Transforms and Deprecations</h2>
                        
                        <h3>Block Transforms</h3>
                        <pre><code class="language-javascript">
/**
 * Block transforms - converting between block types
 */
registerBlockType('myplugin/custom-heading', {
    title: 'Custom Heading',
    // ... other settings
    
    transforms: {
        from: [
            {
                type: 'block',
                blocks: ['core/paragraph'],
                transform: (attributes) => {
                    return createBlock('myplugin/custom-heading', {
                        content: attributes.content,
                        level: 2
                    });
                }
            },
            {
                type: 'block',
                blocks: ['core/heading'],
                transform: (attributes) => {
                    return createBlock('myplugin/custom-heading', {
                        content: attributes.content,
                        level: attributes.level
                    });
                }
            },
            {
                type: 'enter',
                regExp: /^#{1,6}\s/,
                transform: (value) => {
                    const level = value.match(/^(#{1,6})\s/)[1].length;
                    const content = value.replace(/^#{1,6}\s/, '');
                    
                    return createBlock('myplugin/custom-heading', {
                        content,
                        level
                    });
                }
            },
            {
                type: 'raw',
                selector: 'h1,h2,h3,h4,h5,h6',
                schema: {
                    h1: { children: { '#text': {} } },
                    h2: { children: { '#text': {} } },
                    // ... etc
                },
                transform: (node) => {
                    const level = parseInt(node.nodeName.replace('H', ''));
                    const content = node.textContent;
                    
                    return createBlock('myplugin/custom-heading', {
                        content,
                        level
                    });
                }
            }
        ],
        to: [
            {
                type: 'block',
                blocks: ['core/paragraph'],
                transform: (attributes) => {
                    return createBlock('core/paragraph', {
                        content: attributes.content
                    });
                }
            },
            {
                type: 'block',
                blocks: ['core/heading'],
                transform: (attributes) => {
                    return createBlock('core/heading', {
                        content: attributes.content,
                        level: attributes.level
                    });
                }
            }
        ]
    }
});

/**
 * Block deprecations - handling old versions
 */
const deprecated = [
    {
        // Version 1 - old attribute structure
        attributes: {
            content: {
                type: 'string',
                source: 'html',
                selector: 'p'
            }
        },
        save(props) {
            return (
                <p>{props.attributes.content}</p>
            );
        },
        migrate(attributes) {
            return {
                text: attributes.content, // Rename attribute
                alignment: 'left' // Add new attribute
            };
        },
        isEligible(attributes) {
            return attributes.content !== undefined;
        }
    },
    {
        // Version 2 - different markup
        attributes: {
            text: {
                type: 'string',
                source: 'html',
                selector: 'div.content'
            }
        },
        save(props) {
            return (
                <div className="old-wrapper">
                    <div className="content">{props.attributes.text}</div>
                </div>
            );
        },
        migrate(attributes) {
            return attributes; // No migration needed
        }
    }
];

registerBlockType('myplugin/versioned-block', {
    // Current version
    attributes: {
        text: {
            type: 'string',
            source: 'html',
            selector: 'p'
        },
        alignment: {
            type: 'string',
            default: 'left'
        }
    },
    deprecated, // Add deprecated versions
    edit: Edit,
    save: Save
});
                        </code></pre>
                    </section>
                    
                    <!-- Summary -->
                    <section>
                        <h2>Summary</h2>
                        
                        <div class="summary-box">
                            <h3>Key Takeaways</h3>
                            <ul>
                                <li>Gutenberg is built on React and uses a Redux-like data layer</li>
                                <li>Blocks are the fundamental unit of content</li>
                                <li>WordPress provides extensive packages for block development</li>
                                <li>The data layer manages editor state and content</li>
                                <li>Block registration includes edit and save components</li>
                                <li>Development uses modern JavaScript build tools</li>
                            </ul>
                        </div>
                        
                        <div class="best-practices">
                            <h3>Architecture Best Practices</h3>
                            <ul>
                                <li>Use WordPress packages instead of external dependencies</li>
                                <li>Follow the single responsibility principle for blocks</li>
                                <li>Implement proper deprecation handling</li>
                                <li>Use block.json for metadata when possible</li>
                                <li>Leverage block supports for common features</li>
                                <li>Consider performance with large block trees</li>
                                <li>Plan for backwards compatibility</li>
                            </ul>
                        </div>
                    </section>
                    
                    <!-- Additional Resources -->
                    <section class="resources">
                        <h2>Additional Resources</h2>
                        <ul>
                            <li><a href="https://developer.wordpress.org/block-editor/" target="_blank">Block Editor Handbook</a></li>
                            <li><a href="https://github.com/WordPress/gutenberg" target="_blank">Gutenberg GitHub Repository</a></li>
                            <li><a href="https://wordpress.org/gutenberg/" target="_blank">Gutenberg Plugin</a></li>
                            <li><a href="https://developer.wordpress.org/block-editor/reference-guides/packages/" target="_blank">WordPress Packages Reference</a></li>
                        </ul>
                    </section>
                </div>
                
                <!-- Lesson Navigation -->
                <div class="lesson-navigation">
                    <a href="/07module/homework_rest_api.html" class="lesson-nav-button prev">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
                        </svg>
                        <span>
                            <small>Previous</small><br>
                            REST API Homework
                        </span>
                    </a>
                    
                    <button class="complete-lesson-btn">
                        Mark as Complete
                    </button>
                    
                    <a href="/07module/block_development_environment.html" class="lesson-nav-button next">
                        <span>
                            <small>Next</small><br>
                            Development Environment
                        </span>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="site-footer" role="contentinfo">
            <div class="footer-container">
                <div class="footer-content">
                    <div class="footer-section footer-about">
                        <h3>PHP WordPress Development</h3>
                        <p>Complete Web Development Course - From HTML to WordPress</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <ul class="footer-links">
                            <li><a href="/">Home</a></li>
                            <li><a href="/module7.html">Module 7</a></li>
                            <li><a href="/resources.html">Resources</a></li>
                            <li><a href="/about.html">About</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2025 PHP WordPress Development Course. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- JavaScript -->
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/lesson.js"></script>
</body>
</html>