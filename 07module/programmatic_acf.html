<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SEO Meta Tags -->
    <title>Programmatically Creating ACF Fields - PHP WordPress Course</title>
    <meta name="description" content="Learn to create and manage ACF fields programmatically with PHP. Master field registration, dynamic fields, and code-based configuration.">
    <meta name="keywords" content="WordPress, ACF, programmatic fields, PHP, field registration, dynamic fields">
    <meta name="author" content="PHP WordPress Course">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="Programmatically Creating ACF Fields">
    <meta property="og:description" content="Master programmatic field creation in Advanced Custom Fields">
    <meta property="og:type" content="article">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    
    <!-- Prism.js for syntax highlighting -->
    <link href="/assets/css/prism.css" rel="stylesheet">
</head>
<body>
    <!-- Skip to main content -->
    <a href="#main-content" class="sr-only">Skip to main content</a>
    
    <div class="page-wrapper">
        <!-- Header -->
        <header class="site-header" role="banner">
            <div class="header-container">
                <div class="site-branding">
                    <a href="/" class="site-logo">
                        <h1 class="site-title">PHP WordPress Development</h1>
                    </a>
                </div>
                
                <nav class="main-navigation" role="navigation" aria-label="Main navigation">
                    <button class="mobile-menu-btn" aria-label="Toggle navigation" aria-expanded="false">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    
                    <div class="nav-menu">
                        <ul class="nav-list">
                            <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
                            <li class="nav-item dropdown">
                                <button class="nav-link dropdown-toggle active" aria-haspopup="true">Modules</button>
                                <div class="dropdown-menu">
                                    <a href="/module1.html" class="dropdown-item">Module 1: Web Fundamentals</a>
                                    <a href="/module2.html" class="dropdown-item">Module 2: PHP Fundamentals</a>
                                    <a href="/module3.html" class="dropdown-item">Module 3: MySQL Database</a>
                                    <a href="/module4.html" class="dropdown-item">Module 4: WordPress & Docker</a>
                                    <a href="/module5.html" class="dropdown-item">Module 5: Theme Development</a>
                                    <a href="/module6.html" class="dropdown-item">Module 6: Plugin Development</a>
                                    <a href="/module7.html" class="dropdown-item active">Module 7: Advanced WordPress</a>
                                    <a href="/module8.html" class="dropdown-item">Module 8: Deployment</a>
                                    <a href="/module9.html" class="dropdown-item">Module 9: Final Project</a>
                                </div>
                            </li>
                            <li class="nav-item"><a href="/resources.html" class="nav-link">Resources</a></li>
                            <li class="nav-item"><a href="/about.html" class="nav-link">About</a></li>
                        </ul>
                    </div>
                </nav>
                
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                        <input type="search" class="search-input" placeholder="Search lessons..." aria-label="Search">
                    </div>
                    <div class="search-results"></div>
                </div>
            </div>
        </header>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-header">
                <h2 class="progress-title">Course Progress</h2>
                <span class="progress-text">Loading...</span>
            </div>
            <div class="progress-bar">
                <div class="progress-bar-fill">
                    <span class="progress-bar-text"></span>
                </div>
            </div>
        </div>
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb container" aria-label="Breadcrumb">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <a href="/module7.html">Module 7</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <span aria-current="page">Programmatic ACF</span>
                </li>
            </ol>
        </nav>
        
        <!-- Main Content -->
        <main id="main-content" class="main-content" role="main">
            <div class="container">
                <!-- Lesson Header -->
                <div class="lesson-header">
                    <h1 class="lesson-title">Programmatically Creating ACF Fields</h1>
                    <p class="lesson-subtitle">Master code-based field registration and dynamic field generation</p>
                </div>
                
                <!-- Learning Objectives -->
                <div class="lesson-objectives">
                    <h2>Learning Objectives</h2>
                    <p>By the end of this lesson, you will be able to:</p>
                    <ul>
                        <li>Register field groups programmatically with PHP</li>
                        <li>Create dynamic fields based on conditions</li>
                        <li>Import and export field configurations</li>
                        <li>Build reusable field components</li>
                        <li>Manage fields across environments</li>
                        <li>Generate fields from configuration files</li>
                    </ul>
                </div>
                
                <!-- Lesson Body -->
                <div class="lesson-body">
                    <!-- Why Programmatic Registration -->
                    <section>
                        <h2>Why Register Fields Programmatically?</h2>
                        
                        <div class="info-box">
                            <h3>Benefits of Code-Based Registration</h3>
                            <ul>
                                <li><strong>Version Control:</strong> Track field changes in Git</li>
                                <li><strong>Deployment:</strong> Consistent fields across environments</li>
                                <li><strong>Performance:</strong> No database queries for field definitions</li>
                                <li><strong>Dynamic Fields:</strong> Generate fields based on logic</li>
                                <li><strong>Reusability:</strong> Share field groups across projects</li>
                                <li><strong>Documentation:</strong> Self-documenting code</li>
                                <li><strong>No UI Dependency:</strong> Works even if ACF admin is hidden</li>
                            </ul>
                        </div>
                    </section>
                    
                    <!-- Basic Registration -->
                    <section>
                        <h2>Basic Field Registration</h2>
                        
                        <h3>Registering a Simple Field Group</h3>
                        <pre><code class="language-php">
// Register field group on init
add_action('acf/init', 'my_acf_init');
function my_acf_init() {
    
    // Check if function exists
    if (!function_exists('acf_add_local_field_group')) {
        return;
    }
    
    // Register field group
    acf_add_local_field_group([
        'key' => 'group_5f4c8e7d12345',
        'title' => 'Page Settings',
        'fields' => [
            [
                'key' => 'field_5f4c8e7d23456',
                'label' => 'Page Subtitle',
                'name' => 'page_subtitle',
                'type' => 'text',
                'instructions' => 'Enter a subtitle for this page',
                'required' => 0,
                'conditional_logic' => 0,
                'wrapper' => [
                    'width' => '',
                    'class' => '',
                    'id' => '',
                ],
                'default_value' => '',
                'placeholder' => 'Enter subtitle here',
                'prepend' => '',
                'append' => '',
                'maxlength' => 100,
            ],
            [
                'key' => 'field_5f4c8e7d34567',
                'label' => 'Hide Page Title',
                'name' => 'hide_page_title',
                'type' => 'true_false',
                'instructions' => 'Hide the main page title',
                'required' => 0,
                'conditional_logic' => 0,
                'wrapper' => [
                    'width' => '50',
                    'class' => '',
                    'id' => '',
                ],
                'message' => 'Yes, hide the page title',
                'default_value' => 0,
                'ui' => 1,
                'ui_on_text' => 'Hidden',
                'ui_off_text' => 'Visible',
            ],
        ],
        'location' => [
            [
                [
                    'param' => 'post_type',
                    'operator' => '==',
                    'value' => 'page',
                ],
            ],
        ],
        'menu_order' => 0,
        'position' => 'normal',
        'style' => 'default',
        'label_placement' => 'top',
        'instruction_placement' => 'label',
        'hide_on_screen' => '',
        'active' => true,
        'description' => 'Additional page settings',
    ]);
}
                        </code></pre>
                        
                        <h3>Alternative Registration Method</h3>
                        <pre><code class="language-php">
// Using acf_add_local_field separately
add_action('acf/init', function() {
    
    // Register field group first
    acf_add_local_field_group([
        'key' => 'group_custom_fields',
        'title' => 'Custom Fields',
        'fields' => [],
        'location' => [
            [
                [
                    'param' => 'post_type',
                    'operator' => '==',
                    'value' => 'post',
                ],
            ],
        ],
    ]);
    
    // Add fields to the group
    acf_add_local_field([
        'key' => 'field_custom_1',
        'label' => 'Custom Field 1',
        'name' => 'custom_field_1',
        'type' => 'text',
        'parent' => 'group_custom_fields',
    ]);
    
    acf_add_local_field([
        'key' => 'field_custom_2',
        'label' => 'Custom Field 2',
        'name' => 'custom_field_2',
        'type' => 'textarea',
        'parent' => 'group_custom_fields',
    ]);
});
                        </code></pre>
                    </section>
                    
                    <!-- Dynamic Field Generation -->
                    <section>
                        <h2>Dynamic Field Generation</h2>
                        
                        <h3>Generating Fields from Data</h3>
                        <pre><code class="language-php">
// Generate fields based on custom post types
add_action('acf/init', 'generate_cpt_settings');
function generate_cpt_settings() {
    
    // Get all custom post types
    $post_types = get_post_types(['public' => true, '_builtin' => false], 'objects');
    
    $fields = [];
    
    foreach ($post_types as $post_type) {
        // Create a tab for each post type
        $fields[] = [
            'key' => 'field_tab_' . $post_type->name,
            'label' => $post_type->label . ' Settings',
            'name' => '',
            'type' => 'tab',
            'placement' => 'left',
        ];
        
        // Archive settings
        $fields[] = [
            'key' => 'field_' . $post_type->name . '_archive_title',
            'label' => 'Archive Title',
            'name' => $post_type->name . '_archive_title',
            'type' => 'text',
            'default_value' => $post_type->label,
        ];
        
        $fields[] = [
            'key' => 'field_' . $post_type->name . '_archive_description',
            'label' => 'Archive Description',
            'name' => $post_type->name . '_archive_description',
            'type' => 'textarea',
            'rows' => 3,
        ];
        
        $fields[] = [
            'key' => 'field_' . $post_type->name . '_posts_per_page',
            'label' => 'Posts Per Page',
            'name' => $post_type->name . '_posts_per_page',
            'type' => 'number',
            'default_value' => 10,
            'min' => 1,
            'max' => 50,
        ];
    }
    
    // Register the field group with generated fields
    acf_add_local_field_group([
        'key' => 'group_cpt_settings',
        'title' => 'Post Type Settings',
        'fields' => $fields,
        'location' => [
            [
                [
                    'param' => 'options_page',
                    'operator' => '==',
                    'value' => 'theme-settings',
                ],
            ],
        ],
        'menu_order' => 0,
        'position' => 'normal',
        'style' => 'default',
        'label_placement' => 'top',
        'instruction_placement' => 'label',
    ]);
}
                        </code></pre>
                        
                        <h3>Conditional Field Generation</h3>
                        <pre><code class="language-php">
// Generate fields based on user capabilities
add_action('acf/init', 'generate_user_based_fields');
function generate_user_based_fields() {
    
    $fields = [
        [
            'key' => 'field_basic_info',
            'label' => 'Basic Information',
            'name' => 'basic_info',
            'type' => 'text',
        ]
    ];
    
    // Add advanced fields for administrators
    if (current_user_can('manage_options')) {
        $fields[] = [
            'key' => 'field_advanced_settings',
            'label' => 'Advanced Settings',
            'name' => 'advanced_settings',
            'type' => 'group',
            'sub_fields' => [
                [
                    'key' => 'field_debug_mode',
                    'label' => 'Debug Mode',
                    'name' => 'debug_mode',
                    'type' => 'true_false',
                    'ui' => 1,
                ],
                [
                    'key' => 'field_api_key',
                    'label' => 'API Key',
                    'name' => 'api_key',
                    'type' => 'text',
                ],
                [
                    'key' => 'field_cache_duration',
                    'label' => 'Cache Duration (seconds)',
                    'name' => 'cache_duration',
                    'type' => 'number',
                    'default_value' => 3600,
                ],
            ],
        ];
    }
    
    // Add editor-specific fields
    if (current_user_can('edit_posts')) {
        $fields[] = [
            'key' => 'field_editorial_notes',
            'label' => 'Editorial Notes',
            'name' => 'editorial_notes',
            'type' => 'textarea',
            'instructions' => 'Internal notes for editors',
        ];
    }
    
    acf_add_local_field_group([
        'key' => 'group_user_based',
        'title' => 'Content Settings',
        'fields' => $fields,
        'location' => [
            [
                [
                    'param' => 'post_type',
                    'operator' => '==',
                    'value' => 'post',
                ],
            ],
        ],
    ]);
}
                        </code></pre>
                    </section>
                    
                    <!-- Field Builder Class -->
                    <section>
                        <h2>Field Builder Class</h2>
                        
                        <h3>Creating a Reusable Field Builder</h3>
                        <pre><code class="language-php">
// Field builder class for easier field creation
class ACF_Field_Builder {
    private $fields = [];
    private $current_field = [];
    
    public function text($name, $label) {
        $this->current_field = [
            'key' => 'field_' . sanitize_key($name),
            'label' => $label,
            'name' => $name,
            'type' => 'text',
        ];
        return $this;
    }
    
    public function textarea($name, $label) {
        $this->current_field = [
            'key' => 'field_' . sanitize_key($name),
            'label' => $label,
            'name' => $name,
            'type' => 'textarea',
        ];
        return $this;
    }
    
    public function select($name, $label, $choices) {
        $this->current_field = [
            'key' => 'field_' . sanitize_key($name),
            'label' => $label,
            'name' => $name,
            'type' => 'select',
            'choices' => $choices,
        ];
        return $this;
    }
    
    public function repeater($name, $label) {
        $this->current_field = [
            'key' => 'field_' . sanitize_key($name),
            'label' => $label,
            'name' => $name,
            'type' => 'repeater',
            'sub_fields' => [],
        ];
        return $this;
    }
    
    public function subField($field) {
        if ($this->current_field['type'] === 'repeater' || 
            $this->current_field['type'] === 'group') {
            $this->current_field['sub_fields'][] = $field;
        }
        return $this;
    }
    
    public function required($required = true) {
        $this->current_field['required'] = $required ? 1 : 0;
        return $this;
    }
    
    public function defaultValue($value) {
        $this->current_field['default_value'] = $value;
        return $this;
    }
    
    public function instructions($text) {
        $this->current_field['instructions'] = $text;
        return $this;
    }
    
    public function conditional($field, $operator, $value) {
        if (!isset($this->current_field['conditional_logic'])) {
            $this->current_field['conditional_logic'] = [];
        }
        
        $this->current_field['conditional_logic'][] = [
            [
                'field' => $field,
                'operator' => $operator,
                'value' => $value,
            ]
        ];
        
        return $this;
    }
    
    public function width($width) {
        if (!isset($this->current_field['wrapper'])) {
            $this->current_field['wrapper'] = [];
        }
        $this->current_field['wrapper']['width'] = $width;
        return $this;
    }
    
    public function add() {
        $this->fields[] = $this->current_field;
        $this->current_field = [];
        return $this;
    }
    
    public function build() {
        if (!empty($this->current_field)) {
            $this->add();
        }
        return $this->fields;
    }
}

// Usage example
$builder = new ACF_Field_Builder();

$fields = $builder
    ->text('hero_title', 'Hero Title')
        ->required()
        ->defaultValue('Welcome')
        ->instructions('Main hero section title')
        ->add()
    
    ->textarea('hero_description', 'Hero Description')
        ->required()
        ->instructions('Hero section description text')
        ->add()
    
    ->select('hero_style', 'Hero Style', [
        'default' => 'Default',
        'centered' => 'Centered',
        'split' => 'Split Screen'
    ])
        ->defaultValue('default')
        ->add()
    
    ->text('cta_text', 'CTA Button Text')
        ->conditional('field_hero_style', '!=', 'split')
        ->width('50')
        ->add()
    
    ->text('cta_link', 'CTA Button Link')
        ->conditional('field_hero_style', '!=', 'split')
        ->width('50')
        ->add()
    
    ->build();

acf_add_local_field_group([
    'key' => 'group_hero_settings',
    'title' => 'Hero Settings',
    'fields' => $fields,
    'location' => [
        [
            [
                'param' => 'page_template',
                'operator' => '==',
                'value' => 'template-hero.php',
            ],
        ],
    ],
]);
                        </code></pre>
                    </section>
                    
                    <!-- Configuration-Based Fields -->
                    <section>
                        <h2>Configuration-Based Fields</h2>
                        
                        <h3>JSON Configuration</h3>
                        <pre><code class="language-php">
// Load fields from JSON configuration
add_action('acf/init', 'load_fields_from_json');
function load_fields_from_json() {
    
    $json_file = get_template_directory() . '/acf-config/fields.json';
    
    if (!file_exists($json_file)) {
        return;
    }
    
    $json_data = file_get_contents($json_file);
    $field_groups = json_decode($json_data, true);
    
    foreach ($field_groups as $field_group) {
        acf_add_local_field_group($field_group);
    }
}

// Example JSON structure (fields.json)
/*
[
    {
        "key": "group_theme_options",
        "title": "Theme Options",
        "fields": [
            {
                "key": "field_logo",
                "label": "Logo",
                "name": "logo",
                "type": "image",
                "return_format": "array",
                "preview_size": "medium"
            },
            {
                "key": "field_footer_text",
                "label": "Footer Text",
                "name": "footer_text",
                "type": "textarea",
                "rows": 3
            }
        ],
        "location": [
            [
                {
                    "param": "options_page",
                    "operator": "==",
                    "value": "theme-options"
                }
            ]
        ]
    }
]
*/
                        </code></pre>
                        
                        <h3>YAML Configuration</h3>
                        <pre><code class="language-php">
// Load fields from YAML configuration
use Symfony\Component\Yaml\Yaml;

add_action('acf/init', 'load_fields_from_yaml');
function load_fields_from_yaml() {
    
    $yaml_file = get_template_directory() . '/acf-config/fields.yaml';
    
    if (!file_exists($yaml_file)) {
        return;
    }
    
    $field_groups = Yaml::parseFile($yaml_file);
    
    foreach ($field_groups as $field_group) {
        acf_add_local_field_group($field_group);
    }
}

// Example YAML structure (fields.yaml)
/*
- key: group_seo_settings
  title: SEO Settings
  fields:
    - key: field_meta_title
      label: Meta Title
      name: meta_title
      type: text
      maxlength: 60
      instructions: Maximum 60 characters
      
    - key: field_meta_description
      label: Meta Description
      name: meta_description
      type: textarea
      rows: 3
      maxlength: 160
      instructions: Maximum 160 characters
      
  location:
    - - param: post_type
        operator: ==
        value: post
*/
                        </code></pre>
                    </section>
                    
                    <!-- Import/Export Workflow -->
                    <section>
                        <h2>Import/Export Workflow</h2>
                        
                        <h3>Exporting Fields to PHP</h3>
                        <pre><code class="language-php">
// Export fields from database to PHP code
add_action('admin_init', 'export_acf_fields_to_php');
function export_acf_fields_to_php() {
    
    if (!isset($_GET['export_acf_php'])) {
        return;
    }
    
    if (!current_user_can('manage_options')) {
        return;
    }
    
    $field_groups = acf_get_field_groups();
    $output = "&lt;?php\n\n";
    
    foreach ($field_groups as $field_group) {
        $fields = acf_get_fields($field_group['key']);
        $field_group['fields'] = $fields;
        
        $output .= "acf_add_local_field_group(" . var_export($field_group, true) . ");\n\n";
    }
    
    // Save to file
    $file_path = get_template_directory() . '/acf-export.php';
    file_put_contents($file_path, $output);
    
    wp_die('Fields exported to: ' . $file_path);
}
                        </code></pre>
                        
                        <h3>Local JSON Sync</h3>
                        <pre><code class="language-php">
// Configure ACF to save/load JSON
add_filter('acf/settings/save_json', 'my_acf_json_save_point');
function my_acf_json_save_point($path) {
    $path = get_stylesheet_directory() . '/acf-json';
    return $path;
}

add_filter('acf/settings/load_json', 'my_acf_json_load_point');
function my_acf_json_load_point($paths) {
    unset($paths[0]);
    
    // Theme directory
    $paths[] = get_stylesheet_directory() . '/acf-json';
    
    // Plugin directory
    $paths[] = plugin_dir_path(__FILE__) . '/acf-json';
    
    // Shared library
    $paths[] = ABSPATH . 'shared/acf-json';
    
    return $paths;
}

// Auto-sync JSON files on admin load
add_action('admin_init', 'sync_acf_fields');
function sync_acf_fields() {
    
    // Get all field groups
    $groups = acf_get_field_groups();
    $sync = [];
    
    // Check for JSON files
    $json_dir = get_stylesheet_directory() . '/acf-json';
    
    if (!is_dir($json_dir)) {
        return;
    }
    
    $json_files = glob($json_dir . '/group_*.json');
    
    foreach ($json_files as $file) {
        $json = json_decode(file_get_contents($file), true);
        
        // Check if this group needs sync
        $group = acf_get_field_group($json['key']);
        
        if ($group && $group['modified'] < $json['modified']) {
            $sync[] = $json['key'];
        }
    }
    
    // Auto-sync if needed
    if (!empty($sync)) {
        foreach ($sync as $key) {
            acf_import_field_group($key);
        }
    }
}
                        </code></pre>
                    </section>
                    
                    <!-- Dynamic Options -->
                    <section>
                        <h2>Dynamic Field Options</h2>
                        
                        <h3>Populating Select Fields Dynamically</h3>
                        <pre><code class="language-php">
// Populate select field with dynamic choices
add_filter('acf/load_field/name=dynamic_select', 'populate_dynamic_select');
function populate_dynamic_select($field) {
    
    // Reset choices
    $field['choices'] = [];
    
    // Get dynamic data (example: all users)
    $users = get_users(['role' => 'author']);
    
    foreach ($users as $user) {
        $field['choices'][$user->ID] = $user->display_name;
    }
    
    return $field;
}

// Populate based on other field value
add_filter('acf/load_field/name=state', 'populate_states_based_on_country');
function populate_states_based_on_country($field) {
    
    // Get the country value (from $_POST in admin)
    $country = $_POST['acf']['field_country'] ?? '';
    
    $field['choices'] = [];
    
    switch ($country) {
        case 'US':
            $field['choices'] = [
                'AL' => 'Alabama',
                'AK' => 'Alaska',
                'AZ' => 'Arizona',
                // ... more states
            ];
            break;
            
        case 'CA':
            $field['choices'] = [
                'AB' => 'Alberta',
                'BC' => 'British Columbia',
                'MB' => 'Manitoba',
                // ... more provinces
            ];
            break;
            
        default:
            $field['choices'] = ['N/A' => 'Not Applicable'];
    }
    
    return $field;
}

// AJAX handler for dynamic updates
add_action('wp_ajax_get_dynamic_field_choices', 'ajax_get_dynamic_field_choices');
function ajax_get_dynamic_field_choices() {
    
    $field_name = $_POST['field_name'] ?? '';
    $parent_value = $_POST['parent_value'] ?? '';
    
    $choices = [];
    
    if ($field_name === 'product_variations') {
        $product_id = intval($parent_value);
        $variations = get_product_variations($product_id);
        
        foreach ($variations as $variation) {
            $choices[$variation['id']] = $variation['name'];
        }
    }
    
    wp_send_json_success($choices);
}
                        </code></pre>
                        
                        <h3>Dynamic Default Values</h3>
                        <pre><code class="language-php">
// Set dynamic default values
add_filter('acf/load_field/name=order_number', 'set_order_number_default');
function set_order_number_default($field) {
    
    // Generate unique order number
    $field['default_value'] = 'ORD-' . date('Ymd') . '-' . uniqid();
    
    // Make field readonly
    $field['readonly'] = 1;
    
    return $field;
}

// Default value based on user
add_filter('acf/load_field/name=assigned_to', 'set_default_assignee');
function set_default_assignee($field) {
    
    $current_user = wp_get_current_user();
    $field['default_value'] = $current_user->ID;
    
    return $field;
}

// Dynamic placeholder
add_filter('acf/load_field/name=slug', 'set_dynamic_placeholder');
function set_dynamic_placeholder($field) {
    
    global $post;
    
    if ($post && !get_field('slug', $post->ID)) {
        $field['placeholder'] = sanitize_title($post->post_title);
    }
    
    return $field;
}
                        </code></pre>
                    </section>
                    
                    <!-- Field Modifications -->
                    <section>
                        <h2>Modifying Existing Fields</h2>
                        
                        <h3>Modifying Field Properties</h3>
                        <pre><code class="language-php">
// Modify existing field properties
add_filter('acf/load_field', 'modify_field_properties');
function modify_field_properties($field) {
    
    // Make all required fields show an asterisk
    if ($field['required']) {
        $field['label'] .= ' *';
    }
    
    // Add character count to text fields
    if ($field['type'] === 'text' && isset($field['maxlength'])) {
        $field['instructions'] .= ' (Max ' . $field['maxlength'] . ' characters)';
    }
    
    // Disable fields on published posts
    global $post;
    if ($post && $post->post_status === 'publish') {
        if (in_array($field['name'], ['critical_field_1', 'critical_field_2'])) {
            $field['disabled'] = 1;
            $field['instructions'] = 'This field cannot be edited after publishing.';
        }
    }
    
    return $field;
}

// Remove fields conditionally
add_filter('acf/prepare_field', 'conditionally_remove_fields');
function conditionally_remove_fields($field) {
    
    // Hide field from non-admins
    if ($field['name'] === 'admin_only_field' && !current_user_can('manage_options')) {
        return false;
    }
    
    // Hide field based on post meta
    global $post;
    if ($post) {
        $hide_advanced = get_post_meta($post->ID, 'hide_advanced_fields', true);
        
        if ($hide_advanced && strpos($field['name'], 'advanced_') === 0) {
            return false;
        }
    }
    
    return $field;
}
                        </code></pre>
                    </section>
                    
                    <!-- Complete Example -->
                    <section>
                        <h2>Complete Example: Theme Settings</h2>
                        
                        <pre><code class="language-php">
// Complete theme settings implementation
class Theme_ACF_Settings {
    
    private static $instance = null;
    
    public static function getInstance() {
        if (self::$instance === null) {
            self::$instance = new self();
        }
        return self::$instance;
    }
    
    private function __construct() {
        add_action('acf/init', [$this, 'register_options_pages']);
        add_action('acf/init', [$this, 'register_fields']);
    }
    
    public function register_options_pages() {
        if (!function_exists('acf_add_options_page')) {
            return;
        }
        
        // Main settings page
        acf_add_options_page([
            'page_title' => 'Theme Settings',
            'menu_title' => 'Theme Settings',
            'menu_slug' => 'theme-settings',
            'capability' => 'edit_theme_options',
            'redirect' => true,
            'icon_url' => 'dashicons-admin-generic',
            'position' => 60
        ]);
        
        // Sub pages
        $sub_pages = [
            'General' => 'general',
            'Header' => 'header',
            'Footer' => 'footer',
            'Social Media' => 'social',
            'Advanced' => 'advanced'
        ];
        
        foreach ($sub_pages as $title => $slug) {
            acf_add_options_sub_page([
                'page_title' => $title . ' Settings',
                'menu_title' => $title,
                'parent_slug' => 'theme-settings',
                'menu_slug' => 'theme-settings-' . $slug
            ]);
        }
    }
    
    public function register_fields() {
        // General Settings
        $this->register_general_settings();
        
        // Header Settings
        $this->register_header_settings();
        
        // Footer Settings
        $this->register_footer_settings();
        
        // Social Media Settings
        $this->register_social_settings();
        
        // Advanced Settings
        $this->register_advanced_settings();
    }
    
    private function register_general_settings() {
        acf_add_local_field_group([
            'key' => 'group_theme_general',
            'title' => 'General Settings',
            'fields' => [
                [
                    'key' => 'field_site_logo',
                    'label' => 'Site Logo',
                    'name' => 'site_logo',
                    'type' => 'image',
                    'return_format' => 'array',
                    'preview_size' => 'medium',
                    'library' => 'all',
                    'mime_types' => 'jpg,jpeg,png,svg'
                ],
                [
                    'key' => 'field_site_favicon',
                    'label' => 'Favicon',
                    'name' => 'site_favicon',
                    'type' => 'image',
                    'return_format' => 'url',
                    'preview_size' => 'thumbnail',
                    'mime_types' => 'ico,png'
                ],
                [
                    'key' => 'field_color_scheme',
                    'label' => 'Color Scheme',
                    'name' => 'color_scheme',
                    'type' => 'group',
                    'layout' => 'row',
                    'sub_fields' => [
                        [
                            'key' => 'field_primary_color',
                            'label' => 'Primary Color',
                            'name' => 'primary_color',
                            'type' => 'color_picker',
                            'default_value' => '#007cba',
                            'wrapper' => ['width' => '25']
                        ],
                        [
                            'key' => 'field_secondary_color',
                            'label' => 'Secondary Color',
                            'name' => 'secondary_color',
                            'type' => 'color_picker',
                            'default_value' => '#005a87',
                            'wrapper' => ['width' => '25']
                        ],
                        [
                            'key' => 'field_accent_color',
                            'label' => 'Accent Color',
                            'name' => 'accent_color',
                            'type' => 'color_picker',
                            'default_value' => '#d63638',
                            'wrapper' => ['width' => '25']
                        ],
                        [
                            'key' => 'field_text_color',
                            'label' => 'Text Color',
                            'name' => 'text_color',
                            'type' => 'color_picker',
                            'default_value' => '#1e1e1e',
                            'wrapper' => ['width' => '25']
                        ]
                    ]
                ],
                [
                    'key' => 'field_typography',
                    'label' => 'Typography',
                    'name' => 'typography',
                    'type' => 'group',
                    'layout' => 'row',
                    'sub_fields' => [
                        [
                            'key' => 'field_heading_font',
                            'label' => 'Heading Font',
                            'name' => 'heading_font',
                            'type' => 'select',
                            'choices' => $this->get_google_fonts(),
                            'default_value' => 'Roboto',
                            'ui' => 1,
                            'wrapper' => ['width' => '50']
                        ],
                        [
                            'key' => 'field_body_font',
                            'label' => 'Body Font',
                            'name' => 'body_font',
                            'type' => 'select',
                            'choices' => $this->get_google_fonts(),
                            'default_value' => 'Open Sans',
                            'ui' => 1,
                            'wrapper' => ['width' => '50']
                        ]
                    ]
                ]
            ],
            'location' => [
                [
                    [
                        'param' => 'options_page',
                        'operator' => '==',
                        'value' => 'theme-settings-general'
                    ]
                ]
            ]
        ]);
    }
    
    private function register_social_settings() {
        $social_networks = [
            'facebook' => 'Facebook',
            'twitter' => 'Twitter',
            'instagram' => 'Instagram',
            'linkedin' => 'LinkedIn',
            'youtube' => 'YouTube',
            'pinterest' => 'Pinterest'
        ];
        
        $fields = [];
        
        foreach ($social_networks as $key => $label) {
            $fields[] = [
                'key' => 'field_social_' . $key,
                'label' => $label . ' URL',
                'name' => 'social_' . $key,
                'type' => 'url',
                'placeholder' => 'https://' . $key . '.com/yourprofile'
            ];
        }
        
        acf_add_local_field_group([
            'key' => 'group_theme_social',
            'title' => 'Social Media Settings',
            'fields' => $fields,
            'location' => [
                [
                    [
                        'param' => 'options_page',
                        'operator' => '==',
                        'value' => 'theme-settings-social'
                    ]
                ]
            ]
        ]);
    }
    
    private function get_google_fonts() {
        return [
            'Arial' => 'Arial',
            'Helvetica' => 'Helvetica',
            'Georgia' => 'Georgia',
            'Roboto' => 'Roboto',
            'Open Sans' => 'Open Sans',
            'Lato' => 'Lato',
            'Montserrat' => 'Montserrat',
            'Playfair Display' => 'Playfair Display'
        ];
    }
}

// Initialize
Theme_ACF_Settings::getInstance();
                        </code></pre>
                    </section>
                    
                    <!-- Summary -->
                    <section>
                        <h2>Summary</h2>
                        
                        <div class="summary-box">
                            <h3>Key Takeaways</h3>
                            <ul>
                                <li>Programmatic registration enables version control and deployment</li>
                                <li>Dynamic field generation creates flexible, context-aware forms</li>
                                <li>Field builder classes simplify complex field creation</li>
                                <li>Configuration files allow non-developers to manage fields</li>
                                <li>Local JSON provides the best of both worlds</li>
                                <li>Field modifications enable runtime customization</li>
                                <li>Proper organization improves maintainability</li>
                            </ul>
                        </div>
                        
                        <div class="best-practices">
                            <h3>Best Practices</h3>
                            <ul>
                                <li>Always check if ACF functions exist before using</li>
                                <li>Use unique, prefixed field keys</li>
                                <li>Organize fields in logical groups</li>
                                <li>Document complex field relationships</li>
                                <li>Test field registration in all environments</li>
                                <li>Use version control for field configurations</li>
                                <li>Consider performance when generating fields</li>
                            </ul>
                        </div>
                    </section>
                    
                    <!-- Additional Resources -->
                    <section class="resources">
                        <h2>Additional Resources</h2>
                        <ul>
                            <li><a href="https://www.advancedcustomfields.com/resources/register-fields-via-php/" target="_blank">Register Fields via PHP - ACF Documentation</a></li>
                            <li><a href="https://www.advancedcustomfields.com/resources/local-json/" target="_blank">Local JSON - ACF Documentation</a></li>
                            <li><a href="https://github.com/StoutLogic/acf-builder" target="_blank">ACF Builder - Fluent API</a></li>
                            <li><a href="https://www.advancedcustomfields.com/resources/acf-add-local-field-group/" target="_blank">acf_add_local_field_group() Documentation</a></li>
                        </ul>
                    </section>
                </div>
                
                <!-- Lesson Navigation -->
                <div class="lesson-navigation">
                    <a href="/07module/conditional_logic_acf.html" class="lesson-nav-button prev">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
                        </svg>
                        <span>
                            <small>Previous</small><br>
                            Conditional Logic
                        </span>
                    </a>
                    
                    <button class="complete-lesson-btn">
                        Mark as Complete
                    </button>
                    
                    <a href="/07module/custom_metaboxes.html" class="lesson-nav-button next">
                        <span>
                            <small>Next</small><br>
                            Custom Metaboxes
                        </span>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="site-footer" role="contentinfo">
            <div class="footer-container">
                <div class="footer-content">
                    <div class="footer-section footer-about">
                        <h3>PHP WordPress Development</h3>
                        <p>Complete Web Development Course - From HTML to WordPress</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <ul class="footer-links">
                            <li><a href="/">Home</a></li>
                            <li><a href="/module7.html">Module 7</a></li>
                            <li><a href="/resources.html">Resources</a></li>
                            <li><a href="/about.html">About</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2025 PHP WordPress Development Course. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- JavaScript -->
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/lesson.js"></script>
</body>
</html>