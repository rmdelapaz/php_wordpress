<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    
    <!-- SEO Meta Tags -->
    <title>Field Types and Field Groups - PHP WordPress Course</title>
    <meta name="description" content="Deep dive into ACF field types and field groups. Learn to create complex data structures with Advanced Custom Fields.">
    <meta name="keywords" content="WordPress, ACF, field types, field groups, custom fields, data structures">
    <meta name="author" content="PHP WordPress Course">
    
    <!-- Open Graph Tags -->
    <meta property="og:title" content="ACF Field Types and Field Groups">
    <meta property="og:description" content="Master all ACF field types and create powerful field groups">
    <meta property="og:type" content="article">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="/favicon.png">
    <link rel="apple-touch-icon" href="/favicon.png">
    
    <!-- CSS -->
    <link rel="stylesheet" href="/assets/css/main.css">
    
    <!-- Prism.js for syntax highlighting -->
    <link href="/assets/css/prism.css" rel="stylesheet">
</head>
<body>
    <!-- Skip to main content -->
    <a href="#main-content" class="sr-only">Skip to main content</a>
    
    <div class="page-wrapper">
        <!-- Header -->
        <header class="site-header" role="banner">
            <div class="header-container">
                <div class="site-branding">
                    <a href="/" class="site-logo">
                        <h1 class="site-title">PHP WordPress Development</h1>
                    </a>
                </div>
                
                <nav class="main-navigation" role="navigation" aria-label="Main navigation">
                    <button class="mobile-menu-btn" aria-label="Toggle navigation" aria-expanded="false">
                        <span></span>
                        <span></span>
                        <span></span>
                    </button>
                    
                    <div class="nav-menu">
                        <ul class="nav-list">
                            <li class="nav-item"><a href="/" class="nav-link">Home</a></li>
                            <li class="nav-item dropdown">
                                <button class="nav-link dropdown-toggle active" aria-haspopup="true">Modules</button>
                                <div class="dropdown-menu">
                                    <a href="/module1.html" class="dropdown-item">Module 1: Web Fundamentals</a>
                                    <a href="/module2.html" class="dropdown-item">Module 2: PHP Fundamentals</a>
                                    <a href="/module3.html" class="dropdown-item">Module 3: MySQL Database</a>
                                    <a href="/module4.html" class="dropdown-item">Module 4: WordPress & Docker</a>
                                    <a href="/module5.html" class="dropdown-item">Module 5: Theme Development</a>
                                    <a href="/module6.html" class="dropdown-item">Module 6: Plugin Development</a>
                                    <a href="/module7.html" class="dropdown-item active">Module 7: Advanced WordPress</a>
                                    <a href="/module8.html" class="dropdown-item">Module 8: Deployment</a>
                                    <a href="/module9.html" class="dropdown-item">Module 9: Final Project</a>
                                </div>
                            </li>
                            <li class="nav-item"><a href="/resources.html" class="nav-link">Resources</a></li>
                            <li class="nav-item"><a href="/about.html" class="nav-link">About</a></li>
                        </ul>
                    </div>
                </nav>
                
                <div class="search-container">
                    <div class="search-input-wrapper">
                        <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd" />
                        </svg>
                        <input type="search" class="search-input" placeholder="Search lessons..." aria-label="Search">
                    </div>
                    <div class="search-results"></div>
                </div>
            </div>
        </header>
        
        <!-- Progress Bar -->
        <div class="progress-container">
            <div class="progress-header">
                <h2 class="progress-title">Course Progress</h2>
                <span class="progress-text">Loading...</span>
            </div>
            <div class="progress-bar">
                <div class="progress-bar-fill">
                    <span class="progress-bar-text"></span>
                </div>
            </div>
        </div>
        
        <!-- Breadcrumb -->
        <nav class="breadcrumb container" aria-label="Breadcrumb">
            <ol class="breadcrumb-list">
                <li class="breadcrumb-item">
                    <a href="/">Home</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <a href="/module7.html">Module 7</a>
                    <span class="breadcrumb-separator">/</span>
                </li>
                <li class="breadcrumb-item">
                    <span aria-current="page">Field Types & Groups</span>
                </li>
            </ol>
        </nav>
        
        <!-- Main Content -->
        <main id="main-content" class="main-content" role="main">
            <div class="container">
                <!-- Lesson Header -->
                <div class="lesson-header">
                    <h1 class="lesson-title">Field Types and Field Groups</h1>
                    <p class="lesson-subtitle">Master every ACF field type and create powerful field groups</p>
                </div>
                
                <!-- Learning Objectives -->
                <div class="lesson-objectives">
                    <h2>Learning Objectives</h2>
                    <p>By the end of this lesson, you will be able to:</p>
                    <ul>
                        <li>Master all ACF field types and their use cases</li>
                        <li>Create complex field group structures</li>
                        <li>Configure field settings and validation</li>
                        <li>Implement conditional logic</li>
                        <li>Organize fields with tabs and layouts</li>
                        <li>Apply location rules effectively</li>
                    </ul>
                </div>
                
                <!-- Lesson Body -->
                <div class="lesson-body">
                    <!-- Field Types Deep Dive -->
                    <section>
                        <h2>Field Types Deep Dive</h2>
                        
                        <h3>Choosing the Right Field Type</h3>
                        <div class="info-box">
                            <h4>Field Type Selection Guide</h4>
                            <ul>
                                <li><strong>Text:</strong> Short, single-line text (names, titles)</li>
                                <li><strong>Textarea:</strong> Multi-line text (descriptions, notes)</li>
                                <li><strong>WYSIWYG:</strong> Rich formatted content</li>
                                <li><strong>Number:</strong> Numeric values with validation</li>
                                <li><strong>Range:</strong> Numeric values with slider UI</li>
                                <li><strong>Email:</strong> Email addresses with validation</li>
                                <li><strong>URL:</strong> Web addresses with validation</li>
                                <li><strong>Select:</strong> Single choice from dropdown</li>
                                <li><strong>Checkbox:</strong> Multiple choices</li>
                                <li><strong>Radio:</strong> Single choice from options</li>
                                <li><strong>True/False:</strong> Boolean toggle</li>
                                <li><strong>Image:</strong> Single image upload</li>
                                <li><strong>Gallery:</strong> Multiple image management</li>
                                <li><strong>File:</strong> Document uploads</li>
                                <li><strong>Relationship:</strong> Connect to other posts</li>
                                <li><strong>Post Object:</strong> Select specific posts</li>
                                <li><strong>Page Link:</strong> Select page URLs</li>
                                <li><strong>Taxonomy:</strong> Assign taxonomies</li>
                                <li><strong>User:</strong> Select WordPress users</li>
                            </ul>
                        </div>
                    </section>
                    
                    <!-- Advanced Field Configurations -->
                    <section>
                        <h2>Advanced Field Configurations</h2>
                        
                        <h3>Date and Time Fields</h3>
                        <pre><code class="language-php">
// Date Picker field
[
    'key' => 'field_date_picker',
    'label' => 'Event Date',
    'name' => 'event_date',
    'type' => 'date_picker',
    'instructions' => 'Select the event date',
    'required' => 1,
    'display_format' => 'F j, Y',      // Display format
    'return_format' => 'Y-m-d',        // Return format
    'first_day' => 1                   // Week starts on Monday
]

// Time Picker field
[
    'key' => 'field_time_picker',
    'label' => 'Event Time',
    'name' => 'event_time',
    'type' => 'time_picker',
    'display_format' => 'g:i a',       // 12-hour format
    'return_format' => 'H:i:s'         // 24-hour format
]

// Date Time Picker field
[
    'key' => 'field_datetime_picker',
    'label' => 'Event Date & Time',
    'name' => 'event_datetime',
    'type' => 'date_time_picker',
    'display_format' => 'F j, Y g:i a',
    'return_format' => 'Y-m-d H:i:s',
    'first_day' => 1
]

// Display formatted dates
&lt;?php 
$event_date = get_field('event_date');
if ($event_date) {
    $date = DateTime::createFromFormat('Y-m-d', $event_date);
    echo $date->format('F j, Y');
    
    // Days until event
    $now = new DateTime();
    $interval = $now->diff($date);
    echo 'In ' . $interval->days . ' days';
}
?&gt;
                        </code></pre>
                        
                        <h3>Color Picker Field</h3>
                        <pre><code class="language-php">
// Color Picker field
[
    'key' => 'field_color_picker',
    'label' => 'Brand Color',
    'name' => 'brand_color',
    'type' => 'color_picker',
    'default_value' => '#ffffff',
    'enable_opacity' => 1,              // Enable alpha channel
    'return_format' => 'string'         // or 'array'
]

// Use in CSS
&lt;style&gt;
    .brand-header {
        background-color: &lt;?php the_field('brand_color'); ?&gt;;
    }
&lt;/style&gt;
                        </code></pre>
                        
                        <h3>Google Map Field</h3>
                        <pre><code class="language-php">
// Google Map field setup
add_filter('acf/fields/google_map/api', 'my_acf_google_map_api');
function my_acf_google_map_api($api) {
    $api['key'] = 'YOUR_GOOGLE_MAPS_API_KEY';
    return $api;
}

// Field configuration
[
    'key' => 'field_google_map',
    'label' => 'Location',
    'name' => 'location',
    'type' => 'google_map',
    'center_lat' => '40.7128',
    'center_lng' => '-74.0060',
    'zoom' => 10,
    'height' => 400
]

// Display map
&lt;?php 
$location = get_field('location');
if ($location): ?&gt;
    &lt;div class="acf-map" data-zoom="16"&gt;
        &lt;div class="marker" 
             data-lat="&lt;?php echo esc_attr($location['lat']); ?&gt;" 
             data-lng="&lt;?php echo esc_attr($location['lng']); ?&gt;"&gt;
            &lt;h3&gt;&lt;?php echo esc_html($location['address']); ?&gt;&lt;/h3&gt;
        &lt;/div&gt;
    &lt;/div&gt;
    
    &lt;script&gt;
    (function($) {
        function initMap() {
            $('.acf-map').each(function() {
                var $map = $(this);
                var $marker = $map.find('.marker');
                
                var args = {
                    zoom: parseInt($map.data('zoom')),
                    center: new google.maps.LatLng(
                        $marker.data('lat'), 
                        $marker.data('lng')
                    ),
                    mapTypeId: google.maps.MapTypeId.ROADMAP
                };
                
                var map = new google.maps.Map($map[0], args);
                
                var marker = new google.maps.Marker({
                    position: args.center,
                    map: map
                });
            });
        }
        
        $(document).ready(function() {
            initMap();
        });
    })(jQuery);
    &lt;/script&gt;
&lt;?php endif; ?&gt;
                        </code></pre>
                        
                        <h3>Range Slider Field</h3>
                        <pre><code class="language-php">
// Range field
[
    'key' => 'field_range',
    'label' => 'Opacity',
    'name' => 'opacity',
    'type' => 'range',
    'default_value' => 100,
    'min' => 0,
    'max' => 100,
    'step' => 5,
    'prepend' => '',
    'append' => '%'
]

// Button Group field
[
    'key' => 'field_button_group',
    'label' => 'Alignment',
    'name' => 'alignment',
    'type' => 'button_group',
    'choices' => [
        'left' => '&lt;i class="dashicons dashicons-editor-alignleft"&gt;&lt;/i&gt; Left',
        'center' => '&lt;i class="dashicons dashicons-editor-aligncenter"&gt;&lt;/i&gt; Center',
        'right' => '&lt;i class="dashicons dashicons-editor-alignright"&gt;&lt;/i&gt; Right'
    ],
    'default_value' => 'left',
    'layout' => 'horizontal'
]
                        </code></pre>
                    </section>
                    
                    <!-- Field Groups Structure -->
                    <section>
                        <h2>Field Groups Structure</h2>
                        
                        <h3>Organizing Fields with Tabs</h3>
                        <pre><code class="language-php">
// Create tabbed field group
acf_add_local_field_group([
    'key' => 'group_product_tabs',
    'title' => 'Product Information',
    'fields' => [
        // General Tab
        [
            'key' => 'field_tab_general',
            'label' => 'General',
            'name' => '',
            'type' => 'tab',
            'placement' => 'top',
            'endpoint' => 0  // Not an endpoint
        ],
        [
            'key' => 'field_product_name',
            'label' => 'Product Name',
            'name' => 'product_name',
            'type' => 'text',
            'required' => 1
        ],
        [
            'key' => 'field_product_description',
            'label' => 'Description',
            'name' => 'product_description',
            'type' => 'wysiwyg'
        ],
        
        // Pricing Tab
        [
            'key' => 'field_tab_pricing',
            'label' => 'Pricing',
            'name' => '',
            'type' => 'tab',
            'placement' => 'top',
            'endpoint' => 0
        ],
        [
            'key' => 'field_regular_price',
            'label' => 'Regular Price',
            'name' => 'regular_price',
            'type' => 'number',
            'prepend' => '$',
            'min' => 0,
            'step' => 0.01
        ],
        [
            'key' => 'field_sale_price',
            'label' => 'Sale Price',
            'name' => 'sale_price',
            'type' => 'number',
            'prepend' => '$',
            'min' => 0,
            'step' => 0.01
        ],
        
        // Inventory Tab
        [
            'key' => 'field_tab_inventory',
            'label' => 'Inventory',
            'name' => '',
            'type' => 'tab',
            'placement' => 'top',
            'endpoint' => 0
        ],
        [
            'key' => 'field_sku',
            'label' => 'SKU',
            'name' => 'sku',
            'type' => 'text'
        ],
        [
            'key' => 'field_stock_quantity',
            'label' => 'Stock Quantity',
            'name' => 'stock_quantity',
            'type' => 'number',
            'min' => 0
        ],
        [
            'key' => 'field_stock_status',
            'label' => 'Stock Status',
            'name' => 'stock_status',
            'type' => 'select',
            'choices' => [
                'instock' => 'In Stock',
                'outofstock' => 'Out of Stock',
                'onbackorder' => 'On Backorder'
            ]
        ],
        
        // Media Tab
        [
            'key' => 'field_tab_media',
            'label' => 'Media',
            'name' => '',
            'type' => 'tab',
            'placement' => 'top',
            'endpoint' => 0
        ],
        [
            'key' => 'field_product_image',
            'label' => 'Main Image',
            'name' => 'product_image',
            'type' => 'image',
            'return_format' => 'array',
            'preview_size' => 'medium'
        ],
        [
            'key' => 'field_product_gallery',
            'label' => 'Gallery',
            'name' => 'product_gallery',
            'type' => 'gallery',
            'return_format' => 'array',
            'preview_size' => 'thumbnail',
            'max' => 10
        ]
    ],
    'location' => [
        [
            [
                'param' => 'post_type',
                'operator' => '==',
                'value' => 'product'
            ]
        ]
    ],
    'menu_order' => 0,
    'position' => 'normal',
    'style' => 'default',
    'label_placement' => 'top',
    'instruction_placement' => 'label'
]);
                        </code></pre>
                        
                        <h3>Using Accordion for Organization</h3>
                        <pre><code class="language-php">
// Accordion field for collapsible sections
[
    'key' => 'field_accordion_seo',
    'label' => 'SEO Settings',
    'name' => '',
    'type' => 'accordion',
    'open' => 0,        // Start closed
    'multi_expand' => 1, // Allow multiple accordions open
    'endpoint' => 0
],
[
    'key' => 'field_meta_title',
    'label' => 'Meta Title',
    'name' => 'meta_title',
    'type' => 'text',
    'maxlength' => 60
],
[
    'key' => 'field_meta_description',
    'label' => 'Meta Description',
    'name' => 'meta_description',
    'type' => 'textarea',
    'rows' => 3,
    'maxlength' => 160
],
[
    'key' => 'field_accordion_seo_end',
    'label' => 'Accordion End',
    'name' => '',
    'type' => 'accordion',
    'endpoint' => 1     // This ends the accordion
]
                        </code></pre>
                        
                        <h3>Message Field for Instructions</h3>
                        <pre><code class="language-php">
// Message field for user guidance
[
    'key' => 'field_message_instructions',
    'label' => 'Important Instructions',
    'name' => '',
    'type' => 'message',
    'message' => '&lt;strong&gt;Please Note:&lt;/strong&gt;&lt;br&gt;
                  • Images should be at least 1200x800 pixels&lt;br&gt;
                  • File size should not exceed 2MB&lt;br&gt;
                  • Supported formats: JPG, PNG, WebP',
    'new_lines' => 'br',
    'esc_html' => 0
]
                        </code></pre>
                    </section>
                    
                    <!-- Conditional Logic -->
                    <section>
                        <h2>Conditional Logic</h2>
                        
                        <h3>Basic Conditional Logic</h3>
                        <pre><code class="language-php">
// Show/hide fields based on conditions
[
    'key' => 'field_has_sale',
    'label' => 'On Sale?',
    'name' => 'has_sale',
    'type' => 'true_false',
    'ui' => 1
],
[
    'key' => 'field_sale_price_conditional',
    'label' => 'Sale Price',
    'name' => 'sale_price',
    'type' => 'number',
    'conditional_logic' => [
        [
            [
                'field' => 'field_has_sale',
                'operator' => '==',
                'value' => '1'
            ]
        ]
    ]
],
[
    'key' => 'field_sale_end_date',
    'label' => 'Sale End Date',
    'name' => 'sale_end_date',
    'type' => 'date_picker',
    'conditional_logic' => [
        [
            [
                'field' => 'field_has_sale',
                'operator' => '==',
                'value' => '1'
            ]
        ]
    ]
]
                        </code></pre>
                        
                        <h3>Complex Conditional Logic</h3>
                        <pre><code class="language-php">
// Multiple conditions (AND/OR logic)
[
    'key' => 'field_product_type',
    'label' => 'Product Type',
    'name' => 'product_type',
    'type' => 'select',
    'choices' => [
        'simple' => 'Simple Product',
        'variable' => 'Variable Product',
        'grouped' => 'Grouped Product',
        'external' => 'External Product',
        'downloadable' => 'Downloadable Product'
    ]
],
[
    'key' => 'field_product_variations',
    'label' => 'Product Variations',
    'name' => 'product_variations',
    'type' => 'repeater',
    'conditional_logic' => [
        [
            [
                'field' => 'field_product_type',
                'operator' => '==',
                'value' => 'variable'
            ]
        ]
    ],
    'sub_fields' => [
        // Variation fields
    ]
],
[
    'key' => 'field_external_url',
    'label' => 'External URL',
    'name' => 'external_url',
    'type' => 'url',
    'conditional_logic' => [
        [
            [
                'field' => 'field_product_type',
                'operator' => '==',
                'value' => 'external'
            ]
        ]
    ]
],
[
    'key' => 'field_download_files',
    'label' => 'Downloadable Files',
    'name' => 'download_files',
    'type' => 'repeater',
    'conditional_logic' => [
        [
            [
                'field' => 'field_product_type',
                'operator' => '==',
                'value' => 'downloadable'
            ]
        ],
        // OR condition (new array)
        [
            [
                'field' => 'field_product_type',
                'operator' => '==',
                'value' => 'variable'
            ],
            // AND condition (same array)
            [
                'field' => 'field_has_downloads',
                'operator' => '==',
                'value' => '1'
            ]
        ]
    ]
]
                        </code></pre>
                        
                        <h3>JavaScript Conditional Logic</h3>
                        <pre><code class="language-javascript">
// Custom JavaScript for advanced conditional logic
acf.addFilter('prepare_field', function(field) {
    // Check if this is our target field
    if (field.name == 'custom_field') {
        // Get value of another field
        var relatedValue = acf.getField('field_key_123').val();
        
        // Apply custom logic
        if (relatedValue == 'specific_value') {
            field.$el.show();
            field.enable();
        } else {
            field.$el.hide();
            field.disable();
        }
    }
    
    return field;
});

// Listen for field changes
acf.addAction('change', function($el) {
    var field = acf.getField($el);
    
    if (field && field.name == 'trigger_field') {
        var value = field.val();
        var targetField = acf.getField('field_key_456');
        
        if (value == 'show') {
            targetField.show();
        } else {
            targetField.hide();
        }
    }
});
                        </code></pre>
                    </section>
                    
                    <!-- Location Rules -->
                    <section>
                        <h2>Location Rules</h2>
                        
                        <h3>Complex Location Rules</h3>
                        <pre><code class="language-php">
// Multiple location rule groups
'location' => [
    // Group 1: Show on specific post type AND template
    [
        [
            'param' => 'post_type',
            'operator' => '==',
            'value' => 'page'
        ],
        [
            'param' => 'page_template',
            'operator' => '==',
            'value' => 'template-landing.php'
        ]
    ],
    // Group 2: OR show on specific page
    [
        [
            'param' => 'page',
            'operator' => '==',
            'value' => '42'  // Page ID
        ]
    ],
    // Group 3: OR show on posts with specific category
    [
        [
            'param' => 'post_type',
            'operator' => '==',
            'value' => 'post'
        ],
        [
            'param' => 'post_category',
            'operator' => '==',
            'value' => 'category:news'
        ]
    ]
]

// Available location parameters
$location_params = [
    // Post
    'post_type',
    'post_template',
    'post_status',
    'post_format',
    'post_category',
    'post_taxonomy',
    'post',
    
    // Page
    'page_template',
    'page_type',     // front_page, posts_page, top_level, parent, child
    'page_parent',
    'page',
    
    // User
    'current_user',
    'current_user_role',
    'user_form',     // all, add, edit, register
    'user_role',
    
    // Forms
    'taxonomy',
    'attachment',
    'comment',
    'widget',
    'nav_menu',
    'nav_menu_item',
    'block',
    
    // Options
    'options_page'
];
                        </code></pre>
                        
                        <h3>Custom Location Rules</h3>
                        <pre><code class="language-php">
// Register custom location rule
add_filter('acf/location/rule_types', 'acf_location_rules_types');
function acf_location_rules_types($choices) {
    $choices['Custom']['woocommerce_product_type'] = 'WooCommerce Product Type';
    return $choices;
}

// Add rule values
add_filter('acf/location/rule_values/woocommerce_product_type', 'acf_location_rules_values_woo_product_type');
function acf_location_rules_values_woo_product_type($choices) {
    $choices['simple'] = 'Simple Product';
    $choices['variable'] = 'Variable Product';
    $choices['grouped'] = 'Grouped Product';
    $choices['external'] = 'External Product';
    return $choices;
}

// Match the rule
add_filter('acf/location/rule_match/woocommerce_product_type', 'acf_location_rules_match_woo_product_type', 10, 3);
function acf_location_rules_match_woo_product_type($match, $rule, $options) {
    if (!isset($options['post_id'])) {
        return $match;
    }
    
    $product = wc_get_product($options['post_id']);
    if (!$product) {
        return $match;
    }
    
    $product_type = $product->get_type();
    
    if ($rule['operator'] == '==') {
        $match = ($product_type == $rule['value']);
    } elseif ($rule['operator'] == '!=') {
        $match = ($product_type != $rule['value']);
    }
    
    return $match;
}
                        </code></pre>
                    </section>
                    
                    <!-- Field Validation -->
                    <section>
                        <h2>Field Validation</h2>
                        
                        <h3>Built-in Validation</h3>
                        <pre><code class="language-php">
// Field with validation rules
[
    'key' => 'field_email_validated',
    'label' => 'Email Address',
    'name' => 'email_address',
    'type' => 'email',
    'required' => 1,
    'placeholder' => 'user@example.com'
],
[
    'key' => 'field_phone_validated',
    'label' => 'Phone Number',
    'name' => 'phone_number',
    'type' => 'text',
    'required' => 1,
    'maxlength' => 14,
    'placeholder' => '(555) 555-5555',
    'wrapper' => [
        'width' => '50'
    ]
]
                        </code></pre>
                        
                        <h3>Custom Validation</h3>
                        <pre><code class="language-php">
// Custom validation for specific field
add_filter('acf/validate_value/name=phone_number', 'my_acf_validate_phone', 10, 4);
function my_acf_validate_phone($valid, $value, $field, $input) {
    if (!$valid) {
        return $valid;
    }
    
    // Check phone format
    $pattern = '/^\(\d{3}\) \d{3}-\d{4}$/';
    if (!preg_match($pattern, $value)) {
        $valid = 'Please enter phone in format: (555) 555-5555';
    }
    
    return $valid;
}

// Validate unique value
add_filter('acf/validate_value/name=product_sku', 'validate_unique_sku', 10, 4);
function validate_unique_sku($valid, $value, $field, $input) {
    if (!$valid) {
        return $valid;
    }
    
    global $post;
    
    // Check if SKU exists in other products
    $args = [
        'post_type' => 'product',
        'post__not_in' => [$post->ID],
        'meta_query' => [
            [
                'key' => 'product_sku',
                'value' => $value,
                'compare' => '='
            ]
        ]
    ];
    
    $query = new WP_Query($args);
    
    if ($query->have_posts()) {
        $valid = 'This SKU already exists. Please use a unique SKU.';
    }
    
    return $valid;
}

// Cross-field validation
add_filter('acf/validate_value/name=sale_price', 'validate_sale_price', 10, 4);
function validate_sale_price($valid, $value, $field, $input) {
    if (!$valid) {
        return $valid;
    }
    
    // Get regular price from submitted data
    $regular_price = $_POST['acf']['field_regular_price'] ?? 0;
    
    if ($value >= $regular_price) {
        $valid = 'Sale price must be less than regular price';
    }
    
    return $valid;
}
                        </code></pre>
                    </section>
                    
                    <!-- Clone and Reusable Field Groups -->
                    <section>
                        <h2>Clone and Reusable Field Groups</h2>
                        
                        <h3>Creating Reusable Field Groups</h3>
                        <pre><code class="language-php">
// Create a reusable address field group
acf_add_local_field_group([
    'key' => 'group_address_fields',
    'title' => 'Address Fields',
    'fields' => [
        [
            'key' => 'field_address_street',
            'label' => 'Street Address',
            'name' => 'street_address',
            'type' => 'text'
        ],
        [
            'key' => 'field_address_city',
            'label' => 'City',
            'name' => 'city',
            'type' => 'text',
            'wrapper' => ['width' => '50']
        ],
        [
            'key' => 'field_address_state',
            'label' => 'State',
            'name' => 'state',
            'type' => 'select',
            'choices' => get_us_states(), // Custom function
            'wrapper' => ['width' => '25']
        ],
        [
            'key' => 'field_address_zip',
            'label' => 'ZIP Code',
            'name' => 'zip_code',
            'type' => 'text',
            'wrapper' => ['width' => '25']
        ]
    ],
    'location' => [
        [
            [
                'param' => 'post_type',
                'operator' => '==',
                'value' => 'hidden_group'  // Never shows on its own
            ]
        ]
    ],
    'active' => true
]);

// Clone the address fields in another group
acf_add_local_field_group([
    'key' => 'group_business_info',
    'title' => 'Business Information',
    'fields' => [
        [
            'key' => 'field_business_name',
            'label' => 'Business Name',
            'name' => 'business_name',
            'type' => 'text'
        ],
        [
            'key' => 'field_clone_billing_address',
            'label' => 'Billing Address',
            'name' => 'billing_address',
            'type' => 'clone',
            'clone' => ['group_address_fields'],
            'display' => 'group',
            'layout' => 'block',
            'prefix_label' => 1,
            'prefix_name' => 1
        ],
        [
            'key' => 'field_clone_shipping_address',
            'label' => 'Shipping Address',
            'name' => 'shipping_address',
            'type' => 'clone',
            'clone' => ['group_address_fields'],
            'display' => 'group',
            'layout' => 'block',
            'prefix_label' => 1,
            'prefix_name' => 1
        ]
    ],
    'location' => [
        [
            [
                'param' => 'post_type',
                'operator' => '==',
                'value' => 'business'
            ]
        ]
    ]
]);

// Access cloned fields
$billing = get_field('billing_address');
echo $billing['street_address'];
echo $billing['city'];

$shipping = get_field('shipping_address');
echo $shipping['street_address'];
echo $shipping['city'];
                        </code></pre>
                    </section>
                    
                    <!-- Performance Optimization -->
                    <section>
                        <h2>Performance Optimization</h2>
                        
                        <h3>Efficient Field Queries</h3>
                        <pre><code class="language-php">
// Inefficient - Multiple queries
foreach ($posts as $post) {
    $field1 = get_field('field1', $post->ID);
    $field2 = get_field('field2', $post->ID);
    $field3 = get_field('field3', $post->ID);
}

// Efficient - Single query per post
foreach ($posts as $post) {
    $fields = get_fields($post->ID);
    $field1 = $fields['field1'];
    $field2 = $fields['field2'];
    $field3 = $fields['field3'];
}

// Most efficient - Get raw values
foreach ($posts as $post) {
    $meta = get_post_meta($post->ID);
    $field1 = $meta['field1'][0] ?? '';
    $field2 = $meta['field2'][0] ?? '';
    $field3 = $meta['field3'][0] ?? '';
}

// Preload all ACF data for posts
$post_ids = wp_list_pluck($posts, 'ID');
acf_preload_post_cache($post_ids);

// Now get_field() won't query database
foreach ($posts as $post) {
    $value = get_field('field_name', $post->ID);
}
                        </code></pre>
                        
                        <h3>Field Group Settings for Performance</h3>
                        <pre><code class="language-php">
// Optimize field group settings
acf_add_local_field_group([
    'key' => 'group_optimized',
    'title' => 'Optimized Field Group',
    'fields' => [...],
    'location' => [...],
    'hide_on_screen' => [
        'permalink',
        'the_content',
        'excerpt',
        'discussion',
        'comments',
        'revisions',
        'slug',
        'author',
        'format',
        'featured_image',
        'categories',
        'tags',
        'send-trackbacks'
    ],
    'active' => true,
    'show_in_rest' => 0,  // Disable if not using Gutenberg
    'label_placement' => 'left',  // Compact layout
    'instruction_placement' => 'tooltip'  // Save space
]);
                        </code></pre>
                    </section>
                    
                    <!-- Summary -->
                    <section>
                        <h2>Summary</h2>
                        
                        <div class="summary-box">
                            <h3>Key Takeaways</h3>
                            <ul>
                                <li>Choose appropriate field types for your data</li>
                                <li>Organize complex forms with tabs and accordions</li>
                                <li>Use conditional logic to create dynamic forms</li>
                                <li>Apply location rules to show fields contextually</li>
                                <li>Implement validation for data integrity</li>
                                <li>Clone fields for reusability</li>
                                <li>Optimize queries for better performance</li>
                            </ul>
                        </div>
                        
                        <div class="best-practices">
                            <h3>Field Group Best Practices</h3>
                            <ul>
                                <li>Plan field structure before creating</li>
                                <li>Use descriptive field names and keys</li>
                                <li>Group related fields logically</li>
                                <li>Implement appropriate validation</li>
                                <li>Consider user experience with conditional logic</li>
                                <li>Test field groups thoroughly</li>
                                <li>Document complex field relationships</li>
                            </ul>
                        </div>
                    </section>
                    
                    <!-- Additional Resources -->
                    <section class="resources">
                        <h2>Additional Resources</h2>
                        <ul>
                            <li><a href="https://www.advancedcustomfields.com/resources/field-types/" target="_blank">ACF Field Types Documentation</a></li>
                            <li><a href="https://www.advancedcustomfields.com/resources/conditional-logic/" target="_blank">Conditional Logic Guide</a></li>
                            <li><a href="https://www.advancedcustomfields.com/resources/custom-location-rules/" target="_blank">Custom Location Rules</a></li>
                            <li><a href="https://www.advancedcustomfields.com/resources/acf-clone/" target="_blank">Clone Field Documentation</a></li>
                        </ul>
                    </section>
                </div>
                
                <!-- Lesson Navigation -->
                <div class="lesson-navigation">
                    <a href="/07module/acf_overview.html" class="lesson-nav-button prev">
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z"/>
                        </svg>
                        <span>
                            <small>Previous</small><br>
                            ACF Overview
                        </span>
                    </a>
                    
                    <button class="complete-lesson-btn">
                        Mark as Complete
                    </button>
                    
                    <a href="/07module/conditional_logic_acf.html" class="lesson-nav-button next">
                        <span>
                            <small>Next</small><br>
                            Conditional Logic
                        </span>
                        <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                            <path d="M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z"/>
                        </svg>
                    </a>
                </div>
            </div>
        </main>
        
        <!-- Footer -->
        <footer class="site-footer" role="contentinfo">
            <div class="footer-container">
                <div class="footer-content">
                    <div class="footer-section footer-about">
                        <h3>PHP WordPress Development</h3>
                        <p>Complete Web Development Course - From HTML to WordPress</p>
                    </div>
                    
                    <div class="footer-section">
                        <h4>Quick Links</h4>
                        <ul class="footer-links">
                            <li><a href="/">Home</a></li>
                            <li><a href="/module7.html">Module 7</a></li>
                            <li><a href="/resources.html">Resources</a></li>
                            <li><a href="/about.html">About</a></li>
                        </ul>
                    </div>
                </div>
                
                <div class="footer-bottom">
                    <p>&copy; 2025 PHP WordPress Development Course. All rights reserved.</p>
                </div>
            </div>
        </footer>
    </div>
    
    <!-- JavaScript -->
    <script src="/assets/js/prism.js"></script>
    <script src="/assets/js/main.js"></script>
    <script src="/assets/js/lesson.js"></script>
</body>
</html>